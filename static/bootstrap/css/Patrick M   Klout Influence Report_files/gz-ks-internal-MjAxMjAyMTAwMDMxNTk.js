(function(a,b){function bv(b,c){var d=(a(window).width()-575)/2,e=(a(window).height()-400)/2,f="status=1,width=575,height=400,top="+e+",left="+d,g=open("about:blank","li_share",f);bq(b,function(a,b){var d="url="+encodeURIComponent(c).replace(/%2F/g,"/")+"&title="+encodeURIComponent("Klout")+"&summary="+encodeURIComponent(b)+"&source=Klout";c="http://www.linkedin.com/shareArticle?mini=true&"+d,open(c,"li_share",f)})}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N=window.amphetamine=window.amphetamine||{};N.controller=N.controller||{},N.model=N.model||{},K=N.user.enabledFeatures;var O=a.noop,P=function(a,b){a.error?b(a.error,a.data):b(null,a)},Q=N.store=function(){var a={},b=function(b){return a[b]||null},c=function(b,c){a[b]=c};return{get:b,set:c}}(),R=N.log=function(){if(typeof console=="undefined")return;Function.prototype.apply.call(console.log,console,arguments)},S=N.getConnectedNetworks=function(){var a=N.user;return a&&!!a.ksUID?{blUid:a.blUid,fbUid:a.fbUid,flUid:a.flUid,fpUid:a.fpUid,fsUid:a.fsUid,gpUid:a.gpUid,igUid:a.igUid,ksUid:a.ksUID,laUid:a.laUid,liUid:a.liUid,tuUid:a.tuUid,twUid:a.twUid,wpUid:a.wpUid,ytUid:a.ytUid}:null},T=N.urlParam=function(a){var b=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(location.href);return b?b[1]||0:0},U=N.cookie=new function(){this.get=function(a){var b=a+"=",c=document.cookie.split(";");for(var d=0;d<c.length;d++){var e=c[d];while(e.charAt(0)==" ")e=e.substring(1,e.length);if(e.indexOf(b)==0)return e.substring(b.length,e.length)}return null},this.set=function(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+c*24*60*60*1e3);var e="; expires="+d.toGMTString()}else var e="";document.cookie=a+"="+b+e+"; path=/; domain=klout.com"}},V=N.mp=new function(){var a={};this.jsonp_callback=O,this.get=function(b){if(typeof a[b]=="undefined"){var c=o&&o[b]||0;c===0&&N.log("Invalid mixpanel type "+b),a[b]=p?new X(b):new MixpanelLib(c,"amphetamine.mp")}return a[b].track=function(c){return function(){var d=Array.prototype.slice.call(arguments);d[1]&&"token"in d[1]&&delete d[1].token,c.apply(a[b],d)}}(a[b].track),a[b]}},W=N.scrollMonitor=new function(){var b,c,d,e,f,g=f=a(window),h=100,i=function(){var d=a(b),e=d.length>1&&d.eq(d.length-2).offset();e&&c&&c(e.top<f.scrollTop()+f.height())},j=function(a,f,j,l){k(),l=l||g,b=a,c=j,d=f,e=setInterval(i,h)},k=function(){e&&clearInterval(e),b=c=null},l=function(a){d!=a&&k()};this.start=j,this.stop=k,this.invalidate=l},X=function(a){this.token=a,this.track=function(a,b,c){N.log("--- Mixpanel tracked '"+a+"' for "+this.token,b),typeof c=="function"&&c()}};typeof FB!="undefined"&&FB.Event.subscribe("edge.create",function(a){a=="facebook.com/kloutfb"&&(bb("likesKlout",!0),N.user.onboardingInfo.likesKlout=!0,bc({likesKlout:!0}))});var Y=N.months={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},Z=N.kClasses={curator:{id:6,name:"Curator",description:"You highlight the most interesting people and find the best content on the web and share it to a wide audience. You are a critical information source to your network.  You have an amazing ability to filter massive amounts of content to surface the nuggets that your audience truly care about.  Your hard work is very much appreciated."},broadcaster:{id:7,name:"Broadcaster",description:"You broadcast great content that spreads like wildfire. You are an essential information source in your industry. You have a large and diverse audience that values your content."},syndicator:{id:5,name:"Syndicator",description:"You keep tabs on what's trending and who's important to watch. You share the best of this with your followers and save them from having to find what's hot on their own. You probably focus on a specific topic or cater to a defined audience."},feeder:{id:8,name:"Feeder",description:"Your audience relies on you for a steady flow of information about your industry or topic. Your audience is hooked on your updates and secretly can't live without them."},taste_maker:{id:15,name:"Taste Maker",description:"You know what you like and your audience likes it too. You know what's trending, but you do more than just follow the crowd. You have your own opinion that earns respect from your network."},celebrity:{id:16,name:"Celebrity",description:"You can't get any more influential than this. People hang on your every word, and share your content like no other. You're probably famous in real life and your fans simply can't get enough."},thought_leader:{id:13,name:"Thought Leader",description:"You are a thought leader in your industry. Your followers rely on you, not only to share the relevant news, but to give your opinion on the issues. People look to you to help them understand the day's developments. You understand what's important and your audience values that."},pundit:{id:14,name:"Pundit",description:"You don't just share news, you create the news. As a pundit, your opinions are wide-spread and highly trusted. You're regularly recognized as a leader in your industry. When you speak, people listen."},dabbler:{id:2,name:"Dabbler",description:"You might just be starting out with the social web or maybe you're not that into it. If you want to grow your influence, try engaging with your audience and sharing more content."},conversationalist:{id:3,name:"Conversationalist",description:"You love to connect and always have the inside scoop. Good conversation is not just a skill, itâ€™s an art. You might not know it, but when you are witty, your followers hang on every word."},observer:{id:1,name:"Observer",description:"You don't share very much, but you follow the social web more than you let on. You may just enjoy observing more than sharing or you're checking this stuff out before jumping in full-force."},explorer:{id:4,name:"Explorer",description:"You actively engage in the social web, constantly trying out new ways to interact and network. You're exploring the ecosystem and making it work for you. Your level of activity and engagement shows that you \"get it\", we predict you'll be moving up."},socializer:{id:10,name:"Socializer",description:"You are the hub of social scenes and people count on you to find out what's happening. You are quick to connect people and readily share your social savvy. Your followers appreciate your network and generosity."},networker:{id:12,name:"Networker",description:"You know how to connect to the right people and share what's important to your audience. You generously share your network to help your followers. You have a high level of engagement and an influential audience."},activist:{id:9,name:"Activist",description:"You've got an idea or cause you want to share with the world and you've found the perfect medium for it. Your audience counts on you to champion your cause."},specialist:{id:11,name:"Specialist",description:"You may not be a celebrity, but within your area of expertise your opinion is second to none. Your content is likely focused around a specific topic or industry with a focused, highly-engaged audience."},_ordered:["curator","broadcaster","taste_maker","celebrity","syndicator","feeder","thought_leader","pundit","dabbler","conversationalist","socializer","networker","observer","explorer","activist","specialist"]},$=N.deltaMessages={0:{0:{0:"Ouch, your Klout score has been falling lately. Share more content and engage with your network and your Klout score will rise!",1:"'s Klout score has been falling lately."},1:{0:"Your Klout Score has fallen in the past month, but you've been able to stabilize it recently. Keep engaging with others, and continue creating engaging content to see your Klout Score rise again!",1:"'s Klout Score has fallen in the past month, but has been stabilizing recently."},2:{0:"Don't be shy. While your Klout Score has fallen over the past 30 days, it's back on the rise. Keep doing what you've been doing recently, and continue engaging with your network!",1:"'s Klout Score has fallen over the past 30 days, but is back on the rise."}},1:{0:{0:"Your Klout Score is stable over the past month, but has been falling recently. Try engaging more with your network and sharing different types of content to see if you can raise it.",1:"'s Klout Score is stable over the past month, but has been falling recently."},1:{0:"Your Klout Score is stable. Try engaging more with your network and sharing different types of content to see if you can raise it.",1:"'s Klout Score is stable."},2:{0:"Your Klout Score has been rising recently. Keep engaging with your network and sharing different types of content to continue raising your score!",1:"'s Klout Score has been rising recently."}},2:{0:{0:"You've increased your Klout Score over the past month, but it's fallen recently. Engage with your networks more to get your Klout Score back up!",1:"'s Klout Score has gone up over the past month, but has fallen recently."},1:{0:"Your Klout Score is up over the past 30 days! Keep doing what you're doing to increase it further.",1:"'s Klout Score is up over the past 30 days."},2:{0:"Woohoo! Your Klout Score is up and continues to grow! Keep doing what you're doing, it's great!",1:"'s Klout Score is up and continues to grow!"}}},ba=N.perksAlertMessage={under18:{enabled:!0,message:"Sorry, you must be 18 or older to participate in Klout Perks.",cta:{enabled:!0,text:"Profile",href:"/#/"+N.user.nick}},unknown:{enabled:!0,message:"Please provide your age in order to participate in Klout Perks.",cta:{enabled:!0,text:"Complete Profile",href:"/#/edit-settings/profile?bday=true"}}},bb=function(a,b){(new Image).src="/api/onboarding/update?n="+a+"&v="+b},bc=function(a){e&&e.trigger("onboarding",a)},bd=function(a){i&&i.trigger("finished"),i=null},be=N.abortXhr=function(a){a.abort()},bf=function(b,d,e){var f=N.user;a.ajax({url:"/api/topics/plusk/"+b,type:"POST",success:function(g){g.throttled?(N.user.remainingPlusKs=0,N.alert("<h3>No More +Ks</h3>Sorry, you don't have enough +Ks."),d&&d.removeClass("inactive")):(c?c&&c.trigger("plusKed",g):A&&A&&A.trigger("plusKed",g,b),g.recentPlusKs&&bg(g.recentPlusKs),N.modal.show({id:"plus-k-modal",content:{isPending:g.isPending,isTopicAdd:e,giver:{ksUid:f.ksUid||f.ksUID,name:f.name,nick:f.nick},limitPlusK:N.config.limitPlusK,recipient:{ksUid:g.ksUid,name:g.name||"this user",nick:g.nick},remainingPlusKs:g.remainingPlusKs||g.walletAmount||null,tid:g.tid,topic:g.topic,totalVouches:g.vouches||0},callback:function(){bk(g.achievements),g.toasts&&N.toaster.add(g.toasts)}}),N.user.remainingPlusKs=g.remainingPlusKs,d&&N.mp.get("plusK").track("give",{location:d.hasClass(".plus-k-icon")?"header":A?"topic-influencers":"page"})),!isNaN(+g.walletAmount)&&a(".plusk-wallet .assets").text(g.walletAmount)},error:function(){e&&N.modal.hide(),N.alert("<h3>Can't Give +K</h3>Sorry, you can't give +K to this user right now.")}})},bg=N.recheckPlusKs=function(){var b;return function(c){c?(b&&clearTimeout(b),c.tids&&(N.user.recentPlusKs=c),setTimeout(bg,c.recheck||36e5)):!N.config.isPublic&&a.ajax({url:"/api/plusks/recent",success:bg})}}();bg(N.user.recentPlusKs),N.user.canPlusK=N.user.recentPlusKs?function(b){var c=this.recentPlusKs.tids;return c?a.inArray(b,c)<0:!0}:function(){return!0};var bh=N.checkLottery=function(){t&&clearTimeout(t),t=null,bi()},bi=function(){var b;return function(){var c,d;!t&&!b&&(b=a.ajax({url:"/lottery",success:function(a){a.score&&(delete N.user.scoreChange,N.user.dailyScore=a.score,N.user.scoreChange=a.increase||a.decrease,d=a.profile,d&&(d.dob&&d.dob.length&&d.dob!="0000-00-00"&&(c=d.dob.split("-"),c=new Date(c[0],c[1],c[2]),a.isOver18=bm(c)),N.modal.show({id:"daily-prompt",content:a}),N.mp.get("impression").track("daily_welcome"))),a.showNewTos&&N.alert('We\'ve made some changes to our Terms of Service. Read about them at <a target="_blank" href="http://klout.com/corp/terms">http://klout.com/corp/terms</a>'),a.npsHistory&&a.npsHistory.canVote&&bl(a.npsHistory,"random"),a.influencee&&bj(a.influencee),bk(a.achievements),a.invalidToken&&N.confirm(a.invalidToken.message,function(){V.get("click").track("reauth_"+a.invalidToken.network),location.href="/oauth/reauth/"+a.invalidToken.network}),a.toasts&&N.toaster.add(a.toasts),t=setTimeout(function(){t=null},a.recheck)},complete:function(a){b=null}}))}}(),bj=function(a,b){N.modal.show({id:"invite-influencee",content:{influencee:a},callback:b}),V.get("impression").track("invite_influencer")},bk=function(a){if(a)for(var b=0;a[b];b++)N.modal.show({id:"achievement-modal",content:a[b]})},bl=function(b,c){b?(Q.set("npsFunnel",c),V.get("impression").track("NPS_modal",{source:c}),b.canVote?N.modal.show({id:"nps",content:b}):N.alert("It looks like you've already voted in the last 30 days. Thanks for your feedback. We are always working to improve your experience on Klout!")):a.ajax({url:"/api/nps/history",success:function(a){bl(a,c)}})};(function(){a("body").delegate("#klout-nps","submit",function(b){b.preventDefault();var c=a(this),d=c.find(".error"),e=c.serializeArray(),f=Q.get("npsFunnel");e.length?(d.hide(),e=e[0],a.ajax({url:"/api/nps/record",type:"POST",data:{funnel:Q.get("npsFunnel"),nps:e.value},complete:function(){N.modal.hide()},success:function(){V.get("click").track("NPS_complete",{scale:e.value,source:f,status:"confirmed"}),N.modal.show({id:"nps-thanks",content:{score:N.user.score}})},error:function(){V.get("click").track("NPS_complete",{scale:e.value,source:f,status:"other"})}})):d.html("Please select a value before submitting.").show()})})();var bm=function(a){var b=new Date,c=!1;return b.getFullYear()-a.getFullYear()>=18&&(c=!0),c};a(N).bind("achievements",function(a,b){bk(b)}),N.config.networks={tw:{shortName:"tw",network:"Twitter"},fb:{shortName:"fb",network:"Facebook"},li:{shortName:"li",network:"LinkedIn"},fs:{shortName:"fs",network:"Foursquare"},yt:{shortName:"yt",network:"YouTube"},ig:{shortName:"ig",network:"Instagram"},fl:{shortName:"fl",network:"Flickr"},bl:{shortName:"bl",network:"Blogger"},la:{shortName:"la",network:"Last.fm"},tu:{shortName:"tu",network:"Tumblr"},fp:{shortName:"fp",network:"Facebook Page"},wp:{shortName:"wp",network:"Wordpress.com"},gp:{shortName:"gp",network:"Google+"}};var bn=function(){if(N.user.onboardingInfo&&+N.user.onboardingInfo.nux)return{"/nux":"nux","/nux/:step":"nux","/*page":"forceNux"};var b={"/admin":"admin","/admin/:tab":"admin","/admin/:tab/:subject":"admin"},c={"/home":"home","/understand":"understand","/understand/:page":"understand","/list/:listId":"list","/static/disabled":"staticdisabled","/static/:page":"staticpage","/perks":"perks","/perks/:filter":"perks","/perk/:client/:campaign":"perk","/perk/:client/:campaign/:passalong/:passalongSig":"perkPassalong","/nux":"nux","/nux/:step":"nux","/friends":"friends","/friends/:network":"friends","/friends/:network/:page":"friends","/profile/list/:listId":"profile","/profile":"profile","/profile/:tab":"profile","/profile/:tab/:chart":"profile","/search":"search","/search/:query":"search","/search/:query/:filter":"search","/dashboard":"dashboard","/dashboard/network":"dashboardWelcome","/dashboard/welcome":"dashboardWelcome","/dashboard/notifications":"notifications","/dashboard/updates":"privateStream","/edit-settings/:type":"editSettings","/user/:nick/list/:listId/wall":"wall","/user/:nick/list/:listId":"userList","/user/:nick":"nick","/user/:nick/:tab":"nickTab","/user/:nick/:tab/:chart":"nickTabTab","/topic":"topics","/topics":"topics","/topics/:filter":"topics","/topic/:topic":"topic","/topic/:topic/:page":"topic","/:nick/list/:listId/wall":"wall","/:nick/list/:listId":"userList","/:nick":"nick","/:nick/:tab":"nickTab","/:nick/:tab/:chart":"nickTabTab"};return K&&a.inArray("admin",K)>=0&&(c=a.extend(b,c)),c};N.controller.AmphetamineController=Backbone.Router.extend({prevRoute:"",routes:bn(),initialize:function(b){r=this,s=N.user.onboardingInfo&&+N.user.onboardingInfo.nux,systemMessage=N.config.systemMessage;if(systemMessage)if(systemMessage.networkConnect&&!N.config.isNux){var d,e=N.config.networks;d=a.extend({reauth:systemMessage.reauth},e[systemMessage.network]),systemMessage.reauth?N.alert(N.view.renderUS("modal/network-connect",d)):N.modal.show({id:"network-connect",content:d}),delete N.config.systemMessage}else systemMessage.error&&(N.alert(systemMessage.message),delete N.config.systemMessage);this.bind("all",function(b){this.prevRoute=location.hash;var d=a("#menu"),e=Array.prototype.slice.call(arguments);if(!b.indexOf("route:")){bB(),b!="route:profile"&&_gaq.push(["_trackPageview",location.href]),a("#profile-badge-container").hide().removeClass(),W.invalidate(location.hash),a(N).trigger("routeChange",Array.prototype.slice.call(arguments));if(!b.indexOf("route:nick")&&this.tabChange==1){delete this.tabChange;return}L&&L.trigger("finished"),b!="route:perks"&&!N.config.isNux&&bi(),c&&b!="route:nick"&&b!="route:nickTab"&&b!="route:nickTabTab"&&b!="route:profile"&&(c=null),this.currentRoute=b.replace("route:",""),this.currentRoute!="topic"&&scrollTo(0,0)}}),o=b.mixpanel,p=b.dev,C=new N.model.Typeahead({}),D=new N.view.TypeaheadView({model:C}),N.user&&N.user.enabledFeatures&&a.inArray("rankit",N.user.enabledFeatures)>-1&&N.model.Compare.startCompareUserBanner(),l=new N.model.Notifs({authUser:N.user,controller:r,count:Math.min(N.user.notifCount,99),interval:N.config.notifUpdateInterval||6e5}),m=new N.view.NotifsView({model:l}),N.config.isNux||l.updateNotifs(),delete N.user.notifCount,bB()},home:function(){var a=new Backbone.Model({authUser:N.user});this.renderView(new N.view.HomeView({model:a}),"Home")},list:function(a){location.replace("/list/"+a)},staticdisabled:function(){this.staticpage("notfound")},staticpage:function(a){var b=new Backbone.Model({authUser:N.user});this.renderView(new N.view.StaticView({model:b,page:a}),"StaticPage")},perks:function(b){a.ajax({url:"/api/profile",success:function(a){var c;if(a.dob&&a.dob.length&&a.dob!="0000-00-00"){var d=a.dob.split("-");d=new Date(d[0],d[1],d[2]),c=bm(d)}u=new N.model.Perks_({notifsModel:l,isOver18:c}),v=new N.view.Perks_({filter:b,collection:u,notifsModel:l,isOver18:c}),l.trigger("perks");var e="/api/perks";b&&(e+="/"+b),u.url=e,u.fetch(),b==null&&(b="featured"),N.mp.get("impression").track("perks_index",{tab:b})},error:function(a){}})},perk:function(b,c){a.ajax({url:"/api/profile",success:function(d){var e;if(d.dob&&d.dob.length&&d.dob!="0000-00-00"){var f=d.dob.split("-");f=new Date(f[0],f[1],f[2]),e=bm(f)}w=new N.model.Perk({authUser:N.user,client:b!="past"&&b,campaign:c,past:b=="past"&&!c,isOver18:e}),x=new N.view.PerkView({model:w,el:a("#container"),isOver18:e})},error:function(a){}})},perkPassalong:function(a,b,c,d){return location.href="/perk/"+a+"/"+b+"/"+c+"/"+d},forceNux:function(){return location.replace(s==2?"/nux/2":"/nux")},nux:function(b){var c,d=N.user,e=d.onboardingInfo,f=N.config.mergeInfo,g=N.user,h={tw:!1,fb:!1},i={authUser:d,nick:d.nick,mergeInfo:f,profileInfo:g};if(b&&b!=s)return location.replace("/nux");if(!b&&!i.mergeInfo&&s!=1)return location.replace("/nux");if(b==0)return location.hash="/dashboard";b==2?i.step=2:i.mergeInfo&&(i.step={merge:!0}),h.tw=!!d.twUid,h.fb=!!d.fbUid,h.tw?h.fb||(i.missingNetwork={name:"Facebook",shortName:"fb",serviceId:2,url:"/fb_init"}):i.missingNetwork={name:"Twitter",shortName:"tw",serviceId:1,url:"/oauth"},c=new N.model.Nux(i),new N.view.NuxView({model:c,el:a("#container")}),location.hash.indexOf("/nux")>-1&&(N.mp.get("registration").track("02_nux_connect",{event:"impression"}),a.isEmptyObject(c.get("missingNetwork"))&&N.mp.get("registration").track("03_nux_fbinvite",{event:"impression"})),N.config.mergeInfo&&(1==N.config.mergeInfo.mergeNetwork?N.mp.get("registration").track("025_nux_merge",{event:"impression",network:"tw"}):2==N.config.mergeInfo.mergeNetwork&&N.mp.get("registration").track("025_nux_merge",{event:"impression",network:"fb"}))},friends:function(a){if(!k||!a)k=new N.model.FriendList({authUser:N.user,isLoggedIn:!0,isOwnProfile:!0,network:a});new N.view.FriendListView({model:k,el:"#container"}),a&&k.set({network:a}),N.scrollMonitor.start("#friendlist-friends .friend",location.hash,function(a){a&&k.trigger("page")})},understand:function(a){G||(G=new N.model.Understand({authUser:N.user}),H=new N.view.UnderstandView({model:G,el:"#container"})),G.trigger("page",a)},admin:function(a,b){b=b||null,a=a||"user",I=new N.model.Admin({tab:a,subject:b,authUser:N.user}),J=new N.view.AdminView({model:I,el:"#container"}),I.trigger("page",a,b)},search:function(a,b){var c=N.user;if(typeof a=="undefined")return location.replace("/#/profile");E=new N.model.Search({authUser:c,isLoggedIn:c&&!!c.ksUID,query:a,filter:b}),F=new N.view.SearchView({model:E,el:"#container"})},topics:function(a){var b=N.user;A=new N.model.Topic({authUser:b,isLoggedIn:b&&!!b.ksUID}),B=new N.view.TopicView({model:A,el:"#container"}),A.trigger("index",a)},topic:function(a,b){var c=a;a=a.replace(/ /g,"-"),c!==a&&location.replace(location.hash.replace(c,a));var d=N.user;if(!A||A.get("slug")!==a)A=new N.model.Topic({authUser:d,isLoggedIn:d&&!!d.ksUID,slug:a}),B=new N.view.TopicView({model:A,el:"#container"});b=="activity"&&A.set({publicStream:this.publicStream("topic")}),A.trigger("page",a,b,this.prevRoute)},dashboard:function(){var b=function(b,c){return e||(e=new N.model.Dashboard({authUser:b,pageName:"dashboard",isOwnProfile:!0,hash:c,notifsModel:l,streamsEnabled:b.enabledFeatures&&a.inArray("privatestream",b.enabledFeatures)>-1&&N.config.streamsEnabled,rankitEnabled:b.enabledFeatures&&a.inArray("rankit",b.enabledFeatures)>-1})),e};return function(d){var g=N.user,h=location.hash.replace("/notifications","").replace("/updates","").replace("/welcome","").replace("/network",""),i=N.config.onboardingInfo,j=g.nick;if(g.ksUID){c=null,e=b(g,h);if(g.enabledFeatures&&a.inArray("privatestream",g.enabledFeatures)>-1&&N.config.streamsEnabled&&typeof d=="undefined"&&!e.get("isNewUser"))return this.privateStream();d=="welcome"&&(d=void d),e.trigger("dashRoute",!d),f?f.render(d):(f=(new N.view.Dashboard({el:a("#container"),model:e,hash:h,notifsModel:l})).render(d),(!i||!i.dashboardVisits)&&N.mp.get("impression").track("home_1sttime")),!d&&(!g.enabledFeatures||a.inArray("privatestream",g.enabledFeatures)<0||!N.config.streamsEnabled)&&(l.trigger("dashboard"),N.mp.get("impression").track("home_notifications_preview")),bc({visitedDashboard:1}),bb("dashboardVisits",N.user.onboardingInfo.dashboardVisits=(+N.user.onboardingInfo.dashboardVisits||0)+1),N.user.onboardingInfo.dashboardVisits==1&&(N.modal.show({id:"welcome-modal",content:{score:g.score,name:g.firstName||g.nick}}),N.mp.get("impression").track("welcome_modal"))}bB()}}(),dashboardWelcome:function(){this.dashboard("welcome")},notifications:function(){l.trigger("clearAll"),l.fetchAll(),this.dashboard(m),N.mp.get("impression").track("home_notifications_full")},publicStream:function(b){var c;return a.inArray("publicstream",K)>-1&&(c=new N.model.PublicStream({type:b}),new N.view.PublicStreamView({model:c,el:b=="topic"?a("#topic-activity-stream"):a(".tab.activity")})),c},privateStream:function(){var b=N.user.enabledFeatures&&a.inArray("privatestream",N.user.enabledFeatures)>-1&&N.config.streamsEnabled,c=new N.model.PrivateStream({twitterless:!N.user.twUid,enabled:b});b&&(l.trigger("dashboard"),N.mp.get("impression").track("home_notifications_preview")),this.dashboard(new N.view.PrivateStreamView({model:c}))},editSettings:function(b){var c={},d=b.indexOf("?");if(d>0){var e=b.substring(d+1).split("&");b=b.substring(0,d);for(var f=0;f<e.length;f++)e[f]=e[f].split("="),c[e[f][0]]=e[f][1]}y||(y=new N.model.Settings({authUser:N.user})),z||(z=new N.view.SettingsView({model:y,el:a("#container")}));var g=N.config.blockingEnabled?"|profile|networks|email||optout|privacy|":"|profile|networks|email||optout|";g.indexOf("|"+b+"|")!==-1?y.trigger("page",b,c):b=="fbpages"&&(y.trigger("page","networks"),a("#connect-fb-page").trigger("click"))},profile:function(){var b=N.user.nick;return a.inArray(b,N.config.colliders)<0&&(b="user/"+b),location.replace("/"+location.hash.replace("profile",N.user.nick))},nick:function(b,e,f,g){var h,i=N.user,j=i&&i.nick==b,k={nick:b,authUser:i,isLoggedIn:i&&!!i.ksUID,isOwnProfile:j,canEdit:j,blockingEnabled:N.config.blockingEnabled&&!j,canAddInfluencers:j&&i.canAddInfluencers,controller:r,publicStreamsEnabled:a.inArray("publicstream",N.user.enabledFeatures)>-1};if(!b||b.length>15||/\W/.test(b))if(b.charAt()!="~"||isNaN(+b.replace("~","")))return location.replace("/#/static/notfound");if(e=="dashboard")return f=="notifications"?location.replace("/#/dashboard/notifications"):location.replace("/#/dashboard");q&&(k.bioData=q),c=(new N.model.Nick(k)).bind("change:listMemberships",function(){var a=this;a&&a.get("listMemberships")&&W.start(".list-memberships .list",location.hash,function(b){b&&a.trigger("fetchListMemberships")})}),h=d=new N.view.Nick({el:a("#container"),model:c,tab:e?"#"+e:null,chartTab:e=="comparison"&&!f?"klout-score":f}),e?(e=="activity"&&c.set({publicStream:this.publicStream("profile")}),c.fetchContent(e),"|comparison|score-analysis|influencers|lists|kloutstyle|achievements|topics|perks|activity|".indexOf("|"+e+"|")>-1&&N.mp.get("impression").track("profile_"+(j?"1st":"3rd")+"_"+e,{username:b})):(!j&&c.fetchContent("comparison"),N.mp.get("impression").track("profile_"+(j?"1st_score-analysis":"3rd_comparison"),{username:b})),N.addInfluencedBy&&(c.trigger("addInfluencedBy",N.addInfluencedBy),delete N.addInfluencedBy),N.dropdownClick&&(d.scrollToTab(),delete N.dropdownClick),j&&(bb("profileVisits",N.user.onboardingInfo.profileVisits=+N.user.onboardingInfo.profileVisits||1),bc({visitedProfile:1})),q=null},nickTab:function(a,b){var e,f,g=N.config.systemMessage,h=N.user,i=h&&h.nick==a;if(b=="dashboard")return this.nick(a,b);c&&c.get("nick")==a?(b=="activity"&&c.set({publicStream:this.publicStream("profile")}),d.setTab("#"+b),c.fetchContent(b),b=="comparison"&&d.setSubTab("klout-score",b),b=="topics"&&d.setSubTab(e,b),"|comparison|score-analysis|influencers|lists|kloutstyle|achievements|topics|perks|activity|".indexOf("|"+b+"|")>-1&&N.mp.get("impression").track("profile_"+(i?"1st":"3rd")+"_"+b,{username:a}),N.dropdownClick&&(d.scrollToTab(),delete N.dropdownClick),this.tabChange=!0):this.nick(a,b),g&&g.confirmPlusK&&(g=g.confirmPlusK,N.modal.show({id:"confirm-plusk",content:{recipient:g.recipient,topic:g.topic},callback:function(){bf(g.topic.tid),N.mp.get("plusK").track("give",{location:"link"})}}),delete N.config.systemMessage),g&&g.askPlusK&&(g=g.askPlusK,N.modal.show({id:"confirm-plusk",content:{originUser:g.giver,recipient:g.recipient,topic:g.topic},callback:function(){bf(g.topic.tid),N.mp.get("plusK").track("give",{location:"link"})}}),delete N.config.systemMessage)},nickTabTab:function(a,b,e){if(b=="dashboard")return this.nick(a,b,e);c&&c.get("nick")==a?(d.setTab("#"+b),c.fetchContent(b),d.setSubTab(e,b),this.tabChange=!0):this.nick(a,b,e)},wall:function(a,b){h?h.trigger("list",b,a):h=(new N.model.Wall({listId:b,nick:a,authUser:N.user,isOwnProfile:N.user.nick==a,isLoggedIn:!!N.user.ksUID})).bind("redirect",function(a){location.replace(a)}),new N.view.WallView({model:h}),N.mp.get("impression").track("wall")},userList:function(b,c){g?g.trigger("list",c,b):g=(new N.model.List({listId:c,nick:b,authUser:N.user,isOwnProfile:N.user.nick==b,isLoggedIn:!!N.user.ksUID})).bind("redirect",function(a){location.replace(a)}),new N.view.ListView({model:g,el:a("#container"),newListId:r.newList}),delete r.newList,N.scrollMonitor.start("#friendlist-friends .friend",location.hash,function(a){a&&g.trigger("fetchListMembers")}),N.mp.get("impression").track("list")},importList:function(){N.modal.hide(),M=(new N.model.ImportList).bind("listCreated",function(a,b,c){r.newList=a,g=null,location.hash="/"+N.user.nick+"/list/"+(b||a),M=null,N.mp.get("lists").track("create",{username:N.user.nick,size:c,type:"import"})});var a=new N.view.ImportListView({model:M,el:"import-list-modal"})},addToList:function(a){L=(new N.model.AddToList({addendum:a})).bind("change:lists",function(){L.get("lists")||(L.trigger("finished"),r.editList(void 1,a))}).bind("finished",function(){L=null});var b=new N.view.AddToListView({model:L})},editList:function(a,b){var c=N.user.nick;i=(new N.model.EditList({listId:a,addendum:b})).bind("listEdited",function(a){bd(),e&&e.trigger("listChange"),k&&k.trigger("listChange"),r.newList=a,r.currentRoute!="userList"&&r.currentRoute!="list"||g.get("listId")!=a?location.href="/#/"+c+"/list/"+a:r.userList(c,a),N.mp.get("lists").track("edit")}).bind("listCreated",function(a,b){bd(),e&&e.trigger("listChange"),k&&k.trigger("listChange"),r.newList=a,location.href="/#/"+c+"/list/"+a,N.mp.get("lists").track("create",{username:N.user.nick,size:b,type:"self"})}).bind("listDeleted",function(){bd(),e&&e.trigger("listChange"),k&&k.trigger("listChange"),location.hash="/"+c+"/dashboard",N.mp.get("lists").track("remove")}).bind("error",function(a){a=="Invalid listId"?(bd(),r.editList()):a=="Failed to create list"&&N.mp.get("lists").track("create_fail")}),new N.view.EditListView({model:i}),N.mp.get("impression").track(a?"list_edit":"list_add")},addPerkUGC:function(a,b){j=new N.model.AddPerkUGC({name:N.user.firstName||N.user.nick,client:a,campaign:b}),new N.view.AddPerkUGCView({model:j}),N.mp.get("impression").track("addPerkUGC_modal_shown")},renderView:function(b,c){c&&(document.title=c),a("#container").html(b.el),b.render()}});var bo=N.rangeMessages={kloutScore:{messages:[{min:0,max:10,viralMessage:"has a low level of influence",message:"You have a low level of influence"},{min:11,max:20,viralMessage:"needs to engage more with others or be more active to gain influence",message:"You need to engage more with others or be more active to gain influence"},{min:21,max:30,viralMessage:"is influential to a tightly formed network that is growing larger",message:"You are influential to a tightly formed network that is growing larger"},{min:31,max:50,viralMessage:"is effectively using social media to influence their network across a variety of topics",message:"You are effectively using social media to influence your network across a variety of topics"},{min:51,max:65,viralMessage:"creates content that is spread throughout their network and drives discussions",message:"You create content that is spread throughout your network and drives discussions"},{min:66,max:75,viralMessage:"generates actions and discussions with nearly every message",message:"You generate actions and discussions with nearly every message"},{min:76,max:90,viralMessage:"has built a very large and engaged network through high quality, trustworthy content",message:"You have built a very large and engaged network through high quality, trustworthy content"},{min:91,max:100,viralMessage:"is one of the most influential people in social media and can start a trend with a single message",message:"You are one of the most influential people in social media and can start a trend with a single message"}]},network:{messages:[{min:0,max:10,viralMessage:"does not engage with very many influencers",message:"You do not engage with very many influencers"},{min:11,max:25,viralMessage:"engages with influencers but focuses on friends",message:"You engage with influencers but focus on friends"},{min:26,max:40,viralMessage:"engages with a good mix of influencers and friends",message:"You engage with a good mix of influencers and friends"},{min:41,max:60,viralMessage:"is engaged by influencers",message:"You are engaged by influencers"},{min:61,max:80,viralMessage:"generates a high level of engagement from other influencers",message:"You generate a high level of engagement from other influencers"},{min:81,max:100,viralMessage:"is constantly engaged by very influential people",message:"You are constantly engaged by very influential people"}]},amplification:{messages:[{min:0,max:3,viralMessage:"'s messages are rarely amplified",message:"Your messages are rarely amplified"},{min:4,max:12,viralMessage:"has the ability to generate actions and discussions",message:"You have the ability to generate actions and discussions"},{min:13,max:25,viralMessage:"is more likely to have their message amplified than the average person",message:"You are more likely to have your message amplified than the average person"},{min:26,max:40,viralMessage:"generates a steady flow of actions and discussions",message:"You generate a steady flow of actions and discussions"},{min:41,max:65,viralMessage:"has a high percentage of content amplified",message:"You have a high percentage of content amplified"},{min:66,max:85,viralMessage:"is very likely to have any message amplified and acted upon",message:"You are very likely to have any message amplified and acted upon"},{min:86,max:100,viralMessage:"'s content is almost guaranteed to be highly amplified"
,message:"Your content is almost guaranteed to be highly amplified"}]},trueReach:{messages:[{min:0,max:10,viralMessage:"has a strong true reach",message:"You have a strong true reach"},{min:11,max:100,viralMessage:"has a small but tightly formed network that is highly engaged",message:"You have a small but tightly formed network that is highly engaged"},{min:101,max:500,viralMessage:"has built a good size network that is highly engaged",message:"You have built a good size network that is highly engaged"},{min:501,max:1e3,viralMessage:"has a larger network than most people",message:"You have a larger network than most people"},{min:1001,max:5e3,viralMessage:"has worked very hard to successfully build a large, highly engaged network",message:"You have worked very hard to successfully build a large, highly engaged network"},{min:5001,max:1e4,viralMessage:"has built a very large highly engaged network through great content and interactions",message:"You have built a very large highly engaged network through great content and interactions"},{min:10001,max:3e4,viralMessage:"has a huge network that is very highly engaged",message:"You have a huge network that is very highly engaged"},{min:30001,max:85e3,viralMessage:"creates quality content that engages a very large audience on a level very few can achieve",message:"You create quality content that engages a very large audience on a level very few can achieve"},{min:85001,max:Infinity,viralMessage:"has the largest, most engaged audience possible",message:"You have the largest, most engaged audience possible"}]}},bp=N.achievementVirals=[];bp[1]="I unlocked 'Take me to your leader' on Klout!",bp[2]="I unlocked 'Yep. I was there.' on Klout!",bp[3]="I unlocked '@Klout IRL' on Klout!",bp[4]="I unlocked 'Beta Tester' on Klout!",bp[5]="I unlocked 'Bieber Fever' on Klout!",bp[6]="I unlocked 'Klout Employee' on Klout!",bp[7]="I just earned the @Klout OG achievement for hanging with Klout back in the day. Did you earn one?",bp[91]="I just locked down @BrandiDougherty on @Klout!",bp[92]="I unlocked 'Summer of Klout' on @Klout!",bp[93]="I unlocked 'Deal With It' on @Klout!";var bq=function(b,c){var d=/@([A-Za-z0-9_]+)/g,e,f=0,g=new Array;while(e=d.exec(b))g.push(e[1]);var h=function(){f==g.length&&c(null,b)};g.length===0&&h(),_.each(g,function(c){xhr=a.ajax({url:"/api/profilebadge/"+c,method:"GET",cache:!0,complete:function(){f++,h()},success:function(a){b=b.replace("@"+c,a.name),xhr=null}})})},br=function(a,b,c,d){var e=50,f=0,g=function(c){FB.ui({method:"apprequests",message:a,to:c&&c.slice(0,Math.min(e,c.length)).join(","),data:d||null},function(a){a&&a.to?(f+=a.to.length,c&&c.length>e?g(c.slice(e)):b(f)):f&&b(f)})};g(c)},bs=function(a,b,c,d,e,f){var g,h,i,j,k=function(a,f){b?(h=b,g=f):(h=f,g="Klout is the standard for influence."),FB.ui({method:"feed",name:h,link:c,picture:d,description:g},e)};e&&(e=function(a){return function(b){b&&b.post_id&&a()}}(e)),f?(i={klout:"Klout"},j=function(a,b){return i[b.toLowerCase()]},a=a.replace(/@([A-Za-z0-9_]+)/g,j),k(null,a)):bq(a,k)},bt=function(){twttr?twttr.events.bind("tweet",function(b){a(b.target).trigger("tweet")}):setTimeout(bt,1e3)};bt();var bu=function(a,b,c,d){var e,f="url="+encodeURIComponent(b)+"&text="+encodeURIComponent(a)+"&related=klout";b="http://twitter.com/intent/tweet?"+f,d&&(e=function(a){d(),c.unbind("tweet",e),a.stopImmediatePropagation()},c.bind("tweet",e)),c.attr("href",b)},bw=function(a){var b=a&&a.length,c=0,d;b>4&&(b=a.length=4);for(;c<b;c++)d=a[c].indexOf(" ")>-1?"":"@",c&&c==b-1?a[c]=" and "+d+a[c]:a[c]=" "+d+a[c];return a},bx=function(){var a,b=c.get("influentialAbout"),d=b&&b.topics,e=b.count;e&&(d=d.slice()),e>4&&(e=d.length=4);for(a=0;a<e;a++)a&&a==e-1?d[a]=" and "+d[a].topic:d[a]=" "+d[a].topic;return d},by=function(a,b){var c,d=0,f=[];a==e?a=e.get("soi"):a=a.attributes,b=="influenced_by"?c=a.influencedBy||a.influencers.influencedBy:c=a.influencerOf;while(c[d])c[d].hidden||(!c[d].nick&&c[d].fbUid&&c[d].name?f.push(c[d].name):f.push(c[d].nick)),d++;return f};a("body").delegate(".compact-viral, .viral, .viral-link, .viral-textonly, .viral-nostyle","click",function(b){var d,f,h,i,j,k,l,m,n="/",o,p,q,s,t=a(this),u=t.hasClass("fb"),v=t.hasClass("tw"),x=t.closest(".viral-unit"),y=x.attr("id"),z=x.hasClass("perks-virals"),A=x.hasClass("perk-ugc"),B=x.hasClass("ugc-add"),C={},D=r&&r.currentRoute=="dashboard",E=y&&!y.indexOf("viral_kloutScore-daily-prompt"),F=N.config.staticServer+"images/stroke-flag.png",G=!1,H,I;r&&!r.currentRoute.indexOf("nick")&&(o="@"+c.get("nick"));if(!y||!!x.hasClass("simplified-virals")){i=x.find("input[name=viralEvent]").val(),n=x.find("input[name=viralRoute]").val(),d=v?x.find("input[name=viralMessageTw]").val()||x.find("input[name=viralMessage]").val():x.find("input[name=viralMessage]").val(),F=x.find("input[name=viralImage]"),F=u&&F.length?F.val():N.config.staticServer+"images/stroke-flag.png",G=x.find("input[name=viralTitle]"),G=u&&G.length?G.val():!1,H=x.find('input[name^="viralMeta"]');for(var O=0;O<H.length;O++)I=H[O].name.replace("viralMeta","").toLowerCase(),C[I]=H[O].value;C.network=u?"fb":v?"tw":"li",m=N.config.host+n+(n.indexOf("?")>-1?"&":"?")+"n="+C.network+"&v="+i,u?x.hasClass("generic-virals")?(bA(C.page),i=i.replace("tw","fb"),N.mp.get("viralSend").track(i,C)):(N.mp.get("viralSend").track(i,C),bs(d,G,m,F,function(){N.mp.get("viralSubmit").track(i,C)},!0)):v?(N.mp.get("viralSend").track(i,C),bu(d,m,t,function(){N.mp.get("viralSubmit").track(i,C)})):(N.mp.get("viralSend").track(i,C),bv(d,m));return}if(!y.indexOf("viral_kloutScore")){i="klout_score",N.user.onboardingInfo.hasSharedScore||(bb("hasSharedScore",N.user.onboardingInfo.hasSharedScore=!0),bc({hasSharedScore:!0})),C.location=r.currentRoute=="dashboard"?"dashboard":"profile",C.placement=D?"dashboard":"score_analysis";if(E)i="daily_welcome",n="/user/"+N.user.nick+"/score-analysis",(p=N.user.scoreChange)?(q=p.change>1?"s":"",s=p.delta==1?"day":" 30 days",p.change>0?(C.event=s=="day"?"1day_positive":"30day_positive",d="My @Klout score is "+N.user.dailyScore+". I improved it by "+p.change+" point"+q+" over the past "+s+"!"):p.change<0&&(C.event="1day_negative",d="Oh no, my @Klout score is now "+N.user.dailyScore+". It fell "+Math.abs(p.change)+" point"+q+" in the past day!")):(C.event="1day_flat",d="My @Klout score is steady at "+N.user.dailyScore+".");else if(r.currentRoute=="dashboard"||y=="viral_kloutScore-welcome"||c.get("isOwnProfile"))d="According to @klout, "+(N.user.twUid?"@"+N.user.nick:N.user.firstName+" "+N.user.lastName)+"'s Klout score is "+(N.user.score||N.user.scoreData&&N.user.scoreData.klout_score_norm)+". How influential are you?",n="/user/"+N.user.nick+"/score-analysis";else{var J=c.get("bioData");d="According to @klout, "+J.name+"'s Klout score is "+(c.get("scoreData")&&c.get("scoreData").klout_score_norm)+". How influential are you?",n="/user/"+c.get("nick")+"/score-analysis",J.id&&(d=d.replace(J.name,"@"+c.get("nick")))}}else if(z)i="perks_"+w.toJSON().status,n="/perk/"+w.get("client")+"/"+w.get("campaign"),y=="perks-completed-pass-along-virals-container"&&(n=a("#perksCompletedPassAlongCustomLink").val().replace("http://klout.com","")),v?d=x.find("input[name=twMessage]").val():u&&(d=x.find("input[name=fbMessage]").val(),F=x.find("input[name=fbImage]").val(),G=x.find("input[name=fbTitle]").val());else if("viral_compare"==y)i="viral_compare",v?d=x.find("input[name=twMessage]").val():u&&(d=x.find("input[name=fbMessage]").val()),n="/user/"+c.get("nick")+"/comparison";else if("viral_compare_networks"==y)i="viral_compare_networks",v?d=x.find("input[name=twMessage]").val():u&&(d=x.find("input[name=fbMessage]").val()),n="/user/"+c.get("nick")+"/comparison";else if("viral_compare_influencers_topics"==y)i="viral_compare_influencers_topics",v?d=x.find("input[name=twMessage]").val():u&&(d=x.find("input[name=fbMessage]").val()),n="/user/"+c.get("nick")+"/comparison";else if(y=="list-virals")i="list_page_share",n="/user/"+g.get("createdBy").nick+"/list/"+(g.get("slug")||g.get("listId")),f=bw(g.getMemberNicks()),d="Check out this list on @klout, featuring"+f+"!";else if(y=="share-new-list-virals")i="list_page_new_share",n="/"+g.get("createdBy").nick+"/list/"+(g.get("slug")||g.get("listId")),f=bw(g.getMemberNicks()),d="Check out my new list on @klout, featuring"+f+"!";else if("viral_achievement"==y)i="achievement_earned_modal",n="/user/"+N.user.nick+"/achievements",k=a("#achievement-name").attr("class").replace("achievement-",""),l="http://"+location.hostname+a("#achievement-image").attr("src"),F=l,d=bp[k];else if(y=="influencers-virals")i="influencer_of",C.placement=D?"dashboard":y=="influencer-of-virals"?"profile_header":"profile_influencers",n="/user/"+(D?N.user.nick:c.get("nick"))+"/influencers",f=bw(by(D?e:c,"influencer_of")),D||c.get("isOwnProfile")?d="According to @klout, I'm influential to:"+f:d="According to @klout, "+o+" is influential to: "+f;else if(y=="influencer-of-virals"||y=="influential-about-virals")C.placement=y=="influencer-of-virals"?"profile_header":"profile_influencers",i=x.find("input[name=viralEvent]").val(),n=x.find("input[name=viralRoute]").val(),d=x.find("input[name=viralMessage]").val();else if(y=="top-influencer-virals")i=x.find("input[name=viralEvent]").val(),n=x.find("input[name=viralRoute]").val(),d=x.find("input[name=viralMessage]").val(),C.location=x.find("input[name=viralMetaLocation]").val();else if(y=="compare-feedback-virals")i=x.find("input[name=viralEvent]").val(),n=x.find("input[name=viralRoute]").val(),d=x.find("input[name=viralMessage]").val();else if(!y.indexOf("topics-virals"))i="influential_about",n="/user/"+c.get("nick"),h=bx(),C.placement="profile_topics",c.get("isOwnProfile")?d="According to @klout, I'm influential about:"+h:d="According to @klout, "+o+" is influential about:"+h;else if(y=="influenced-by-virals")i="influenced_by",C.placement=D?"dashboard":"profile_influencers",n="/user/"+(D?N.user.nick:c.get("nick"))+"/influencers",f=bw(by(D?e:c,"influenced_by")),D||c.get("isOwnProfile")?d="According to @klout, I'm influenced by: "+f:d="According to @klout, "+o+" is influenced by: "+f;else if(y=="ks-achievements-virals")i="achievement_summary",n="/user/"+c.get("nick")+"/achievements",j=c.get("ksAchievementsData").achievements,d=o+" has earned "+(j?_.keys(j).length:0)+" achievements on the new @klout ";else if(y=="achievements-virals")i="achievement_summary",n="/user/"+c.get("nick")+"/achievements",j=c.get("ksAchievementsData").legacy,d="According to @klout,"+o+" has earned "+(j?_.keys(j).length:0)+" legacy achievements. ";else if(y=="klout-style-virals")i="kclass_type",n="/user/"+c.get("nick")+"/kloutstyle",d="According to @klout, "+o+" is a "+Z[c.get("kClass")].name+". What's your influence style? ";else if(y=="added-influencer-virals")i="influenced_by_add",n="/user/"+c.get("nick")+"/influencers",d="I added @"+t.find("img").get(0).className+" as one of my influencers on @klout. Who influences you?";else if(y.indexOf("connect-")>-1){var K={"connect-tw":{event:"connect_twitter",viralMessage:"I just connected my @klout account with Twitter. Connect and see how your @klout improves!"},"connect-fb":{event:"connect_facebook",viralMessage:"I just connected my @klout account with Facebook. Connect and see how your @klout improves!"},"connect-li":{event:"connect_linkedin",viralMessage:"I just connected my @klout account with LinkedIn. Connect and see how your @klout improves!"},"connect-fs":{event:"connect_foursquare",viralMessage:"I just connected my @klout account with Foursquare. Connect and see how your @klout improves!"},"connect-yt":{event:"connect_youtube",viralMessage:"I just connected my @klout account with @YouTube. Be one of the first to have @YouTube added to your @klout!"},"connect-ig":{event:"connect_instagram",viralMessage:"I just connected my @klout account with @Instagram. Be one of the first to have @Instagram added to your @klout!"},"connect-tu":{event:"connect_tumblr",viralMessage:"I just connected my @klout account with @Tumblr. Be one of the first to have @Tumblr added to your @klout!"},"connect-bl":{event:"connect_blogger",viralMessage:"I just connected my @klout account with @Blogger. Be one of the first to have @Blogger added to your @klout!"},"connect-la":{event:"connect_lastfm",viralMessage:"I just connected my @klout account with Last.fm. Be one of the first to have Last.fm added to your @klout!"},"connect-fl":{event:"connect_flickr",viralMessage:"I just connected my @klout account with @Flickr. Be one of the first to have @Flickr added to your @klout!"},"connect-fp":{event:"connect_facebook_page",viralMessage:"I just connected my @klout account with my Facebook page. Update your @klout account today!"},"connect-gp":{event:"connect_gplus",viralMessage:"I just connected my @klout account with Google+. Be one of the first to have Google+ added to your @klout!"},"connect-wp":{event:"wordpress",viralMessage:"I just connected my @klout account with Wordpress.com. Be one of the first to have Wordpress.com added to your @klout!"}};i=K[y].event,d=K[y].viralMessage,n="/user/"+N.user.nick}else if(y=="notif-share-virals")i=x.find("input[name=viralEvent]").val(),n=i=="plusK_thanks"||i=="topic_add"||i=="topic_add_approved"?"/user/"+N.user.nick+"/topics":"",d=x.find("input[name=viralMessage]").val();else if(y=="viral_featuredPerk-invite")i=x.find("input[name=viralEvent]").val(),n=x.find("input[name=viralLink]").val().replace("http://klout.com",""),v?d=x.find("input[name=twMessage]").val():(d=x.find("input[name=fbMessage]").val(),F=x.find("input[name=fbImage]").val(),G=x.find("input[name=fbTitle]").val());else if(y=="viral_perksIndex")i=x.find("input[name=viralEvent]").val(),n=x.find("input[name=viralRoute]").val(),d=x.find("input[name=viralMessage]").val();else if(y=="viral_topinfluencerlist"||y=="viral_topplusklist"||y.indexOf("viral_TopicPage")>-1)i=x.find("input[name=viralEvent]").val(),n=x.find("input[name=viralRoute]").val(),d=x.find("input[name=viralMessage]").val(),x.find("input[name=viralMeta]")&&(C.topic=x.find("input[name=viralMeta]").val()),x.find("input[name=viralMetaLocation]")&&(C.location=x.find("input[name=viralMetaLocation]").val());else if(y=="viral_topicPerk")i=x.find("input[name=viralEvent]").val(),n=x.find("input[name=viralRoute]").val(),d=x.find("input[name=viralMessage]").val();else if(y=="viral_stream")i=x.find("input[name=viralEvent]").val(),n="/user/"+N.user.nick,d=x.find("input[name=viralMessage]").val();else if(y=="viral_amplification"||y=="viral_network"||y=="viral_trueReach"){var J=c.get("bioData"),L=J.name.trim(),M=x.parent().find(".metric").text();d="According to Klout, "+L+"'s",y=="viral_amplification"?d+=" Amplification is ":y=="viral_network"?d+=" Network is ":y=="viral_trueReach"&&(d+=" True Reach is "),d+=M,J.id&&(d=d.replace(L,"@"+c.get("nick"))),i=y.replace("viral_","score_analysis_"),n="/user/"+(c.get("nick")?c.get("nick"):J.ksUID)}else y=="viral_topicPreview"?(n="/user/"+N.user.nick,d=x.find("input[name=viralMessage]").val(),i=x.find("input[name=viralEvent]").val()):y=="viral_achievement_hover"?(n="/user/"+N.user.nick+"/achievements",d=x.find("input[name=viralMessage]").val(),i=x.find("input[name=viralEvent]").val(),C.achievement=x.find("input[name=viralMeta]").val()):y=="friendless"?(i="nux_page_invite",n=x.find("input[name=viralRoute]").val(),d=x.find("input[name=viralMessage]").val()):y=="viral_addPerkUGCSuccess"?(i="perks_UGC",n=x.find("input[name=viralRoute]").val(),d=x.find("input[name=viralMessage]").val()):y=="viral_nps"&&(i="nps",n=x.find("input[name=viralRoute]").val(),d=x.find("input[name=viralMessage]").val());C.network=u?"fb":v?"tw":"li",z&&(C.perk=w.get("client")+"/"+w.get("campaign")),A&&(C.type=B&&"Add"),N.mp.get("viralSend").track(i,C),m=N.config.host+n+(n.indexOf("?")>-1?"&":"?")+"n="+C.network+"&v="+i,u?bs(d,G,m,F,function(){N.mp.get("viralSubmit").track(i,C)}):v?bu(d,m,t,function(){N.mp.get("viralSubmit").track(i,C)}):bv(d,m)}),a(".login-btn").each(function(b,c){var d=N.urlParam("next");d&&d!="/"&&a(c).attr("href",a(c).attr("href")+"?next="+d)}),a(".footerLink").live("click",function(b){var c=a(this).attr("id");N.mp.get("impression").track(c)}),a(".influencers .hide-soi, .influencers .restore ").live("click",function(){var b="influencer_of",d=this.id;d.substring(d.indexOf("-")).indexOf("-influenced-by-")||(b="influenced_by"),!a(this).hasClass("restore")&&a(this).parent().parent().parent().hasClass("mini-user-list")&&a(this).parent().fadeOut("fast "),c.trigger(a(this).hasClass("restore")?"undeleteItem":"deleteItem",d.substring(d.lastIndexOf("-")+1),b)}),a(".restore-topic").live("click",function(){var b=a(this).closest(".topic").attr("id").replace("tid","");V.get("click").track("restore_topic"),c.trigger("undeleteItem",b,"topics")}),a("#updatedPrivacyPolicyLink").live("click",function(){N.modal.hide()}),function(){var b=a("#matrix-hovercard"),c=function(c,e,f){var g=Z[c];if(!g)return;b.length||(b=a('<div id="matrix-hovercard" class="hoverer hovercard"/>').append("<h3/>").append("<p/>").appendTo("body")),b.find("h3").text(g.name),b.find("p").text(g.description),d(e,f)},d=function(a,c){var d=b.outerWidth(),e=b.outerHeight();b.show().css({top:c-e-10+"px",left:a-20+"px"})},e=function(){b.hide()};a(".kloutstyle .zone").live("mouseover",function(b){var d=this.id.replace("zone-",""),e=a(this).addClass("on").offset();c(d,e.left,e.top)}).live("mouseout",function(){a(this).removeClass("on"),e()}),a(".zone .user-pic").live("click",e)}();var bz=!1;(function(){var b,c=function(c,f,g){b=a("#achievement-hovercard");if(!b.length){b=a('<div id="achievement-hovercard" class="hoverer hovercard"/>').append('<img class="achievement-image"/>').append("<h3/>").append('<p class="achievement-description"/>').appendTo("body");var h=a('<div id="viral_achievement_hover" class="viral-unit">').append('<a class="tw viral"></a>').append('<a class="fb viral"></a>').append('<a class="li viral"></a>');h.append('<input type="hidden" name="viralMessage" value="I earned an achievement on @klout, check it out!"/>'),h.append('<input type="hidden" name="viralEvent" value="achievement_earned_description"/>'),h.append('<input type="hidden" name="viralMeta" value="'+a("#"+c).find(".achievement-name").text()+'"/>'),b.append(h),a("#achievement-hovercard").live("mouseenter",function(a){bz=!0}),a("#achievement-hovercard").live("mouseleave",function(a){bz=!1,setTimeout(function(){e()},500)})}b.find("h3").text(a("#"+c).find(".achievement-name").text()),b.find(".achievement-description").text(a("#"+c).find(".achievement-description").text()),b.find(".achievement-image").attr("src",N.config.staticServer+"images/achievements/"+c.replace("achievement-","")+"-l.png"),b.find("input[name=viralMessage]").val("I earned the '"+a("#"+c).find(".achievement-name").text()+"' achievement on @klout, check it out!"),d(f,g)},d=function(a,c){var d=b.outerWidth(),e=b.outerHeight();b.show().css({top:c-e-10+"px",left:a-20+"px"})},e=function(){bz||b.fadeOut("fast")};a(".ks-achievement").live("mouseenter",function(b){bz=!0;var d=a(this).offset();c(a(this).attr("id"),d.left,d.top)}).live("mouseleave",function(){bz=!1,setTimeout(function(){e()},500)})})(),function(){var b=!1,c,d=function(b,c,d){a(".hovercard").fadeOut(),a("#eligibility-hovercard").length&&a("#eligibility-hovercard").remove();var g=b.parent().siblings("div.eligibilityKloutScore").html(),h=b.parent().siblings("div.eligibilityTopics").html(),i=b.parent().siblings("div.eligibilityLocations").html(),j='<div id="eligibility-hovercard" class="hoverer hovercard"><table>';g.length&&(j+='<tr id="eligibility-hovercard-score"><td>Score:</td><td>'+g+"</td>"+"</tr>"),h.length&&(j+='<tr id="eligibility-hovercard-topics"><td>Topics:</td><td>'+h+"</td>"+"</tr>"),i.length&&(j+='<tr id="eligibility-hovercard-locations"><td>Locations:</td><td>'+i+"</td>"+"</tr>"),j+="</table></div>",a("body").append(j),a("#eligibility-hovercard").live("mouseenter",function(a){eligibiltyHovering=!0}),a("#eligibility-hovercard").live("mouseleave",function(a){bz=!1,setTimeout(function(){f()},100)}),e(c,d)},e=function(b,c){var d=a("#eligibility-hovercard").outerWidth(),e=a("#eligibility-hovercard").outerHeight();a("#eligibility-hovercard").show().css({top:c-e+"px",left:b-210+"px"})},f=function(){b||a("#eligibility-hovercard").fadeOut("fast")};a(".eligibilityCriteriaHover").live("mouseenter",function(c){b=!0;var e=a(this).offset();d(a(this),e.left,e.top)}).live("mouseleave",function(){b=!1,setTimeout(function(){f()},100)}),a("div#eligibility-hovercard").live("mouseenter",function(a){b=!0}).live("mouseleave",function(){b=!1,setTimeout(function(){f()},100)}),a("div#eligibility-hovercard a").live("click",function(a){b=!1,f()})}(),a("#dropdown-summary .username, #dropdown-summary .nav-triangle").live("click",function(){a("#dropdown-menu").is(":visible")?a("#dropdown-menu").hide():a("#dropdown-menu").show()}),a("#dropdown-menu .logout").live("click",function(a){FB.logout()}),function(){var b=600,d,e;a("body").delegate("#score .sash, #dashboard-insights .large-flag .sash","mouseenter",function(b){if(e)return;e=!0;var d=a(this).parents(".kscore"),f=a("#dashboard").length,g=f?N.user.nick:c.get("nick");a.ajax({url:"/api/profilebadge/"+g,method:"GET",cache:!0,success:function(a){a.isOwnProfile=N.user.nick==a.nick,a.location=f?"dashboard":"profile",d.find(".hovercard").html(N.view.renderUS("view/scoreSashHovercard",a)).show()}})}).delegate("#score .sash, #score .hovercard, #dashboard-insights .large-flag .sash, #dashboard-insights .large-flag .hovercard","mouseleave",function(c){var f=a(this).parents(".kscore");d&&clearTimeout(d),d=setTimeout(function(){f.find(".hovercard").hide(),e=!1},b)}).delegate("#score .sash, #score .hovercard, #dashboard-insights .large-flag .sash, #dashboard-insights .large-flag .hovercard","mouseenter",function(a){d&&clearTimeout(d)})}(),function(){if(N.config.isPublic)return;var b=200,c,d,e,f=function(b,c,d,e){var f=c.outerWidth()+9,g=a("#header-wrapper").height(),h=e-a(window).scrollTop()-g;d+f>a(document).width()&&(d-=f-58),c.css({top:(h<c.outerHeight()?e+b.outerHeight()+9:e-c.outerHeight())+"px",left:d+"px"})},g=function(b,d){var f,g=b.parent(),h=g.hasClass("gp-unregistered");if(g.hasClass("fb-unregistered")||h){var i=b.attr("src"),j=b.attr("alt"),k=h?f:i.replace("/small","").substr(i.indexOf("/fb/")+4),l=h?i.substr(i.indexOf("/gp/")+4):f,m={fbUid:k,gpUid:l,name:j,kScore:"?"};d(null,m)}else{var n=b.parent().attr("href"),i=b.attr("src"),o=i&&i.split("/")[3];c=a.ajax({url:"/api/profilebadge/"+o,method:"GET",cache:!0,routeChange:be,success:function(a){return c=null,o&&e==o?d(null,a):(b.unbind(".profileBadge"),d("notCurrent"))}})}},h=function(h){var i=a("#profile-badge-container"),j={},k=h.offset(),l=k.left,m=k.top,n=h.attr("src"),o=n&&n.split("/")[3];clearTimeout(d);if(o&&e==o)return;e=o,i.addClass(o);var p=function(a){clearTimeout(d),d=setTimeout(function(){c&&c.abort(),i.hide(),delete N.profileBadgeData,h.unbind(".profileBadge"),i.unbind(".profileBadge"),i.removeClass(o),e=null},b)};g(h,function(a,b){N.profileBadgeData=b;if(a)return;i.find("#profile-badge").html(N.view.renderUS("view/profileBadge",{content:b}));var c=Q.get("hovercardUsers")||{};return b.pluskTopics||(b.pluskTopics=[]),b.scienceTopics||(b.scienceTopics=[]),b.topics=b.pluskTopics.concat(b.scienceTopics),c[b.nick]=b,Q.set("hovercardUsers",c),f(h,i.show(),l,m)}),h.bind("mouseleave.el",p),i.bind("mouseleave.profileBadge",p)};a("body").delegate(".user-pic .user-img","mouseenter",function(b){var c=a(this);if(c.closest("#nux-view").length)return!1;if(c.closest(".header").length)return!1;if(c.closest(".no-hover").length)return!1;h(c)}),a("body").delegate("#profile-badge-container","mouseenter",function(a){clearTimeout(d)}),a(".kloutstyle .user-pic").live("mouseover",function(a){a.stopPropagation()})}(),a(".fb-unregistered").live("click",function(){var b=a(this),c="icon_invite";return b.parents("#fb-friends").length?c="friendlist_icon":b.closest("#influencers").length?c="influencers":b.closest("#nux-view").length?c="nux_page_invite":b.closest("#profile-badge").length&&(c="profile_hovercard"),bA(c),!1}),a("body").delegate(".tw-unregistered","click",function(b){var d=a(this),e,f,h,i,j,l=function(a){for(var b=a.closest("ul").children("li"),c=0,d=b.length;c<d;c++)if(a.get(0)==b.get(c))return c};d.closest(".friendlist-list").length?(h=g.get("friends")[l(d.closest("li.friend"))].nick,f="Hey @"+h+", there's a list on @klout and you're on it! Join me and check it out!",i=N.config.host+"/user/"+g.get("createdBy").nick+"/list/"+g.get("listId")+"?n=tw&v=list_page_invite",e="list_page_invite"):(d.closest("#nux-view").length?(e="nux_page_invite",h=d.closest(".friend").find(".network-icon.twitter").attr("href").split("twitter.com/")[1],f="@"+h+", I just signed up for Klout. Check out your @klout profile here: "):d.closest("#friendlist").length?(h=k.get("friends")[l(d.closest("li.friend"))].nick,j=d.closest(".friend").find(".kscore").find(".value").text()||"decent",f="@"+h+", your Klout Score is "+j+" (I'm a "+N.user.score+"). Check out your @klout profile today!",e="invite"):d.closest("#influencers").length&&(h=c.get("influencers")[d.closest(".influenced-by").length?"influencedBy":"influencerOf"][l(d.closest("li.influencee"))].nick),f=f||d.parent().parent().parent().parent().find("input[name=viralMessage2]").val(),f?e=e||d.parent().parent().parent().parent().find("input[name=viralEvent]").val():(h=h||d.closest("ul.networks").find("a.network-icon.twitter").attr("href").split("twitter.com/")[1],j=d.parents("#user-info").find(".large-flag .value").text()||"decent",f="@"+h+", your Klout Score is "+j+" (I'm a "+N.user.score+"). Check out your @klout profile today!",e="invite"),i=N.config.host+"/"+h+"?n=tw&v="+e),d=b.target.tagName=="A"?a(b.target):d,bu(f,i,d,function(){N.mp.get("viralSubmit").track(e,{network:"tw"})}),N.mp.get("viralSend").track(e,{network:"tw"})}),!N.config.isPublic&&a('a[href*="/user/"]').live("click",function(){var b,c=this.href,d="#/user/",e=N.config.host;c.indexOf(e)||(c=c.replace(e,"")),c.indexOf("/user/")||(b=c=c.replace("/user/",""),b.indexOf("/")>=0&&(b=b.substring(0,b.indexOf("/"))),a.inArray(b,N.config.colliders)<0&&(d="#/"),this.href=d+c)}),a("#main-content .onboarding .item, #checklist li").live("click",function(){var b=a(this);!b.hasClass("selected")&&!b.hasClass("complete")&&f&&f.selectChecklistItem(a.trim(this.className.replace("item","")))}),a("#add-influenced-by").live("click",function(){var a=C.get("selectedResult");a&&c.trigger("addInfluencedBy",a.nick),N.modal.hide()}),a("#add-influenced-by-from-comparison").live("click",function(){var b=C.get("selectedResult").nick;a(this).hide().siblings(".spinner").show(),a.ajax({url:"/soi/add",type:"POST",data:{username:b},complete:function(){N.modal.hide()},success:function(b){var c,d,e;b.error==404?a("#influenced-by-user-search-status").html("User not found!"):b.error==500?N.alert("An error occurred."):b.error==403?N.alert("You can currently only display up to 20 of your own influencers at this time."):(d=b.addedUser,e=b.nick,delete b.addedUser,delete b.nick,N.modal.show({id:"influencer-added",content:{nick:e,screenName:d}}))}})}),a("#influenced-by-user-search").live("keypress",function(b){b.keyCode==13?a("#add-influenced-by").trigger("click"):c.set({influencedBySearchStatus:null})}),a(".add-topic-search .searchfield").live("keyup",function(b){var c=C.get("results"),d=this.value.toLowerCase();if(c&&c.topics){var e=_.find(_.values(c.topics),function(a){return d==a.displayName.toLowerCase()});e?(a("#add-topic-search .button-secondary").removeClass("button-secondary").addClass("button-alt"),a(this).val(e.display)):a(".add-topic-search .button-alt").removeClass("button-alt").addClass("button-secondary")}else a(".add-topic-search .button-alt").removeClass("button-alt").addClass("button-secondary");if(b.keyCode==13){var f=a(this).closest(".search"),g=f.find(".search-results");g.hide(),a(".add-topic-search .searchfield").trigger("blur")}}),a(".add-topic-search .searchfield").live("blur",function(){var b=C.get("selectedResult");if(!b){var c=C.get("results"),d=a(".add-topic-search .search-results").find("a.selected");d&&d.length>0?(d.click(),a("#add-topic-search .button-secondary").removeClass("button-secondary").addClass("button-alt")):a(".add-topic-search .button-alt").removeClass("button-alt").addClass("button-secondary")}}),a("#edit-list-modal .list-user-add").live("click",function(){var b=a("#list-user-search");b.val()!=b.attr("placeholder")&&i.trigger("addUser",b.val())}),a("#list-user-search").live("keypress",function(b){b.keyCode==13?a("#edit-list-modal .list-user-add").trigger("click"):i.trigger("newSearch")}),a("#edit-list-save").live("click",function(){i.trigger("saveList")}),a("#edit-list-name, #edit-list-description").live("change",function(){this.value!=a(this).attr("placeholder")&&i.trigger("textChange",this.id=="edit-list-name"?"name":"description",this.value)}),a("#edit-list-modal .remove").live("click",function(){var a=this.firstChild.className.replace("tw","");i.trigger("removeUser",a)}),a("#edit-list-modal .listed-user").live("mouseenter",function(){a(this).find(".remove").show()}).live("mouseleave",function(){a(this).find(".remove").hide()}),a(".edit-list").live("click",function(a){var b,c=this.href;a.preventDefault(),c.indexOf("/list/edit/")>=0&&(b=c.substr(c.lastIndexOf("/")+1)),r.editList(b),scrollTo(0,0)}),a(".edit-list-cancel").live("click",bd),a(".delete-list").live("click",function(b){var d,e=this.href;b.preventDefault(),e.indexOf("/list/delete/")>=0&&(d=e.substr(e.lastIndexOf("/")+1)),isNaN(+d)||N.confirm("Are you sure you want to delete this list?",function(){a.ajax({url:"/list/delete",type:"POST",data:{listId:d},success:function(){bd(),c&&c.trigger("listChange"),location.hash="/profile/lists",N.mp.get("lists").track("remove")}})})}),a("#user-info a[id^=add-to-list]").live("click",function(){var a=this.id.replace("add-to-list-","");r.addToList({twUid:a,nick:c.get("nick"),bioData:c.get("bioData"),scoreData:c.get("scoreData")})}),a(".badge-actions .add-to-list").live("click",function(){var b=a(this),c=N.profileBadgeData,d=c.twUid,e=c.nick;d&&e&&r.addToList({twUid:d,nick:e})}),a("#dashboard-lists .import-list, #edit-list-modal .import-list, #profile-lists .import-list").live("click",function(){r.importList(),scrollTo(0,0)}),a("#import-list .button-alt").live("click",function(){var b=a(this).closest("li");M.trigger("listSelected",this.id.replace("import-",""),b.find(".list-name").text(),b.find("input").val())}),a("a.addPerkUGC").live("click",function(a){var b=this.href,c,d;a.preventDefault(),b=b.substring(b.indexOf("#")).split("/"),c=b[2],d=b[3],r.addPerkUGC(c,d),scrollTo(0,0)}),a("a.declinePerkUGC").live("click",function(b){b.preventDefault();var d=this.href,e,f;d=d.substring(d.indexOf("#")).split("/"),e=d[2],f=d[3],a.ajax({url:"/api/perk/declineUGC",data:{campaignId:e,userId:f},complete:function(a){c!=null?c.fetchContent("refreshPerksUGC"):w!=null&&w.fetchUGC()}})}),a("a#addPerkUGCDeclineButton").live("click",function(a){a.preventDefault(),c!=null?c.fetchContent("refreshPerksUGC"):w!=null&&w.fetchUGC()}),a("#refreshPerksUGC").live("click",function(a){a.preventDefault(),c!=null?c.fetchContent("refreshPerksUGC"):w!=null&&w.fetchUGC()}),a("body").delegate(".list-member .button-alt.invite","click",function(){var b,c=a(this),d=c.closest(".list-member").find(".user-pic img").attr("src");d=d.substr(d.lastIndexOf("/")+1),b=N.config.host+"/user/"+g.get("createdBy").nick+"/list/"+(g.get("slug")||g.get("listId"))+"?n=tw&v=list_page_invite",bu("Hey @"+d+", there's a list on @klout and you're on it! Join me and check it out!",b,c,function(){N.mp.get("viralSubmit").track("list_page_invite",{network:"tw"})}),N.mp.get("viralSend").track("list_page_invite",{network:"tw"})}),a("a.follow-klout").live("click",function(a){a.preventDefault(),bc({isFollowingKlout:!0}),open("http://www.twitter.com/klout")}),a("body").delegate(".service-button.invite, .stats-invite","click",function(){var b,d,e=c.get("nick"),f=c.get("scoreData").klout_score_norm||"decent";d="@"+e+", your Klout Score is "+f+" (I'm a "+N.user.score+"). Check out your @klout profile today!",b=N.config.host+"/user/"+e+"?n=tw&v=profile_icon_invite",bu(d,b,a(this),function(){N.mp.get("viralSubmit").track("profile_icon_invite",{network:"tw"})}),N.mp.get("viralSend").track("profile_icon_invite",{network:"tw"})}),a("#registration-form input[name=registerInfluencerType]").live("click",function(){var b=this.value=="brand",c=a("#registration-form");c.find(".first-name, .last-name").toggleClass("off",b),c.find(".brand-name").toggleClass("off",!b)}),a("#registration-modal .button").live("click",function(){var b=a(this),c=a("#registration-form"),d=c.get(0).elements,e=/<|>|"/g,f=a("#register-brand-influencer"
).get(0).checked,g=d.brandName.value=d.brandName.value.replace(e,""),h=d.firstName.value=d.firstName.value.replace(e,""),i=d.lastName.value=d.lastName.value.replace(e,""),j=d.email.value;c.find(".error").hide();if(f){if(!a.trim(g).length)return a("#brand-name-error").show()}else{if(!a.trim(h).length)return a("#first-name-error").show();if(!a.trim(i).length)return a("#last-name-error").show()}if(!a.trim(j).length)return a("#email-error").show();if(!/^(([A-Za-z0-9])|(\w[-\w\.\+]*[\w\+]))@([-A-Za-z0-9]+\.)+[A-Za-z]{2,4}$/.test(j))return a("#invalid-email-error").show();b.hasClass("working")||(b.addClass("working"),a.ajax({type:"POST",url:"/complete_registration",data:{firstName:h,lastName:i,email:j,brandName:g,isBrand:+f},success:function(c){if(!c.error)return location.href="/nux/1";N.mp.get("registration").track("015_home_reg_fields",{event:"fail"}),b.removeClass("working"),a("#"+c.error+"-error").show()},error:function(a){return location.href="/home"}}))}),a("#see-achievements").live("click",function(a){a.preventDefault(),location.href="/#/profile/achievements",N.modal.hide()}),a("#redeem-code").live("submit",function(b){b.preventDefault();var c=N.user,d=a("#promo-code-text-input").val(),e={ksUid:c.ksUID,code:d},f,g;if(d.length==0)return N.alert("<h3>Error</h3>Please enter a code."),!0;a.ajax({type:"POST",url:"/redeem_code",data:e,success:function(a){"string"==typeof a.error?a.error=="invalid"?N.alert("<h3>Error</h3>The code you entered is not valid."):a.error=="claimed"?N.alert("<h3>Error</h3>This code has already been redeemed."):a.error=="already_earned"?N.alert("<h3>Error</h3>You have already earned this achievement."):N.alert("<h3>Error</h3>There has been an error redeeming your code. Please try again later."):(f={name:a.name},N.mp.get("achievements").track("earned",f),N.modal.show({id:"achievement-modal",content:a}))},error:function(a){N.alert("<h3>Error</h3>There has been an error redeeming your code. Please try again later.")}})}),a("#switch-merge-fb").live("click",function(a){a.preventDefault(),FB.logout(function(a){location.href="/switch_merge"})}),a(".topix .row-details .name").live("mouseenter",function(){a(this).find("img").css("visibility","visible")}).live("mouseleave",function(){a(this).find("img").css("visibility","hidden")}),a(".row-header .plusK").live("mouseenter",function(){a(this).find(".hovercard").show()}).live("mouseleave",function(){a(this).find(".hovercard").hide()}),a(".influence-meter .meter").live("mouseenter",function(){a(this).find(".hovercard").show()}).live("mouseleave",function(){a(this).find(".hovercard").hide()}),a(".influence-meter .meter, .vouchers .micro-user").live("mouseenter",function(){a(this).find(".hovercard").show()}).live("mouseleave",function(){a(this).find(".hovercard").hide()}),a(".message.perkEligibility .perkBox").live("mouseenter",function(){a(this).siblings(".hovercard").show()}).live("mouseleave",function(){a(this).siblings(".hovercard").hide()}),a(".score-insight .header-text .insight-type").live("mouseenter",function(){a(this).find(".hovercard").show()}).live("mouseleave",function(){a(this).find(".hovercard").hide()}),a(".help").live("mouseenter",function(){a(this).find(".hovercard").show()}).live("mouseleave",function(){a(this).find(".hovercard").hide()}),a(".tab.topics .add-topic-disabled").live("mouseenter",function(){a(this).find(".hovercard").show()}).live("mouseleave",function(){a(this).find(".hovercard").hide()}),a("#topix .topic .remove").live("click",function(){var b=a(this).closest(".topic").get(0).id.replace("tid",""),d=a(this).closest(".topic");N.confirm("<h3>Are you sure you want to remove this topic?</h3> You can re-add the topic in the future, but you will lose any +Ks you've already received for this topic.",function(){V.get("click").track("remove_topic"),N.view.renderSpinner("#content .tab.topics","large")(),c.trigger("deleteItem",b,"topics"),d.fadeOut("fast")})}),a("#influential-about li").live("mouseenter mouseleave",function(b){a(this).find(".remove")[b.type=="mouseenter"?"show":"hide"]()}),a(".plus-k-button, .plus-k-icon").live("click",function(b){var d,e,f,g=+N.user.remainingPlusKs===0,h="Sorry, you don't have enough +Ks.",i=a(this);b.preventDefault();if(!i.hasClass("inactive")){e=this.href.substring(this.href.lastIndexOf("/")+1),i.addClass("inactive"),i.hasClass("mini-plus-k")||(c?d="page":A&&(d="topic-influencers"));if(g)return N.alert(h),N.mp.get("plusK").track("click",{location:d,eligible:"no"});bf(e,i),N.mp.get("plusK").track("click",{location:d,eligible:"yes"})}}),a("#see-achievements").live("click",function(a){a.preventDefault(),location.href="/#/profile/achievements"}),a(".notif-cta").live("click",function(){var b,c=a(this),d=c.closest(".notif"),e=d.get(0).id.replace("notif","");d.hasClass("plusK")?(l.trigger("share",e),b="plusK"):d.hasClass("topic-graduation")?(l.trigger("share",e),b="topic_add_approved"):d.hasClass("topic-nomination")?(l.trigger("share",e),b="topic_add"):d.hasClass("listAdd")&&(b="listAdd"),N.mp.get("click").track("notif_cta",{notif_type:b})}),a(".clear-all-notifs").live("click",function(){l.trigger("clearAll"),N.mp.get("click").track("notif_clear_all")}),a("#header-dashboard").click(function(){N.mp.get("click").track("topnav_dashboard",{button:"logo"});var a;location.hash.indexOf("#/dashboard")>-1?a="dashboard":location.hash.indexOf("#/understand")>-1?a="understanding_klout":location.hash.indexOf("#/perks")>-1?a="perks":a="profile_logged",N.mp.get("click").track("header_logo",{page:a})}),a("#dashboard-menu-item").click(function(){N.mp.get("click").track("topnav_dashboard",{button:"home"})}),a("#perksLandingCtaButton").live("click",function(){w.trigger("cta"),N.mp.get("click").track("perks_button_claim",{location:"perks_page"})}),a("#perks-error .button-primary").live("click",function(){N.modal.hide()}),a("#perk-underAge .button-primary, #perk-underAge .close-modal").live("click",function(){N.modal.hide()}),a("#modalSaveDob").live("click",function(){if(!a("#daily-modal-birthday-month").val().length||!a("#daily-modal-birthday-day").val().length||!a("#daily-modal-birthday-year").val().length){var b=a("#incorrectDob");b.hasClass("hidden")?b.hide().removeClass("hidden").slideDown(200):b.is(":visible")||b.slideDown(200)}else{var c={};_.extend(c,{birthdayYear:a("#daily-modal-birthday-year").val(),birthdayMonth:a("#daily-modal-birthday-month").val(),birthdayDay:a("#daily-modal-birthday-day").val(),firstName:N.user.firstName,lastName:N.user.lastName,brand:N.user.brand||"",influencerType:N.user.isBrand&&N.user.isBrand=="1"?"brand":"individual",isBrand:N.user.isBrand&&N.user.isBrand=="1"?1:0,aboutServiceId:N.user.aboutServiceId||1,aboutText:N.user.aboutText||""}),a("#incorrectDob").hide(200),N.modal.hide(),N.modal.show({id:"saving-modal",content:{caption:"Saving..."}}),a.ajax({type:"GET",url:"/api/profile/",complete:function(b){var d=jQuery.parseJSON(b.responseText);_.extend(c,{email:d.email||"",zip:d.zip||"",gender:d.gender||"",dob:d.dob||"",picPref:d.profile_pic_service_id||1}),a.ajax({type:"POST",url:"/api/profile/edit",data:c,complete:function(){var b=new Date,d=new Date(c.birthdayYear,c.birthdayMonth-1,c.birthdayDay),e=b.getFullYear()-d.getFullYear(),f=b.getMonth()-d.getMonth();(f<0||f===0&&b.getDate()<d.getDate())&&e--,e<18?a.ajax({type:"GET",url:"/api/profile/email",complete:function(b){var d=jQuery.parseJSON(b.responseText),e=d.emailSettings.prefs;if(e.perks!=0){var f={email:c.email,prefs:{perks:0,newsletter:e.newsletter,dailyDigest:e.dailyDigest}};a.ajax({type:"POST",url:"/api/profile/edit/email",data:f,complete:function(){N.modal.hide()},success:function(){N.modal.hide()},error:function(){N.modal.hide()}})}else N.modal.hide()},error:function(){N.modal.hide()}}):N.modal.hide()},error:function(){N.modal.hide()}})},error:function(){N.modal.hide()}})}}),a("#perks-offer-modal-submit-button").live("click",function(){var b=a("#perksOfferModalForm").serializeArray();return w.trigger("submit",b),!1}),a("#perks-offer-modal-submit-button-addAge").live("click",function(){var b=a("#perksOfferModalForm").serializeArray();return w.trigger("addAge",b),!1}),a("#perks-offer-modal-submit-button-addEmail").live("click",function(){var b=a("#perksOfferModalForm").serializeArray();return w.trigger("addEmail",b),!1}),a("#perks-offer-modal-submit-button-addAgeAndEmail").live("click",function(){var b=a("#perksOfferModalForm").serializeArray();return w.trigger("addAgeAndEmail",b),!1}),a("#perks-modal form").live("submit",function(a){return a.preventDefault(),!1}),a("#perks-select-venue").live("change",function(){var a=this.selectedIndex;w.trigger("venue",a)}),a(".dashboard-close").live("click",function(){var b=N.user.hideItems||[],c=a(this),d=c.closest(".closeable"),e=d.get(0).id;a.inArray(e,b)<0&&(b.push(e),N.user.hideItems=b,a.ajax({url:"/api/dashboard/hide",data:{items:b}})),d.hide()}),a("body").delegate(".soi-invite a.invite","click",function(){var b=a(this),c=b.closest(".soi-invite"),d=c.find("input[name=viralLink]").val(),e=c.find("input[name=viralEvent]").val(),f=c.find("input[name=viralMessage]").val(),g=this.id&&this.id.replace("fb-invite-",""),h=g?"fb":"tw",i=function(){a.ajax({url:"/api/influencee/invited"}),N.mp.get("viralSubmit").track(e,{network:h})};d=N.config.host+d+"?n="+h+"&v="+e,g?br(f,i,[g],"mfs"):bu(f,d,b,i),N.mp.get("click").track("invite_influencer_invite"),N.mp.get("viralSend").track(e,{network:h}),N.modal.hide()}),a("#resend-verification").live("click",function(){var b=a("#resend-verification").text();a("#resend-verification").html("Sending..."),a.ajax({url:"/email/verify/resend",type:"GET",complete:function(c){a("#resend-verification").html(b)},success:function(a){N.alert("<h3>Success</h3>Your verification email has been re-sent.")},error:function(a){N.alert("<h3>Error</h3>There's been an error re-sending your verification email.")}})}),a("body").delegate(".influence-invite","click",function(b){var c=a(this),d=["tw","fb"],e=["influencer-of","influential-about"],f=N.config.staticServer+"images/stroke-flag.png",g=!1,h=_.find(d,function(a){return c.hasClass(a)}),i=_.find(e,function(a){return c.hasClass(a)});if(typeof h=="undefined"||typeof i=="undefined")return;if(_.include(e,i)){var j=c.closest(".links"),k={network:h,placement:"profile_header"},l=j.find("input[name=viralEvent]").val(),m=j.find("input[name=viralRoute]").val(),n=j.find("input[name=viralMessage]").val(),o=N.config.host+m+(m.indexOf("?")>-1?"&":"?")+"n="+h+"&v="+l;h==="tw"?bu(n,o,c,function(){N.mp.get("viralSubmit").track(l,k)}):h==="fb"&&bs(n,g,o,f,function(){N.mp.get("viralSubmit").track(l,k)}),N.mp.get("viralSend").track(l,k)}});var bA=function(b){var c=a.ajax({url:"/api/friends/fb",method:"GET",cache:!1,complete:function(){c=null},success:function(c){for(var d=0;d<c.friends.length;d++)c.friends[d].selected=!0;Q.set("fbFriends",c.friends),Q.set("mfsSource",b),scrollTo(0,0),b=="nux-page-invite"?(c.context="nux",a("#friends").replaceWith(N.view.renderUS("modal/fb-friend-invite",c))):N.modal.show({id:"fb-friend-invite",content:c})},error:function(a){a.status==500&&N.alert("There was an error retrieving your Facebook friends.")}})};N.kloutMfs=bA,function(){var b="Search friends";a("body").delegate("#fb-friend-invite-form .friend-filter .text-input","blur",function(c){var d=a(this);(d.val().trim()==""||d.val().trim()==b)&&a(this).val(b).css("opacity",.6)}).delegate("#fb-friend-invite-form .friend-filter .text-input","focus",function(c){var d=a(this);d.val().trim()==b&&d.val(""),d.css("opacity",1)}).delegate("#fb-friend-invite-form .friend-filter .text-input","keyup",function(b){var c=a(this).val().trim(),d=_.filter(Q.get("fbFriends"),function(a){var b=a.name.toLowerCase(),d=!1,e=b.split(" "),f=c.toLowerCase();e.push(b);for(var g=0;g<e.length;g++)if(e[g].indexOf(f)==0){d=!0;break}return d});a("#fb-friend-invite-form .fb-friend-list").replaceWith(N.view.renderUS("modal/fbUserList",{users:d}))}).delegate("#fb-friend-invite-form .fb-friend-list .fb-friend","click",function(b){var c=a(b.target);if(!c.hasClass("user-name")&&!c.hasClass("checkbox-input")){var d=a(this).find(".checkbox-input");d.attr("checked")?d.removeAttr("checked"):d.attr("checked","checked"),d.change()}}).delegate("#fb-friend-invite-form .fb-friend-list .checkbox-input","change",function(b){var c=a(this),d=Q.get("fbFriends"),e=c.val(),f,g=c.attr("checked");c.attr("checked")||a("#select-all-friends").removeAttr("checked");for(f=0;f<d.length;f++)if(d[f].id==e){d[f].selected=g;break}Q.set("fbFriends",d)}).delegate("#select-all-friends","change",function(b){var c=a(this),d=Q.get("fbFriends"),e,f=c.attr("checked");f?(c.val("true"),a("#fb-friend-invite-form .fb-friend-list .checkbox-input").attr("checked","checked")):(c.val("false"),a("#fb-friend-invite-form .fb-friend-list .checkbox-input:checked").removeAttr("checked"));for(e=0;e<d.length;e++)d[e].selected=f;Q.set("fbFriends",d)}).delegate("#fb-friend-invite-form","submit",function(b){b.preventDefault();var c=a("#fb-friend-invite-form .error"),d=Q.get("fbFriends"),e,f=[],g="My Klout score is "+N.user.score+", what's yours? Sign into Klout today and see where your influence ranks!";c.hide();for(e=0;e<d.length;e++)d[e].selected&&f.push(d[e].id);f.length?(N.mp.get("impression").track("invite_fb_friends"),br(g,function(a){N.mp.get("viralSubmit").track("mfs",{page:Q.get("mfsSource"),totalInvitesSent:a})},f,"mfs")):c.html("Please select some friends from below.").show()})}(),a("#connect-fb-page, #install-fan-tab").live("click",function(b){var c=a(this).hasClass("nux")?"nux":"editProfile";a(this).attr("id")=="install-fan-tab"&&(c="fanTab");var d=c=="fanTab"?"fb-fantab-install":"fb-page-accounts",e=a.ajax({url:"/api/fbpages/list",method:"GET",cache:!1,complete:function(){e=null},success:function(a){a.context=c,N.modal.show({id:d,content:a})},error:function(a){var b;a.status==404?b="You do not have any Facebook pages.":a.status==403?(b=null,location.href="http://www.facebook.com/dialog/oauth?&scope=offline_access,email,read_stream,manage_pages&response_type=token&client_id="+N.config.fbAppId+"&redirect_uri="+N.config.host+"/api/fbpages/perms_callback?context="+c):b="There was an error retrieving your Facebook pages.",b&&N.modal.show({id:"fb-page-accounts",content:{error:b}})}})}),a("#disconnect-fb-page").live("click",function(){N.modal.show({id:"disconnect-fb-page"})}),a("#unlink-service-fp").live("click",function(){N.modal.hide()});var bB=function(){var a={eventType:200,documentUrl:location.href};N&&N.user&&N.user.ksUID&&(a.ksUID=N.user.ksUID),window._kaq&&(_kaq.push(["setCustomData",a]),_kaq.push(["trackPageView"]))};a("body").delegate("#detail.klout-perks #navigation a","click",function(){x&&x.setTab(a(this).attr("class"))}),N.config.isPublic||function(){var b=a(window),c=a("#header"),d=a("#header-wrapper"),e=a("#main-wrapper"),f=d.offset().top,g=5;f==0?(d.removeClass("public"),e.removeClass("public"),b.scroll(function(){b.scrollTop()>f+g?c.addClass("scrolled"):c.removeClass("scrolled")})):b.scroll(function(){b.scrollTop()>f?(d.removeClass("public"),e.removeClass("public"),d.css({top:0})):(d.addClass("public"),e.addClass("public")),b.scrollTop()>f+g?c.addClass("scrolled"):c.removeClass("scrolled")})}(),a("body").delegate("#influencers .tabs li, #profile-lists .tabs li","click",function(){var b=a(this),e=b.index(),f=b.parent().parent(),g=f.find(".a-tab"),h="profile_"+(c.get("isOwnProfile")?"1st_":"3rd_");b.siblings().removeClass("active"),b.addClass("active"),g.removeClass("active"),a(g[e]).addClass("active");if(d.options.tab=="#influencers")h+=e?"influenced_by":"influencers";else if(d.options.tab="#lists")h+=e?"lists_added":"lists";N.activeTab=h,N.mp.get("impression").track(h,{username:c.get("nick")})}),function(){var b="Please sign your name here";a("body").delegate("#edit-profile-form .opt-out-link","click",function(){N.mp.get("optout").track("reg_settings_opt_click"),a("#profile-settings").hide(),a("#klout-benefits").show(),N.mp.get("optout").track("reg_benefits_page"),scrollTo(0,0)}).delegate("#klout-benefits .opt-out-link","click",function(){N.mp.get("optout").track("reg_benefits_opt_click"),a("#klout-benefits").hide(),a("#deactivate-account").show(),N.mp.get("optout").track("reg_opt_out_form"),scrollTo(0,0)}).delegate("#opt-out-signature","focus",function(c){var d=a(this);a.trim(d.val())==b&&d.val("")}).delegate("#opt-out-signature","blur",function(c){var d=a(this);a.trim(d.val()).length==0&&d.val(b)}).delegate("#deactivate-account-form .submit-link","click",function(c){N.mp.get("optout").track("reg_opt_out_confirm");var d=a("#deactivate-account-form .error"),e=a("#deactivate-account-form .radio-button[name=deactivate-reason]"),f=a.trim(a("#opt-out-signature").val());if(f.length==0||f==b)d.html("A signature is required").show();else if(e.serializeArray().length==0)d.html("A reason is required").show();else{d.hide();var g;g=a.ajax({url:"/api/optout/submitForm",type:"POST",data:{reasonCode:a("input:radio[name=deactivate-reason]:checked").val(),description:a("#deactivate-reason-text").val()},success:function(a){N.modal.show({id:"optOutConfirmation",callback:function(){window.location="/logout"}})},error:function(a){N.alert("There was an error opting out of Klout. Please try again or contact support at contact@klout.com.")},complete:function(a){g=null}})}}).delegate("#deactivate-account-form .cancel-link","click",function(b){N.mp.get("optout").track("reg_opt_out_cancel"),a("#deactivate-account").hide(),a("#profile-settings").show()}).delegate("#understand-klout .opt-out-link","click",function(a){N.mp.get("click").track("understand_klout_opt_out_link")})}(),function(){var b="Enter a Twitter handle",c=function(){a("#add-topic .user-search-form-container").hide(),a("#add-topic .error").hide(),a("#add-topic .target-user").show()},d=function(){var b=C.get("selectedResult");a("#add-topic .flash.error").hide(),a("#target-nick").val(b.nick),a("#target-service-id").val(b.twUid?1:2),a("#target-service-uid").val(b.twUid?b.twUid:b.fbUid),Q.set("addTopicTargetUser",b)},e=function(){C.unset("selectedResult").bind("change:selectedResult",d),a("#target-nick").val(""),a(".searchField").val(b),a("#add-topic .target-user").hide(),a("#add-topic .user-search-form-container").show()};a("body").delegate("#topic-content .add-topic-button","click",function(a){Q.set("topicToAdd",A.get("summary").topic_),N.modal.show({id:"add-topic",content:{isSelf:!0,topic:Q.get("topicToAdd"),user:N.user},callback:function(){C.unbind("change:selectedResult",d)}}),N.mp.get("click").track("add_topic_start",{location:"topic_page"}),N.mp.get("impression").track("add_topic_modal",{step:"confirm",topic:Q.get("topicToAdd"),user:"self"})}).delegate("#add-topic .search-link","click",e)}(),a("#add-topic-form").live("submit",function(b){b.preventDefault();var d=a(this),e=C.get("selectedResult"),f=a.trim(d.find("input[name=target-nick]").val()),g=f==N.user.nick,h=a.trim(d.find("input[name=target-service-id]").val()),i=a.trim(d.find("input[name=target-service-uid]").val());targetUser=g?N.user:Q.get("addTopicTargetUser"),topic=Q.get("topicToAdd");if(!f)return a("#add-topic .flash.error").text("Please select a valid user.").show();!i&&e&&e.nick==f&&(h=0,i=e.id),a("#add-topic-form .add-topic-cost, #add-topic-form .submit-button").remove(),N.view.renderSpinner("#content .tab.topics","large")();var j=topic.topic?encodeURIComponent(topic.topic):encodeURIComponent(topic.name);N.modal.hide(),a.ajax({url:"/apis/1/Topic.addTopic::::"+h+"::::"+i+"::::"+j,success:function(b){P(b,function(b,d){b?b=="topicActive"?(N.alert("<h3>Duplicate Topic</h3>Sorry, that user already has this topic."),N.mp.get("click").track("add_topic_confirm",{eligible:"duplicate_topic"})):(b=="invalidTopic"?N.mp.get("click").track("add_topic_confirm",{eligible:"invalid_topic"}):b=="insufficientPlusK"?N.mp.get("click").track("add_topic_confirm",{eligible:"insufficient_plusk"}):N.mp.get("click").track("add_topic_confirm",{eligible:"other"}),N.alert(N.view.renderUS("modal/add-topic-error",{error:b,topic:topic,targetUser:targetUser})),c&&c.trigger("refresh","topics")):(d.recentPlusKs&&bg(d.recentPlusKs),N.modal.show({id:"add-topic-viral",content:{isSelf:targetUser.nick&&targetUser.nick==N.user.nick,origin:location.hash.indexOf("/topics")>0?"profile_topics":"topic_page",topic_:topic,user:targetUser},callback:function(){!isNaN(+d.walletAmount)&&a(".plusk-wallet .assets").text(d.walletAmount),d.toasts&&N.toaster.add(d.toasts)}}),N.mp.get("impression").track("add_topic_modal",{step:"viral",topic:topic,user:targetUser}),c&&c.trigger("refresh","topics"),location.href="/#/"+targetUser.nick+"/topics",N.mp.get("click").track("add_topic_confirm",{eligible:"yes"}),N.mp.get("plusK").track("spend",{type:"add_topic"}))})},error:function(a){N.modal.show({id:"amphetamine-dialog",content:{message:"There was an error adding this topic. Please try again or contact support at contact@klout.com."}}),N.mp.get("impression").track("add_topic_modal",{step:"error",topic:topic,user:targetUser})}})}),a(".topic-search-container .add-topic").live("click",function(b){var d=a(this),e,f,g,h=a("#add-topic-form #target-nick").val(),i=Q.get("hovercardUsers"),j=d.parents(".topic-search-container"),k=C.get("selectedResult"),g=i&&i[h];g?(f=g.name&&g.name.split(" "),e={nick:h,firstName:f&&f[0],lastName:f&&f.length>1&&f[1],fbUid:g.fbUid||null,twUid:g.twUid||null}):c&&(g=c.toJSON(),f=g.bioData.name&&g.bioData.name.split(" "),e={nick:g.nick,firstName:g.bioData.firstName||g.bioData.first_name||f&&f[0],lastName:g.bioData.lastName||g.bioData.last_name||f&&f.length>1&&f[1],fbUid:g.bioData.facebook_id||null,twUid:g.bioData.id||null});if(k&&k.displayName&&k.slug&&k.name&&g&&d.hasClass("button-alt")){Q.set("topicToAdd",k);var l=g.topics&&_.find(g.topics,function(a){return a.topic_.topic==k.name});if(l){var m=g.isOwnProfile?"You already have this topic.":e.firstName+" already has this topic.";N.modal.hide(),N.alert(m)}else Q.set("addTopicTargetUser",e),d.parent().parent().find("#add-topic-form").submit(),N.modal.hide()}else j.find(".flash").show().html("Please select a valid topic from the search results.")}),a(".add-topic-invoke-search").live("click",function(b){b.preventDefault();var d=c&&c.toJSON(),e=a(this).parent().find(".user-object");if(e.length>0)N.modal.show({id:"add-topic-search",content:{isSelf:!1,serviceId:e.find("input[name=serviceId]").val(),serviceUid:e.find("input[name=serviceUid]").val(),user:{nick:e.find("input[name=nick]").val(),firstName:e.find("input[name=firstName]").val(),lastName:""}}}),a("#add-topic-search .searchfield").focus(),N.mp.get("click").track("add_topic_start",{location:"profile_hovercard"});else if(d){var f=d.fbOnly?2:1,g=d.fbOnly?d.bioData.facebook_id:d.bioData.id,h=d.bioData.name&&d.bioData.name.split(" "),i={nick:d.nick,firstName:d.bioData.firstName||d.bioData.first_name||h&&h[0],lastName:d.bioData.lastName||d.bioData.last_name||h&&h.length>1&&h[1]};N.modal.show({id:"add-topic-search",content:{isSelf:d.isOwnProfile,serviceId:f,serviceUid:g,user:i}}),a("#add-topic-search .searchfield").focus(),N.mp.get("click").track("add_topic_start",{location:"profile_page"})}else N.alert("Cannot add topic.");N.mp.get("impression").track("add_topic_modal",{step:"search"})}),a(".add-influencer-invoke-search").live("click",function(b){var d=a(this),e,f,g,h,i=d.closest(".badge-actions"),j=c&&c.toJSON();j&&c.get("isOwnProfile")&&!i.length?(e=j.fbOnly?2:1,f=j.fbOnly?j.bioData.facebook_id:j.bioData.id,g=j.bioData.name&&j.bioData.name.split(" "),h={nick:j.nick,firstName:j.bioData.firstName||j.bioData.first_name||g&&g[0],lastName:j.bioData.lastName||j.bioData.last_name||g&&g.length>1&&g[1]},N.modal.show({id:"add-influencer-search",content:{isSelf:j.isOwnProfile,serviceId:e,serviceUid:f,user:h}}),a("#add-influencer-search .searchfield").focus(),N.mp.get("impression").track("add_influencer_modal")):(i.length&&(N.addInfluencedBy=N.profileBadgeData&&N.profileBadgeData.nick),N.addInfluencedBy=N.addInfluencedBy||c&&c.get("nick"),location.href="/#/profile/influencers")}),a(".add-influencer-invoke-search-from-comparison").live("click",function(a){a.preventDefault(),N.modal.show({id:"add-influencer-search-from-comparison",content:{}})}),function(){a("body").delegate("#meta-info .add-user-dropdown .button-alt","click",function(b){var c=a(this).parents(".dropdown-menu");c.hasClass("active")?c.removeClass("active"):c.addClass("active")}).delegate("#main-wrapper","click",function(b){a(b.target).parents(".add-user-dropdown").length||a("#meta-info .add-user-dropdown .dropdown-menu").removeClass("active")}).delegate("#meta-info .add-user-dropdown .user-action","click",function(b){a(b.target).hasClass("action-link")||a(this).find(".action-link").click()}).delegate("#meta-info .add-user-dropdown .action-link","click",function(b){var c=a(this),d;c.hasClass("add-to-list")?d="add_list":c.hasClass("add-topic-invoke-search")?d="add_topic":c.hasClass("add-influencer-invoke-search")&&(d="add_soi"),V.get("click").track("unified_add_button",{type:d})})}();var bC;a("#dropdown-summary-user, #dropdown-menu").live("mouseenter",function(b){clearTimeout(bC),a("#dropdown-menu").show()}),a("#dropdown-menu a, #dropdown-summary-user").live("click",function(b){clearTimeout(bC),a("#dropdown-menu").hide()}),a("#dropdown-summary").live("mouseleave",function(b){bC=setTimeout(function(){a("#dropdown-menu").hide()},300)}),a("#dropdown-summary .subitem").live("click",function(){N.dropdownClick=!0}),a("#footer-dock .plusk-wallet").live("mouseenter",function(b){var c=a("#wallet-toaster"),d=c.outerHeight();c.css({bottom:-d+"px"}).stop().animate({bottom:0},{duration:300,easing:"swing"})}).live("mouseleave",function(b){var c=a("#wallet-toaster"),d=c.outerHeight();c.stop().animate({bottom:-d+"px"},{duration:300,easing:"swing"})}),a("#logo-notif").live("mouseenter",function(b){a("#header-glow").animate({opacity:1},200)}).live("mouseleave",function(b){a("#header-glow").animate({opacity:0},200)}),a("#block-user").live("click",function(a){V.get("click").track("block-link"),N.confirm("<h3>Block User</h3><p>Blocking this user means you won't be able to see each other on Klout. Are you sure?</p>",function(){c&&c.trigger("deleteItem",null,"blocked"),V.get("click").track("block-success")})}),a(".unblock-user").live("click",function(a){V.get("click").track("unblock"),y.trigger("unblockUser",this.id.replace("unblock-user-",""))}),a(document).keyup(function(a){a.keyCode==27&&N.modal.hide()})})(jQuery),function(a,b){var c,d,e=function(a){var d=c.get("client"),e=c.get("campaign");b.ajax({url:"/api/perk/"+d+"/"+e+"/addPerkUGC",success:function(a){a.havePerkAssets=!0,c.set(a)},error:function(a){}})};a=a||{},c=a.model=a.model||{},c.AddPerkUGC=Backbone.Model.extend({initialize:function(a){var b=this.get("client"),d=this.get("campaign");c=this,c.set({userName:a.name,havePerkAssets:!1}),e(a)}})}(amphetamine,jQuery),function(a,b){var c,d=function(a){b.ajax({url:"/api/addtolist/lists/"+a.get("addendum").twUid,success:function(b){a.set({lists:b.lists})},error:function(){a.set({lists:null})}})},e=function(a,b){var c=0,d=a.get("lists");while(d[c]){if(d[c].listId==b)return d[c];c++}},f=function(a,c,d){var f=a.get("addendum").twUid;b.ajax({url:"/api/list/"+c+"/"+d+"/"+f,type:"POST",success:function(b){var g=a.get("adds"),h=e(a,c);d=="add"?(g[c]=h.name,delete h.removed,h.isMember=h.added=!0):(delete g[f],delete h.added,h.isMember=!1,h.removed=!0),a.trigger("change:lists"),a.get("finished")&&a.trigger("finished"),b.lists&&a.set({lists:b.lists})}})},g=function(a,c){b.ajax({url:"/api/addtolist/finish",type:"POST",data:{twUid:a.get("addendum").twUid,lists:c.join("&")}})};a=a||{},c=a.model=a.model||{},c.AddToList=Backbone.Model.extend({initialize:function(){var a=this.get("addendum").twUid;this.set({adds:{}},{silent:!0}).bind("finished",function(){var a,b=[],c=this.get("adds");this.set({finished:!0});for(a in c)b.push(a+"="+c[a]),delete c[a];b.length&&g(this,b)}).bind("selected",function(a){f(this,a,"add")}).bind("deselected",function(a){f(this,a,"remove")}),d(this)}})}(amphetamine,jQuery),function(a,b){(function(){Date.prototype.toYMD=function(){var a=String(this.getDate()),b=String(this.getMonth()+1),c=String(this.getFullYear());return b.length==1&&(b="0"+b),a.length==1&&(a="0"+a),{year:c,month:b,day:a,full:c+b+a}}})();var c;a=a||{};var d=function(){_.each(c,function(a){a.abort()})},e=function(a,b,c){b&&(a=="user"?g.load(b,c):a=="topic"&&f.load(b,c))},f=function(){var a=function(a,e){d();var f=function(d,e){c.topic=b.ajax({url:"/topic/topic/"+a+".json",success:function(a){delete c.topic,a.id=d,a?(e.set({topic:a}),e.trigger("loaded:topic")):(e.set({topic:null},{silent:!0}),e.trigger("loaded:topic"))},error:function(){e.set({topic:null},{silent:!0}),e.trigger("loaded:topic")}})};c.topicId=b.ajax({url:"/api/topic/id/"+a,beforeSend:function(){e.trigger("loading:topic")},success:function(a){delete c.topicId,a?f(a,e):(e.set({topic:null},{silent:!0}),e.trigger("loaded:topic"))},error:function(){e.set({topic:null},{silent:!0}),e.trigger("loaded:topic")}})};return{load:a}}(),g=function(){var a=function(a,j){d();var k,l=function(d,j){d&&d.userData&&(d.userData.ksUID||d.userData.ksUid)?(d.userData.ksUid=d.userData.ksUID||d.userData.ksUid,c.profile=b.ajax({url:"/api/profile/"+d.userData.ksUid,success:function(a){delete c.profile,j.set({user:d.userData,scoreData:d.scoreData,profileInfo:a},{silent:!0}),j.trigger("loaded:user"),h(j),i(j),e(j),g(j),f(j)},error:function(){j.set({user:d.userData,scoreData:d.scoreData,profileInfo:null},{silent:!0}),j.trigger("loaded:user")}})):d.error=="disabled"?c.userIdLookup=b.ajax({url:"/admin/user/id/"+a,complete:function(){j.trigger("loaded:user")},success:function(a){delete c.userIdLookup,a.disabled=!0,j.set({user:a},{silent:!0})},error:function(){j.set({user:null},{silent:!0})}}):(j.set({user:null},{silent:!0}),j.trigger("loaded:user"))};isNaN(a)?/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/.test(a)?k="email":k="nick":k="ksuid",c.user=b.ajax({url:"/api/"+k+"/"+a+".json",beforeSend:function(){j.trigger("loading:user")},success:function(a){delete c.user,l(a,j)},error:function(){j.set({user:null},{silent:!0}),j.trigger("loaded:user")}})},e=function(a){var d=a.get("user");d.ksUid?c.userLists=b.ajax({url:"/profile/lists/"+d.ksUid,beforeSend:function(){a.trigger("loading:userLists")},complete:function(){a.trigger("loaded:userLists")},success:function(b){delete c.userLists,a.set({userLists:b})},error:function(){a.set({userLists:null})}}):a.set({userLists:null})},f=function(a){c.scoreDetails=b.ajax({url:"/api/score-dashboard/detail/"+a.get("user").ksUid+"/"+a.get("startDate").full+"/5",beforeSend:function(){a.trigger("loading:scoreDetails")},complete:function(){a.trigger("loaded:scoreDetails")},success:function(b){delete c.scoreDetails;var d,e;b.dates.sort(function(a,b){return d=new Date(a),e=new Date(b),d<e?-1:d>e?1:0}),a.set({scoreDetails:b},{silent:!0})},error:function(){a.set({scoreDetails:null},{silent:!0})}})},g=function(a){c.scoreOverview=b.ajax({url:"/api/score-dashboard/overview/"+a.get("user").ksUid,beforeSend:function(){a.trigger("loading:scoreOverview")},complete:function(){a.trigger("loaded:scoreOverview")},success:function(b){delete c.scoreOverview,a.set({scoreOverview:b},{silent:!0})},error:function(){a.set({scoreOverview:null},{silent:!0})}})},h=function(a){var d=a.get("user");d.nick&&(c.userSoi=b.ajax({url:"/admin/user/soi/"+d.nick+"/"+d.ksUid,beforeSend:function(){a.trigger("loading:userSoi")},complete:function(){a.trigger("loaded:userSoi")},success:function(b){delete c.userSoi,a.set({userSoi:b},{silent:!0})},error:function(){a.set({userSoi:null},{silent:!0})}}))},i=function(a){var d=a.get("user"),e;if(d.twUid||d.fbUid)e=d.twUid?"/api/topics/tw/"+d.twUid:"/api/topics/fb/"+d.fbUid,c.userTopics=b.ajax({url:e,beforeSend:function(){a.trigger("loading:userTopics")},complete:function(){a.trigger("loaded:userTopics")},success:function(d){delete c.userTopics,b.isEmptyObject(d)&&(d=null),a.set({userTopics:d},{silent:!0})},error:function(){a.set({userTopics:null},{silent:!0})}})};return{load:a,loadSoi:h,loadLists:e,loadScoreDetails:f,loadScoreOverview:g,loadTopics:i}}();a.model.Admin=Backbone.Model.extend({initialize:function(){var a=new Date,b=this;_.bindAll(b),a.setDate(a.getDate()-5),b.set({startDate:a.toYMD()});for(var d in c)c[d].abort();c={},b.bind("change:startDate",function(){g.loadScoreDetails(b)}).bind("page",function(a,c){e(a,c,b)})}})}(amphetamine,jQuery),function(a,b){a=a||{},a.model=a.model||{},a.view=a.view||{};var c=null,d=function(a){return a&&a.compareUserPair},e=function(a){return a&&a.status&&a.status=="error"&&a.error=="limitReached"},f=function(a,b){a.compareUserPair.lastPair=b,this.set(a,{silent:!0}),this.trigger(m.events().changeData)},g=function(a,b){var c={};c.compareUserPair=a,c.compareUserPair.lastPair=b,this.set(c,{silent:!0
}),this.trigger(m.events().errorLimitReached)},h=function(a){d(a)?f.call(this,a,null):e(a)?g.call(this,{},null):this.trigger(m.events().error)},i=function(a,b){d(a)?f.call(this,a,b):e(a)?g.call(this,b,b):this.trigger(m.events().error)},j=function(){this.set({compareUserPair:null},{silent:!0}),this.trigger(m.events().error)},k=!1,l=null,m=a.model.Compare=Backbone.Model.extend({initialize:function(){},getCompareUserPair:function(){if(k)return!1;k=!0;var a=this;a.trigger(m.events().loadingInitial),b.ajax({url:"/api/compare_feedback/user_pair",cache:!0,success:function(b){k=!1,h.call(a,b)},error:function(b){k=!1,j.call(a)}})},addCompareUserPair:function(a){var c=this,d={subject1Id:a.pair[0].ksUid,subject2Id:a.pair[1].ksUid,token:a.token,bucket:a.bucket,dayCount:a.dayCount};a.result=="skip"?d.result="skip":d.result=a.pair[a.result].ksUid,b.ajax({type:"POST",data:d,url:"/api/compare_feedback/user_pair",cache:!1,success:function(b){i.call(c,b,a)},error:function(a){j.call(c)}})}},{events:function(){return{loadingInitial:"loading:initial",loading:"loading:",changeData:"change:compareUsersModal",error:"change:compareUsersModalError",errorLimitReached:"change:compareUsersModalLimitReached"}},startCompareUserPair:function(){c||(c=new a.model.Compare),l||(l=new a.view.CompareView({model:c})),l.bindEvents(),c.getCompareUserPair()},startCompareUserBanner:function(){c||(c=new a.model.Compare);var b=new a.view.CompareBannerView({model:c});c.getCompareUserPair()},startCompareUserDashboard:function(b){c||(c=new a.model.Compare),b=b||[];var d=new a.view.CompareDashboardView({model:c,users:b});c.getCompareUserPair()},stopCompareUserPair:function(){}})}(amphetamine,jQuery),function(a,b){var c,d,e=function(c,d){var e=a.user=a.user||{};if(e.scoreData&&e.bioData)return d({scoreData:e.scoreData,bioData:e.bioData,graphData:e.graphData});b.ajax({url:"/api/compare",success:function(a){a&&(e.scoreData=a.scoreData,e.bioData=a.bioData,e.graphData=a.graphData,e.kClass=a.kClass),d(a)},error:function(a){d}})},f=function(a,b){i(a),b&&(h(a),j(a),k(a),m(a),l(a))},g=function(c){if(a.user.onboardingInfo)return c(a.user.onboardingInfo);b.ajax({url:"/api/onboarding/status",success:function(a){c(a)},error:c})},h=function(a){b.ajax({url:"/dashboard/lists",cache:!1,success:function(b){lists=b&&b.lists,a.set({listCount:b.count,lists:lists&&lists.length?lists:null})},error:function(b){a.set({lists:null})}})},i=function(a){b.ajax({url:"/api/score/insight",success:function(b){a.set({scoreInsights:b},{silent:!0}),a.trigger("change:scoreInsights")},error:function(b){a.set({scoreInsights:null})}})},j=function(a){b.ajax({url:"/api/influenced_by_and_topics/"+a.get("nick"),cache:!1,success:function(b){a.set(b,{silent:!0}),a.trigger("change:suggestedInfluencers")},error:function(b){a.set({influencedBy:null}),a.trigger("change:suggestedInfluencers")}})},k=function(a){b.ajax({url:"/topic/contentRandom.json",cache:!1,success:function(b){a.set(b,{silent:!0}),a.trigger("change:surfacedContent")},error:function(b){a.set({topContent:null,topic_:null}),a.trigger("change:surfacedContent")}})},l=function(c){b.ajax({url:"/api/soi/influencers/"+a.user.nick,cache:!1,success:function(a){c.set(a,{silent:!0}),c.trigger("change:compareUsersDashboard")},error:function(a){c.set({compareUserPair:null},{silent:!0}),c.trigger("change:compareUsersDashboard")}})},m=function(a){b.ajax({url:"/dashboard/upcomingPerk",cache:!1,success:function(b){var c=b&&b.upcomingPerk;a.set({upcomingPerk:c?c:null})},error:function(b){a.set({upcomingPerk:null})}})};a=a||{},c=a.model=a.model||{},c.Dashboard=Backbone.Model.extend({initialize:function(){var b,c,e,h=1,i=this,j=this.get("authUser");i.set({nick:j.nick}),typeof a.user.liUid=="undefined"&&i.set({noLinkedIn:!0}),d=i.get("notifsModel");var k=function(a){var c,d,f=i.get("checklist"),g={};"connectedTwitter"in a&&(g.connectedTwitter=a.connectedTwitter),"connectedFacebook"in a&&(g.connectedFacebook=a.connectedFacebook),"profileVisits"in a?g.visitedProfile=a.profileVisits:a.visitedProfile&&(g.visitedProfile=!0),"isFollowingKlout"in a&&(g.isFollowingKlout=a.isFollowingKlout),"likesKlout"in a&&(g.likesKlout=a.likesKlout),"hasSharedScore"in a&&(g.hasSharedScore=a.hasSharedScore);if(f){for(c in f)c in g?g[c]!=f[c]&&(d=!0):g[c]=f[c];for(c in g)if(!(c in f)){d=!0;break}}else d=!0;e=g.connectedTwitter&&g.connectedFacebook&&g.isFollowingKlout&&g.hasSharedScore&&g.likesKlout&&g.visitedProfile,i.get("isOnboarded")!=e&&i.set({isOnboarded:e}),d&&i.set({checklist:g}),h+=a.visitedDashboard?1:a.dashboardVisits||0,b=h<4&&!e,b!==i.get("isNewUser")&&i.set({isNewUser:b})};g(function(a){a&&k(a),i.bind("onboarding",function(a){k(a)}).bind("dashRoute",function(a){f(i,a)})})},url:function(){return this.get("token")+"/dashboard/"}})}(amphetamine,jQuery),function(a,b){var c,d,e=function(a,c){c=c||a.get("listId"),b.ajax({url:"/list/edit/"+c,cache:!1,success:function(b){a.set({name:b.name,description:b.description,users:b.users})},error:function(){a.trigger("error","Invalid listId")}})},f=function(a){var c=[],e=a.get("users");listId=a.get("listId");if(d)return;e&&b.each(e,function(a,b){b&&c.push(b.twUid)}),c.length>0?d=b.ajax({url:"/list/edit",type:"POST",data:{users:c+"",listId:a.get("listId"),name:a.get("name"),description:a.get("description")},success:function(b){var e=b.list_id?b.list_id==listId?"listEdited":"listCreated":"listDeleted";a.trigger(e,b.list_id,c&&c.length),d=null},error:function(){a.trigger("error",listId?"Failed to save list":"Failed to create list"),d=null}}):a.set({saveStatus:"Your list can't be empty!"})},g=function(a,c){var d=[],e=a.get("users")||[];displayUsers=[],b.each(e,function(a,c){b.inArray(c.twUid,d)==-1&&d.push(c.twUid)});if(!c||c.length>15||/\W/.test(c)){a.set({searchStatus:"Invalid username!"});return}b("#add-user").hide(),b("#listed-user-loading").show(),b.ajax({url:"/api/list/user/find/"+c,success:function(c){c&&(b.inArray(c.twUid,d)>=0?a.set({searchStatus:"Already added!"}):(e.push(c),a.unset("users",{silent:!0}).set({users:e})))},error:function(){a.set({searchStatus:"User not found!"})}},function(){b("#listed-user-loading").hide(),b("#add-user").show()})};a=a||{},c=a.model=a.model||{},c.EditList=Backbone.Model.extend({initialize:function(){var a=this.get("listId"),b=this.get("addendum");a?e(this,a):this.set({users:[]}),this.bind("addUser",function(a){var b=this.get("users");this.set({saveStatus:""}),g(this,a)}).bind("newSearch",function(){this.set({searchStatus:""},{silent:!0})}).bind("textChange",function(a,b){var c={};c[a]=b,this.set(c,{silent:!0})}).bind("saveList",function(){f(this)}).bind("removeUser",function(a){var b=0,c=this.get("users");while(c[b]){if(c[b].twUid==a){c.splice(b,1);break}b++}this.trigger("change")}),b&&this.trigger("addUser",b.nick)}})}(amphetamine,jQuery),function(a,b){var c,d;a=a||{};var e=function(){var a=function(){d.bind("page",function(){!c&&f()}).unbind("change:network",a)};d.unbind("page").bind("change:network",a)},f=function(){var a,f,g,h=d.get("friends"),i=d.get("network"),j=d.get("sortByScore");if(!i)return f=d.get("authUser"),f.twUid?i="tw":f.fbUid&&(i="fb"),d.set({network:i});g="/api/friendlist/"+i,a={page:h?h[h.length-1][i+"Uid"]:0},j[i]&&(a.sort=1),c&&c.abort(),c=b.ajax({url:g,data:a,complete:function(){d.trigger("loadingFriends",c=null)},error:e,success:function(a){var b=a.friends||a.tw||a.fb;d.unset("error"),i=a.tw?"tw":a.fb?"fb":i,a.size&&(a[i+"Count"]=a.size),a.twCount&&d.set({twCount:a.twCount}),a.fbCount&&d.set({fbCount:a.fbCount}),d.set({network:i}),!b.length||a[i]&&a[i].error?((!h||!h.length)&&d.set({error:!0,friends:null}),e()):(d.set({network:i}),h?(h.push.apply(h,b),d.trigger("change:friends")):d.set({friends:b}))},routeChange:function(a,b,c){(b!="friends"||c[0]&&c[0]!=i)&&a.abort()}}),d.trigger("loadingFriends",!0)},g=function(){b.ajax({url:"/api/friendlist/lists",success:function(a){a.createdLists&&d.set({createdLists:a.createdLists})}})};a.model.FriendList=Backbone.Model.extend({initialize:function(){var a=this.get("authUser");d=this.bind("page",function(){!c&&f()}).bind("change:network",function(){this.unset("friends",{silent:!0}).trigger("change:friends"),f()}).bind("listChange",g).bind("sort",function(a){d.get("sortByScore")[this.get("network")]=a,this.trigger("change:network")}).set({sortByScore:{tw:!1,fb:!1}}),f(),g()}})}(amphetamine,jQuery),function(a,b){var c,d,e=function(a){b.ajax({url:"/api/list/import/lists",success:function(b){a.set({lists:b.lists})},error:function(){a.set({lists:null})}})},f=function(a){var c=a.get("selectedList"),e=c.id,f=c.description,g=c.name;b.ajax({url:"/api/list/import",type:"POST",data:{id:e,description:f,name:g},success:function(b){var c=b.twitterListId,e=b.listId,f=b.slug;e&&c==d&&a.trigger("listCreated",e,f,b.size)},error:function(){a.set({selectedList:b.extend({error:!0},c)})}})};a=a||{},c=a.model=a.model||{},c.ImportList=Backbone.Model.extend({initialize:function(){e(this),this.bind("listSelected",function(a,b,c){d=a,this.set({selectedList:{name:b,id:a,description:c}}),f(this)})}})}(amphetamine,jQuery),function(a,b){var c,d,e=function(a){var f,g=c.get("nick"),h=c.get("friends"),i=c.get("dupes")||0;a=a||c.get("listId"),d||(c.trigger("networkActivity",!0),f="/list/view/"+(g?g+"/":"")+a,d=b.ajax({url:f,cache:!1,data:{start:h&&h.length+i},complete:function(a){c.trigger("networkActivity",!1)},success:function(a){var f=0,g,j=c.get("authUser"),k=a.createdBy,l=a.friends;a.isOwnProfile=j&&k&&j.twUid==k.twUid;if(a.redirect)return c.trigger("redirect",a.redirect);if(h)if(l&&l.length){g=[],h=h.slice();for(;h[f];f++)g.push(h[f].nick);for(f=0;l[f];f++)b.inArray(l[f].nick,g)<0?h.push(l[f]):c.set({dupes:i+=1},{silent:!0});c.set({friends:h})}else c.unbind("fetchListMembers",e);else c.set(a).bind("fetchListMembers",e);d=null},routeChange:function(b,c,d){if(c!="userList"||d[1]!=a)b.abort(),b=null}}))};a=a||{},a.model=a.model||{},a.model.List=Backbone.Model.extend({initialize:function(){var a;c=this,nick=c.get("nick"),a=c.get("listId"),e(a),c.bind("list",function(a,b){var f=c.get("createdBy");d&&d.abort(),d=null,f&&b!=f.nick&&(c.unset("createdBy"),c.unset("createdLists")),c.unset("friends").unset("name").unset("date").unset("dupes").unset("description").unbind("fetchListMembers",e).set({nick:b,listId:a}),e(a)})},getMemberNicks:function(){var a=0,b=[],d=c.get("friends");while(d[a])b.push(d[a].nick),a++;return b}})}(amphetamine,jQuery),function(a,b){var c=a.amphetamine=a.amphetamine||{},d=c.model=c.model||{},e,f,g,h;c.user=c.user||{};var i=function(a){var b;e?b="/api/score/insights/1/"+e:f&&(b="/api/score/insights/2/"+f),$.ajax({url:b,cache:!1,success:function(b){a.set({scoreInsights:b},{silent:!0}),a.trigger("change:scoreInsights")},error:function(b){a.set({scoreInsights:null})},routeChange:G(a)})},j=function(a,b,d){var e,f,g=c.user,h=d.get("isOwnProfile"),i=d.get("isLoggedIn"),j=b&&b.fbUid&&!b.twUid;b&&(b.isOwnProfile=h),d.set({fbOnly:j,authData:a,userData:b||null,isOwnProfile:h,ksUid:b?b.ksUID:d.get("ksUid"),twUid:b?b.twUid:d.get("twUid"),fbUid:b?b.fbUid:d.get("fbUid"),kSquadId:b&&b.kSquadId||null}),e=d.get("scoreData"),e&&(f=e&&e.kClass,h&&f&&(c.user.kClass=f),d.set({kClassDescription:f&&c.kClasses[f].description,kClass:f})),m(d),k(d),p(d),!d.get("bioData")&&n(d)},k=function(a){var b=!1;e?b="/api/influentialabout/tw/"+e:f&&(b="/api/influentialabout/fb/"+f),b&&($.ajax({url:b,complete:function(a){$("#influentialAboutLoading").hide()},success:function(b){_.isEmpty(b)&&(b=null),a.set({influentialAbout:b})},error:function(){a.set({influentialAbout:null})},routeChange:G(a)}),a.trigger("loading:influentialAbout"))},l=function(a,b,c){var d=!1;e?d="/api/topics/tw/"+e:f&&(d="/api/topics/fb/"+f),d?$.ajax({url:d,data:b,success:function(b){if(c)return c(b);a.set({topics:b})},error:function(){a.set({topics:null})},routeChange:G(a,"topics")}):a.set({topics:null})},m=function(a){var b="/api/influencerof/"+a.get("nick");$.ajax({url:b,cache:!a.get("isOwnProfile"),success:function(b){a.set(b)},error:function(){a.set({influencerOf:null})},routeChange:G(a)}),a.trigger("loading:influencerOf")},n=function(a){e?$.ajax({url:"/api/bio/"+e,success:function(b,d,e){b.connectedServices=c.config.profileInfo&&c.config.profileInfo.connectedServices,a.set({bioData:b}),a.get("isOwnProfile")&&(c.user.bioData=b)},routeChange:G(a)}):f&&$.ajax({url:"/api/fb/bio/"+f,success:function(b,d,e){b=b.data,b.name=b.first_name+" "+b.last_name,b.profile_image_url=b.pictureLarge,b.connectedServices=c.config.profileInfo&&c.config.profileInfo.connectedServices,a.set({bioData:b}),a.get("isOwnProfile")&&(c.user.bioData=b)},routeChange:G(a)})},o=function(a){var b,d=a.get("isOwnProfile"),e=a.get("scoreData"),f=a.get("bioData");if(!f)return b=function(){o(a),a.unbind("change:bioData",b)},a.bind("change:bioData",b);var g={userName:a.get("nick"),kloutScore:e.klout_score_norm,network:e.network_norm,amplification:e.amplification_norm,trueReach:e.true_reach},h=["kloutScore","network","amplification","trueReach"],i={},j={};_.each(h,function(a){var b="According to @Klout, @"+g.userName+" ",e="",h=g[a];_.each(c.rangeMessages[a].messages,function(a){a.min<=h&&h<=a.max&&(e=d?a.message:f.name+" "+a.viralMessage,b+=a.viralMessage)}),i[a]=e,j[a]=b}),e.rangeText=i,e.viralText=j,a.unset("scoreData").set({scoreData:e})},p=function(a){var b=function(a,b){var c=new Array(a);while(--a>=0)c[a]=b;return c},d=function(a,b){var c=""+b;while(c.length<a)c="0"+c;return c},f,g=a.get("userData"),h=g&&g.ksUID;e?f="/history/"+e:c.user.ksUID&&(f="/history/ks/"+h),$.ajax({url:f,routeChange:G(a),success:function(e,f,g){var h={},j=e.klout_score.slice().reverse(),k=a.get("scoreData"),l=k.klout_score_norm,m=a.get("isOwnProfile"),n="",o={},p=c.deltaMessages,q;l=l||Math.round(j[0]);var r=["amplification","dates","klout_score","network","true_reach"];_.each(r,function(a){if(e[a].length>30)e[a]=e[a].slice(e[a].length-30);else if(e[a][0]&&e[a].length<30)if("dates"==a){var c=new Array(30-e[a].length,0),f=864e5,g=e[a][0].toString();g=new Date(g.substring(0,4)+"/"+g.substring(4,6)+"/"+g.substring(6,10)),g=g.getTime();for(var h=0;h<30-e[a].length;h++){var i=new Date(g-h*f);c[h]=i.getFullYear().toString()+d(2,(i.getMonth()+1).toString())+d(2,i.getDate().toString())}e[a]=c.reverse().concat(e[a])}else{var c=b(30-e[a].length,0);e[a]=c.concat(e[a])}}),h.scoreDelta1=Math.round(l-(j[1]||j[j.length-1])),h.scoreDelta5=Math.round(l-(j[4]||j[j.length-1])),h.scoreDelta30=Math.round(l-(j[29]||j[j.length-1])),h.scoreDelta30<0?o.thirty=0:h.scoreDelta30==0?o.thirty=1:h.scoreDelta30>0&&(o.thirty=2),h.scoreDelta5<0?o.five=0:h.scoreDelta5==0?o.five=1:h.scoreDelta5>0&&(o.five=2),m?o.person=0:o.person=1,q=p[o.thirty][o.five][o.person],h.summary=q,e.deltaData=h,a.set({graphData:e}),m&&(c.user.graphData=e),i(a)}})},q,r=function(a){var b=a.get("listMemberships"),c=b&&b.lists;e?q||(q=$.ajax({url:"/profile/lists/memberships/"+e,cache:!1,data:{start:c&&c.length},routeChange:G(a,"lists"),success:function(d){var e,f=0;if(b&&d.lists&&d.lists.length){e=[];for(;c[f];f++)e.push(c[f].listId);for(f=0;d.lists[f];f++)$.inArray(d.lists[f].listId,e)<0?c.push(d.lists[f]):a.set({listMembershipCount:a.get("listMembershipCount")-1});d.end&&a.unbind("fetchListMemberships",h),a.trigger("change:listMemberships")}else a.set({listMembershipCount:d.count,listMemberships:d&&d.lists&&d.lists.length?d:null})},error:function(d){b?a.set({listMembershipCount:c&&c.length}):a.set({listMemberships:null}),a.unbind("fetchListMemberships",h)},complete:function(){q=null}})):a.set({listMemberships:null})},s=function(a){var b=a.get("userData"),c=b&&b.ksUID;c?$.ajax({url:"/profile/lists/"+c,cache:!1,routeChange:G(a,"lists"),success:function(b){var c=b&&b.lists;a.set({lists:c&&c.length?c:null})},error:function(b){a.set({lists:[]})}}):a.set({lists:[]}),r(a)},t=function(a){var b,d,f,g,h,i,j=a.get("influencers"),k=function(){var b={},d=c.kClasses;$.each(f,function(a,c){var d=b[c.kClass]=b[c.kClass]||[];d.length<4&&b[c.kClass].push(c)}),f=b,b=[],$.each(d._ordered,function(a,c){b.push({id:c,name:d[c].name,users:f[c]})}),a.set({kClassified:b})};if(typeof j=="undefined")return i=function(){t(a),a.unbind("change:influencers",i)},a.bind("change:influencers",i),u(a);g=[],f=function(){var b=[],c=a.get("scoreData");return c&&b.push({nick:a.get("nick"),twUid:e,kScore:c.klout_score_norm,kClass:c.kClass}),b}(),h=function(a,b){!b.hidden&&b.nick&&$.inArray(b.nick,g)<0&&(f.push({nick:b.nick,twUid:b.twUid,ksUid:b.ksUid,fbUid:b.fbUid,kScore:b.kScore,kClass:b.kClass,name:b.name}),g.push(b.nick));if(f.length==d)return!1},d=f.length+5,j.influencedBy&&$.each(j.influencedBy,h),d=f.length+5,j.influencerOf&&$.each(j.influencerOf,h),k()},u=function(a){$.ajax({url:"/api/soi/influencers/"+a.get("nick"),cache:!a.get("isOwnProfile"),routeChange:G(a,"influencers","kloutstyle"),success:function(b){a.set({influencers:b})},error:function(){a.set({influencers:{influencerOf:null,influencedBy:null}})}})},v=function(a){var b=a.get("userData");$(".tab.perks").html($('<img id="perksUGCLoading" src="'+c.config.staticServer+'images/loading-small.gif">')),$.ajax({url:"/api/getPerksUGC/",data:{userId:b&&b.ksUID,page:0},routeChange:G(a,"perks"),success:function(b){if(b){var c=[];if(b.userPerks!=null&&b.ugc!=null)for(var d=0;d<b.userPerks.length;d++){var e=!0;for(var f=0;f<b.ugc.length;f++)b.userPerks[d].campaignId==parseInt(b.ugc[f].campaignId)&&(e=!1);e&&c.push(b.userPerks[d])}else b.userPerks!=null&&(c=b.userPerks);a.set({userId:b.userId||"",perksToPromptFor:c,perkInfos:b.perkInfos||"",perksUGCUsers:b.users||"",influencerOfs:[],userPerks:b.userPerks||"",perksUGC:{}||""}),a.trigger("updatePerksUGC")}},error:function(){a.set({perksUGC:null,perkInfos:null,perksUGCUsers:null,influencerOfs:[],userPerks:null,userId:null,perksToPromptFor:null})}})},w=function(a,b){var c=a.get("nick"),d=a.get("userData"),e=d?d.ksUID:0;if(c){var f=[],g=[],h;$.ajax({url:"/api/user/ksAchievements/"+c,routeChange:G(a,"achievements"),success:function(c,d,e){c&&(c.achievement_id&&(c=[c]),g=_.select(c,function(a){return a.legacy==0}),f=_.select(c,function(a){return a.legacy==1}),h=_.size(g)+_.size(f)>0,c={ksAchievementsData:{firstName:a.get("bioData").firstName,count:_.size(g),hasAchievements:h,achievements:g}},f&&f.length>0&&(c.ksAchievementsData.legacy=f),b?b(c):a.set(c))},error:function(){data={ksAchievementsData:{firstName:a.get("bioData").firstName,hasAchievements:!1,achievements:g,legacy:f}},b?b(data):a.set(data)}})}},x=function(a){var b=a.get("ksUid");$.ajax({url:"/api/compare/"+b+"/chart",routeChange:G(a,"comparison"),success:function(b){b&&b.graphData&&(b=b.graphData,b.dates.length>30&&(b.dates=b.dates.slice(b.dates.length-30)),b.klout_score.length>30&&(b.klout_score=b.klout_score.slice(b.klout_score.length-30)),a.set({comparisonChartData:b}))},error:function(a){console.log("error: ",a)}})},y=function(a){var b=a.get("ksUid");$.ajax({url:"/api/compare/"+b+"/networks",success:function(b){b&&a.set({comparisonNetworksData:b})},routeChange:G(a,"comparison")})},z=function(a,b){var c=0,d=0;if(b.authUserTopics&&b.authUserTopics.length)for(var e=0;e<b.authUserTopics.length;e++)c+=b.authUserTopics[e].plusKs;if(b.profileTopics&&b.profileTopics.length)for(var e=0;e<b.profileTopics.length;e++)d+=b.profileTopics[e].plusKs;a.set({comparisonTotalPlusKData:{authUserTotalPlusK:c,profileTotalPlusK:d}})},A=function(a){var b=function(a){var b=[],c={authUser:[],profile:[]};if(a.authUserTopics&&a.authUserTopics.length&&a.profileTopics&&a.profileTopics.length){for(var d=0;d<a.authUserTopics.length;d++)for(var e=0;e<a.profileTopics.length;e++)a.authUserTopics[d].id==a.profileTopics[e].id&&(b.push(a.authUserTopics[d]),c.authUser.push(d),c.profile.push(e));for(var d=0;d<c.authUser.length;d++)a.authUserTopics.splice(d,1);for(var d=0;d<c.profile.length;d++)a.profileTopics.splice(d,1)}return{myTopics:a.authUserTopics,theirTopics:a.profileTopics,shared:b.length?!0:!1,sharedTopics:b}},d=a.get("ksUid"),e=a.get("twUid")?"tw":"fb",f=a.get("twUid")||a.get("fbUid"),g=c.user.twUid?"tw":"fb",h=c.user.twUid||c.user.fbUid;$.ajax({url:"/api/compare/"+d+"/topics",data:{authUserServiceUid:h,authUserServiceShortName:g,authUserKsUid:c.user.ksUID,profileServiceUid:f,profileServiceShortName:e,profileKsUid:d},routeChange:G(a,"comparison"),success:function(c){var e;c&&($.ajax({url:"/api/compare/"+d+"/soi",data:{profileNick:a.get("nick")},success:function(b){a.set({comparisonTopicsAndSoiData:{comparisonTopicsData:e,comparisonSoiData:b}})},error:function(a){},routeChange:G(a,"comparison")}),e=b(c),z(a,c))},error:function(a){console.log("error: ",a)}})},B=function(a){var b=a.get("comparisonChartData"),c=a.get("comparisonNetworksData"),d=a.get("comparisonTopicsAndSoiData");a.trigger("loadComparison"),b?a.trigger("change:comparisonChartData"):x(a),c?a.trigger("change:comparisonNetworksData"):y(a),d?a.trigger("change:comparisonTopicsAndSoiData"):A(a)},C=function(a,b){if(a.get("isOwnProfile")){if(!a.get("canAddInfluencers"))return c.alert("You can currently only display up to 20 of your own influencers at this time.");if(a.get("nick")==b)return c.alert("You can not add yourself as your own influencer!");$("div.influenced-by").append($('<img id="soiAdding" src="'+c.config.staticServer+'images/loading-small.gif">')),$.ajax({url:"/soi/add",type:"POST",data:{username:b},complete:function(){$("#soiAdding").hide()},success:function(b){var d,e,f=a.get("hiddenSoi"),g;b.error==404?a.set({influencedBySearchStatus:"User not found!"}):b.error==500?c.alert("An error occurred."):b.error==403?(c.alert("You can currently only display up to 20 of your own influencers at this time."),a.set({canAddInfluencers:!1})):(e=b.addedUser,g=b.nick,delete b.addedUser,delete b.nick,a.set(b),c.modal.show({id:"influencer-added",content:{nick:g,screenName:e}}))}})}},D=function(a,b,d,e){var f,g,h=a.get("isOwnProfile");e=e||"delete";if(d=="influencer_of"||d=="influenced_by"){f=a.get("influencers"),g=E(d=="influenced_by"?f.influencedBy:f?f.influencerOf:a.get("influencerOf"),b),b=[];if(!g)return;g.ksUid&&b.push("ksUid="+g.ksUid),g.twUid&&b.push("twUid="+g.twUid),g.fbUid&&b.push("fbUid="+g.fbUid),b=b.join("&")}else d=="blocked"&&(b=[],!a.get("ksUid"),a.get("twUid")&&b.push("twUid="+a.get("twUid")),a.get("fbUid")&&b.push("fbUid="+a.get("fbUid")),b=b.join("&"));(h&&(d=="topics"||d=="influencer_of"||d=="influenced_by")||!h&&d=="blocked")&&$.ajax({url:"/user/item/"+e,type:"POST",data:{item:b,type:d},success:function(b){d=="influencer_of"||d=="influenced_by"?(a.set({influencerOf:"influencerOf"in b?b.influencerOf:a.get("influencerOf")}),a.set({influencers:"influencers"in b?b.influencers:a.get("influencers")},{silent:!a.get("influencers")})):d=="topics"?(typeof b.topics!="undefined"&&a.set({topics:b.topics}),typeof b.influentialAbout!="undefined"&&a.set({influentialAbout:b.influentialAbout})):(d="blocked")&&c.alert("This user is now blocked. Manage blocked users in your privacy settings.",function(){location.replace("/#/profile")})},error:function(a){c.alert("There was an error deleting this item. Please try again or contact support.")}})},E=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c].nick==b)return a[c];for(c=0;c<d;c++)if(a[c].fbUid==b)return a[c]},F=function(a){a.get("isOwnProfile")||$.ajax({url:"/achievementStats/increment/profileVisits/"+a.get("nick"),cache:!1,success:function(a){a.toasts&&c.toaster.add(a.toasts)}})},G=function(a){var b;return arguments.length>1&&(b=Array.prototype.slice.call(arguments,1)),function(c,d,e){var f,g,h=e[0]!=a.get("nick");if(!h&&b){h=!0;for(f=0,g=b.length;f<g;f++)if(e[1]==b[f]){h=!1;break}}h&&c.abort()}};d.Nick=Backbone.Model.extend({initialize:function(){this.bind("deleteItem",function(a,b){D(this,a,b,"delete")}).bind("undeleteItem",function(a,b){D(this,a,b,"undelete")}).bind("plusKed",function(a){var b=this,c=a.tid;a.nick.toLowerCase()==b.get("nick").toLowerCase()&&l(b,{refresh:1},function(a){a.influentialAbout&&b.set({influentialAbout:a.influentialAbout}),a.topics&&(b.set({topics:a.topics},{silent:!0}),b.trigger("topicPlusKed",c))})}).bind("addInfluencedBy",function(a){C(this,a)}).bind("fetchListMemberships",h=function(){r(this)}).bind("listChange",function(){s(this)}).bind("refresh",function(a){a=="topics"&&(c.view.renderSpinner("#content .tab.topics","small")(),l(this),k(this))}).set({maxTopics:c.config.maxTopics||Infinity}),$.ajax({url:"/api/nick/"+this.get("nick")+".json",context:this,routeChange:G(this),success:function(a,b,d){e=f=null;if(a.error=="disabled")return location.replace("/#/static/disabled");if(a.error==404||a.error_type==404||!a.userData)return location.replace("/#/static/notfound");e=a.userData.twUid,f=a.userData.fbUid,a.scoreData&&(this.set({scoreData:a.scoreData}),this.get("isOwnProfile")&&(c.user.scoreData=a),o(this)),a.bioData&&this.set({bioData:a.bioData}),a.userData.registered?j(this.get("authUser"),a.userData,this):(this.set({twUid:e,ksUid:a.userData.ksUid}),j(this.get("authUser"),null,this))}})},fetchContent:function(a){var b=this,d,e,f,g,h,i,j=this.get("userData");if(typeof j=="undefined")return e=function(){b.unbind("change:userData",e).fetchContent(a)},this.bind("change:userData",e);if(a=="comparison")b.get("ksUid")?B(b):(d=function(){B(b),b.unbind("change:ksUid",d)},b.bind("change:ksUid",d));else if(a=="activity")i=this.get("publicStream"),i&&i.set({id:j?j.ksUID:this.get("ksUid")});else if(a=="achievements"&&!this.get("achievementsData")&&!this.get("ksAchievementsData"))typeof this.get("bioData")=="undefined"?(g=function(){w(this),this.unbind("change:bioData",g)},this.bind("change:bioData",g)):w(this);else if(a=="influencers")this.get("influencers")||u(this);else if(a=="perks")this.get("perksUGC")||v(this);else if(a=="refreshPerksUGC")v(this);else if(a=="lists"&&typeof this.get("lists")=="undefined")typeof this.get("bioData")=="undefined"?(g=function(){s(this),this.unbind("change:bioData",g)},this.bind("change:bioData",g)):s(this);else if(a=="kloutstyle")t(this);else if(a=="topics"&&typeof this.get("topics")=="undefined"){if(typeof this.get("influentialAbout")=="undefined")return b=this,f=function(){b.unbind("change:influentialAbout",f).fetchContent("topics")},this.bind("change:influentialAbout",f);c.view.renderSpinner("#content .tab.topics","large")(),l(this)}},getTopicById:function(a){var b,c,d=this.get("topics");if(d)for(b=0,c=d.length;b<c;b++)if(d[b].id==a)return d[b]}})}(window),function(a,b){var c,d,e,f=function(){var a,b=0,d=[],e=c.get("notifs");if(e){while(a=e[b])a=k(a),a.status!="read"&&d.push(a.id),b++;d.length&&n(d,"read")}},g=function(a){d&&clearTimeout(d),h(["new","viewed","read"],function(a){a.notifs&&c.set({count:a.unreadCount,notifs:a.notifs},{silent:!0}),c.trigger("change:notifs"),d=setTimeout(o,c.get("interval"))},a)},h=function(d,f,g){e&&e.abort();var h={status:""+d,type:"notif"};g&&(h.limit=g),e=b.ajax({url:"/dashboard/notifs",data:h,cache:!1,success:function(b){b.timestamp&&c.set({timestamp:b.timestamp});if(f)return f(b);c.set({count:b.unreadCount,notifs:b.notifs}),b.toasts&&a.toaster.add(b.toasts),b.checkLottery&&a.checkLottery()}})},i=function(a){var b=0,d=c.get("notifs");if(d)while(d[b]){if(k(d[b]).id==a)return d[b];b++}},j=function(a){var b=0,d=[],e=c.get("notifs");if(e){a=","+a+",";while(e[b])a.indexOf(","+k(e[b]).status+",")>=0&&d.push(e[b]),b++}return d},k=function(a){for(var b in a)return a[b]},l=function(a){n((a+"").split(","),"read")},m=function(a){for(var b,c=[],d=0;a[d];d++)k(i(a[d])).status=="new"&&c.push(a[d]);c.length&&n(c,"viewed")},n=function(a,d){a&&a.length&&b.ajax({url:"/dashboard/notifs/changestatus",type:"POST",data:{notifIds:a,status:d},success:function(a){c.set({count:a.unreadCount,notifs:a.notifs,timestamp:a.timestamp},{silent:!0}),c.trigger("change:count")}})},o=function(){d&&clearTimeout(d),h(["new","viewed","read"],null,5),d=setTimeout(o,c.get("interval"))};a=a||{},a.model=a.model||{},a.model.Notifs=Backbone.Model.extend({initialize:function(){c=this,this.bind("perks",o).bind("notifsRead",l).bind("notifsViewed",m).bind("clearAll",f)},getNotifsByStatus:j,getNotifById:i,fetchAll:g,updateNotifs:o})}(amphetamine,jQuery),function(a,b){var c,d;a=a||{};var e=function(a,e){var g="/api/nux/friendlist",h=c.get("friends");if(d)return;a&&(g+="/"+a),e&&(g+="?c="+e,c.unbind("page")),d=b.ajax({url:g,success:function(a){if(h&&h.length)h.push.apply(h,a.friends),c.trigger("change:friends");else{"friendNetworks"in a&&c.set({friendNetworks:a.friendNetworks}),c.set({friendNetwork:a.friendNetwork},{silent:!0}),c.set({friends:a.friends});if(!a.friends)return c.trigger("friendError")}c.bind("page",f)},complete:function(){d=null},error:function(){e?c.bind("change:friendNetwork",function(){c.bind("page",f)}):c.trigger("friendError")}})},f=function(){var a=c.get("friends"),b=c.get("friendNetwork"),d=a[a.length-1][b+"Uid"];e(b,d)};a.model.Nux=Backbone.Model.extend({initialize:function(){var g=this.get("authUser"),h=0,i=a.config.systemMessage;b.each(a.config.shortNames,function(a,b){g[b+"Uid"]&&h++}),c=this,c.bind("friendList",function(a){c.set({friendNetwork:a})}).bind("change:friendNetwork",function(){d&&d.abort(),c.unset("friends"),e(c.get("friendNetwork"))}).bind("page",f).set({score:Math.max(1,Math.min(10,h))},{silent:h<2}),i&&(i.networkConnect?c.set({connectedNetwork:a.config.networks[i.network]}):i.nuxStart&&(c.set({start:!0}),e())),c.get("step")==2&&(g.twUid&&g.fbUid&&c.set({friendNetworks:2}),e())}})}(amphetamine,jQuery),function(a,b){var c,d;a=a||{},c=a.model=a.model||{};var e=function(a,d){var e=a&&d?"/api/perk/"+a+"/"+d:c.get("past")?"/api/perks/index/past":"/api/perks/index/current";b.ajax({url:e,success:function(e){e.content=e.content||null;if(e.status=="notopenyeteligible"||e.status=="notopenyetineligible")e.name+=" - Coming Soon!";b.ajax({url:"/api/profile",success:function(a){e.profileInfo=a,c.get("isOver18")==0&&(e.status="ineligible"),c.set(e),k()},error:function(b){a&&d&&c.set({status:"error",content:null})}})},error:function(b){a&&d&&c.set({status:"error",content:null})}})},f=function(d){console.log("form data:",d);var e=0,f=1,g=2,h=3;b.each(d,function(a,b){d[a].name=="birthday-month"?f=a:d[a].name=="birthday-day"?g=a:d[a].name=="birthday-year"?h=a:d[a].name=="email"&&(e=a)});if(0===b.trim(d[e].value).length)b("div#perksErrorList").html("<ul><li>Sorry, please enter your email address.</li></ul>");else if(!_.isString(d[e].value)||!/^(([A-Za-z0-9])|(\w[-\w\.\+]*[\w\+]))@([-A-Za-z0-9]+\.)+[A-Za-z]{2,4}$/.test(d[e].value))b("div#perksErrorList").html("<ul><li>Sorry, That doesn't look like a valid email address.</li></ul>");else{b("div#perksErrorList").html("");var j=c.get("profileInfo"),k=b("#save-information").attr("checked"),l={aboutServiceId:j.aboutServiceId,aboutText:j.aboutText,address:j.address||"",addressLine2:j.addressLine2||"",birthdayDay:d[g].value,birthdayMonth:d[f].value,birthdayYear:d[h].value,brand:j.brand,city:j.city||"",country:j.country||"",email:function(){return k?d[e].value:!k&&j.email==""?d[e].value:j.email}(),firstName:j.firstName||"",lastName:j.lastName||"",gender:j.gender||"",influencerType:function(){return j.brand&&j.brand.length?"brand":"individual"}(),picPref:j.profile_pic_service_id,phone:j.phone,state:j.state,zip:j.zip};k&&b.each(d,function(a,b){b.name!="email"&&(j[b.name]==undefined||j[b.name]==""||b.value!="")&&(b.name.indexOf("form-element-")!=-1?b.name.substring(13,b.name.length)=="firstname"?l.firstName=b.value:b.name.substring(13,b.name.length)=="lastname"?l.lastName=b.value:l[b.name.substring(13,b.name.length)]=b.value:l[b.name]=b.value)}),b.ajax({type:"POST",url:"/api/profile/edit",data:l,complete:function(a){},success:function(e){var j=0,k=3;b("#edit-profile-email").length&&(d.splice(0,1),b("form#perksOfferModalForm").children().slice(0,1).remove(),b("a#perks-offer-modal-submit-button-addAgeAndEmail").attr("id","perks-offer-modal-submit-button-addAge"));var l=new Date(a.config.now),m=new Date(e.dob);l.setMonth(l.getMonth()-216),m>l?(c.set({isOver18:!1}),a.modal.hide(),a.modal.show({id:"perk-underAge",content:{},callback:function(){location.href="/#/"+a.user.nick}})):!d[f].value.length||!d[g].value.length||!d[h].value.length?b("div#perksErrorList").html("<ul><li>Please enter a valid birthday</li></ul>"):(c.set({isOver18:!0}),d.splice(j,k),b("div.makeRoomForAlertBanner").removeClass("makeRoomForAlertBanner"),b("div#perksAlertBanner").remove(),b("form#perksOfferModalForm").children().slice(j,k+1).remove(),b("a#perks-offer-modal-submit-button-addAge").attr("id","perks-offer-modal-submit-button"),i(d))},error:function(a){b("div#perksErrorList").html("<ul><li>There was an error saving. Please try again.</li></ul>")}})}},g=function(d){console.log("form data:",d);var e=0,f=1,g=2;b.each(d,function(a,b){d[a].name=="birthday-month"?e=a:d[a].name=="birthday-day"?f=a:d[a].name=="birthday-year"&&(g=a)});if(d[e].value.length&&d[f].value.length&&d[g].value.length){b("div#perksErrorList").html
("");var h=c.get("profileInfo"),j=b("#save-information").attr("checked"),k={aboutServiceId:h.aboutServiceId,aboutText:h.aboutText,address:h.address||"",addressLine2:h.addressLine2||"",birthdayDay:d[f].value,birthdayMonth:d[e].value,birthdayYear:d[g].value,city:h.city||"",country:h.country||"",brand:h.brand,email:h.email||"",firstName:h.firstName||"",lastName:h.lastName||"",gender:h.gender||"",influencerType:function(){return h.brand&&h.brand.length?"brand":"individual"}(),phone:h.phone,picPref:h.profile_pic_service_id,state:h.state,zip:h.zip};j&&b.each(d,function(a,b){if(h[b.name]==undefined||h[b.name]==""||b.value!="")b.name.indexOf("form-element-")!=-1?b.name.substring(13,b.name.length)=="firstname"?k.firstName=b.value:b.name.substring(13,b.name.length)=="lastname"?k.lastName=b.value:k[b.name.substring(13,b.name.length)]=b.value:k[b.name]=b.value}),b.ajax({type:"POST",url:"/api/profile/edit",data:k,complete:function(a){},success:function(e){var f=new Date(a.config.now),g=new Date(e.dob);f.setMonth(f.getMonth()-216),g>f?(c.set({isOver18:!1}),a.modal.hide(),a.modal.show({id:"perk-underAge",content:{},callback:function(){location.href="/#/"+a.user.nick}})):(c.set({isOver18:!0}),d.splice(0,3),b("div.makeRoomForAlertBanner").removeClass("makeRoomForAlertBanner"),b("div#perksAlertBanner").remove(),b("form#perksOfferModalForm").children().slice(0,4).remove(),b("a#perks-offer-modal-submit-button-addAge").attr("id","perks-offer-modal-submit-button"),i(d))},error:function(a){b("div#perksErrorList").html("<ul><li>There was an error saving your birthday.  Please try again.</li></ul>")}})}else b("div#perksErrorList").html("<ul><li>Please enter a valid birthday</li></ul>")},h=function(a){var d=0;b.each(a,function(b,c){a[b].name=="email"&&(d=b)});if(0===b.trim(a[d].value).length)b("div#perksErrorList").html("<ul><li>Sorry, please enter your email address.</li></ul>");else if(!_.isString(a[d].value)||!/^(([A-Za-z0-9])|(\w[-\w\.\+]*[\w\+]))@([-A-Za-z0-9]+\.)+[A-Za-z]{2,4}$/.test(a[d].value))b("div#perksErrorList").html("<ul><li>Sorry, That doesn't look like a valid email address.</li></ul>");else{var e=c.get("profileInfo"),f=b("#save-information").attr("checked"),g={aboutServiceId:e.aboutServiceId,aboutText:e.aboutText,address:e.address=="0"?"":e.address,addressLine2:e.addressLine2=="0"?"":e.addressLine2,birthdayDay:e.dob.substring(8,10),birthdayMonth:e.dob.substring(5,7),birthdayYear:e.dob.substring(0,4),city:e.city=="0"?"":e.city,country:e.country=="0"?"":e.country,brand:e.brand,email:function(){return f?a[d].value:!f&&e.email==""?a[d].value:e.email}(),firstName:e.firstName||"",lastName:e.lastName||"",phone:e.phone=="0"?null:e.phone,gender:e.gender||null,influencerType:function(){return e.brand&&e.brand.length?"brand":"individual"}(),phone:e.phone,picPref:e.profile_pic_service_id,state:e.state=="0"?"":e.state,zip:e.zip=="0"?"":e.zip};f&&b.each(a,function(a,b){b.name!="email"&&(e[b.name]==undefined||e[b.name]==""||b.value!="")&&(b.name.indexOf("form-element-")!=-1?b.name.substring(13,b.name.length)=="firstname"?g.firstName=b.value:b.name.substring(13,b.name.length)=="lastname"?g.lastName=b.value:g[b.name.substring(13,b.name.length)]=b.value:g[b.name]=b.value)}),console.log(g),b.ajax({type:"POST",url:"/api/profile/edit",data:g,complete:function(a){},success:function(c){a.slice(0,1),b("div.makeRoomForAlertBanner").removeClass("makeRoomForAlertBanner"),b("div#perksAlertBanner").remove(),b("form#perksOfferModalForm").children().slice(0,1).remove(),b("a#perks-offer-modal-submit-button-addEmail").attr("id","perks-offer-modal-submit-button"),i(a)},error:function(a){b("div#perksErrorList").html("<ul><li>There was an error saving your email.  Please try again.</li></ul>")}})}},i=function(d){var e=0,f={};while(d[e])f[d[e].name]=d[e].value,e++;var g=b("#save-information").attr("checked"),h=c.get("profileInfo"),i={aboutServiceId:h.aboutServiceId,aboutText:h.aboutText,address:h.address||"",addressLine2:h.addressLine2||"",birthdayDay:h.dob.substring(8,10),birthdayMonth:h.dob.substring(5,7),birthdayYear:h.dob.substring(0,4),city:h.city||"",country:h.country||"",brand:h.brand,email:h.email||"",firstName:h.firstName||"",lastName:h.lastName||"",phone:h.phone||"",gender:h.gender||"",influencerType:function(){return h.brand&&h.brand.length?"brand":"individual"}(),phone:h.phone,picPref:h.profile_pic_service_id,state:h.state,zip:h.zip};g&&b.each(d,function(a,b){if(h[b.name]==undefined||h[b.name]==""||b.value!="")b.name.indexOf("form-element-")!=-1?b.name.substring(13,b.name.length)=="firstname"?i.firstName=b.value:b.name.substring(13,b.name.length)=="lastname"?i.lastName=b.value:i[b.name.substring(13,b.name.length)]=b.value:i[b.name]=b.value}),b.ajax({type:"POST",url:"/api/profile/edit",data:i,complete:function(){f.client=c.get("client"),f.campaign=c.get("campaign"),f.campaignId=c.get("campaignId"),delete f.save,c.get("isEvent")?f.numGuests=f.numGuests||0:delete f.numGuests;if(c.get("disabled"))return;b.ajax({url:"/api/perk/claim",type:"POST",data:f,success:function(d){d.status&&c.set({status:d.status}),d.cta&&c.set({cta:d.cta}),c.set({event:d.event,venues:d.venues,venue:d.venue}),console.log("successfully claimed perk"),d.content&&(c.set({modal:d.content,responseContent:d.content}),c.unset("loading")),d.achievements&&b(a).trigger("achievements",[d.achievements]),d.toasts&&a.toaster.add(d.toasts)},error:function(){b("div#perksErrorList").html("<ul><li>There was an error submitting your Perk.  Please try again.</li></ul>")}}),c.set({loading:!0})}})},j=function(a){var d=0,e={};if("undefined"!=typeof a)while(a[d])e[a[d].name]=a[d++].value;e.client=c.get("client"),e.campaign=c.get("campaign"),e.campaignId=c.get("campaignId");if(c.get("disabled"))return;b.ajax({url:"/api/perk/likedUpcoming",type:"POST",data:e,success:function(a){}})},k=function(){var d=a.user.ksUID;console.log("userId",d),b.ajax({url:"/api/getPerksUGC/",data:{userId:d,campaignId:c.get("campaignId"),page:0},complete:function(a){},success:function(a){if(a){var b=[];if(a.userPerks!=null&&a.ugc!=null)for(var e=0;e<a.userPerks.length;e++){var f=!1;if(a.userPerks[e].campaignId==c.get("campaignId")){f=!0;for(var g=0;g<a.ugc.length;g++)d==a.ugc[g].userId&&(f=!1)}f&&b.push(a.userPerks[e])}c.set({userId:a.userId||"",perkInfos:a.perkInfos||"",influencerOfs:a.influencerOfs||"",perksUGCUsers:a.users||"",perksToPromptFor:b||"",perksUGC:a.ugc||""})}},error:function(){c.set({perksUGC:null,perkInfos:null,perksUGCUsers:null,influencerOfs:null,perksToPromptFor:null,userId:null})}})};c.Perk=Backbone.Model.extend({initialize:function(){c=this,d=c.get("isOver18");var a=this.get("client"),b=this.get("campaign");c.bind("liked",j),c.bind("submit",i),c.bind("addAge",g),c.bind("addEmail",h),c.bind("addAgeAndEmail",f),c.bind("change:venues",function(){for(var a=0,b=c.get("venues"),d=b.length;a<d;a++)b[a].date=+(new Date(b[a].date))}),e(a,b)},fetchUGC:function(){var a=this.get("client"),b=this.get("campaign");e(a,b)}})}(amphetamine,jQuery),function(){var a,b,c;typeof exports!="undefined"?a=exports:(amphetamine=amphetamine||{},amphetamine.model=amphetamine.model||{},a=amphetamine.model),a.Perk_=Backbone.Model.extend({initialize:function(){var a=this;_.bindAll(a)},getPerkUrl:function(){return"#/perk"+this.get("slug")},getImageUrl:function(){return this.get("imageUrl")},getHeading:function(){return this.get("headline")},getHashtag:function(){return this.get("hashtag")},getClient:function(){var a=this.get("slug").substr(1);return a.substring(0,a.indexOf("/"))},getCampaign:function(){return this.get("slug").substr(1).substr(this.get("slug").indexOf("/")+1)},getStatus:function(){return this.get("status")},isEligible:function(){return this.get("eligibility").isEligible},canClaimPerk:function(){return this.get("eligibility").canClaimPerk},getEligibilityFriendsCount:function(){var a=0;return this.get("eligibility").eligibleFriends.fb!=null&&this.get("eligibility").eligibleFriends.tw!=null&&(a=this.get("eligibility").eligibleFriends.fb.found+this.get("eligibility").eligibleFriends.tw.found),a},getMinScore:function(){return this.get("minScore")},getMaxScore:function(){return this.get("maxScore")},getTopics:function(){return this.get("includeTopics")||[]},getLocations:function(){return this.get("locations")||[]},getEligibilityFriends:function(){var a=this.getNetwork(),b=this.get("eligibility").eligibleFriends[a].userIds||[];return b},getNetwork:function(){return this.getEligibilityFriends().length==0?null:this.getEligibilityFriends()[0].srcNetwork},getNetwork:function(){var a="";return this.get("eligibility").eligibleFriends.fb!=null&&this.get("eligibility").eligibleFriends.tw!=null&&(a="fb",this.get("eligibility").eligibleFriends.tw.found>this.get("eligibility").eligibleFriends.fb.found&&(a="tw")),a},isNetworkFb:function(){return this.getNetwork()=="fb"},isNetworkTw:function(){return this.getNetwork()=="tw"},getUniqueId:function(){return""+this.get("slug").replace(/\//g,"")},getSpotsRemaining:function(){return this.get("spotsRemaining")<1e3?this.get("spotsRemaining"):""}},{invokeUpcomingPerkXFBML:function(a,b,c){var d=function(){var a=window.location+"";return null!==a.match(/\/dashboard$/)?"dashboard":null!==a.match(/\/perks\//)?"perks_index":null!==a.match(/\/perk\//)?"perk_page":"unknown"},e=a+"/"+b;setTimeout(function(){var a='<fb:like href="http://klout.com/perk/'+e+'" send="false" layout="button_count" width="75" show_faces="false" font="arial"></fb:like>',b='<iframe src="//www.facebook.com/plugins/like.php?href=http://klout.com/perk/'+e+"&amp;send=false&amp;layout=button_count&amp;width=100&amp;show_faces=false&amp;action=like&amp;colorscheme=";d()=="perks_index"?b+="dark":b+="light",b+='&amp;font=arial&amp;height=21&amp;appId=118002904941916" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;" allowTransparency="true"></iframe>';var f=document.getElementById(c);f&&(f.innerHTML=b)},1),"undefined"!=typeof FB&&FB.Event.subscribe("edge.create",function(c){var f=new RegExp(e);if("undefined"!=typeof c&&null!==c.match(f)){var g=new amphetamine.model.Perks({authUser:amphetamine.user,client:a,campaign:b,past:""});g.trigger("liked",{userId:amphetamine.user.ksUID});var h={campaignName:e.replace("/","-"),eventLocation:d()};amphetamine.mp.get("viralSend").track("perk_liked",h)}})}}),a.Perks_=Backbone.Collection.extend({model:a.Perk_,initialize:function(){var a=this;_.bindAll(a,"fetch"),_.bindAll(a,"url");var b,d=this.models[0].attributes.notifsModel;c=this.models[0].attributes.isOver18},url:"/api/perks",fetch:function(a){var b=this;a||(a={});var d=this,e=a.success,f=a.error;return b.trigger("fetching"),a.success=function(f,g,h){b.users=f.users,b.topics=f.topics,b.categories=f.categories;if(c==0)for(var i=0;i<f.perks.length;i++)f.perks[i].eligibility.isEligible=!1;d[a.add?"add":"reset"](d.parse(f.perks,h),a),e&&e(d,f)},(this.sync||Backbone.sync).call(this,"read",this,a)}},{})}(),function(a,b,c){var d,e=function(){var a=d.get("cursor");b.ajax({url:"/dashboard/stream",data:{c:a},success:function(a){var c=d.get("days"),e=d.get("lastUpdated");a.days&&(c&&(a.days=b.extend(!0,c,a.days)),d.set({lastUpdated:e||+a.lastUpdated,days:a.days,cursor:a.cursor}),c&&d.trigger("change:days")),a.cursor&&d.bind("moreDays",f)},error:function(){d.get("days")?d.trigger("change:days"):d.set({days:null})}}),a&&d.trigger("paging")},f=function(){d.unbind("moreDays",f),e()};a.model.PrivateStream=Backbone.Model.extend({initialize:function(){d=this,d.get("enabled")&&e(),d.bind("moreStories",function(a,c){var e=d.get("days"),f=e[a][c].stories,g=f[f.length-1]||"",h=c=="gp"?13:c=="fb"?2:1;b.ajax({url:"/dashboard/stream/more",data:{n:h,sid:g.id,d:a},success:function(b){b.countChange&&(e[a][c].count+=b.countChange,e[a][c].count||delete e[a][c]),b.stories&&f.push.apply(f,b.stories),d.trigger("storiesUpdated",a,c)}})}).bind("removeStories",function(a,b){d.get("days")[a][b].stories.length=0,d.trigger("storiesUpdated",a,b)})}})}(amphetamine,jQuery),function(a,b,c){var d,e,f=function(){var a=e.get("cursor"),c=e.get("id"),f="/api/activity/"+e.get("type")+"/"+c;if(d||!c||a===null)return;d=b.ajax({url:f,data:{c:a},success:function(a){var b=e.get("stories");a?(a.stories&&(b&&b.length?(b.push.apply(b,a.stories),e.trigger("change:stories")):e.set({stories:a.stories.length?a.stories:null})),a.cursor?(e.set({cursor:a.cursor}),e.bind("moreStories",e.moreStories)):e.set({cursor:null})):typeof b=="undefined"?e.set({stories:null}):e.trigger("change:stories"),d=null}}),a&&e.trigger("paging")};a.model.PublicStream=Backbone.Model.extend({initialize:function(){d&&d.abort(),d=null,e=this,f(),e.bind("moreStories",e.moreStories).bind("change:id",f)},moreStories:function(){e.unbind("moreStories",e.moreStories),f()}})}(amphetamine,jQuery),function(a,b){var c,d,e;a.model.Search=Backbone.Model.extend({initialize:function(){d=this,e=1,d.set({filter:d.get("filter")||"influencers"}),d.get("filter")&&d.bind("page",d.page),this.query(this.get("query"))},page:function(){c||(e++,d.query(d.get("query")))},query:function(a){var f=d.get("filter");if(c)return;f&&d.unbind("page",d.page),c=b.ajax({url:"/api/search/"+a,data:{p:e,f:f},success:function(a){var b=a&&a.query,e=d.get("results");f&&(a=a&&a[f],e?a&&a.length&&e.push.apply(e,a):d.set({query:b,results:a&&a.length?a:null},{silent:!0}),d.trigger("change:results")),c=null,f&&a&&a.length&&d.bind("page",d.page)},error:function(){if(e>1)return d.unbind("page",d.page);d.set({results:null}),c=null}}),e>1&&d.trigger("paging")}})}(amphetamine,jQuery),function(a,b){var c,d,e={};a=a||{};var f=function(a){return function(c){b.ajax({url:a,success:function(a){c(null,a)},error:function(a,b){c(a.responseText)}})}},g=f("/api/profile"),h=f("/api/profile/email"),j=f("/api/blockedusers"),k=function(c){var f=[];c.ksUid&&f.push("ksUid="+c.ksUid),c.twUid&&f.push("twUid="+c.twUid),c.fbUid&&f.push("fbUid="+c.fbUid),f=f.join("&"),e.deleteItem=b.ajax({url:"/user/item/undelete",type:"POST",data:{item:f,type:"blocked"},success:function(b){a.alert("This user has been unblocked.",function(){d.trigger("change"),location.reload()})},error:function(b){a.alert("There was an error unblocking this user. Please try again or contact support.")}})};a.model.Settings=Backbone.Model.extend({initialize:function(){d=this.bind("page",function(c,e){switch(c){case"profile":g(function(b,c){!b&&c&&(d.set({type:{profile:!0},profileInfo:c,authUser:a.user,params:e},{silent:!0}),d.trigger("change"))});break;case"networks":g(function(b,c){!b&&c&&(d.set({type:{networks:!0},profileInfo:c,authUser:a.user},{silent:!0}),d.trigger("change"))});break;case"email":async.parallel({e:h,p:g},function(c,e){if(!c&&e&&e.e&&e.e.emailSettings&&e.p){d.set({type:{email:!0},profileInfo:e.p,authUser:a.user,emailInfo:e.e.emailSettings},{silent:!0});var f=d.get("profileInfo").dob;if(f!="undefined"&&f!="0000-00-00"){var g=new Date,h=new Date(f),j=g.getFullYear()-h.getFullYear(),k=g.getMonth()-h.getMonth();(k<0||k===0&&g.getDate()<h.getDate())&&j--,j<18?a.user.isLegal=!1:(d.get("emailInfo").prefs.perks&&b("#email-setting-perks").attr("checked",!0),a.user.isLegal=!0)}else{var l=d.get("emailInfo").prefs.perks;b.ajax({url:"/api/perks/my",type:"GET",success:function(c){flag=!1;for(i=0;i<c.perks.length;i++)if(c.perks[i].status=="completed"){flag=!0;break}flag&&l=="1"?(a.user.priorPerk=!0,b("#email-setting-perks").attr("checked",!0)):flag&&l=="0"?(a.user.priorPerk=!0,b("#email-setting-perks").attr("checked",!1)):(a.user.priorPerk=!1,b("#email-setting-perks").attr("checked",!1))},error:function(a){}})}d.trigger("change")}});break;case"optout":g(function(b,c){!b&&c&&c&&(d.set({type:{optout:!0},profileInfo:c,authUser:a.user},{silent:!0}),d.trigger("change"))});break;case"privacy":j(function(a,b){!a&&b&&(d.set({type:{privacy:!0},blockedUsers:b},{silent:!0}),d.trigger("change"))});break;default:return}}),d.bind("unblockUser",function(a){k(d.get("blockedUsers")[a])})}})}(amphetamine,jQuery),function(){var a,b,c=["content","influencers","influencers_plusk","perks","stream"],d={influencers:"topInfluencers",influencers_plusk:"topPlusK",content:"topContent"};$.inArray("publicstream",amphetamine.user.enabledFeatures)>-1&&c.push("activity"),typeof exports!="undefined"?a=exports:(amphetamine=amphetamine||{},amphetamine.model=amphetamine.model||{},a=amphetamine.model),a.Topic=b=Backbone.Model.extend({hasTopicChanged:!1,skip:null,loadPaginate:function(a){var b=this,c=10;if(b.skip==-1)return;b.unbind("paginate");var d=b.get("topPlusK");if(d&&d.users&&d.users.length){var e=d.users[d.users.length-1];b.skip=e.service_id+":"+e.service_uid}else b.skip=-1;var f="/"+a+"/"+b.skip+"/"+c;b.getData(f,"paginate",function(a,c){if(a||!c){b.skip=-1;return}c.type="influencers_plusk_more";if(!d)b.set(c);else{if(!(c.topPlusK&&c.topPlusK.users&&c.topPlusK.users.length)){b.skip=-1;return}_(c.topPlusK.users).each(function(a,b){d.users.push(a)}),d.users.length>100&&(d.users=d.users.slice(0,100),b.skip=-1),c.topPlusK=d,b.set(c,{quiet:!0}),b.trigger("change")}b.bind("paginate",b.loadPaginate)})},initialize:function(){var a=this;_.bindAll(a),a.bind("index",function(b){a.loadIndex(b,function(b,c){b||a.loadInfluentialAbout()})}),a.bind("paginate",a.loadPaginate),a.bind("page",function(b,d,e){!b&&!d?a.loadIndex(function(b,c){b||a.loadInfluentialAbout()}):(a.hasTopicChanged=b!==a.get("slug"),a.loadSummary(e,function(b,f){if(!b&&_.contains(c,d))return a.loadTab(d,e,f);if(!b)return f.topInfluencers&&f.topInfluencers.users&&f.topInfluencers.users.length?a.loadTab("influencers",e):f.topPlusK&&f.topPlusK.users&&f.topPlusK.users.length?a.loadTab("influencers_plusk",e):f.topContent&&f.topContent.content&&f.topContent.content.length?a.loadTab("content",e):a.loadTab("influencers",e);location.replace("/#/topics/?invalid="+a.get("slug"))}))}).bind("plusKed",function(b,c){this.loadVouchers(c,function(b){var d,e=$.extend(!0,{},a.get("topInfluencers")),f=$.extend(!0,{},a.get("topPlusK")),g=b&&b.vouchers,h=function(a,b){for(var d=0;d<a.length;d++)if(a[d].tid==c)return a[d].canVouch=!1,a[d].vouchers?(a[d].vouchers.count=a[d].vouchers.count?a[d].vouchers.count+1:1,a[d].vouchers.recent=b.recent):a[d].vouchers={count:1,recent:b.recent},a};if(!g)return;e&&e.users&&(e.users=h(e.users,g)),f&&f.users&&(f.users=h(f.users,g)),a.set({topInfluencers:e,topPlusK:f})})})},loadIndex:function(a,b){var c=this;$.ajax({url:"/apis/1/Topic.getIndex",beforeSend:function(){c.trigger("loading:index")},success:function(d){c.trigger("loaded:index");var e=d||{};_.extend(e,{filter:a,type:"index"}),e.summary.topic_=e.topics[e.index.featured.main],e.summary.topContent=null,b(null,e),c.set(e)},error:function(a,d){c.trigger("loaded:index"),b(a.responseText)}})},loadInfluentialAbout:function(){var a=this,b=amphetamine.user.twUid?"tw/"+amphetamine.user.twUid:"fb/"+amphetamine.user.fbUid;$.ajax({url:"/api/influentialabout/"+b,success:function(b){var c={influentialAbout:b||{}},d=a.get("topics");c.influentialAbout=_.map(c.influentialAbout.topics,function(a){return d[a.topic_.topic]=a.topic_,a.topic_.topic}),c.topics=d,_.extend(c,{type:"influentialAbout"}),a.set(c)}})},loadSummary:function(a,b){var c=this.get("publicStream"),d=this,e=d.get("slug");!d.get("summary")||d.hasTopicChanged||a&&a.indexOf("#/topic")!=0?(d.clear({silent:!0}),d.set({slug:e,publicStream:c}),d.getData("/summary.json","summary",function(a,c){b(a,c),c&&d.set({type:"summary",summary:c?c:undefined})})):b(null,d.get("summary"))},loadTab:function(a,b,c){var e,f=this,g=d[a];if(g=="topPlusK"){var h=10,i="/"+a+"/"+f.skip+"/"+h;f.getData(i,"tab",function(b,c){c=c||{},c.type=a,f.set(c)})}else if(!f.get(g)&&a!="perks"){if(a=="activity")return e=this.get("publicStream"),e&&e.set({id:c.topic_.id}),this.set({type:a});f.getData("/"+a+".json","tab",function(b,c){c=c||{},c.type=a,f.set(c)})}else f.set({type:a})},getData:function(a,b,c){var d=this;$.ajax({url:"/topic/"+d.get("slug")+a,beforeSend:function(){d.trigger("loading:"+b)},success:function(a){d.trigger("loaded:"+b),c(null,a)},error:function(a,e){d.trigger("loaded:"+b),c(a.responseText)}})},isModelStale:function(a,b){var c=a.split("/");return this.hasTopicChanged||a&&(c[1]!=="topic"||c[3]!==b)},loadVouchers:function(a,b){$.ajax({url:"/api/vouchers/"+a,success:b})}},{})}(),function(a,b){var c,d,e,f=250,g=function(){var a=d.get("query"),g=d.get("filter");c&&c.abort(),e&&(clearTimeout(e),e=null),a.length>2?e=setTimeout(function(){c=b.ajax({url:"/api/search/"+a+"/4",data:{f:g},success:function(a){a.status==200&&d.set({results:a}),c=null}}),e=null},f):(d.set({results:{influencers:[],topics:[]}}),c=null)};a.model.Typeahead=Backbone.Model.extend({initialize:function(){d=this.bind("query",function(a,b){a!=d.get("query")&&d.unset("results").unset("selectedResult").set({filter:b,query:a})}).bind("change:query",g).bind("resultSelected",function(a,b){var c=d.get("results");c=c&&c[a=="topic"?"topics":"influencers"],c&&d.set({selectedResult:c[b]})}).bind("searchAborted",function(){c&&c.abort()})}})}(amphetamine,jQuery),function(){var a,b,c=["klout","score","topics","privacy","why"],d={klout:null,score:null,topics:null,privacy:null,why:null};typeof exports!="undefined"?a=exports:(amphetamine=amphetamine||{},amphetamine.model=amphetamine.model||{},a=amphetamine.model),a.Understand=b=Backbone.Model.extend({initialize:function(){var a=this;_.bindAll(a),a.bind("page",function(b){if(!b||!_.contains(c,b))b="klout";a.loadTab(b)})},loadTab:function(a){var b=this,c=d[a];a=="score"?(b.set({score:amphetamine.user},{silent:!0}),b.trigger("loaded",a)):b.trigger("loaded",a)},getData:function(a,b,c){var d=this;$.ajax({url:"/topic/"+d.get("slug")+a,beforeSend:function(){d.trigger("loading:"+b)},success:function(a){c(null,a)},error:function(a,e){d.trigger("loaded:"+b),c(a.responseText)}})}},{})}(),function(a,b){var c,d,e=function(a){var f,g=c.get("nick"),h=c.get("friends"),i=c.get("dupes")||0;a=a||c.get("listId"),d||(c.trigger("networkActivity",!0),f="/list/wall/"+(g?g+"/":"")+a,d=b.ajax({url:f,cache:!1,data:{start:h&&h.length+i},complete:function(a){c.trigger("networkActivity",!1)},success:function(a){var f=0,g,j=c.get("authUser"),k=a.createdBy,l=a.friends;a.isOwnProfile=j&&k&&j.twUid==k.twUid;if(a.redirect)return c.trigger("redirect",a.redirect);if(h)if(l&&l.length){g=[],h=h.slice();for(;h[f];f++)g.push(h[f].nick);for(f=0;l[f];f++)b.inArray(l[f].nick,g)<0?h.push(l[f]):c.set({dupes:i+=1},{silent:!0});c.set({friends:h})}else c.unbind("fetchListMembers",e);else c.set(a).bind("fetchListMembers",e);d=null}}))};a=a||{},a.model=a.model||{},a.model.Wall=Backbone.Model.extend({initialize:function(){var a;c=this,nick=c.get("nick"),a=c.get("listId"),e(a),c.bind("list",function(a,b){var f=c.get("createdBy");d&&d.abort(),d=null,f&&b!=f.nick&&(c.unset("createdBy"),c.unset("createdLists")),c.unset("friends").unset("name").unset("date").unset("dupes").unset("description").unbind("fetchListMembers",e).set({nick:b,listId:a}),e(a)})},getMemberNicks:function(){var a=0,b=[],d=c.get("friends");while(d[a])b.push(d[a].nick),a++;return b}})}(amphetamine,jQuery),function(a,b){var c,d,e=!1,f,g=a.view=a.view||{},h=function(){b("div#addPerkUGC div#addPerkUGCOverlay, div#addPerkUGC div.spinner").show()},i=function(){b("div#addPerkUGC div#addPerkUGCOverlay, div#addPerkUGC div.spinner").hide()},j=function(){var d=b("#addPerkUGCContainer");d&&d.length&&(c.get("perkHastag")||c.set({perkHashtag:""}),a.modal.hide(),a.modal.show({id:"addPerkUGCSuccess",content:c.toJSON()}))},k=function(a){f=setTimeout(h,250),b.ajax({url:"/api/perk/submitUGC",type:"POST",data:a,success:function(d){clearTimeout(f),b("a#addPerkUGCSubmitButton").data("busy",!1),c.set({rating:a.rating}),j(),b("#refreshPerksUGC").click()},error:function(a,c,d){clearTimeout(f),b("a#addPerkUGCSubmitButton").data("busy",!1),i(),b("div#addPerkUGCError").slideDown()}})},l=function(c){f=setTimeout(h,250),b.ajax({url:"/api/perk/declineUGC",data:c,complete:function(){clearTimeout(f),b("a#addPerkUGCDeclineButton").data("busy",!1),a.modal.hide()},success:function(c){clearTimeout(f),b("a#addPerkUGCDeclineButton").data("busy",!1),a.modal.hide()},error:function(a){}})},m=function(){b("div.modal-contents").height()+300>b(window).height()&&b("div.modal-contents").css("position","relative"),b("div.addPerkUGCStep").hover(function(){var a=b(this).position().top;b("div#addPerkUGCSlidingImage").stop().animate({top:a-45},200)});var d=b('<input type="file" />');b("div#addPerkUGCBrowseButton").append(d),b("div#addPerkUGCBrowseButton input").die().live("change",function(){var a=/^(image\/bmp|image\/cis-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x-cmu-raster|image\/x-cmx|image\/x-icon|image\/x-portable-anymap|image\/x-portable-bitmap|image\/x-portable-graymap|image\/x-portable-pixmap|image\/x-rgb|image\/x-xbitmap|image\/x-xpixmap|image\/x-xwindowdump)$/i;if(a.test(this.files[0].type)){var c=b(this).val().replace("C:\\fakepath\\","").match(/([A-Za-z0-9\.]+)/g).toString().replace(/,/g,"");d.attr("name",c),c.length>24&&(c=c.substring(0,24)+"..."),b("ul#addPerkUGCFileList").append("<li><span>"+c+'</span><a href="#" class="removePicture"></a></li>'),b("ul#addPerkUGCFileList").show(),b(this).appendTo("div#addPerkUGCFileInputContainer"),b("div#addPerkUGCBrowseButton input").remove()}d=b('<input type="file" />'),b("div#addPerkUGCBrowseButton").append(d),b("ul#addPerkUGCFileList li").length==3&&b("div#addPerkUGCBrowseButton").hide()}),b("a.removePicture").die().live("click",function(a){a.preventDefault();var c=b(this).parent().index();b(this).closest("li").remove(),b("ul#addPerkUGCFileList li").length||b("ul#addPerkUGCFileList").hide(),b("div#addPerkUGCFileInputContainer input").eq(c).remove(),b("ul#addPerkUGCFileList li").length<3&&b("div#addPerkUGCBrowseButton").show()}),b("div#addPerkUGCRating .star").rating({callback:function(a,c){b('label[for="addPerkUGCRating"] span').remove()}}),b("a#addPerkUGCSubmitButton").click(function(d){d.preventDefault();if(!b(this).data("busy")){b(this).data("busy",!0);var e={campaignId:c.get("campaignId"),userId:a.user.ksUID,rating:b("div#addPerkUGCRating input.star:checked").val()||0,attachments:[],message:escape(b("textarea#addPerkUGCComment").val())||""},f=0,g=function(){var a=/^(image\/bmp|image\/cis-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x-cmu-raster|image\/x-cmx|image\/x-icon|image\/x-portable-anymap|image\/x-portable-bitmap|image\/x-portable-graymap|image\/x-portable-pixmap|image\/x-rgb|image\/x-xbitmap|image\/x-xpixmap|image\/x-xwindowdump)$/i,c=function(a,c){e.attachments.push({fileName:c,mediaType:"image",base64EncodedData:encodeURI(a.substring(a.indexOf(",")+1))}),f++,f==b("div#addPerkUGCFileInputContainer input").length&&k(e)};b("div#addPerkUGCFileInputContainer input").each(function(){var d=new FileReader,e=this.files[0];if(a.test(e.type)){d.readAsDataURL(e);var f=document.createElement("img"),g=b(this).attr("name").match(/(\.[a-zA-Z]+$)/);g.length>1&&(g=g[0]),g=((new Date).getTime()+g).toLowerCase(),f.file=e,d.onload=function(a,b){return function(a){c(a.target.result,b)}}(f,g)}})};b('label[for="addPerkUGCComment"] span').remove(),b('label[for="addPerkUGCRating"] span').remove(),e.rating&&e.message.length<=420?b("div#addPerkUGCFileInputContainer input").length?g():(delete e.attachments,k(e)):(e.message.length>420&&b('label[for="addPerkUGCComment"]').append('<span class="error">Sorry, 420 characters max</span>'),e.rating||b('label[for="addPerkUGCRating"]').append('<span class="error">Sorry, this is required</span>')),b("a#addPerkUGCSubmitButton").data("busy",!1)}}),b("a#addPerkUGCDeclineButton").click(function(d){d.preventDefault();if(!b(this).data("busy")){b(this).data("busy",!0);var e={campaignId:c.get("campaignId"),userId:a.user.ksUID};l(e)}}),e=!0},n=function(){var e=d&&b("#addPerkUGCContainer");e&&e.length?e.replaceWith(g.renderUS("modal/addPerkUGC",c.toJSON())):a.modal.show({id:"addPerkUGC",content:c.toJSON()}),m(),d=!0};g.AddPerkUGCView=Backbone.View.extend({initialize:function(){c=this.model,n(),c.bind("change",n)}})}(amphetamine,jQuery),function(a,b){var c,d=a.view=a.view||{},e=function(){var e=b("#add-to-list-panel");c.get("lists")&&(e&&e.length?e.replaceWith(d.renderUS("modal/add-to-list",c.toJSON())):a.modal.show({id:"add-to-list",content:c.toJSON(),callback:function(){c&&c.trigger("finished")}}))};d.AddToListView=Backbone.View.extend({initialize:function(){c=this.model,c.bind("change:lists",e).bind("finished",function(){var c=b("#add-to-list-panel");c&&c.length&&a.modal.hide()}),e()}}),b("#add-to-list input[type=checkbox]").live("click",function(){c&&c.trigger(this.checked?"selected":"deselected",this.value)}),b("#add-to-list .create-new-list").live("click",function(){c&&c.set({lists:null})})}(amphetamine,jQuery),function(a,b){a=a||{};var c,d,e=a.view=a.view||{},f={},g,h=function(){b("#admin-layout").delegate("#detail-date-submit","click",function(a){var c=b("#detail-start-month").val(),e=b("#detail-start-day").val(),f=b("#detail-start-year").val();d.set({startDate:(new Date(c+"/"+e+"/"+f)).toYMD()})}).delegate("#edit-profile-form","submit",function(c){c.preventDefault();var e={},f;b.each(b("#edit-profile-form").serializeArray(),function(a,c){c.name=b.trim(c.name),"fzip"==c.name?f=c.value:"zip"==c.name?isNaN(+c.value)?e[c.name]=f:e[c.name]=c.value:e[c.name]=c.value}),e.birthdayYear=e["birthday-year"],e.birthdayMonth=e["birthday-month"],e.birthdayDay=e["birthday-day"],delete e["birthday-year"],delete e["birthday-month"],delete e["birthday-day"],0===b.trim(b("#edit-profile-firstName").val()).length&&b("#edit-profile-individual-influencer").attr("checked")==1?d.set({flash:{error:!0,msg:"Sorry, you must provide your first name."}}):0===b.trim(b("#edit-profile-lastName").val()).length&&b("#edit-profile-individual-influencer").attr("checked")==1?d.set({flash:{error:!0,msg:"Sorry, you must provide your last name."}}):0===b.trim(b("#edit-profile-brand").val()).length&&b("#edit-profile-brand-influencer").attr("checked")==1?d.set({flash:{error:!0,msg:"Sorry, you must provide your brand name."}}):0===b.trim(b("#edit-profile-email").val()).length?d.set({flash:{error:!0,msg:"Sorry, please enter your email address."}}):!_.isString(b("#edit-profile-email").val())||!/^(([A-Za-z0-9])|(\w[-\w\.\+]*[\w\+]))@([-A-Za-z0-9]+\.)+[A-Za-z]{2,4}$/.test(b("#edit-profile-email").val())?d.set({flash:{error:!0,msg:"Sorry, That doesn't look like a valid email address."}}):g.saveProfile=b.ajax({type:"POST",url:"/api/profile/edit/"+d.get("user").ksUID,data:e,beforeSend:function(){a.modal.show({id:"saving-modal",content:{caption:"Saving..."}})},complete:function(){delete g.saveProfile},success:function(b){a.modal.hide(),location.reload()},error:function(b){a.modal.hide(),location.reload()}})}).delegate("#edit-topic-form","submit",function(c){c.preventDefault();var d=!1,e={};b.each(b(this).serializeArray(),function(a,b){var c=b.name.trim(),f=b.value.trim();if(c!="url"&&!f)return d=!0,!1;e[c]=f}),e.topic=b("#topic-text-id").val().trim(),delete e.id,d?a.alert("Only the image URL may be empty. All other fields are required!"):g.saveTopic=b.ajax({type:"POST",url:"/admin/topic/"+e.topic+"/upsert",data:e,beforeSend:function(){a.modal.show({id:"saving-modal",content:{caption:"Saving..."}})},complete:function(){delete g.saveTopic},success:function(b){a.modal.hide(),location.reload()},error:function(b){a.modal.hide(),a.alert("There was an error saving this topic. Try again?")}})}).delegate("#file-upload-field","change",function(c){var d=this.files[0],e=new FileReader,f=/^(image\/bmp|image\/gif|image\/jpeg|image\/jpg|image\/png)$/i;f.test(d.type)&&(e.onload=function(c){g.uploadImage=b.ajax({type:"POST",url:"/admin/cdn/upload/image",data:{image:c.target.result,fileName:b("#file-upload-field").val()},beforeSend:function(){a.modal.show({id:"saving-modal",content:{caption:"Uploading image..."}})},complete:function(){delete g.uploadImage},success:function(c){a.modal.hide(),b("#edit-topic-form .topic-image").attr("src",c.url),b("#topic-icon-url").val(c.url)},error:function(){a.modal.hide(),a.alert("There was an error uploading the new topic image. Try again?")}})},e.readAsDataURL(d))}).delegate("#topic-icon-upload","click",function(a){b("#file-upload-field").click()}).delegate("#topic-search-form","submit",function(a){a.preventDefault(),location.href="/#/admin/topic/"+b(this).find(".searchfield").val().trim()}).delegate("#user-search-form","submit",function(a){a.preventDefault(),location.href="/#/admin/user/"+b(this).find(".searchfield").val().trim()}).delegate(".enable-button","click",function(c){var e=d.get("user"),f="@"+e.nick||"~"+e.fbUid,h,i;e.twUid?(h=1,i=e.twUid):(h=2,i=e.fbUid),g.enableUser=b.ajax({type:"GET",url:"/admin/user/enable/"+h+"/"+i+"/"+d.get("user").ksUid,
beforeSend:function(){a.modal.show({id:"saving-modal",content:{caption:"Re-enabling "+f+"..."}})},complete:function(){delete g.enableUser},success:function(){a.modal.hide(),a.alert(f+" re-enabled!",function(){location.href="/#/admin/user/"+f})},error:function(){a.modal.hide(),a.alert("There was an error re-enabling "+f)}})}).delegate(".networks .disconnect","click",function(c){var e=b(this),f=/disconnect-([a-z]+)/.exec(e.attr("class"))[1],h=e.siblings(".network-icon").attr("class").replace("network-icon","").trim();g.disconnectNetwork=b.ajax({type:"GET",url:"/admin/user/unlink/"+f+"/"+d.get("user").ksUid,beforeSend:function(){a.modal.show({id:"saving-modal",content:{caption:"Unlinking "+h+"..."}})},complete:function(){delete g.disconnectNetwork},success:function(){a.modal.hide(),a.alert(h+" unlinked!",function(){location.reload()})},error:function(){a.modal.hide(),a.alert("There was an error unlinking "+h)}})}).delegate(".topic-list .remove","click",function(c){var e=b(this),f=/tid-([0-9]+)/.exec(e.parent(".topic").attr("class"))[1],h=e.siblings(".topic-link").html(),i=d.get("user");g.deleteTopic=b.ajax({url:"/admin/user/item/delete",type:"POST",data:{fbUid:i.fbUid,item:f,ksUid:i.ksUid,nick:i.nick,twUid:i.twUid,type:"topics"},beforeSend:function(){a.modal.show({id:"saving-modal",content:{caption:"Removing "+h+"..."}})},complete:function(){delete g.deleteTopic},success:function(b){typeof b.topics!="undefined"&&(d.set({userTopics:b.topics},{silent:!0}),d.trigger("loaded:userTopics")),a.modal.hide()},error:function(b){a.modal.hide(),a.alert("There was an error deleting this topic. Try again?")}})}).delegate(".list-list .remove","click",function(c){var d=b(this),e=d.parent(".list"),f=/list-id-([0-9]+)/.exec(e.attr("class"))[1],h=d.siblings(".list-link").html();g.deleteList=b.ajax({url:"/list/delete",type:"POST",data:{listId:f},beforeSend:function(){a.modal.show({id:"saving-modal",content:{caption:"Removing "+h+"..."}})},complete:function(){delete g.deleteList},success:function(b){e.empty().remove(),a.modal.hide()},error:function(b){a.modal.hide(),a.alert("There was an error deleting this topic. Try again?")}})}).delegate(".user-soi .remove","click",function(a){var c=b(this),d=/hide-soi-([A-Za-z0-9_]+)/.exec(c.attr("class"))[1];i(c,d,"delete")}).delegate(".user-soi .restore","click",function(a){var c=b(this),d=/restore-soi-([A-Za-z0-9_]+)/.exec(c.attr("class"))[1];i(c,d,"undelete")})},i=function(c,e,f){var h,i,j=[],k,l=d.get("user");c.parents(".influencer-of").length>0?(i=d.get("userSoi").influencerOf,k="influencer_of"):(i=d.get("userSoi").influencedBy,k="influenced_by");for(h=0;h<i.length;h++)if(i[h].nick==e||i[h].fbUid==e){i[h].ksUid&&j.push("ksUid="+i[h].ksUid),i[h].twUid&&j.push("twUid="+i[h].twUid),i[h].fbUid&&j.push("fbUid="+i[h].fbUid),j=j.join("&");break}g.hideSoi=b.ajax({url:"/admin/user/item/"+f,type:"POST",data:{fbUid:l.fbUid,item:j,ksUid:l.ksUid,nick:l.nick,twUid:l.twUid,type:k},beforeSend:function(){a.modal.show({id:"saving-modal",content:{caption:(f=="delete"?"Hiding ":"Restoring ")+e+"..."}})},complete:function(){delete g.hideSoi},success:function(b){d.set({userSoi:b.influencers},{silent:!0}),d.trigger("loaded:userSoi"),a.modal.hide()},error:function(b){a.modal.hide(),a.alert("There was an error "+(f=="delete"?"hiding ":"restoring ")+" this influencer. Try again?")}})};f.topic=function(){b(".sidebar .navigation").find(".topic-search-link").addClass("selected"),b(".content-main").html(e.renderUS("admin/topicSearch"))},f.user=function(){b(".sidebar .navigation").find(".user-search-link").addClass("selected"),b(".content-main").html(e.renderUS("admin/userSearch"))};var j=function(){e.hideSpinner("#score-details .section-body"),b("#score-details .section-body").html(e.renderUS("admin/scoreDetails",d.toJSON()))},k=function(){e.hideSpinner("#score-overview .section-body"),b("#score-overview .section-body").html(e.renderUS("admin/scoreOverview",d.toJSON()))},l=function(){var c=d.get("topic");e.hideSpinner("#admin-layout .content-main"),c?b(".content-main").html(e.renderUS("admin/topic",c)):a.alert("Topic not found.",function(){location.href="/#/admin/topic/"})},m=function(){e.hideSpinner("#admin-layout .content-main");var c=d.get("profileInfo"),f=d.get("user");f&&f.disabled?b(".content-main").html(e.renderUS("admin/userDisabled",f)):f&&c?b(".content-main").html(e.renderUS("admin/user",d.toJSON())):a.alert(f?"Profile not found.":"User not found.",function(){location.href="/#/admin/user/"})},n=function(){var a=_.extend({},{lists:d.get("userLists")?d.get("userLists").lists:null,user:d.get("user")});e.hideSpinner("#user-lists .section-body"),b("#user-lists .section-body").html(e.renderUS("admin/userLists",a))},o=function(){var a=_.extend({},{soi:d.get("userSoi"),user:d.get("user")});e.hideSpinner("#user-soi .section-body"),b("#user-soi .section-body").html(e.renderUS("admin/userSoi",a))},p=function(){var a=_.extend({},{topics:d.get("userTopics"),user:d.get("user")});e.hideSpinner("#user-topics .section-body"),b("#user-topics .section-body").html(e.renderUS("admin/userTopics",a))};e.AdminView=Backbone.View.extend({initialize:function(){c=this.el,d=this.model,g={},document.title="Klout | Admin",b(c).html(e.renderUS("admin/layout")),d.bind("page",function(a,b){b||f[a]()}),d.bind("loaded:scoreDetails",j),d.bind("loaded:scoreOverview",k),d.bind("loaded:user",m),d.bind("loaded:topic",l),d.bind("loaded:userLists",n),d.bind("loaded:userSoi",o),d.bind("loaded:userTopics",p),d.bind("loading:scoreDetails",e.renderSpinner("#score-details .section-body","small")),d.bind("loading:scoreOverview",e.renderSpinner("#score-overview .section-body","small")),d.bind("loading:topic",e.renderSpinner("#admin-layout .content-main","large")),d.bind("loading:user",e.renderSpinner("#admin-layout .content-main","large")),d.bind("loading:userLists",e.renderSpinner("#user-lists .section-body","small")),d.bind("loading:userSoi",e.renderSpinner("#user-soi .section-body","small")),d.bind("loading:userTopics",e.renderSpinner("#user-topics .section-body","small")),h()}})}(amphetamine,jQuery),function(a,b){var c=function(c,d,e,f){var g,h,i=[],j=a("#"+c),k=this,l=function(f){h?i.push(function(){l(f)}):(j||(j=a("#"+c)),j.length||(j=a('<div id="'+c+'"></div>').prependTo("body")),g=f.callback,e(j.html(b.view.renderUS(d,{id:f.id,content:f.content}))),h=k.visible=!0,a(k).trigger("shown",f.content))},m=function(b){g=b?a.noop:g,f?f(j,n):(j.empty().hide(),n())},n=function(){h=k.visible=!1,g&&g(),i.length?i.shift()():a(k).trigger("hidden")};e=e||function(){j.show()},this.show=l,this.hide=m};b.modal=new c("amphetamine-modal","modal/modal"),b.modal.dialog=function(a,c,d){b.modal.show({id:"amphetamine-dialog",content:{message:a,type:d},callback:c})},b.alert=b.modal.dialog,b.confirm=function(a,c){b.modal.dialog(a,c,"confirm")},a("#amphetamine-dialog .ok, #amphetamine-dialog .cancel").live("click",function(){b.modal.hide(a(this).hasClass("cancel"))}),a("#amphetamine-modal .close-modal").live("click",function(){b.modal.hide()}),b.toaster=new function(){var d,e=this,f=a(b.modal),g=function(a){var c;b.modal.visible?(c=function(){g.call(e,a),f.unbind("hidden",c)},f.bind("hidden",c)):e.show(a)},h=function(){e.visible&&(clearTimeout(d),d=setTimeout(function(){e.hide()},3e3))},i=function(){e.visible&&(clearTimeout(d),a("#toaster .toast").css({bottom:0}))};c.call(e,"amphetamine-toaster","toaster/toaster",function(a){var b=(a=a.find(".toast")).height();a.css({bottom:-b+"px"}).animate({bottom:0},{duration:300,easing:"swing"})},function(a,b){var c=(a=a.find(".toast")).height();a.animate({bottom:-c+"px"},{duration:300,easing:"swing",complete:b})}),a(e).bind("shown",function(c,d){h(),d.id&&a.ajax({url:"/dashboard/toasts/changestatus",type:"post",data:{notifIds:a.isArray(d.id)?d.id:[d.id],status:"read"}}),b.mp.get("impression").track("toaster",{toast_type:d.subject.action=="walletGrant"?"grant_type":"spend_type"})}),f.bind("shown",function(){i(),f.bind("hidden",h)}),a("#toaster .toast").live("mouseenter",i).live("mouseleave",h),this.pop=g},a("#toaster .close-toast").live("click",function(){b.toaster.hide()}),b.toaster.add=function(c){var d,e=0;if(c){for(;c[e];e++)b.toaster.pop({id:c[e].subject.type=="walletGrant"||c[e].subject.type=="walletSpend"&&c[e].subject.action?c[e].subject.type+"-"+c[e].subject.action:c[e].subject.type,content:c[e]}),d=isNaN(c[e].subject.wallet)?d:c[e].subject.wallet;!isNaN(+d)&&a(".plusk-wallet .assets").text(d)}}}(jQuery,amphetamine),function(a,b){a=a||{},a.view=a.view||{};var c=a.model.Compare,d=a.view;d.CompareView=Backbone.View.extend({initialize:function(){this.bindEvents()},bindEvents:function(){model=this.model,this.unBindEvents(),model.bind(c.events().loadingInitial,this.renderCompareUsersModalInitialLoading,this).bind(c.events().changeData,this.renderCompareUsersModalLoaded,this).bind(c.events().errorLimitReached,this.renderCompareUsersModalLimitReached,this).bind(c.events().error,this.renderCompareUsersModalError,this)},unBindEvents:function(){model=this.model,model.unbind(c.events().loadingInitial,this.renderCompareUsersModalInitialLoading,this).unbind(c.events().changeData,this.renderCompareUsersModalLoaded,this).unbind(c.events().errorLimitReached,this.renderCompareUsersModalLimitReached,this).unbind(c.events().error,this.renderCompareUsersModalError,this)},renderCompareUsersModal:function(){var b=this;a.modal.show({id:"compare-feedback",content:{},callback:function(){b.unBindEvents()}}),a.mp.get("impression").track("rankit_modal")},renderCompareUsersModalInitialLoading:function(){this.renderCompareUsersModal();var c=b("#compare-feedback");c.html(d.renderUS("compare/compare-feedback-loading",{dayCount:-1}));var e='a[href^="/api/compare_feedback/"]';c.delegate(e,"mouseover",function(a){b(this).parent().addClass("hover")}),c.delegate(e,"mouseout",function(a){b(this).parent().removeClass("hover")}),c.delegate(e,"click",function(c){c.preventDefault(),c.stopPropagation();var e=c.currentTarget.href,f=e.split("/"),g=f[f.length-1],h=model.get("compareUserPair");h.result=g,model.unset("compareUserPair",{slient:!0});var i=b("#compare-feedback");i.html(d.renderUS("compare/compare-feedback-loading",h)),model.addCompareUserPair(h),g=="skip"?a.mp.get("click").track("rankit_skip"):a.mp.get("click").track("rankit_select")});var f='a[href^="/tier/"]';c.delegate(f,"click",function(c){c.preventDefault(),c.stopPropagation(),console.log("clicked");var d=b("#compare-feedback-loaded"),e=b("#compare-feedback-unlock-tier");e.hide(),d.show(),a.mp.get("click").track("rankit_next_tier")})},renderCompareUsersModalLoaded:function(){var a=b("#compare-feedback"),c=model.get("compareUserPair");a.html(d.renderUS("compare/compare-feedback-loaded",c))},renderCompareUsersModalLimitReached:function(){var c=b("#compare-feedback"),e=model.get("compareUserPair");c.html(d.renderUS("compare/compare-feedback-limit-reached",e)),a.mp.get("impression").track("rankit_complete")},renderCompareUsersModalError:function(){var a=b("#compare-feedback");a.html(d.renderUS("compare/compare-feedback-error",{}))}});var e=function(){var c={message:"Share your insights on influence.",ctaMessage:"Give feedback",ctaHref:"/compare_feedback/user_pair",ctaId:"begin-rankit"},e=b("#banner-notif-container");e.html(d.renderUS("view/bannerNotif",c)),e.slideDown("fast"),a.mp.get("impression").track("rankit_banner"),e.delegate("#begin-rankit","click",function(b){a.mp.get("click").track("rankit_banner_link"),a.model.Compare.startCompareUserPair()})},f=function(){b("#banner-notif-container").slideUp("fast")};d.CompareBannerView=Backbone.View.extend({initialize:function(){model=this.model,model.bind(c.events().changeData,e,this).bind(c.events().errorLimitReached,f,this).bind(c.events().error,f,this)}});var g=function(){var c=b("#dashboard-compare-users"),e=b("#dashboard-compare-users-container");c.html(d.renderUS("dashboard/compareUsers",{users:this.options.users})),e.animate({height:c.height()}),a.mp.get("impression").track("rankit_module")},h=function(){b("#dashboard-compare-users-container").slideUp("fast")};d.CompareDashboardView=Backbone.View.extend({initialize:function(){model=this.model,model.bind(c.events().changeData,g,this).bind(c.events().errorLimitReached,h,this).bind(c.events().error,h,this)}})}(amphetamine,jQuery),function(a,b){var c,d,e,f=a.view=a.view||{},g=function(a,e){location.hash.indexOf(c)||b(a).html(f.renderUS(e,d.toJSON()))},h=function(){!location.hash.indexOf(c)&&d.get("bioData")&&b("#dashboard-lists").html(f.renderUS("nick/personalLists",d.toJSON())).show()},i=function(){var c=_.extend({connectedNetworks:a.getConnectedNetworks(),user:a.user},d.toJSON());b("#dashboard-intro").html(f.renderUS("dashboard/scoreInsights",c)).show()},j=function(){var a=b("#dashboard-suggested-influencers"),c=b("#dashboard-suggested-influencers-container"),e=d.get("influencedBy");e&&e.length?(a.html(f.renderUS("dashboard/suggestedInfluencers",d.toJSON())),c.animate({height:a.height()})):c.slideUp()},k=function(){var a=b("#dashboard-surfaced-content"),c=b("#dashboard-surfaced-content-container"),e=d.get("topContent");e&&e.content&&e.content.length?(a.html(f.renderUS("dashboard/surfacedContent",d.toJSON())),c.animate({height:a.height()})):c.slideUp()},l=function(){var c=b("#dashboard-compare-users"),e=b("#dashboard-compare-users-container"),f=[],g={},h=d.get("influencedBy"),i=d.get("influencerOf");_([h,i]).each(function(a,b){if(a)for(var b=0,c=a.length;b<c;++b){var d=a[b];g[d.nick]||(f.push(d),g[d.nick]=!0)}}),f.length<5?f=[]:f.length>20&&(f=f.slice(0,20)),a.user.enabledFeatures&&b.inArray("rankit",a.user.enabledFeatures)>-1?a.model.Compare.startCompareUserDashboard(f):e.slideUp(),c.undelegate('a[href="/compare_feedback/user_pair"]'),c.delegate('a[href="/compare_feedback/user_pair"]',"click",function(b){a.mp.get("click").track("rankit_button"),b.preventDefault(),b.stopPropagation(),a.model.Compare.startCompareUserPair()})},m=function(e){var g={};!location.hash.indexOf(c)&&d.get("upcomingPerk")?(b("#dashboard-upcoming-perk").hide().html(f.renderUS("nick/upcomingPerk",d.toJSON())).slideDown(),a.model.Perk_.invokeUpcomingPerkXFBML(d.get("upcomingPerk").client.nameShort,d.get("upcomingPerk").campaign.nameShort,"dashboard-upcoming-perk-fb-like"),g.preview_perk_displayed=!0):(b("#dashboard-upcoming-perk").hide(),g.preview_perk_displayed=!1),e&&a.mp.get("impression").track("home_dashboard",g)},n=function(){setTimeout(function(){var a='<fb:like-box href="http://www.facebook.com/kloutfb" width="630" show_faces="true" stream="true" header="false"></fb:like-box>',c=b("#like-dashboard .section-body");c=c&&c.get(0),c&&(c.innerHTML=a,FB.XFBML.parse(c))},1)},o=function(a){var c,d=b("#checklist");d.length&&(d.find(".selected").removeClass("selected"),c=a?d.find("."+a):d.find("li").not(".complete").first(),c.addClass("selected"))};f.Dashboard=Backbone.View.extend({initialize:function(){d=this.model,c=this.options.hash,e=this.options.notifsModel,d.bind("change:bioData",function(){g("#main-content .onboarding","dashboard/mainChecklist"),o()}).bind("change:checklist",function(){g("#checklist","dashboard/checklist"),g("#main-content .onboarding","dashboard/mainChecklist"),o()}).bind("change:isNewUser",function(){g("#main-content","dashboard/mainContent")}).bind("change:isOnboarded",function(){g("#checklist","dashboard/checklist")}).bind("change:lists",h).bind("change:scoreInsights",i).bind("change:suggestedInfluencers",j).bind("change:surfacedContent",k).bind("change:compareUsersDashboard",l).bind("change:upcomingPerk",function(){m(!0)})},render:function(d){if(!location.hash.indexOf(c)){document.title="Klout | the Standard for Influence",b("#menu").find(".selected").removeClass("selected").end().find("a.dashboard-link").addClass("selected"),this.el.html(f.renderUS("dashboard/layout",this.model.toJSON())),o(),b("#navigation a").removeClass("selected");if(d)return d.model==e?(b("#dashboard-nav-notifs").addClass("selected"),d.render("#main-content")):(b("#dashboard-nav-stream").addClass("selected"),b("#main-content").html(a.view.renderUS("dashboard/updates",{streamsEnabled:this.model.get("streamsEnabled")})),d.render("#dashboard-updates"),a.mp.get("impression").track("score_updates",{})),this;b("#dashboard-nav-welcome").addClass("selected"),"isNewUser"in this.model.attributes&&g("#main-content","dashboard/mainContent"),h(),m(!1),setTimeout(function(){b(".fb-like").each(function(){typeof FB!="undefined"&&FB.XFBML.parse(this)})},1),n()}return this},selectChecklistItem:function(a){o(a)}})}(amphetamine,jQuery),function(a,b){var c,d,e=a.view=a.view||{},f=function(){var f=d&&b("#edit-list-panel");f&&f.length?f.replaceWith(e.renderUS("modal/edit-list-modal",c.toJSON())):a.modal.show({id:"edit-list-modal",content:c.toJSON()}),"placeholder"in document.createElement("input")||f.find("*[placeholder]").focus(function(){var a=b(this).removeClass("placeholder");this.value==a.attr("placeholder")&&(this.value="")}).blur(function(){b.trim(this.value)||(this.value=b(this).addClass("placeholder").attr("placeholder"))}).blur(),!d,d=!0};e.EditListView=Backbone.View.extend({initialize:function(){c=this.model,c.bind("change",f).bind("newSearch",function(){b("#list-user-search-status").text("")}).bind("finished",function(){a.modal.hide()}),f()}})}(amphetamine,jQuery),function(a,b){var c,d,e=a.view,f=function(){b(c).html(e.render("friendList",d.toJSON())),h(),g()},g=function(){var a=b.extend(!0,{},d.toJSON());a.friends&&b.each(a.friends,function(){this.network=d.get("network")}),document.title="Klout | Friends",b("#friendlist-friends").html(e.renderUS("friends/networkFriends",a))},h=function(){var c=d.get("network");a.mp.get("impression").track("friendlist_page",{network:c}),b(".friend-network").each(function(){var a=b(this);a.toggleClass("selected",a.hasClass(c))})},i=function(){b("#navigation .authuser").html(e.render("friendList_authUser",d.toJSON()))},j=function(c){var e;d.get("friends")&&(e=b("#loading-list-members"),e.length&&e.remove(),c&&b("#friendlist-friends").append(b('<img src="'+a.config.staticServer+'images/loading-small.gif" class="loading" id="loading-list-members">')))},k=function(){b("#friendlist-lists").html(e.render("friendList_lists",d.toJSON()))};e.FriendListView=Backbone.View.extend({initialize:function(){d=this.model,c=this.el,f(),d.bind("change:friends",g).bind("change:network",h).bind("change:authUser",i).bind("change:createdLists",k).bind("loadingFriends",j),b("#menu").find("li > a.selected").removeClass("selected").end().find(".username").addClass("selected")},render:f}),b("#friend-list-tabs li").live("click",function(){d.trigger("sort",b(this).hasClass("by-score"))})}(amphetamine,jQuery),function(a){var b=this.amphetamine=this.amphetamine||{},c=b.view=b.view||{};c.HomeView=Backbone.View.extend({initialize:function(){},render:function(){document.title="Klout | the Standard for Influence",$(this.el).html(c.render("home",this.model))}})}(),function(a,b){var c,d=a.view=a.view||{},e=function(){var e=b("#import-list-panel"),f=b.extend(!0,{},c.toJSON());"lists"in f&&(f.lists={lists:f.lists},e.length?e.replaceWith(d.renderUS("modal/import-list",f)):a.modal.show({id:"import-list",content:f}))};d.ImportListView=Backbone.View.extend({initialize:function(){c=this.model,c.bind("change",e).bind("listCreated",function(){a.modal.hide()}),e()}})}(amphetamine,jQuery),function(a,b){var c,d,e=a.view=a.view||{},f=function(){var a=d.get("name"),f=d.get("listId"),g=d.get("createdBy"),h=_.extend(d.toJSON(),{options:{}});g=g&&g.name,b(c).html(e.render("list",h)),b("#friendlist-friends").html(e.renderUS("friends/networkFriends",h));if(a||g)document.title=(a||"Klout list #"+f)+(g?" by "+g:"")+" | Klout | The Standard for Influence"},g=function(){var c=b("#friendListLoading");!c.length&&b("#friendlist-friends").append(b('<div id="friendListLoading" class="overlay-loading"><img src="'+a.config.staticServer+'images/loading.gif"></div>'))},h=function(c){var e;d.get("friends")&&(e=b("#loading-list-members"),e.length&&e.remove(),c&&b("#friendlist-friends").append(b('<img src="'+a.config.staticServer+'images/loading-small.gif" class="loading"id="loading-list-members">')))};renderShareModal=function(b){var c,e;if(typeof d.get("friends")=="undefined")return d.bind("change",c=function(){d.unbind("change",c),renderShareModal(b)});d.get("listId")==b&&a.modal.show({id:"share-new-list",content:d.toJSON()})},e.ListView=Backbone.View.extend({initialize:function(){d=this.model,c=this.el,d.bind("change",f).bind("list",g).bind("networkActivity",h),f(),this.options.newListId&&renderShareModal(this.options.newListId),delete this.options.newListId,b("#menu").find("li > a.selected").removeClass("selected")}})}(amphetamine,jQuery),function(){var a=window.amphetamine=window.amphetamine||{},b=a.view=a.view||{},c=function(a,c,d,e,f,g,h){var i={chart:{renderTo:a,defaultSeriesType:"line",margin:g.margin||0,marginLeft:g.marginLeft||28,marginTop:g.marginTop||2,marginBottom:g.marginBottom||10,width:g.width||592,height:g.height||280,type:g.type||"spline",spacingTop:0,spacingRight:0,spacingBottom:0,spacingLeft:0},credits:{enabled:!1},title:{text:""},legend:{enabled:!1},colors:[g.mainColor||"#e44600",g.secondaryColor||"#45b7fe"],xAxis:{tickWidth:1,offset:0,lineWidth:1,lineColor:"#B2B2B2",labels:{enabled:g.labels||!1,style:{font:"11px Arial, sans-serif",color:"#808080"},align:"right",rotation:-50,y:20,x:4,step:2,formatter:function(){this.value=""+this.value;var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],b=a[this.value.substring(4,6)-1],c=this.value.substring(6,8);return b+" "+c}},tickmarkPlacement:"on",categories:d},yAxis:{title:{text:""},lineWidth:1,lineColor:"#B2B2B2",gridLineColor:"#E6E6E6",minorGridLineColor:"#f9f9f9",minorTickInterval:"auto",labels:{formatter:function(){var a=Math.floor(this.value);return a!=this.value&&(a=""),b.round(a,!0)},style:{font:"11px Arial, sans-serif",color:"#808080"}}},tooltip:{formatter:function(){this.x=""+this.x;var a=this.x.substring(0,4),b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=b[this.x.substring(4,6)-1],d=this.x.substring(6,8);return"<b>"+this.series.name+":</b>"+this.y+"<br/>"+c+" "+d+", "+a}},series:[{name:h.name1+"<br>"+e,data:c,marker:{symbol:"circle"}}]};f&&i.series.push({name:h.name2+"<br>"+e,data:f,marker:{symbol:"circle"}}),new Highcharts.Chart(i)},d=function(a,b,c,d,e){var f={},g={},h=[],i="",j={chart:{renderTo:a,defaultSeriesType:"column",height:280,width:100,marginLeft:0,marginRight:0,marginBottom:60,marginTop:10,spacingTop:0,style:{overflow:"visible"}},colors:[f.mainColor||"#e44600",f.secondaryColor||"#45b7fe"],credits:{enabled:!1},title:{text:"90 Day +K",style:{font:"12px Arial, sans-serif",color:"#5f5358",textShadow:"none"},verticalAlign:"bottom",y:10},legend:{enabled:!1},xAxis:{labels:{enabled:!1},lineColor:"rgba( 178, 178, 178, 1 )",tickWidth:0,categories:["",""]},yAxis:{labels:{enabled:!1},title:{text:""},gridLineWidth:0},plotOptions:{series:{allowPointSelect:!1},column:{dataLabels:{enabled:!e,color:"#605358",style:{fontSize:11}},shadow:!1,pointWidth:30,borderWidth:0,states:{hover:{enabled:!1}}}},tooltip:{enabled:!1},series:[{data:[{name:"You",color:"#e44600",y:b},{name:"Them",color:"#45b7fe",y:c}]}]};new Highcharts.Chart(j);var k=$("#"+a);k.append('<img class="avatar firstPerson" src="/picture/n/'+d.get("authUser").nick+'/small">'),k.append('<img class="avatar secondPerson" src="/picture/n/'+d.get("nick")+'/small">'),e?k.append('<img class="spinner" src="images/loading-small.gif" width="43" height="24">'):k.find(".spinner").remove()},e,f,g,h,i=function(){var a=e.toJSON(),b={};return b[a.nick.toLowerCase()]=a.bioData&&a.bioData.name||a.userData&&a.userData.firstName+" "+a.userData.lastName,b},j=function(a,c,d){var f=$(a);f.html(b.renderUS(c,d||e.toJSON())),f.find(".fb-like").each(function(){typeof FB!="undefined"&&FB.XFBML.parse(this)}),f.find(".plusone").each(function(){typeof gapi!="undefined"&&gapi.plusone.go(this)})},k=function(){var a,c=7,d=e.toJSON();if(d.ksAchievementsData.hasAchievements){for(a=0;a<d.ksAchievementsData.achievements.length;a++)0==a%c&&(d.ksAchievementsData.achievements[a].isFirst=!0);if(d.ksAchievementsData.legacy)for(a=0;a<d.ksAchievementsData.legacy.length;a++)0==a%c&&(d.ksAchievementsData.legacy[a].isFirst=!0)}$(".tab.achievements").html(b.renderUS("nick/achievements",d))},l=function(){$(".tab.activity").html(b.renderUS("stream/public-stream",{stories:e.get("activity")}))},m=function(){j("#meta-info","nick/bio"),j("#meta-info .add-user-dropdown","nick/addUserOptions"),j(".tab.kloutstyle","nick/kloutStyle"),A(),document.title=e.get("bioData").name+" | Klout Influence Report"},n=function(){$(".tab.comparison").html(b.renderUS("nick/comparison",{}))},o=function(){j("#detail","nick/detail"),f.setTab(f.options.tab)},p=function(){A()},q=function(){$("#influenced-by-user-search-status").html(e.get("influencedBySearchStatus"))},r=function(){if(typeof e.get("influencerOf")=="undefined")b.renderSpinner("#influencer-of","small")();else{var c=e.toJSON(),d=i();if(c.influencerOf)for(var f=0;f<c.influencerOf.length;f++)c.influencerOf[f].nick&&(d[c.influencerOf[f].nick.toLowerCase()]=c.influencerOf[f].name);c=_.extend({connectedNetworks:a.getConnectedNetworks(),nickMapping:d},c),$("#influencer-of").html(b.renderUS("nick/influencerOf",c))}},s=null,t=function(){if(e.get("bioData")&&e.get("influencers")){var c=e.toJSON();s!=e.get("nick")?(c.tab=null,s=e.get("nick")):c.tab=a.activeTab;var d=$(".tab.influencers");$(".tab.influencers").html(b.renderUS("nick/influencers",c)),"placeholder"in document.createElement("input")||d.find("*[placeholder]").focus(function(){var a=$(this).removeClass("placeholder");this.value==a.attr("placeholder")&&(this.value="")}).blur(function(){$.trim(this.value)||(this.value=$(this).addClass("placeholder").attr("placeholder"))}).blur()}else e.trigger("loading:influencers")},u=function(){if(typeof e.get("influentialAbout")=="undefined")b.renderSpinner("#influential-about","small")();else{var c=e.toJSON(),d=i();c=_.extend({connectedNetworks:a.getConnectedNetworks(),nickMapping:d},c),$("#influential-about").html(b.renderUS("nick/influentialAbout",c))}},v=function(){var a,c=e.get("perksUGC"),d=e.get("isOwnProfile"),f=e.get("perkInfos"),g=e.get("bioData"),h=e.get("perksUGCUsers"),i=e.get("userPerks"),j=e.get("perksToPromptFor"),k=e.get("userId");c!=null&&g!=null&&f!=null&&h!=null&&i!=null&&j!=null&&(a={userId:k,isOwnProfile:d,perksUGC:c,perkInfos:f,bioData:g,perksUGCUsers:h,influencerOfs:[],userPerks:i,perksToPromptFor:j,view:"nick"},$(".tab.perks").html(b.renderUS("ugc/perksUGC",a)),$("div.starContainer .star").rating({small:!0}),$("ul.ugcThumbnailList a").fancybox({padding:2,cyclic:!0,centerOnScroll:!0,overlayColor:"#000",overlayOpacity:.7}))},w=function(){if(e.get("bioData")){var a=e.toJSON();$(".tab.lists").html(b.renderUS("nick/listsWrapper",a)),$(".tab.lists .lists").html(b.renderUS("nick/personalLists",a)),$(".tab.lists .list-memberships").html(b.renderUS("nick/listMemberships",a))}},x=function(){j("#meta-info","nick/bio"),j(".tab.kloutstyle","nick/kloutStyle")},y=function(){j(".tab.kloutstyle","nick/kloutStyle")},z=function(){var a=e.get("scoreData");a&&j("#score","user/scoreFlag",{isTopPlusK:a.isTopPlusK,isTopScience:a.isTopScience,score:a&&a.klout_score_norm,size:"large"}),A()},A=function(){var a=e.attributes;a.scoreData&&a.graphData&&a.bioData&&(j(".tab.score-analysis","nick/scoreAnalysis"),C(),B())},B=function(){var a=e.get("graphData"),b=a&&a.dates,d={},f=[{triggerName:"klout-score",graphDataName:"klout_score",seriesName:"Klout Score"},{triggerName:"network",graphDataName:"network",seriesName:"Network"},{triggerName:"amplification",graphDataName:"amplification",seriesName:"Amplification"},{triggerName:"true-reach",graphDataName:"true_reach",seriesName:"True Reach"}];_.each(f,function(f){var g=a[f.graphDataName];seriesName=f.seriesName,compareData=!1;var h={width:430,height:180,mainColor:"#e44600",marginTop:1,labels:!1};f.graphDataName=="true_reach"&&(h.marginLeft=40),"klout-score"==f.triggerName&&(h.height=230,h.width=460,h.mainColor="#e44600"),d.name1=e.get("isOwnProfile")?"You":e.get("bioData").name,c(f.triggerName+"-chart",g,b,seriesName,compareData,h,d)})},C=function(){var c,d=e.toJSON(),f=d.scoreInsights,g;if(!e.get("bioData"))return;f?(c=a.getConnectedNetworks(),g=i(),d=_.extend({connectedNetworks:c,nickMapping:g,showVirals:!0},d),$("#score-analysis-section .score-insight").toggleClass("empty-insight",!0),$("#amplification-insights").html(b.renderUS("insight/amplification",_.extend({showVirals:!0,insight:f.amplification},d))),$("#network-insights").html(b.renderUS("insight/network",_.extend({showVirals:!0,insight:f.network_score},d))),$("#true-reach-insights").html(b.renderUS("insight/trueReach",_.extend({showVirals:!0,insight:f.true_reach},d)))):$("#score-analysis-section .score-insight").toggleClass("empty-insight",!1)},D=function(a,c){var d=e.getTopicById(c),f=a.find(".meter div").width(),g={isOwnProfile:e.get("isOwnProfile"),ksUid:e.get("ksUid"),nick:e.get("nick"),topic:d,user:e.get("bioData")};a.html(b.renderUS("nick/topicRowContent",g)),f&&a.find(".meter div").removeClass().css("width",f+"px")},E=function(){var a=function(a){var b=$(".topic .meter");b.length==a.length&&b.each(function(b){var c=$(this);c.find("div").css({width:3+Math.floor(c.width()/90*a[b].daysRemaining)+"px"})})};return function(){var c=e.get("topics"),d=e.get("bioData"),f=e.get("nick"),g={bioData:d,isOwnProfile:e.get("isOwnProfile"),ksUid:e.get("ksUid"),maxTopics:e.get("maxTopics"),nick:f,topics:c};s=f,g.tab=h,d?(e.unbind("change:bioData",E),$(".tab.topics").html(b.renderUS("nick/topics",g)),c&&c.length&&a(c)):e.bind("change:bioData",E)}}(),F=function(a,b,c){var d,f=e.getTopicById(c).daysRemaining;b.find(".topic").each(function(a){var b,g,h;if(this.id=="tid"+c)return!1;g=$(this),h=e.getTopicById(this.id.replace("tid","")),b=h.daysRemaining;if(b<f)return d=g,!1}),d?a.animate({opacity:0},{duration:500,complete:function(){var b,e=a.outerHeight(),g=a.get(0).offsetTop;b=a.clone(),D(b,c),b.css({opacity:0}),a.removeAttr("id").html("").css({height:e+"px",padding:"0"}),d.animate({paddingTop:e+"px"},{duration:500,easing:"swing"}),a.animate({height:"0px"},{duration:500,easing:"swing",queue:!0,complete:function(){a.remove(),d.css({paddingTop:""}),G(b.insertBefore(d).animate({opacity:1},{duration:500}),f)}})}}):(D(a,c),G(a,f))},G=function(a,b){var c=a.find(".meter div"),d=3+Math.floor(c.parent().width()/90*b);c.addClass("days"),c.animate({width:d+"px"},{duration:500,easing:"swing"})},H=function(){var a,d,f=e.get("graphData"),g=e.get("comparisonChartData"),h=g&&g.dates,i=e.get("userData")||e.toJSON(),j=e.get("authUser"),k={};if(g&&f&&h){g.klout_score?(g=g.klout_score,d="Klout Score",f=f&&f.klout_score):g=[15,14,13,12,13,14,15,16,17,18,19,20,21,23,22,24,23,22];var l={labels:!0,marginBottom:60,width:500};k.name1=j.firstName&&j.lastName?j.firstName+" "+j.lastName:j.nick,k.name2=i.firstName&&i.lastName?i.firstName+" "+i.lastName:i.nick;var m={nick:i.nick,bioData:{name:k.name2}};$("#compare").html(b.renderUS("nick/comparisonChart",m)),c("comparison-chart",g,h,d,f,l,k),J()}},I=function(){var a=e.get("comparisonNetworksData"),c=e.get("userData")||e.toJSON(),d=e.get("ksUid"),f=!1;_.each(a,function(a,b){a[d]&&(f=!0)}),f||(a=$.extend(!0,{},a),a.tw=a.tw||{},a.tw[d]=1);if(a){var g={nick:c.nick,bioData:{name:c.firstName&&c.lastName?c.firstName+" "+c.lastName:c.nick},userData:c,authUser:e.get("authUser"),network:a,userTwoKsUid:d};$("#networksOfInfluence").html(b.renderUS("nick/comparisonNetworksOfInfluence",g))}},J=function(){var a=e.get("comparisonTotalPlusKData");document.getElementById("totalPlusKReceived-chart")&&(a?d("totalPlusKReceived-chart",a.authUserTotalPlusK,a.profileTotalPlusK,e,!1):d("totalPlusKReceived-chart",0,0,e,!0))},K=function(){var a=e.get("userData")||e.toJSON(),c=e.get("comparisonTopicsAndSoiData");if(c){var d={sharedSoi:c.comparisonSoiData,topics:c.comparisonTopicsData,userData:a,authData:e.get("authData"),bioData:e.get("bioData"),comparisonData:e.toJSON(),nick:a.nick,isLoggedIn:e.get("isLoggedIn")};$("#influencersAndTopics").html(b.renderUS("nick/comparisonInfluencersAndTopics",d)),$("div#sharedInfluencers ul").css("width",$("div#sharedInfluencers li").length*28)}};b.Nick=Backbone.View.extend({initialize:function(){var a=this.model,c=a.get("isOwnProfile"),d=this.options.tab||(c?"#score-analysis":"#comparison");f=this,e=a,g="klout-score",h=null,this.options.tab=="#comparison"&&(g=this.options.chartTab||g),this.options.tab=="#topics"&&(h=this.options.chartTab||h),a.bind("change:achievementsData",k).bind("change:ksAchievementsData",k).bind("change:bioData",m).bind("change:bioData",v).bind("change:bioData",t).bind("change:canAddInfluencers",t).bind("change:comparisonChartData",H).
bind("change:comparisonTotalPlusKData",J).bind("change:comparisonTopicsAndSoiData",K).bind("change:graphData",p).bind("change:graphData",H).bind("change:comparisonNetworksData",I).bind("change:influencedBySearchStatus",q).bind("change:influencerOf",r).bind("change:influencers",t).bind("change:influentialAbout",u).bind("change:perksToPromptFor",v).bind("change:perksUGC",v).bind("change:perksInfos",v).bind("change:userPerks",v).bind("change:kClass",x).bind("change:kClassified",y).bind("change:lists",w).bind("change:listMemberships",w).bind("change:scoreData",z).bind("change:scoreInsights",C).bind("change:topics",E).bind("change:userData",o).bind("loadComparison",n).bind("loading:influencers",b.renderSpinner("#content .tab.influencers","small")).bind("loading:comparison",b.renderSpinner("#content .tab.comparison","small")).bind("loading:influentialAbout",u).bind("loading:influencerOf",r),a.bind("topicPlusKed",function(b){var c=$("#topix"),d=c.find(".topic"),e=$("#tid"+b);f.options.tab=="#topics"&&(e.get(0)!=d.first().get(0)?e.find(".meter").length&&F(e,c,b):(D(e,b),G(e,a.getTopicById(b).daysRemaining)))}),a.bind("updatePerksUGC",v),j(this.el,"nick/layout"),$("#menu").find("li > a.selected").removeClass("selected").end().find(".username").toggleClass("selected",c),this.setTab(d)},setTab:function(a){return this.options.tab=a,a=$(a),a.hasClass("selected")||(a.closest("ul").find("a.selected").removeClass("selected"),a.addClass("selected"),tab=$("#content").find(".tab").hide().filter("."+a.attr("id")).show()),this},scrollToTab:function(){var a=$("#detail").offset().top-$("#header-wrapper").height();$("html, body").animate({scrollTop:a},{duration:500,easing:"swing",complete:function(){scrollTo(0,$("#detail").offset().top-$("#header-wrapper").height())}})},setSubTab:function(a,b){b=="topics"&&typeof e.get("topics")!="undefined"&&(h=a,E())}}),$("#confirm-plusk .ok, #confirm-plusk .cancel").live("click",function(){a.modal.hide($(this).hasClass("cancel"))})}(),function(a,b){var c,d,e=a.view=a.view||{},f=function(){b("#header").delegate("#global-notifs","click",function(a){var c=b(this);c.closest(".notif-list").length||(c.hasClass("active")?g():(c.removeClass("hover").addClass("active"),d.trigger("clearAll")))}).delegate("#global-notifs","mouseover",function(a){var c=b(this);c.hasClass("active")||c.addClass("hover")}).delegate("#global-notifs","mouseout",function(a){b(this).removeClass("hover")}).delegate("#global-notifs .notif","click",function(a){var c=b(this).find(".button");if(!b(a.target).hasClass("button")){c.click();var d=b.trim(c.attr("href"));d&&(location.href=d)}g()}),b("body").click(function(a){var c=b(a.target);b("#global-notifs").hasClass("active")&&c.attr("id")!="global-notifs"&&!c.parents("#global-notifs").length&&g()})},g=function(){b("#global-notifs").removeClass("active"),i()},h=function(){var a=b("#global-notifs .notif-count"),c=d.get("count");c?a.text(d.get("count")).show():a.hide()},i=function(){var a=b("#notifications"),c=b("#global-notifs .notif-list");a.length&&(a.html(e.renderUS("notifs/list",d.toJSON())),d.trigger("clearAll")),c.html(e.renderUS("notifs/dropdown",d.toJSON()))},j=function(b){a.modal.show({id:"notif-share",content:d.getNotifById(b)})};e.NotifsView=Backbone.View.extend({initialize:function(){d=this.model,c=this.el,d.bind("change:count",h).bind("change:notifs",i).bind("share",j),f(),h(),b("#menu").find("li > a.selected").removeClass("selected")},render:function(c){b(c).html('<div id="notifications" class="list-section"><img class="section-loading-icon" src="'+a.config.staticServer+'images/loading-small.gif"></div>')}})}(amphetamine,jQuery),function(a,b){var c,d,e=a.view=a.view||{},f=function(){var a,f=d.get("mergeInfo");document.title="Klout | The Standard for Influence",b("#main").css({minHeight:0,paddingBottom:"80px"}),b("#header-wrapper").css("position","absolute"),a=b("#header .thermometer"),a.find(".thermo-item").removeClass("on").eq(d.get("step")==2?1:0).addClass("on"),a.show(),b(c).html(e[f?"render":"renderUS"](f?"merge":"nux/nux",d.toJSON())),renderScore()};renderScore=function(){var a=d.get("score");a=a<2&&d.get("start")?"?":a,b("#nux-view .score .value").html(a)};var g=function(){d.get("connectedNetwork")?a.modal.show({id:"network-connect-nux",content:d.toJSON()}):d.get("start")&&a.modal.show({id:"nux-start",content:null,callback:function(){d.unset("start"),renderScore()}})},h=function(){var c,f,g=d.get("step");g==2&&(f=d.get("friends"),c=b("#friends").removeClass(),f?(d.get("friendNetwork")=="tw"?(b("#fb-friend-invite-form").length&&(b("#fb-friend-invite-form").replaceWith('<div id="friends"></div>'),c=b("#friends")),c.html(e.renderUS("friends/friendList",{users:f,nux:!0})),c.find(".user-pic, .profile-link").addClass("tw-unregistered")):d.get("friendNetwork")=="fb"&&a.kloutMfs("nux-page-invite"),j(),k()):typeof f=="undefined"?c.html('<img src="'+a.config.staticServer+'images/loading.gif" class="loading">'):i())},i=function(){b("#friends").addClass("error").html(e.renderUS("nux/friendError",d.toJSON()))},j=function(){b("#nux-friends-intro").html(e.renderUS("nux/friendsIntro",d.toJSON()))},k=function(){b("#nux-friends-tabs").html(e.renderUS("nux/friendsTabs",d.toJSON()))};e.NuxView=Backbone.View.extend({initialize:function(){d=this.model,c=this.el,d.bind("change:score",f).bind("change:connectedNetwork",g).bind("change:start",g).bind("change:friends",h).bind("change:friendNetwork",j).bind("friendError",i),b("#menu").find("li > a.selected").removeClass("selected"),f(),g(),d.get("step")==2&&a.scrollMonitor.start("#friends .friend",location.hash,function(a){a&&d.trigger("page")},b("#friends"))}}),b("#nux-view .action .button-primary, #nux-view .unconnected-network").live("click",function(a){a.preventDefault();var c=this.href;c||(c=b(this).closest(".service").find(".action .button-primary").get(0).href),open(c+"?nux=true")}),b("#nux-view .action .button-primary").live("mouseover",function(){b(this).closest(".service").find(".unconnected-network").addClass("on")}).live("mouseout",function(){b(this).closest(".service").find(".unconnected-network").removeClass("on")}),b("#friends-nux .tabs li").live("click",function(){var a=b(this);a.hasClass("active")||(b("#friends-nux .tabs li").removeClass("active"),a.addClass("active"),d.trigger("friendList",a.hasClass("tw")?"tw":"fb"))}),b("#friends-nux a.profile-link, #friends-nux a.user-pic").live("click",function(a){a.preventDefault()})}(amphetamine,jQuery),function(a,b){a=a||{};var c,d,e,f=a.view=a.view||{},g,h=function(){var a,d,e=[],f=[],h=[];if(c.get("notifs")){d=c.getNotifsByStatus(["new","viewed"]);if(d&&d.length){var i;for(var j=0;j<d.length;j++)d[j].newPerk&&d[j].newPerk!=="undefined"&&(d[j].newPerk.status=="new"&&e.push(d[j].newPerk.id),i=d[j].newPerk.categoryId,h[i]?h[i]=h[i]+1:h[i]=1,g&&i==g&&f.push(d[j].newPerk.id));e.length&&c.trigger("notifsViewed",e),f.length&&c.trigger("notifsRead",f)}b("span.perkNav-notif-count").remove();for(var j=0;j<h.length;j++)if(h[j]){var k=b('<span class="perkNav-notif-count">'+h[j]+"</span>");b("div#perksListingContainer li a#perkNav-"+j).append(k),k.show()}}};f.Perks_=Backbone.View.extend({el:b("#container"),tabs:[{updated:!1},{href:"#/perks",domClass:"perks-featured",display:"Featured"},{hr:!0},{href:"#/perks/current",domClass:"perks-current",display:"Current Perks"},{href:"#/perks/upcoming",domClass:"perks-upcoming",display:"Upcoming Perks"},{href:"#/perks/past",domClass:"perks-past",display:"Past Perks"},{hr:!0},{href:"#/perks/my",domClass:"perks-my",display:"My Perks"}],initialize:function(){typeof this.options.filter=="undefined"&&(this.options.filter="featured"),c=this.options.notifsModel.bind("change:notifs",function(){h()}),d=this.options.isOver18,d==0?e=a.perksAlertMessage.under18:d?e={}:e=a.perksAlertMessage.unknown,this.collection.bind("reset",this.render,this),this.collection.bind("fetching",f.Perks_.showSpinner,this),this.collection.bind("reset",f.Perks_.hideSpinner,this),this.collection.bind("error",f.Perks_.hideSpinner,this),this.el.html(f.renderUS("perks/layout",{tabs:this.tabs,alertMessage:e})),b(".content-main").html(""),b("#menu").find("li > a.selected").removeClass("selected").end().find(".username").addClass("selected")},render:function(){document.title="Klout Perks",this.options.filter||(this.options.filter="current");var c=this.collection.models;if(!this.tabs.updated&&this.collection.categories!=null){this.tabs.updated=!0;for(var d=0;d<this.collection.categories.length;d++)this.collection.categories[d].domId="perkNav-"+this.collection.categories[d].categoryFilter,this.tabs.splice(d+2,0,this.collection.categories[d]);this.el.html(f.renderUS("perks/layout",{tabs:this.tabs,alertMessage:e}))}if(this.collection.categories!=null)for(var d=0;d<this.collection.categories.length;d++)this.collection.categories[d].selected&&(g=this.collection.categories[d].categoryFilter);this.options.filter=="featured"&&b("div#featuredPerkContainer").hide().html(f.renderUS("perks/featuredPerk",{perk:c.shift(),topics:this.collection.topics,users:this.collection.users})).fadeIn(),b(".content-main").html(f.renderUS("perks/perksView",{perks:c,users:this.collection.users,topics:this.collection.topics,filter:this.options.filter})),h(),b("li.perk").hover(function(){b(this).addClass("withShadow")},function(){b(this).removeClass("withShadow")}),b(".navigation").find(".selected").removeClass("selected").end().find(".perks-"+this.options.filter).addClass("selected"),_.each(c,function(b,c){var d,e,f,g=b.attributes.slug.substr(1);d=g.substring(0,g.indexOf("/")),e=g.substr(g.indexOf("/")+1),f="upcoming-perk-fb-like-"+d+e,a.model.Perk_.invokeUpcomingPerkXFBML(d,e,f)})}},{showSpinner:function(){var c=b(".content-main");!c.find(".overlay-loading").length&&c.append(b('<div class="overlay-loading"><img class="page-loading-icon" src="'+a.config.staticServer+'images/loading.gif"></div>'))},hideSpinner:function(){b(".content-main").find(".overlay-loading").remove()}})}(amphetamine,jQuery),function(a,b){var c,d,e,f,g=a.view=a.view||{},h=function(){document.title="Klout Perks";var a={name:d.get("name"),status:d.get("status"),content:d.get("content"),alertMessage:f};typeof a.content!="undefined"&&a.content!=null?b(c).html(g.renderUS("perk/layout",a)):d.set({status:"error"});var e=d.toJSON()},i=function(){var c=d.get("css"),e=d.get("status"),f=b("#klout-perks"),g=d.get("client")+"/"+d.get("campaign");propz={},propz.eligible=e=="ineligible"?"no":"yes",propz.perk=g,a.mp.get("impression").track("perks_overview",propz),window._kaq&&(_kaq.push(["setCustomData",{campaignId:d.get("campaignId"),eventType:101}]),_kaq.push(["trackPageView"])),c&&!b("#perks-style").length&&b('<style id="perks-style">'+c+"</style>").prependTo("body"),h(),new Date(d.get("startDate"))>new Date?a.model.Perk_.invokeUpcomingPerkXFBML(d.get("client"),d.get("campaign"),"perk-fb-like"):j(),t("overview")},j=function(){setTimeout(function(){var a='<fb:like href="http://klout.com/perk/'+d.get("client")+"/"+d.get("campaign")+'" send="false" layout="button_count" show_faces="false" colorscheme="light" width="200" font=""></fb:like>',b=document.getElementById("perk-fb-like");b&&(b.innerHTML=a,FB.XFBML.parse(b))},1)},k=null===a.cookie.get("ageGatePassed")?!1:!0,l=[145,147,149,153],m=function(){var c=d.get("status"),e=d.get("campaignId");if(("offer"===c||"ineligible"===c)&&-1!==b.inArray(e,l)&&!k){b(".close-modal").css("display","none");var f={"#perksOfferModalForm":g.renderUS("perk/ageGate"),"#perksOfferModalTitle":"Hold up!","#perksOfferModalSubTitle":"This perk is only open to people 21 and older.<br />Please enter your date of birth to continue."};_.each(_.keys(f),function(a){var c=f[a];f[a]=b(a).html(),b(a).html(c)}),b("#perks-age-gate-submit").click(function(c){c.preventDefault();var d=!1;b("#ageGateError").html(""),_.each(["month","day","year"],function(a){var c=b("#perks-age-gate-bday-"+a);null===c.val().match(/^\d+$/)?(c.css("border","1px solid red"),d=!0):c.css("border","")});var e=b("#perks-age-gate-bday-month").val()-1,g=b("#perks-age-gate-bday-day").val(),h=b("#perks-age-gate-bday-year").val();if(d||h<1896||h>(new Date).getFullYear()||g<1||g>31||e<0||e>11)b("#ageGateError").html("Please enter a valid date");else{var i=new Date,j=new Date(h,e,g),l=(i.getTime()-j.getTime())/31536e6;l<21?(_.each(["month","day","year"],function(a){b("#perks-age-gate-bday-"+a).val("")}),b("#ageGateError").html("You must be 21 years of age to participate.")):(k=!0,a.cookie.set("ageGatePassed","1"),_.each(_.keys(f),function(a){b(a).html(f[a])}),b(".close-modal").css("display","block "))}}),b("#perks-age-gate-cancel").click(function(a){b("#cancel-perks-offer-x").click(),window.location="/#/perks"})}},n=function(c){var e,f,h,i,j,k=!1,l=d.get("isPassAlong"),c=c||d.get("modal"),n=d.get("event"),o=d.get("venues"),p=d.get("status");p=d.get("disabled")?"error":p,p=="error"&&(c=d.toJSON()),j=b("#perksOfferContents"),j&&j.length?j.replaceWith(c):p!="ineligible"&&a.modal.show({id:p=="error"?"perks-error":p=="ineligible"?"perks-modal-ineligible":"perks-modal",content:c,callback:p=="error"?function(){location.replace("/#/perks")}:null}),b("div.modal-contents").height()+300>b(window).height()&&b("div.modal-contents").css("position","relative"),b("#perks-completed-modal-pass-along")[l?"show":"hide"](),b("#perks-completed-modal-non-pass-along")[l?"hide":"show"](),a.mp.get("impression").track("perks_modal",{screen:d.toJSON().status}),p=="ineligble"?i=102:p=="offer"?i=103:p=="completed"&&(i=104),window._kaq&&(_kaq.push(["setCustomData",{campaignId:d.get("campaignId"),eventType:i}]),_kaq.push(["trackPageView"])),d.get("status")=="offer"?(h=b("#perksOfferModalForm"),b.ajax({type:"GET",url:"/api/profile",success:function(a){console.log("profileInfo:",a);var c;b.each(b("#perksOfferModalForm").serializeArray(),function(d,e){field=e.name.substring(13,e.name.length),field=="firstname"?b("#form-element-firstname").val(a.firstName):field=="lastname"?b("#form-element-lastname").val(a.lastName):field=="phone"?b("#form-element-phone").val(a.phone):field=="address"?b("#form-element-address").val(a.address):field=="city"?b("#form-element-city").val(a.city):field=="zip"?b("#form-element-zip").val(a.zip):field=="addressLine2"?b("#form-element-addressLine2").val(a.addressLine2):field=="state"?(c=b("#form-element-state"),(a.country!="United States"||b("#form-element-country").length>0&&b("#form-element-country").val()!="United States")&&b("#form-element-state").replaceWith('<input type="text" class="form-element" id="form-element-state" name="form-element-state">'),b("#form-element-state").val(a.state)):field=="country"&&(b("#form-element-country").val(a.country),a.country!="United States"||b("#form-element-country").length>0&&b("#form-element-country").val()!="United States"?b("#form-element-state").replaceWith('<input type="text" class="form-element" id="form-element-state" name="form-element-state">'):b("#form-element-state").replaceWith(c),b("#form-element-state").val(a.state))}),b("#form-element-country").live("change",function(d){b("#form-element-country").val()=="United States"?(b("#form-element-state").replaceWith(c),b("#form-element-state").val(a.state)):(b("#form-element-state").replaceWith('<input type="text" class="form-element" id="form-element-state" name="form-element-state">'),b("#form-element-state").val(a.state))}),a.email==""&&(k=!0)},error:function(a){},complete:function(){e=h.find("select[name=numGuests]");if(d.get("isEvent")){o.length>1?(!b("#perks-select-venue").length&&b(g.render("perks_venue_select",{venues:o})).insertAfter("#perksOfferVenueSelect"),d.trigger("venue",0)):o.length&&(b("#perksOfferModalVenueDisplay").html(g.render("perks_venue_display",o[0])),b("#perksOfferVenueSelect").val(o[0].id));if(n.influencerGuestLimit){f=0,e=e.get(0);while(e&&f<=n.influencerGuestLimit)e.options[f]=new Option,e.options[f].value=f,e.options[f].text=f,f++}else h.find("label[for=form-element-guest]").remove(),e.replaceWith('<input type="hidden" name="numGuests" value="0">')}else h.find("label[for=form-element-guest]").remove(),e.remove();b("a#perks-offer-modal-submit-button").after('<br class="clearer" />'),b("form#perksOfferModalForm").append(g.renderUS("modal/perk-save-information",{profileInfo:d.get("profileInfo"),now:Date.now()})),m(c),k?typeof d.get("isOver18")=="undefined"?(b("a#perks-offer-modal-submit-button").attr("id","perks-offer-modal-submit-button-addAgeAndEmail"),b("form#perksOfferModalForm").prepend(g.renderUS("modal/perk-add-age",{profileInfo:d.get("profileInfo"),now:+(new Date)})),b("form#perksOfferModalForm").prepend(g.renderUS("modal/perk-add-email",{profileInfo:d.get("profileInfo"),now:+(new Date)}))):(b("a#perks-offer-modal-submit-button").attr("id","perks-offer-modal-submit-button-addEmail"),b("form#perksOfferModalForm").prepend(g.renderUS("modal/perk-add-email",{profileInfo:d.get("profileInfo"),now:+(new Date)}))):typeof d.get("isOver18")=="undefined"&&(b("a#perks-offer-modal-submit-button").attr("id","perks-offer-modal-submit-button-addAge"),b("form#perksOfferModalForm").prepend(g.renderUS("modal/perk-add-age",{profileInfo:d.get("profileInfo"),now:+(new Date)})))}})):d.get("status")=="completed"&&d.get("isEvent")&&b("#perksCompletedModalVenueDisplay").html(g.render("perks_venue_display",d.get("venue")))},o=function(){d.get("profileInfo")&&(d.get("modal")||d.get("status")=="error")&&(n(),d.unbind("change:status",o).unbind("change:modal",o))},p=function(){var a=d.get("cta");a&&b("#perksLandingCtaButton").text(a)},q=function(){},r=function(){var c=b("#perksOfferContents");d.get("loading")&&(c=c&&c.length?c:b("#perks-modal"),c.html('<img src="'+a.config.staticServer+'images/loading.gif">'),d.unbind("change:status",o).unbind("change:modal",o))},s=function(a){var c=d.get("venues");b("#perksOfferModalVenueDisplay").html(g.render("perks_venue_display",c[a])),b("#perksOfferVenueSelect").val(c[a].id)},t=function(a){var c=b("#navigation ."+a);c.hasClass("selected")||(c.closest("ul").find(".selected").removeClass("selected"),c.addClass("selected"),b("#content").find(".tab").hide().filter("."+a).show())},u=function(){var a,c=d.get("perksUGC"),e=d.get("perkInfos"),f=d.get("perksUGCUsers"),h=d.get("influencerOfs"),i=d.get("perksToPromptFor"),j=d.get("userId");c!=null&&e!=null&&f!=null&&(a={perksUGC:c,isOwnProfile:!1,bioData:{name:""},perkInfos:e,perksUGCUsers:f,influencerOfs:h,perksToPromptFor:i,userId:j,view:"perk"},b("div#perkUGC").html(g.renderUS("ugc/perksUGC",a)),b("div.starContainer .star").rating({small:!0}),b("div.ugcTimeStampAndVirals span.timeStamp").cuteTime(),b("ul.ugcThumbnailList a").fancybox({padding:2,cyclic:!0,centerOnScroll:!0,overlayColor:"#000",overlayOpacity:.7}))};g.PerkView=Backbone.View.extend({initialize:function(){d=this.model,c=this.el,e=d.get("isOver18"),e==0?f=a.perksAlertMessage.under18:e?f={}:f=a.perksAlertMessage.unknown,d.bind("change:content",i).bind("change:status",o).bind("change:modal",o).bind("change:profileInfo",o).bind("change:cta",p).bind("cta",n).bind("venue",s).bind("change:loading",r).bind("change:perksUGC",u).bind("change:perksInfos",u).bind("change:perksUGCUsers",u).bind("change:responseContent",function(){n(d.get("responseContent"))}),b("#menu").find("li > a.selected").removeClass("selected").end().find("a.perks").toggleClass("selected")},setTab:t})}(amphetamine,jQuery),function(a,b){var c,d,e=function(){var b=$("#private-stream"),e=c.get("lastUpdated"),f={days:c.get("days"),twitterless:c.get("twitterless"),enabled:c.get("enabled"),lastUpdated:e&&d.formatDate(e)};b.html(a.view.renderUS("stream/private-stream",f))},f=function(a,b,e){$("#"+a+" .network-stories."+b).replaceWith($(d.render("stream/private-stream-network-stories",{shortName:b,network:c.get("days")[a][b]})))};a.view.PrivateStreamView=Backbone.View.extend({initialize:function(){d=this,c=this.model,c.bind("change:days",e).bind("paging",a.view.renderSpinner("#user-stream","small")),c.bind("storiesUpdated",function(a,b,c,d){f(a,b,c,d)}),a.scrollMonitor.start("#user-stream .day",location.hash,function(a){a&&c.trigger("moreDays")})},render:e,formatDate:function(){var a=Handlebars.compile("{{#dateFormat date}}{{/dateFormat}}");return function(b){return a({date:b})}}()});var g,h,i=function(a,b){var c;k(),h&&a.get(0)!=h.get(0)&&h.hide(),h=a,c=b.position(),h.show().css({top:c.top-h.outerHeight()+"px",left:c.left+"px"})},j=function(){g&&clearTimeout(g),g=setTimeout(function(){h&&h.hide()},100)},k=function(){g&&clearTimeout(g),g=null};$(document).on("click",".collapse",function(){var a=$(this),b=a.closest(".network-stories"),d=b.closest(".day").get(0).id;c.trigger("removeStories",d,b.hasClass("fb")?"fb":b.hasClass("gp")?"gp":"tw")}).on("mouseover","#user-stream .score-down",function(){var a=$(this),b=a.position(),c=a.parent().find(".score-down-explanation");c.show().css({top:b.top-c.outerHeight()+"px"})}).on("mouseout","#user-stream .score-down",function(){$(this).parent().find(".score-down-explanation").hide()}).on("click","#user-stream a.more-stories, #user-stream a.expand",function(){var b=$(this).removeClass("button-alt"),d=b.closest(".network-stories"),e=d.closest(".day").get(0).id;b.find(".loading").length||(b.html('<img src="'+a.config.staticServer+'images/loading-small.gif" class="loading">'),d=d.hasClass("gp")?"gp":d.hasClass("fb")?"fb":"tw",c.trigger("moreStories",e,d))}).on("mouseover",".story .others",function(a){var b=$(this),c=b.closest(".story"),d=c.find(".influenced");i(d,b)}).on("mouseenter",".story .influenced, #profile-badge-container",k).on("mouseout",".story .others",j).on("mouseleave",".story .influenced, #profile-badge-container",j)}(amphetamine),function(a,b){var c,d,e=function(){el.length||(el=$(el.selector)),el.html(a.view.renderUS("stream/public-stream",c.toJSON()))};a.view.PublicStreamView=Backbone.View.extend({initialize:function(){d=this,el=this.el,c=this.model,e(),c.bind("change:stories",e).bind("paging",a.view.renderSpinner(el.selector+" .public-stream","small")),a.scrollMonitor.start(".public-stream .stream-story",location.hash,function(a){a&&c.trigger("moreStories")})}})}(amphetamine),function(a,b){var c,d,e=a.view,f=function(){b(c).html(e.renderUS("search/layout",{query:d.get("query"),results:d.get("results"),filter:d.get("filter")})),a.mp.get("impression").track("search_results",{page:d.get("filter")}),g()},g=function(){var a=d.get("results");typeof a!="undefined"&&b("#full-search-results .content-main").html(e.renderUS("search/"+d.get("filter"),{results:a,query:d.get("query")}))};e.SearchView=Backbone.View.extend({initialize:function(){d=this.model,c=this.el,f(),d.bind("change:results",f).bind("paging",a.view.renderSpinner("#full-search-results .content-main","small")),d.get("filter")&&a.scrollMonitor.start("#full-search-results .search-result",location.hash,function(a){a&&d.trigger("page")}),document.title="Klout | The Standard for Influence",b("#menu").find("li > a.selected").removeClass("selected").end()},render:f})}(amphetamine,jQuery),function(a,b){var c,d,e=a.view,f={},g={staticServer:a.config.staticServer};f.profile=function(){b(".content-main").html(e.renderUS("setting/profile",_.extend(d.toJSON(),{options:g,now:+(new Date)})));var c={};b.each(b("#edit-profile-form").serializeArray(),function(a,b){b.name=="birthday-day"?c.birthdayDay=b.value:b.name=="birthday-month"?c.birthdayMonth=b.value:b.name=="birthday-year"?c.birthdayYear=b.value:c[b.name]=b.value}),a.user.oldForm=c;var f=b("#edit-profile-form").find("input").filter("[name=zip]");(0==f.val()||"0null"==f.val())&&f.val(""),+d.get("profileInfo").isBrand?(b(".individual-only-fields").hide(),b("#edit-profile-brand-influencer").attr("checked","checked"),c.influencerType="brand"):(b(".brand-only-fields").hide(),b("#edit-profile-individual-influencer").attr("checked","checked"),c.influencerType="individual"),b("#edit-profile-individual-influencer").live("click",function(a){b(".brand-only-fields").hide(),b(".individual-only-fields").show()}),b("#edit-profile-brand-influencer").live("click",function(a){b(".individual-only-fields").hide(),b(".brand-only-fields").show()})},f.networks=function(){b(".content-main").html(e.renderUS("setting/networks",_.extend(d.toJSON(),{options:g})))},f.email=function(){b(".content-main").html(e.renderUS("setting/email",_.extend(d.toJSON(),{options:g})));var c=d.get("authUser"),f=d.get("profileInfo"),h={};h.prefs={},b.each(["perks","newsletter","dailyDigest"],function(a,b){h.prefs[b]=0}),b.each(b("#edit-email-form").serializeArray(),function(a,b){b.name==="email"?h.email=b.value:b.name==="email-settings"?h.prefs[b.value]=1:h[b.name]=b.value}),a.user.oldForm=h;if(f.dob!="0000-00-00")if(!a.user.isLegal)b("#email-setting-perks").attr("disabled",!0),b("#email-setting-perks").removeAttr("checked"),b("#dobPrompt").hide(),b("#email-setting-perks-label").addClass("disabled");else{var i=d.get("emailInfo").prefs.perks;i?(b("#email-setting-perks").removeAttr("disabled"),b("#email-setting-perks").attr("checked",!0),b("#dobPrompt").show(),b("#email-setting-perks-label").removeClass("disabled")):(b("#email-setting-perks").removeAttr("disabled"),b("#email-setting-perks").removeAttr("checked"),b("#dobPrompt").hide(),b("#email-setting-perks-label").removeClass("disabled"))}else if(a.user.priorPerk){var i=d.get("emailInfo").prefs.perks;i?(b("#email-setting-perks").attr("checked",!0),b("#dobPrompt").show()):b("#email-setting-perks").removeAttr("checked")}else b("#email-setting-perks").attr("checked",!1),b("#dobPrompt").hide();b("#email-setting-perks").click(function(){b(this).is(":checked")?b("#dobPrompt").show(200):b("#dobPrompt").hide(200)})},f.optout=function(){b(".content-main").html(e.renderUS("setting/optOut",_.extend(d.toJSON(),{options:g})))},f.privacy=function(){b(".content-main").html(e.renderUS("setting/privacy",_.extend(d.toJSON(),{options:g})))};var h=function(){c.html(e.renderUS("setting/layout")),b(".content-header").html(e.renderUS("setting/header",{header:"Edit Profile"}));var a,g={profile:"Profile Settings",networks:"Connected Networks",email:"Email Settings",optout:"Opt Out",privacy:"Privacy Settings"};if(!(d.get("type")&&_.keys(d.get("type")).length>0))return;a=_.keys(d.get("type"))[0],f[a]();var h=d.get("authUser");d.set({flash:"undefined"}),document.title=h.firstName+" "+h.lastName+" | "+g[a],b(".sidebar .navigation").find(".selected").removeClass("selected").end().find("."+a+"-link").addClass("selected")};e.SettingsView=Backbone.View.extend({initialize:function(){c=this.el,d=this.model.bind("change",h),this.el.html(e.renderUS("setting/layout")),b("#menu").find("li > a.selected").removeClass("selected").end().find(".username").addClass("selected"),b("#edit-profile-country").live("change",function(a){b("#edit-profile-country").val()=="United States"?(b("#stateTextArea").addClass("hidden"),b("#stateSelect").removeClass("hidden")):(b("#stateTextArea").removeClass("hidden"),b("#stateSelect").addClass("hidden"))})}}),b("#edit-email-submit").live("click",function(c){var e=function(a,c,d){b.ajax({type:"POST",url:"/api/profile/edit"+c,data:a,complete:d})},f=!1,g=!1,h={},i={};h.prefs={},b.each(["perks","newsletter","dailyDigest"],function(a,b){h.prefs[b]=0}),b.each(b("#edit-email-form").serializeArray(),function(a,b){b.name==="email"?h.email=b.value:b.name==="email-settings"?h.prefs[b.value]=1:i[b.name]=b.value});if(0===b.trim(b("#edit-email-settings-email").val()).length)d.set({flash:{error:!0,msg:"Sorry, please enter your email address."}});else if(!b("#email-setting-perks-label").hasClass("disabled")&&b("#email-setting-perks").attr("checked")&&(i["birthday-day"]==""||i["birthday-month"]==""||i["birthday-year"]==""))d.set({flash:{error:!0,msg:"Sorry, please enter a valid birthday to update email settings."}});else if(!_.isString(b("#edit-email-settings-email").val())||!/^(([A-Za-z0-9])|(\w[-\w\.\+]*[\w\+]))@([-A-Za-z0-9]+\.)+[A-Za-z]{2,4}$/.test(b("#edit-email-settings-email").val()))d.set({flash:{error:!0,msg:"Sorry, that doesn't look like a valid email address."}});else{b.each(h,function(c){if(c=="prefs")b.each(h[c],function(b){if(a.user.oldForm.prefs[b]!=h[c][b])return f=!0,!1});else if(a.user.oldForm[c]!=h[c])return f=!0,!1}),b.each(i,function(b){if(a.user.oldForm[b]!=i[b])return g=!0,!1}),a.modal.show({id:"saving-modal",content:{caption:"Saving..."}});if(!g&&!f)a.modal.hide(),d.set({flash:{error:!0,msg:"No changes to be saved."}});else if(!g&&f)e(h,"/email",function(){location.reload()});else{var j=d.get("authUser"),k=d.get("profileInfo");_.extend(i,{birthdayYear:i["birthday-year"],birthdayMonth:i["birthday-month"],birthdayDay:i["birthday-day"],firstName:j.firstName,lastName:j.lastName,email:h.email,gender:k.gender,dob:k.dob,zip:k.zip,picPref:k.profile_pic_service_id,brand:k.brand,influencerType:k.isBrand=="0"?"individual":"brand",isBrand:k.isBrand=="0"?!1:!0,aboutServiceId:k.aboutServiceId,aboutText:k.aboutText}),delete i["birthday-year"],delete i["birthday-month"],delete i["birthday-day"];if(f)if(b("#email-setting-perks").attr("checked")){var l=new Date,m=new Date(i.birthdayYear,i.birthdayMonth-1,i.birthdayDay),n=l.getFullYear()-m.getFullYear(),o=l.getMonth()-m.getMonth();(o<0||o===0&&l.getDate()<m.getDate())&&n--,n<18?(h.prefs.perks=0,e(h,"/email",function(){e(i,"",function(){location.reload()})})):(h.prefs.perks=1,e(h,"/email",function(){e(i,"",function(){location.reload()})}))}else e(h,"/email",function(){location.reload()});else if(b("#email-setting-perks").attr("checked")){var l=new Date,m=new Date(i.birthdayYear,i.birthdayMonth-1,i.birthdayDay),n=l.getFullYear()-m.getFullYear(),o=l.getMonth()-m.getMonth();(o<0||o===0&&l.getDate()<m.getDate())&&n--,n<18?(h.prefs.perks=0,e(h,"/email",function(){e(i,"",function(){location.reload()})})):e(i,"",function(){location.reload()})}else a.modal.hide(),d.set({flash:{error:!0,msg:"No changes to be saved."}})}}}),b("#edit-profile-submit").live("click",function(c){var e=function(a,c,d){b.ajax({type:"POST",url:"/api/profile/edit"+c,data:a,complete:d})},f={},g;c.preventDefault(),b("#edit-profile-country").val()!="United States"?b("#stateSelect").remove():b("#stateTextArea").remove(),b.each(b("#edit-profile-form").serializeArray(),function(a,c){c.name=b.trim(c.name),"fzip"==c.name?g=c.value:"zip"==c.name?isNaN(+c.value)?f[c.name]=g:f[c.name]=c.value:f[c.name]=c.value}),f.birthdayYear=f["birthday-year"],f.birthdayMonth=f["birthday-month"],f.birthdayDay=f["birthday-day"],delete f["birthday-year"],delete f["birthday-month"],delete f["birthday-day"];if(0===b.trim(b("#edit-profile-firstName").val()).length&&b("#edit-profile-individual-influencer").attr("checked"))d.set({flash:{error:!0,msg:"Sorry, you must provide your first name."}}),b("html, body").animate({scrollTop:0},"slow");else if(0===b.trim(b("#edit-profile-lastName").val()).length&&b("#edit-profile-individual-influencer").attr("checked"))d.set({flash:{error:!0,msg:"Sorry, you must provide your last name."}}),b("html, body").animate({scrollTop:0},"slow");else if(0===b.trim(b("#edit-profile-brand").val()).length&&b("#edit-profile-brand-influencer").attr("checked"))d.set({flash:{error:!0,msg:"Sorry, you must provide your brand name."}}),b("html, body").animate({scrollTop:0},"slow");else if(0===b.trim(b("#edit-profile-email").val()).length)d.set({flash:{error:!0,msg:"Sorry, please enter your email address."}}),b("html, body").animate({scrollTop:0},"slow");else if(!_.isString(b("#edit-profile-email").val())||!/^(([A-Za-z0-9])|(\w[-\w\.\+]*[\w\+]))@([-A-Za-z0-9]+\.)+[A-Za-z]{2,4}$/.test(b("#edit-profile-email").val()))d.set({flash:{error:!0,msg:"Sorry, That doesn't look like a valid email address."}}),b("html, body").animate({scrollTop:0},"slow");else if(b("#edit-profile-birthday-year").val()==""||b("#edit-profile-birthday-month").val()==""||b("#edit-profile-birthday-day").val()=="")d.set({flash:{error:!0,msg:"Sorry, please enter a valid birthday to update profile settings."}}),b("html, body").animate({scrollTop:0},"slow");else{var h=!1;b.each(f,function(b){a.user.oldForm[b]!=f[b]&&(h=!0)});if(!h)a.modal.hide(),d.set({flash:{error:!0,msg:"No changes to be saved."}}),b("html, body").animate({scrollTop:0},"slow");else{a.modal.show({id:"saving-modal",content:{caption:"Saving..."}});var i=new Date,j=new Date(f.birthdayYear,f.birthdayMonth-1,f.birthdayDay),k=i.getFullYear()-j.getFullYear(),l=i.getMonth()-j.getMonth();(l<0||l===0&&i.getDate()<j.getDate())&&k--,k<18?b.ajax({type:"GET",url:"/api/profile/email",complete:function(a){var c=jQuery.parseJSON(a.responseText),d=c.emailSettings.prefs;d.perks!=0?(postData={},postData={email:b("#edit-profile-email").val(),prefs:{perks:0,newsletter:d.newsletter,dailyDigest:d.dailyDigest}},e(postData,"/email",function(){e(f,"",function(){location.href="/#/edit-settings/profile",location.reload()})})):e(f,"",function(){location.href="/#/edit-settings/profile",location.reload()})}}):e(f,"",function(
){location.href="/#/edit-settings/profile",location.reload()})}}}),b("#edit-profile-about-text").live("click",function(){b("#edit-profile-0-about").attr("checked","checked")}),b("#edit-networks-submit").live("click",function(a){d.set({flash:{success:!0,msg:"Your connected networks have been saved."}})}),b(".unlink",b("#connected-networks")[0]).live("click",function(c){a.modal.show({id:"saving-modal",content:{caption:"Unlinking..."}});var d=b(this).attr("id").replace("unlink-service-","");c.preventDefault(),b.ajax({type:"GET",url:"/unlink/"+d,complete:function(){location.reload()}})})}(amphetamine,jQuery),function(a){var b=this.amphetamine=this.amphetamine||{},c=b.view=b.view||{};c.StaticView=Backbone.View.extend({initialize:function(){},render:function(){document.title="Klout | the Standard for Influence",$(this.el).html(c.render(this.options.page,this.model.toJSON()))}})}(),function(a,b){a=a||{};var c,d,e=a.view=a.view||{},f={};f.content=function(){b(c).find(".content-main").html(e.renderUS("topic/content",d.toJSON()))},f.index=function(){var a={isIndex:!0};_.extend(a,d.toJSON()),b("#featured-topic").html(e.renderUS("topic/summary",a)),b("#interesting-topics").html(e.renderUS("topic/indexLists",a))},f.indexLayout=function(){b(c).html(e.renderUS("topic/indexLayout",d.toJSON())),e.renderSpinner("#featured-topic","large")()},f.influencers=function(){b(c).find(".content-main").html(e.renderUS("topic/influencers",d.toJSON()))},f.influencers_plusk=function(){b(c).find(".content-main").html(e.renderUS("topic/influencers_plusk",d.toJSON())),a.scrollMonitor.start(".influencer.list-row",location.hash,function(a){a&&d.trigger("paginate","influencers_plusk")})},f.influencers_plusk_more=function(){b(c).find(".content-main").html(e.renderUS("topic/influencers_plusk",d.toJSON()))},f.influentialAbout=function(){b("#topic-index .influential-about").html(e.renderUS("topic/influentialAbout",d.toJSON()))},f.pending=function(){b(c).find(".content-main").html(e.renderUS("topic/pending",d.toJSON()))},f.perks=function(){b(c).find(".content-main").html(e.renderUS("topic/perks",d.toJSON()))},f.stream=function(){b(c).find(".content-main").html(e.renderUS("topic/stream",d.toJSON()))},f.summary=function(){var c=_.extend(d.toJSON(),{isLoggedIn:a.user&&a.user.ksUID,options:{}});b("#topic-header").html(e.renderUS("topic/summary",c))},f.activity=function(){b(c).find(".content-main").html(e.renderUS("topic/activity",d.toJSON()))};var g=function(){var g=d.get("type");b("#menu").find("a.selected").removeClass("selected"),location.href.indexOf("topic")>=0&&location.href.indexOf("topics")==-1&&location.href.indexOf(d.get("slug"))>=0?g?(d.get("summary")&&(document.title=d.get("summary").topic_.display+" | Klout"),f[g](),g!="summary"&&a.mp.get("impression").track("topic_"+g,{topic:d.get("topic")}),g=="influencers_plusk_more"&&(g="influencers_plusk"),g!="summary"&&b(".sidebar .navigation").find(".selected").removeClass("selected").end().find("."+g+"-link").addClass("selected")):b(c).html(e.renderUS("topic/layout",d.toJSON())):(g=="index"&&(f.indexLayout(),document.title="Featured Topics | Klout",d.get("filter")&&a.modal.show({id:"invalid-topic",content:{},callback:function(){}})),f[g]())};e.TopicView=Backbone.View.extend({initialize:function(){c=this.el,d=this.model,this.model.bind("index",function(a){f.indexLayout(),scrollTo(0,0)}),this.model.bind("page",function(a,b,c){a||(f.indexLayout(),scrollTo(0,0))}),this.model.bind("change",g),this.model.bind("loading:summary",e.renderSpinner("#topic-header","small")),this.model.bind("loading:tab",e.renderSpinner("#topic-profile .content-main","large")),this.model.bind("loading:paginate",e.renderSpinner("#topic-profile .content-main","small")),this.model.bind("loaded:paginate",e.renderSpinner("#topic-profile .content-main","none")),this.model.bind("change:slug",function(){scrollTo(0,0)})}})}(amphetamine,jQuery),function(a,b){var c,d,e,f=function(){var b=d.get("results");b&&c.find(".search-results").html(a.view.renderUS("search/typeaheadResults",{influencers:b.influencers,topics:b.topics,query:d.get("query")})).show(),c.find(".submit-button").attr("src",a.config.staticServer+"images/magnifying-glass.png")},g=function(a){var b,c,e,f;b=a.closest(".search-result");if(!b.length)return;c=b.get(0).id,e=c.indexOf("topic")?"influencer":"topic",f=c.replace(e+"-result-",""),d.trigger("resultSelected",e,f)},h=function(b){if(b=="admin"){var c=d.get("selectedResult");c&&c.nick?location.href="/#/admin/user/"+c.nick:c&&c.slug&&c.displayName?location.href="/#/admin/topic/"+c.name:a.alert("Invalid selection")}};a.view.TypeaheadView=Backbone.View.extend({initialize:function(){view=this,d=view.model,d.bind("change:results",f).bind("change:selectedResult",function(){var a=d.get("selectedResult");c.find(".search-results").hide(),a&&c.find(".searchfield").val(e?a.displayName||a.name:"")}).bind("change:query",function(){c.find(".submit-button").attr("src",a.config.staticServer+"images/loading-small.gif")}).bind("searchAborted",function(){c.find(".submit-button").attr("src",a.config.staticServer+"images/magnifying-glass.png")})}}),b(".search .searchfield").live("focus",function(a){var d=b(this).closest(".search"),f=d.find(".search-results");c=d,e=c.closest("#add-topic-search").length?"topics":c.closest(".influencer-search").length?"influencers":c.closest(".admin-search").length?"admin":0,d.animate({opacity:1},100),f.find(".results-list").length>0&&f.show()}),b(".search .searchfield").live("blur",function(a){var f=b(this).closest(".search");d.trigger("searchAborted"),c=f,e=c.closest("#add-topic-search").length?"topics":c.closest(".influencer-search").length?"influencers":c.closest(".admin-search").length?"admin":0,e||setTimeout(function(){f.find(".search-results").hide(),f.animate({opacity:.5},100)},200),document.activeElement==this&&this.blur()}),b(".search .submit-button").live("click",function(){var a=b(this).parent().find(".searchfield"),c=b.Event("keyup",!0);c.keyCode=13,a.trigger(c)}),b(".search-results .results-list a").live("mouseenter",function(a){var c=b(this).parent().parent(),d=c.find("a.selected");d.removeClass("selected"),b(this).addClass("selected")}),b(".search-results .results-list a").live("click",function(a){e&&a.preventDefault(),g(b(this)),h(e)}),b(".search .searchfield").live("keyup",function(f){var i=b(this),j=i.val().replace(/<|>|"/g,""),k=f.keyCode||f.which,l={left:37,up:38,right:39,down:40},m=b(this).closest(".search");resultsContainer=m.find(".search-results"),resultsList=resultsContainer.find(".results-list"),current=resultsList.find("a.selected"),context=i.closest("#add-topic-search").length?"add-topic":i.closest(".influencer-search").length?"add-influencer":i.closest(".admin-search").length?"admin":"header";if(k!=l.up&&k!=l.down&&k!=13&&k!=27||!resultsContainer.is(":visible"))k==13&&!resultsContainer.is(":visible")?context=="header"?(i.val(""),location.href="/#/search/"+j):e=="admin"&&(location.href="/#/admin/user/"+j):j.length>2?d.trigger("query",j,e):(resultsContainer.hide(),d.trigger("query","",null),c.find(".submit-button").attr("src",a.config.staticServer+"images/magnifying-glass.png"));else{f.preventDefault();if(k==l.down)current.parent().next().length>0&&(current.removeClass("selected"),current.parent().next().hasClass("header")?current.parent().next().next().find("a").addClass("selected"):current.parent().next().find("a").addClass("selected"));else if(k==l.up)current.parent().prev().prev().length>0?(current.removeClass("selected"),current.parent().prev().hasClass("header")?current.parent().prev().prev().length>0&&current.parent().prev().prev().find("a").addClass("selected"):current.parent().prev().find("a").addClass("selected")):current.removeClass("selected");else if(k==13)if(current.length>0){g(current);if(!e)return location.href=current.attr("href"),resultsContainer.hide();h(e)}else i.val(""),resultsContainer.hide(),e=="admin"?location.href="/#/admin/user/"+j:location.href="/#/search/"+j;else k==27&&b(this).blur()}})}(amphetamine,jQuery),function(a,b){a=a||{};var c,d,e=a.view=a.view||{},f={};f.klout=function(){var f=_.extend(d.toJSON(),{isLoggedIn:a.user&&a.user.ksUID});b(c).find(".content-main").html(e.renderUS("understand/klout",f))},f.why=function(){var f=_.extend(d.toJSON(),{isLoggedIn:a.user&&a.user.ksUID});b(c).find(".content-main").html(e.renderUS("understand/why",f))},f.privacy=function(){var f=_.extend(d.toJSON(),{isLoggedIn:a.user&&a.user.ksUID});b(c).find(".content-main").html(e.renderUS("understand/privacy",f))},f.score=function(){var f=5.56,g=_.extend(d.toJSON(),{isLoggedIn:a.user&&a.user.ksUID}),h=(d.get("score").score-10)*f+5;b(c).find(".content-main").html(e.renderUS("understand/score",g)),b("#understand-klout #user-position .user-img").load(function(){setTimeout(function(){b("#understand-klout #user-position").animate({left:h},750)},500)})},f.topics=function(){var f=_.extend(d.toJSON(),{isLoggedIn:a.user&&a.user.ksUID});b(c).find(".content-main").html(e.renderUS("understand/topics",f))};var g=function(g){b("#menu").find(".selected").removeClass("selected").end().find("a.understand-link").addClass("selected"),b("#understand-klout").length||(b(c).html(e.renderUS("understand/layout",d.toJSON())),document.title=" Understanding Klout"),b(".sidebar .navigation").find(".selected").removeClass("selected").end().find("."+g+"-link").addClass("selected"),f[g](),a.mp.get("impression").track("understand_klout_"+g)};e.UnderstandView=Backbone.View.extend({initialize:function(){c=this.el,d=this.model,this.model.bind("loaded",g)}})}(amphetamine,jQuery),function(a,b){a=a||{};var c,d,e=a.view=a.view||{},f=-1,g=[],h,i,j,k={footer:"div#kloutWallFooter",logo:"img#logo",listLink:"a#listLink",listContainer:"div#kloutWallListContainer",list:"ul#kloutWallList",listItem:"ul#kloutWallList > li"},l=b(window).width(),m=b(window).height();render=function(){d.get("friends")&&d.get("friends").length&&(b("div#kloutWallSpinner").remove(),b("body").prepend(e.renderUS("wall/wall",d.toJSON())),b(window).unbind("resize").bind("resize",n),r())};var n=function(){b("ul#kloutWallList li").css({visibility:"hidden",display:"block"}),clearTimeout(h),h=setTimeout(function(){location.reload(!0)},1e3)},o=function(a){var c=0,d=b("ul#kloutWallList > li:visible").length,e=b("ul#kloutWallList > li:visible"),f=function(){if(d){var g=e.eq(c);g.animate({opacity:0},150,function(){c++,c<d?f():(b("span.side2").hide(),b("span.side1").show(),b("ul#kloutWallList > li").hide().animate({opacity:1},1),i=setTimeout(a,500))})}else b("span.side2").hide(),b("span.side1").show(),b("ul#kloutWallList > li").hide().animate({opacity:1},1),i=setTimeout(a,500)};f()},p=function(a){var c=b("ul#kloutWallList > li:visible").length,d=b("ul#kloutWallList > li:visible"),e=0,f=function(){if(c){var b=d.eq(e);b.find("span.side2").fadeIn(250),b.find("span.side1").animate({opacity:0},250,function(){e++,e<c?f():i=setTimeout(function(){a(q)},c*1200)})}else i=setTimeout(function(){a(q)},c*1200)};f()},q=function(){f++;if(f==g.length||g.length==1)f=0;var a=g[f],c=function(d){var e=b("ul#kloutWallList > li").eq(f*a.length+d);e.find("span.kimage img").each(function(){var a=b(this).width(),c=b(this).height(),d=a/c;a>128&&(a=128,c=a/d),c>128&&(c=128,a=c*d),b(this).css({width:a,height:c,top:(128-c)/2,left:(128-a)/2})}),e.css({visibility:"visible",display:"none"}),e.find("span.side1").animate({opacity:1},1),e.fadeIn(500,function(){d++,d<a.length&&c(d)})};for(var d=0;d<a.length;d++){var e=b("ul#kloutWallList > li").eq(f*a.length+d);e.css({visibility:"hidden",display:"block",marginBottom:0,marginTop:0});if(d+1==a.length)if(b(k.list).height()>=b(k.listContainer).height()-10)c(0);else while(b(k.list).height()<b(k.listContainer).height()-10)currentMarginBottom=parseInt(b(k.listItem).css("margin-bottom")),currentMarginBottom++,b(k.listItem).css("margin-bottom",currentMarginBottom),b(k.list).css("margin-top",currentMarginBottom/2),b(k.list).height()>=b(k.listContainer).height()-10&&c(0)}j=setTimeout(function(){p(o)},a.length*2400)},r=function(){var a=b(window).width(),c=b(window).height(),e=483,h=296,l=20,m=Math.floor((a-l)/(e+l)),n=0,p=0,r=l,s=c*.045138889,t=(a-(m*(e+l)+l))/2,u=d.get("friends");clearTimeout(j),clearTimeout(i),b(k.footer).css({width:a*1,height:c*.125}),b(k.list).css({marginLeft:t,marginTop:l,paddingRight:l}),s>65&&(s=65),b(k.logo).css({width:c*.045138889*4.246153846,height:s,top:c*.125/2-s/2,left:t+l+10});var v=.013888889*c;v>20&&(v=20),b(k.listLink).css({top:b(k.footer).height()/2-b(k.listLink).height()/2,right:t+l+20,fontSize:v}),b(k.listContainer).css({height:c-b(k.footer).height()}),b(k.listItem).css({width:e,height:h,marginLeft:l,marginBottom:l});while(b(k.list).height()<b(k.listContainer).height()-10)r=parseInt(b(k.listItem).css("margin-bottom")),r++,b(k.listItem).css("margin-bottom",r),b(k.list).css("margin-top",r/2);n=Math.floor(b(k.listContainer).height()/(h+r-4))*m,p=Math.ceil(u.length/n),g=[];for(var w=0;w<p;w++){var x=[];for(var y=0;y<n;y++)u[w*n+y]&&x.push(u[w*n+y]);g.push(x)}b("ul#kloutWallList > li").hide(),f=-1,o(q)};e.WallView=Backbone.View.extend({initialize:function(){c=this.el,d=this.model,d.bind("change",render),b("body").attr("id","kloutWall"),b("body > div").not("div#fb-root").remove(),b("body").prepend(e.renderUS("wall/spinner",d.toJSON()));var a=function(){var c=-500,d=100,e=parseInt(b("div#kloutWallSpinner").css("background-position-y"));e>c?e-=100:e=0,b("div#kloutWallSpinner").css("background-position-y",e),b("div#kloutWallSpinner").length&&setTimeout(a,d)};render()}})}(amphetamine,jQuery),function(){var a=window.amphetamine=window.amphetamine||{},b=a.view=a.view||{},c={};b.init=function(){var d=$("<div />");$('script[type="x-hbs-template"]').each(function(a,b){var e=$(b).attr("id"),f=d.html($(b).html()).text();c[e]=Handlebars.compile(f),Handlebars.registerPartial(e,c[e]),$(b).remove()}),Handlebars.registerHelper("indefiniteArticle",function(a){return a&&!a.toLowerCase().search(/[aeiou]/)?"an":"a"}),Handlebars.registerHelper("scoreIs100",function(a){return a&&a==100?"triple-score":""}),Handlebars.registerHelper("last",function(a){return a&&a.length&&a[a.length-1]}),Handlebars.registerHelper("round",function(a){return a?b.round(a):""}),Handlebars.registerHelper("round3",function(a){return a?b.truncate(a):""}),Handlebars.registerHelper("empty",function(a){return a&&a.length==0}),Handlebars.registerHelper("noData",function(a){return"object"==typeof a&&null==a?'style="display:block;"':!1}),Handlebars.registerHelper("pluralizelen",function(a){return a.length==1?"":"s"}),Handlebars.registerHelper("pluralizeNum",function(a){return a==1?"":"s"}),Handlebars.registerHelper("numberFormat",function(a){return b.numberFormat(a)}),Handlebars.registerHelper("cap10k",function(a){return!isNaN(+a)&&+a>1e3?"10K+":b.numberFormat(a)}),Handlebars.registerHelper("numberFormatMax500",function(a){return!isNaN(+a)&&+a>500?"500+":b.numberFormat(a)}),Handlebars.registerHelper("kClassDisplay",function(b){return a.kClasses[b]?a.kClasses[b].name:b}),Handlebars.registerHelper("isNull",function(a,b,c){return a[b]===null?c(a):""}),Handlebars.registerHelper("isUndefined",function(a,b,c){return typeof a[b]=="undefined"?c(a):""}),Handlebars.registerHelper("isNumber",function(a,b,c){return a&&!isNaN(a.value)?c(a):b}),Handlebars.registerHelper("cannotPlusK",function(b,c,d){return a.user.canPlusK(b)?"":c})},b.render=function(a,b){return b=b||{},c[a]&&c[a](b)},b.parseMysqlDate=function(a){var b=a.split(/[- :]/);return new Date(b[0],b[1]-1,b[2],b[3],b[4],b[5])},b.hideSpinner=function(a){var b=$(a);b.children(".overlay-loading").remove(),b.children(".section-loading-icon").remove()},b.renderSpinner=function(b,c){return"large"==c?function(){var c=$(b);!c.find(".overlay-loading").length&&c.append($('<div class="overlay-loading"><img class="page-loading-icon" src="'+a.config.staticServer+'images/loading.gif"/></div>'))}:"small"==c?function(){var c=$(b);!c.find(".section-loading-icon").length&&c.append($('<img class="section-loading-icon" src="'+a.config.staticServer+'images/loading-small.gif">'))}:"none"==c?function(){var a=$(b);a.find(".section-loading-icon").remove()}:function(){var c=$(b);!c.find(".section-loading-icon").length&&c.append($('<img class="section-loading-icon" src="'+a.config.staticServer+'images/loading-small.gif">'))}},b.renderUS=function(b,c){c||(c={}),c.options||(c.options={});var d={env:a.config.dev?"development":"production",staticServer:a.config.staticServer};return _.extend(c.options,d),a.t[b]&&a.t[b](c)},b.round=function(a,b){var c=""+a,b=b||!1;if(+a>1e3){var d=1e3,e="K";+a>1e6&&(d=1e6,e="M"),b?c=""+ +a/d+e:c=""+Math.round(+a/d)+e}return c},b.numberFormat=function(a){var b,c=1e9,d=1e6,e=1e3,f="";return a?(b=parseFloat(a+""),isNaN(b)?"--":b<1e3?b:(b>=c?(f="B",b/=c):b>=d?(f="M",b/=d):b>=e&&(f="k",b/=e),b=1e3*(b/1e3).toPrecision(2),(""+b).split(".")[1]&&(b=b.toFixed(1)),b+f)):"--"},b.toPrecision=function(a,b){return!a||isNaN(a)?"0":""+a.toPrecision(b)},b.truncate=function(a){if(!a||isNaN(a))return"0";var b=(""+a).split("."),c;if(b.length===1)c="0";else{if(b.length!==2)return"0";c=b[1].substring(0,2)}return""+b[0]+"."+c}}(),function(){var a="undefined"!=typeof require?require("./vendor/handlebars"):this.Handlebars;a.registerHelper("three",function(a,b,c){var d="";if(a&&a.length>0)for(var e=0,f=a.length;e<f&&e<3;e++)d+=b(a[e]);else d=c(this);return d}),a.registerHelper("map",function(a,b){var c="",d=[];for(k in a)d[d.length]=k;for(var e=0,f=d.length;e<f;e++)c+=b({k:d[e],v:a[d[e]],first:0==e,last:d.length-1==e,mid:0!==e&&d.length-1!==e});return c}),a.registerHelper("list",function(a,b){var c="";for(var d=0;d<a.length;d++)c+=b({el:a[d],idx:d,first:0==d,last:a.length-1==d,mid:0!==d&&a.length-1!==d,only:1===a.length});return c}),a.registerHelper("ifEmpty",function(a,b){return!a||a==1||a&&a.length==0?b(this):!1}),a.registerHelper("ifNotEmpty",function(a,b){return a==1||a&&a.length>0?b(this):!1}),a.registerHelper("isTw",function(a,b){return a==1||a=="tw"?b(this):!1}),a.registerHelper("isFb",function(a,b){return a==2||a=="fb"||a=="Facebook"?b(this):!1}),a.registerHelper("stripUnderscore",function(a){return a.replace("_"," ")}),a.registerHelper("deltaDisplay",function(a){return a==0?"--":a>0?"+"+a:a}),a.registerHelper("sortBy",function(a,b,c){var d,e,f,g,h=0;if(a){d=a.length,e=a.slice().sort(function(a,c){return c[b]-a[b]});while(g=e[h])f=g.idx=h+1,f==d&&(g.isLast=1),e[h]=c(g),h++;return e.join("")}}),a.registerHelper("join",function(a,b,c){for(var d=[],e=0,f=a.length;e<f;e++)d.push(c(a[e]));return d.join(b)}),a.registerHelper("dateFormat",function(a){return a=new Date(a),["January","February","March","April","May","June","July","August","September","October","November","December"][a.getMonth()]+" "+a.getDate()+", "+a.getFullYear()}),a.registerHelper("posOrNeg",function(a){return a?a<=0?"neg":"pos":"zero"}),a.registerHelper("slug",function(a){return a&&a.toLowerCase().replace(/\s/g,"_")}),a.registerHelper("noUnderscore",function(a){return a&&a.toLowerCase().replace("_"," ")}),a.registerHelper("len",function(a){return a?a.length:""}),a.registerHelper("daysOrHours",function(a){var b,c;return c=Math.floor(a/86400),c==1?"1 day":c>0?c+" days":(b=a/3600,b<1?"less than an hour":(b=Math.round(b),b==1?"1 hour":b+" hours"))}),a.registerHelper("eq",function(a,b,c){if(a==b)return c(a)}),a.registerHelper("pluralize",function(a){return a==1?"":"s"})}(),function(){var root=this,amphetamine;typeof exports!="undefined"?amphetamine=exports:amphetamine=root.amphetamine=root.amphetamine||{},amphetamine.t={};var _=root._;!_&&typeof require!="undefined"&&(_=require("underscore")._),amphetamine.t["corp/about"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="corp-about">\n    <div class="content-header">\n        <h1 class="header-text">About Klout</h1>\n    </div>\n    <div class="content-body clearfix">\n        ',this["corp/sidebarnav"]({page:"about"}),'\n        <div class="content-main">\n            <div class="section image-section first">\n                <img src="',options&&options.staticServer,'images/corp/about-splash.jpg" alt="Klout Office" height="213" width="651"/>\n            </div>\n            <div class="section">\n                <h2 class="section-header">Klout measures influence online</h2>\n                <div class="section-body">\n                    <p>\n                        Our friendships and professional connections have moved online, making influence measurable for the first time in history. When you recommend, share, and create content you impact others. Your <a href="/corp/kscore">Klout Score measures that influence on a scale of 1 to 100</a>.\n                    </p>\n                </div>\n            </div>\n            <div class="section image-section">\n                <img src="',options&&options.staticServer,'images/corp/klout-stats3.png" alt="Klout Stats"/>\n            </div>\n            <div class="section">\n                <h2 class="section-header">The Standard for Influence</h2>\n                <div class="section-body">\n                    <p>\n                        When we\'re measuring your influence there\'s no room for error. We have a killer team of scientists\n                        and engineers working everyday to ensure continued accuracy and make the Score clear and actionable.\n                        We hold ourselves to a high standard and we hope you will too. Learn more about <a href="/corp/kscore">how we score</a>.\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <h2 class="section-header">You have Klout in the topics you care about</h2>\n                <div class="section-body">\n                    <p>\n                        Klout finds influencers in everything from barbecue to tech gadgets to gardening. Uncover your influence and find people who share your interests.\n                    </p>\n                </div>\n            </div>\n\n            <hr>\n            <div class="section">\n                <h2 class="section-header">The Klout Team</h2>\n                <div class="section-body">\n                    <ul class="team-list">\n                        <li>\n                            <img alt = "Joe Fernandez" src="',options&&options.staticServer,'images/corp/profile-joe.jpg">\n                            <h2><a href="/joefernandez" title="Joe Fernandez">Joe Fernandez</a></h2>\n                            <h3>CEO &amp; Co-Founder</h3>\n                            <p>Spent the last decade building big data companies: Education, Real Estate, now Social.</p>\n                        </li>\n                        <li>\n                            <img alt = "Binh Tran" src="',options&&options.staticServer,'images/corp/profile-binh.jpg">\n                            <h2><a href="/binhtran" title="Binh Tran">Binh Tran</a></h2>\n                            <h3>CTO &amp Co-Founder</h3>\n                            <p>Coding since 13, Binh is a game programmer turned into big data cruncher.</p>\n                        </li>\n                        <li>\n                            <img alt = "Tim Mahlman" src="',options&&options.staticServer,'images/corp/profile-tim.png">\n                            <h2><a href="/tmahlman" title="Tim Mahlman">Tim Mahlman</a></h2>\n                            <h3>Chief Revenue Officer</h3>\n                            <p>Scaled revenue at Blue Lithium, Yahoo! and Turn but has a real passion for Social.</p>\n                        </li>\n                        <li>\n                            <img alt = "Dave Mariani" src="',options&&options.staticServer,'images/corp/profile-dave.jpg">\n                            <h2><a href="/dmariani" title="Dave Mariani">Dave Mariani</a></h2>\n                            <h3>VP of Engineering</h3>\n                            <p>Leader to world class engineering teams at Acxiom, Blue Lithium, Yahoo!, and now Klout.</p>\n                        </li>\n                        <li>\n                            <img alt = "Matt Thomson" src="',options&&options.staticServer,'images/corp/profile-matt.jpg">\n                            <h2><a href="/daddymention" title="Matt Thomson">Matt Thomson</a></h2>\n                            <h3>VP of Platform</h3>\n                            <p>MIT MBA and former Product at Lithium pushing Klout data to the world.</p>\n                        </li>\n                        <li>\n                            <img alt = "Chris Makarsky" src="',options&&options.staticServer,'images/corp/profile-cmak.jpg">\n                            <h2><a href="/cmak" title="Chris Makarsky">Chris Makarsky</a></h2>\n                            <h3>Director of Product</h3>\n                            <p>From Yahoo! to Zynga to Klout, Chris couldn\'t stop building amazing products if he tried.</p>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <br class="clearer">\n            <div class="section image-section">\n                <img src="',options&&options.staticServer,'images/corp/klout-team.jpg" alt="Klout Team" height="254" width="641"/>\n            </div>\n            <div class="section">\n                <h2 class="section-header">Klout Investors</h2>\n                <div class="section-body">\n                    <ul class="logo-list">\n                        <li><a href="http://kpcb.com" target="_blank"><img src="',options&&options.staticServer,'images/corp/kpcb-logo.jpg" alt="Kleiner Perkins Caufield Byers"/></a></li>\n                        <li><a href="http://ffventure.com" target="_blank"><img src="',options&&options.staticServer,'images/corp/ffventure-logo.jpg" alt="ff Venture Capital"/></a></li>\n                        <li><a href="http://www.greycroftpartners.com/" target="_blank"><img src="',options&&options.staticServer,'images/corp/greycroft-logo.jpg" alt="Greycroft Partners"/></a></li>\n                    </ul>\n                    <br class="clearer">\n                    <ul class="logo-list">\n                        <li><a href="http://www.ivp.com/" target="_blank"><img src="',options&&options.staticServer,'images/corp/ivp-logo.png" alt="Institutional Venture Partners"/></a></li>\n                        <li><a href="http://www.venrock.com/" target="_blank"><img src="',options&&options.staticServer,'images/corp/venrock-logo.png" alt="Venrock"/></a></li>\n                    </ul>\n                </div>\n                <br class="clearer">\n                <div class="section-body">\n                    For more information, <a href="/corp/contact">contact us</a>.\n                </div>\n            </div>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["corp/business"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="content-wrapper">\n    <div class="content-header">\n        <h1>Klout for Business</h1>\n    </div>\n    <div class="content-body clearfix">\n        ',this["corp/sidebarnav"]({page:"business"}),'\n        <div class="content-main">\n            <div class="splash">\n                <p><img src="',options&&options.staticServer,'images/corp/perks-splash2.jpg" alt="For Business" width="653" height="215" /></p>\n            </div>\n            <div id="perks">\n                <div class="section">\n                    <h2 class="section-header">The Standard for Influence</h2>\n                    <p>Klout measures influence based on the ability to drive action, not potentially misleading metrics like follower or friend count. Klout has analyzed over 85 million people on major social networks, and is used by over 3000 brands and applications.</p>\n                </div>\n                <div class="section left">\n                    <div class="quote">\n                        <p class="content">We identified Klout as a skilled partner to help us recognize and identify our Facebook fans with followings and influence.</p>\n                        <p class="byline">Doug Clark</p>\n                        <p class="bytitle">GM, Social Media &amp; Customer Engagement, Audi of America</p>\n                    </div>\n                </div>\n                <div class="section right">\n                    <h2 class="section-header">Build Brand Awareness</h2>\n                    <p>Your customers don\'t trust advertising, they trust their peers and influencers. Get your product into the right hands and let them do the talking for you.</p>\n                </div>\n                <div class="section right">\n                    <a href="contact" class="button-primary">Contact Us</a>\n                </div>\n                <br class="clearer">\n                <hr>\n                <div class="section">\n                    <div class="section-header">\n                        <h2>Learn how brands are leveraging Klout Perks</h2>\n                    </div>\n                    <ul class="onesheet-list clearfix">\n                        <li><a href="',options&&options.staticServer,'images/docs/onesheets/audi.pdf"><img src="',options&&options.staticServer,'images/corp/audi-onesheet.jpg" alt="Audi One Sheet"></a></li>\n                        <li><a href="',options&&options.staticServer,'images/docs/onesheets/tangled.pdf"><img src="',options&&options.staticServer,'images/corp/disney-onesheet.jpg" alt="Disney / Tangled One Sheet"></a></li>\n                        <li><a href="',options&&options.staticServer,'images/docs/onesheets/popchips.pdf"><img src="',options&&options.staticServer,'images/corp/popchips-onesheet.jpg" alt="popchips One Sheet"></a></li>\n                        <li><a href="',options&&options.staticServer,'images/docs/onesheets/lot18.pdf"><img src="',options&&options.staticServer,'images/corp/lot18-onesheet.jpg" alt="Lot18 One Sheet"></a></li>\n                    </ul>\n                </div>\n                <div id="logos" class="section">\n                    <img src="',options&&options.staticServer,'images/corp/perks-logos2.jpg" alt="Logos" width="653" height="166" />\n                </div>\n            </div>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["corp/careers"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var compasEnabled=options.compasEnabled||!1;__p.push('\n<div id="klout-careers" class="content-wrapper">\n    <div class="content-header">\n        <h1 class="header-text">Work at Klout</h1>\n    </div>\n    <div class="content-body clearfix">\n        ',this["corp/sidebarnav"]({page:"careers"}),'\n        <div class="content-main">\n            <div class="splash">\n                <img src="',options&&options.staticServer,'images/corp/get-job-header.png" alt="Careers" width="651" height="326" />\n            </div>\n            <div class="careers-info first clearfix">\n                <div class="section left-col">\n                    <h3 class="section-header">Want to work at Klout?</h3>\n                    <p>\n                        Here at Klout, we <strong>make things happen</strong>. We\'re building the\n                        <strong>standard for influence</strong> and that\'s no easy task: we\'re looking for people who move\n                        like lightning, run through walls and punch mediocrity in the face. Are you in?\n                    </p>\n                </div>\n                <div class="section right-col">\n                    <img class="klout-photo" src="',options&&options.staticServer,'images/corp/dancing.png" alt="Dancing" width="326" height="130"/>\n                </div>\n            </div>\n            <div class="careers-info last clearfix">\n                <div class="section left-col">\n                    <img class="klout-photo" src="',options&&options.staticServer,'images/corp/felipe-punching.png" alt="Felipe Punching Kenny" width="292" height="180"/>\n                </div>\n                <div class="section right-col">\n                    Come join us in our awesome space in the SOMA area of San Francisco, where we get catered meals,\n                    eat data for breakfast, and shotgun PBR for dessert. We\'re hiring for a number of positions\n                    right now. If you don\'t see one that fits exactly, don\'t be afraid to apply anyway. We\'re always\n                    looking for smart people who are right for our team.\n                </div>\n            </div>\n            <div class="section photos">\n                <img class="klout-photo" src="',options&&options.staticServer,'images/corp/kloutoberfest.png" alt="Kloutoberfest" width="650" height="189"/>\n                <img class="klout-photo left-col" src="'
,options&&options.staticServer,'images/corp/pbr.png" alt="PBR" width="207" height="193"/>\n                <img class="klout-photo right-col" src="',options&&options.staticServer,'images/corp/klout-office.png" alt="Klout Office" width="424" height="191"/>\n            </div>\n            <div class="section">\n                <h2 class="section-header">Open Positions</h2>\n                '),compasEnabled?__p.push('\n                <iframe id="compframe" name="compframe" height="1500" width="95%" frameborder="0" scrolling="no" allowTransparency="true"> </iframe>\n                '):__p.push('\n                <script type="text/javascript" src="http://www.theresumator.com/widgets/basic/create/klout" charset="utf-8"></script>\n                '),__p.push("\n            </div>\n        </div>\n    </div>\n</div>")}return __p.join("")},amphetamine.t["corp/contact"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="corp-contact" class="content-wrapper">\n    <div class="content-header">\n        <h1 class="header-text">Contact</h1>\n    </div>\n    <div class="content-body clearfix">\n        ',this["corp/sidebarnav"]({page:"contact"}),'\n        <div class="content-main">\n            <div class="section image-section first">\n                <img src="',options&&options.staticServer,'images/corp/contact-splash.jpg" alt="Contact" height="171" width="651"/>\n            </div>\n            <div class="section">\n                <h2 class="section-header">Thanks for checking us out.</h2>\n                <div class="section-body">\n                    <p>We hope you like what you see. Why not stay in touch with the latest Klout happenings?</p>\n                    <p>\n                        Follow our <a href="http://corp.klout.com/blog/">Klout Blog</a>,\n                        tweet <a href="http://twitter.com/#!/klout">@klout</a>,\n                        or visit our <a href="http://www.facebook.com/kloutfb">Facebook page!</a>\n                    </p>\n                </div>\n                <div class="section clearfix">\n                    <div class="section-image">\n                        <img src="',options&&options.staticServer,'images/corp/red-question.png" alt="?" height="45" width="45"/>\n                    </div>\n                    <div class="section-text">\n                        <h3 class="section-header">Help</h3>\n                        <div class="section-body">\n                            <p>\n                                If you have a question or are having trouble please check out\n                                <a href="http://support.klout.com/">our Help Center</a>.\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <div class="section clearfix">\n                    <div class="section-image">\n                        <img src="',options&&options.staticServer,'images/corp/yellow-question.png" alt="?" height="45" width="45"/>\n                    </div>\n                    <div class="section-text">\n                        <h3 class="section-header">Businesses</h3>\n                        <div class="section-body">\n                            <p>\n                                To run a Klout Perks program or partner with us please contact us here.\n                            </p>\n\n                            <div id="salesforce-form">\n                                <form action="https://www.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" method="POST">\n\n                                <input type=hidden name="oid" value="00DA0000000ZS8H">\n                                <input type=hidden name="retURL" value="http://klout.com/corp/contact">\n\n                                <table>\n                                <tr><td><label for="first_name">First Name</label></td><td><input  id="first_name" maxlength="40" name="first_name" size="20" type="text" /></td></tr>\n                                <tr><td><label for="last_name">Last Name</label></td><td><input  id="last_name" maxlength="80" name="last_name" size="20" type="text" /></td></tr>\n                                <tr><td><label for="email">Email</label></td><td><input  id="email" maxlength="80" name="email" size="20" type="text" /></td></tr>\n                                <tr><td><label for="phone">Phone</label></td><td><input  id="phone" maxlength="40" name="phone" size="20" type="text" /></td></tr>\n                                <tr><td><label for="company">Company</label></td><td><input  id="company" maxlength="40" name="company" size="20" type="text" /></td></tr>\n\n                                <tr><td>Deal Type:</td><td><select  id="00NA0000003u0P5" name="00NA0000003u0P5" title="Deal Type">\n                                    <option value="">--None--</option><option value="Not Sure">Not Sure</option>\n                                <option value="API">API</option>\n                                <option value="Perk">Perk</option>\n                                </select></td></tr>\n                                <tr><td valign="top">\n                                    <label>Description:</label>\n                                    <td>\n                                    <textarea cols="35" rows="5" name="description"></textarea><br>\n                                </td></tr>\n                                <tr><td colspan="2" align="right"><input class="button" type="submit" name="submit"></td></tr>\n                                </table>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="section clearfix">\n                    <div class="section-image">\n                        <img src="',options&&options.staticServer,'images/corp/blue-question.png" alt="?" height="45" width="45"/>\n                    </div>\n                    <div class="section-text">\n                        <h3 class="section-header">Press</h3>\n                        <div class="section-body">\n                            <p>\n                                You can reach out to us at <a href="mailto:press@klout.com">press@klout.com</a>.\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <div class="section clearfix">\n                    <div class="section-image">\n                        <img src="',options&&options.staticServer,'images/corp/grey-question.png" alt="?" height="45" width="45"/>\n                    </div>\n                    <div class="section-text">\n                        <h3 class="section-header">Jobs</h3>\n                        <div class="section-body">\n                            <p>\n                                We are always looking for awesome people to join our team.\n                                Check out our <a href="careers">jobs page</a> for openings and to apply.\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div id="office-location" class="section clearfix">\n                <div class="section-image">\n                    <img src="http://maps.googleapis.com/maps/api/staticmap?center=77+Stillman+St+94107&zoom=14&size=345x285&&markers=icon:http%3A%2F%2Fkcdn3.klout.com%2Fstatic%2Fimages%2Fstroke-flag.png%7C77+Stillman+St+94107&sensor=false"\n                         alt="Klout Office Map" height="285" width="345"/>\n                </div>\n                <div class="section-text">\n                    <div class="section-body">\n                        <p>We are located at</p>\n                        <p>77 Stillman St.</p>\n                        <p>San Francisco, CA 94107</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["corp/faq"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="corp-about">\n    <div class="content-header">\n        <h1 class="header-text">Frequently Asked Questions</h1>\n    </div>\n    <div class="content-body clearfix">\n\t\t',this["corp/sidebarnav"]({page:"faq"}),'\n        <div class="content-main">\n            <div class="section image-section first">\n                <img src="',options&&options.staticServer,'images/corp/faq-splash.jpg" alt="Help!" height="175" width="651"/>\n            </div>\n            <div class="section">\n                <h2 class="section-header">What is Klout?</h2>\n                <div class="section-body">\n                    <p>\n                        Klout measures influence online. When you create content or engage, you impact others. Klout\n                        analyzes that impact to find your Klout Score, influential topics, and your influencers. Klout\n                        is the standard for influence. Top brands such as Disney, Audi, and Turner use Klout Perks to\n                        reach and engage influencers. Over 3,000 applications and partners use Klout data to display\n                        Klout Scores, prioritize based on Score or topics, and segment users.\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <h2 class="section-header">What is the Klout Score?</h2>\n                <div class="section-body">\n                    <p>\n                        The Klout Score measures influence on a scale of 1 to 100, with 100 being the most influential.\n                        Klout uses data from social networks in order to measure:\n                        <ul>\n                            <li>How many people you influence; (True Reach)</li>\n                            <li>How much you influence them; and (Amplification)</li>\n                            <li>How influential they are (Network Score)</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <h2 class="section-header">What is influence?</h2>\n                <div class="section-body">\n                    <p>\n                        Influence is the ability to drive action. It happens in real-time and in a given topic. You\n                        influence others when you convince your friends to go see a movie, share your favorite YouTube\n                        video, or start a discussion about the upcoming election.\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <h2 class="section-header">How can I use Klout?</h2>\n                <div class="section-body">\n                    <p>\n                        Klout helps you understand your influence and how to leverage it.\n                        <ul>\n                            <li>Benchmark your success, understand who you influence, and discover who to trust in the topics you care about.</li>\n                            <li>Earn <a href="http://klout.com/#/perks">Klout Perks</a>: exclusive access to products and experiences from top brands.</li>\n                            <li>Put your Klout Score on your resume to land a sweet job or use it to get better customer service.</li>\n                        </ul>\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <h2 class="section-header">How can brands use Klout?</h2>\n                <div class="section-body">\n                    <p>\n                        Brands can run <a href="http://klout.com/corp/perks">Klout Perks</a> and use Klout to measure\n                        their own success on social media. Klout Perks enable brands to reach and engage with influencers\n                        around a Perk. Klout influencers create thousands of pieces of UGC and millions of impressions for\n                        a brand\'s new product, initiative or campaign. Perks are targeted based on Score, influential\n                        topics, location and more. Your brand\'s Klout Score indicates how well you are driving action\n                        for your company. Monitor your Score to understand which tactics are working and how to better\n                        engage your audience.\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <a id="doeskloutsharemyprivatedatawithadvertisers"></a>\n                <h2 class="section-header">Does Klout share my private data with advertisers?</h2>\n                <div class="section-body">\n                    <p>\n                        Klout never identifies influencers to advertisers or sells your data.\n                        Perks are freebies provided to Klout by brands who would like influential people to try their product.\n                        You can choose to grab Perks that you qualify for, or ignore them. Once you\'ve claimed your Perk,\n                        we will never share your data with the advertiser. Advertisers can only find your username if you decide to share publicly\n                        about the Perk or register on the advertiser\'s website. You are welcome to say you like a product,\n                        you dislike it or say nothing at all.\n                        More details are available on our <a href="http://corp.klout.com/blog/2011/11/we-value-your-privacy/">blog</a>.\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <h2 class="section-header">What are Klout Perks?</h2>\n                <div class="section-body">\n                    <p>\n                        Klout Perks are exclusive products or experiences you earn based on your Klout. Perks enable\n                        brands to connect with influencers in their area of expertise. As an influencer, you get first\n                        access to Perks you can share with your friends and audience. Influencers have taken a new Audi\n                        for a weekend-long test drive, gone with their kids to an early screening of a Disney movie, and\n                        brought home new HP laptops loaded with films.\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <a id="whydobrandswanttogivemefreestuff"></a>\n                <h2 class="section-header">Why do brands want to give me free stuff?</h2>\n                <div class="section-body">\n                    <p>\n                        As an influencer, you are the type of person that your friends look to when choosing what movie\n                        to see or what laptop to buy.  The brands we work with are confident in the quality of their\n                        products and they\'d like you to try it to see for yourself.  You are welcome to tell the world\n                        that you love the product, you dislike it, or to say nothing at all.\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <a id="howdoyouchoosewhogetsperks"></a>\n                <h2 class="section-header">How do you choose who gets Perks?</h2>\n                <div class="section-body">\n                    <p>\n                        Perks are distributed to select influencers based on their topics of authority, location and score.\n                        If you influence your friends on the topics that you care about, then chances are high that a\n                        company in that industry wants your opinion.  We work with those companies to get Perks to the\n                        right people.  You can help us find the right Perks for you by keeping your <a href="/#/edit-settings/profile">profile</a>\n                        up-to-date and curating the list of topics that we\'ve found for you.</p>\n                    <br />\n                    <p>\n                        You must be 18 or older to qualify for Perks. Make sure to your birthday is up-to-date in your <a href="/#/edit-settings/profile">profile</a>.\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <a id="imeetthecriteriadisplayedbytheperk"></a>\n                <h2 class="section-header">I meet the criteria displayed by the Perk, why am I being told that I\'m ineligible?</h2>\n                <div class="section-body">\n                    <p>\n                        The criteria that we display are guidelines to help you understand who is eligible for a specific Perk.\n                        Sometimes there are more specific criteria under the hood, such as a precise zip code or neighborhood.\n                        Make sure to keep your <a href="/#/edit-settings/profile">profile</a> up-to-date so that we can find the\n                        best Perks for you!\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <a id="doihavetodoanythingifiacceptaperk"></a>\n                <h2 class="section-header">Do I have to do anything if I accept a Perk?</h2>\n                <div class="section-body">\n                    <p>\n                        Nope, we value your authenticity and so do your friends and the brands who use our program.  If you receive\n                        a Perk, it is because you are influential and have authority on topics related to the product.\n                        You can choose to talk about the Perk or keep quiet, it\'s up to you.\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <a id="whydoeslocationmatterforperks"></a>\n                <h2 class="section-header">Why does location matter for Perks?\n                <br />How do you determine it?</h2>\n                <div class="section-body">\n                    <p>\n                        Often companies are interested in giving Perks to influencers in a specific neighborhood.  For instance,\n                        pizzerias in North Beach don\'t care how influential you are if you live in NYC.  We look at a collection\n                        of data to determine your location, including the zip code that you put in your Klout profile, your\n                        Facebook location and your Twitter location (don\'t worry, we never share our data).  Remember to keep\n                        your <a href="/#/edit-settings/profile">profile</a> up-to-date so that we can find the best Perks for you.\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <h2 class="section-header">How does Klout use my data?</h2>\n                <div class="section-body">\n                    <p>\n                        Klout collects data from your networks in order to discover your influence. We do not share any\n                        of your private data or email address with 3rd parties. We do not access your Twitter DMs,\n                        private Facebook messages, private Flickr content or any other private communication.\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <h2 class="section-header">I never registered for Klout, why do I have a Klout profile?</h2>\n                <div class="section-body">\n                    <p>\n                        Klout collects public data in order to accurately measure influence. Users can control the data\n                        available to Klout by changing the privacy settings on individual networks. Klout will never\n                        access your private data unless we have explicit permission.\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <h2 class="section-header">Do you take sentiment into account in Score and topics measurements?</h2>\n                <div class="section-body">\n                    <p>\n                        If you are driving action in a given topic, you have influence in it. We judge quality of content\n                        by the reactions it produces, not by their sentiment.\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <h2 class="section-header">What\'s a good Score?</h2>\n                <div class="section-body">\n                    <p>\n                        Influence is relative so it depends on your goal and peers. The average Klout Score is not 50;\n                        instead, it is around 20. The Score becomes exponentially harder to increase as you move up the\n                        scale. For instance, it is much harder to move from a 70 to a 75 than from a 20 to a 25.\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <h2 class="section-header">What do I need to do to improve my Klout?</h2>\n                <div class="section-body">\n                    <p>\n                        It\'s no secret; the best way to increase your Score is to consistently create great content that\n                        people want to share and respond to. For the most accurate Score, we also recommend connecting\n                        all of your social networks.\n                    </p>\n                </div>\n            </div>\n            <div class="section">\n                <h2 class="section-header">How often does Klout update?</h2>\n                <div class="section-body">\n                    <p>The Klout Score is updated daily. Influencers and topics update weekly.</p>\n                </div>\n            </div>\n            <div class="section">\n                <h2 class="section-header">How does adding new networks on Klout impact my Score?</h2>\n                <div class="section-body">\n                    <p>\n                        Adding networks allows us to more accurately measure your Klout Score. Adding a new network will\n                        never decrease your Score. Instead, it often increases it because we are able to give you credit\n                        for your impact on that network.\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["corp/kscore"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="content-header">\n    <h1>The Klout Score</h1>\n</div>\n<div class="content-body clearfix">\n    ',this["corp/sidebarnav"]({page:"kscore"}),'\n    <div class="content-main">\n        <div class="splash">\n            <p><img src="',options&&options.staticServer,'images/corp/kscore-splash2.png" alt="The Klout Score" /></p>\n        </div>\n        <div class="section first">\n            <p>\n                The Klout Score measures influence based on your ability to drive action. Every time you create content or engage you influence others. The Klout Score uses data from social networks in order to measure:\n                <br/>\n                <br/>\n                <ul id="kscore-list">\n                    <li><strong>True Reach:</strong> How many people you influence</li>\n                    <li><strong>Amplification:</strong> How much you influence them</li>\n                    <li><strong>Network Impact:</strong> The influence of your network</li>\n                </ul>\n            </p>\n        </div>\n\n        <hr>\n\n        <div class="kscore-section clearfix">\n            <div id="kscore-true-reach">\n                <img src="',options&&options.staticServer,'images/corp/kscore-true-reach-label.png" alt="True Reach" width="229" height="34"/>\n                <p>\n                    Your True Reach is the <strong>number of people you influence</strong>. We filter out spam and bots and focus on the people who are acting on your content. When you post a message, these people tend to respond or share it.\n                </p>\n            </div>\n            <div class="kscore-image">\n                <img src="',options&&options.staticServer,'images/corp/kscore-true-reach-icon.jpg" alt="True Reach" width="329" height="185"/>\n            </div>\n        </div>\n\n        <div class="kscore-section clearfix">\n            <div class="kscore-image">\n                <img src="',options&&options.staticServer,'images/corp/kscore-amplification-icon.jpg" alt="Amplification" width="224" height="224"/>\n            </div>\n            <div id="kscore-amplification">\n                <img src="',options&&options.staticServer,'images/corp/kscore-amplification-label.png" alt="Amplification" width="283" height="34"/>\n                <p>\n                    Your Amplification is <strong>how much you influence people</strong>. When you post a message, how many people respond to it or spread it further? If people often act upon your content you have a high Amplification score.\n                </p>\n            </div>\n        </div>\n\n        <div class="kscore-section clearfix">\n            <div id="kscore-network">\n                <img src="',options&&options.staticServer,'images/corp/kscore-network-label2.png" alt="Your Network"/>\n                <p>\n                    Your Network indicates <strong>the influence of the people in your True Reach</strong>. How often do top Influencers share and respond to your content? When they do so, they are increasing your Network score.\n                </p>\n            </div>\n            <div class="kscore-image">\n                <img src="',options&&options.staticServer,'images/corp/kscore-network-icon2.jpg" alt="Your Network"/>\n            </div>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["corp/optout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="content-header">\n     <h1 class="header-text">Opt Out from Klout</h1>\n</div>\n<div class="content-body clearfix">\n    <div class="content-main no-nav">\n      <div id="klout-benefits">\n    <div class="section first">\n        <div class="section-header">\n            <h3 class="header-text">Klout Values Individuals</h3>\n        </div>\n        <div class="section-body">\n            Everyone has Klout and we believe you should be recognized for it. Our mission is to help you understand\n            that influence and use it to make your life better.\n        </div>\n    </div>\n    <div class="section">\n        <div class="section-header">\n            <h3 class="header-text">Klout Perks</h3>\n        </div>\n        <div class="section-body">\n            Klout Perks are exclusive products or experiences you earn based on your influence. Past Perks include\n            laptops, international roundtrip flights, and pre-release movie screenings.\n        </div>\n    </div>\n    <div class="section">\n        <div class="section-header">\n            <h3 class="header-text">VIP Treatment</h3>\n        </div>\n        <div class="section-body">\n            Businesses are starting to recognize the power of influencers to affect their brand. Your Klout can get\n            you upgrades at hotels, free drinks in casinos, and upgraded flights. If you opt out of Klout, businesses\n            will no longer be able to reward your influence.\n        </div>\n    </div>\n    <div class="section">\n        <div class="section-header">\n            <h3 class="header-text">We Value Your Privacy</h3>\n        </div>\n        <div class="section-body">\n            Klout only analyzes public data or data that we are given explicit access to. We never share your private\n            information with any third party or brand and you can control the information that we make available on\n            your Klout profile page.\n        </div>\n    </div>\n    <div class="section">\n        <div class="section-header">\n            <h3 class="header-text">Opt-out Authentication</h3>\n        </div>\n        <div class="section-body">\n            To opt-out of Klout, please verify that you are the owner of the Twitter or Facebook accounts. Note that we request only the bare minimum information provided by Twitter or Facebook for authentication. We will not store any of the data, and will never share your information publicly.\n        </div>\n        <div class="section-body">\n            Opt-out via <a href="/oauth/optout/twOO" class="opt-out-link">Twitter</a> or <a href="/oauth/optout/fbOO" class="opt-out-link">Facebook</a>\n        </div>\n    </div>\n</div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["corp/optoutconfirm"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="content-header">\n     <h1 class="header-text">Opt Out from Klout</h1>\n</div>\n<div class="content-body clearfix">\n    <div class="content-main no-nav">\n    Thanks, you have successfully opted out of Klout. You will be removed from Klout.com within 24-48 hours.\n    You will be removed from our API within 7 days. If you decide to opt back into Klout you will have to sign up\n    again and it will take at least 90 days for us to accurately measure your influence. For the quickest removal from our\n    systems you can choose to deauthorize the Klout app from your social accounts by going into the relevant\n    network\'s settings page.\n    </div>\n</div>');return __p.join("")},amphetamine.t["corp/optoutform"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="content-header">\n     <h1 class="header-text">Opt Out from Klout</h1>\n</div>\n<div class="content-body clearfix">\n    <div class="content-main no-nav">\n    <form id="deactivate-account-form" action="/">\n    <fieldset class="section first">\n        <div class="error"></div>\n        <div class="section-header">\n            <h3 class="header-text">Reason you\'re leaving <span class="required">(Required)</span></h3>\n        </div>\n        <div class="section-body">\n            <input type="radio" id="deactivate-reason-0" class="radio-button" name="deactivate-reason" value="0" />\n            <label class="radio-label" for="deactivate-reason-0">I don\'t find Klout useful</label>\n            <input type="radio" id="deactivate-reason-1" class="radio-button" name="deactivate-reason" value="1" />\n            <label class="radio-label" for="deactivate-reason-1">I am concerned with privacy</label>\n            <input type="radio" id="deactivate-reason-2" class="radio-button" name="deactivate-reason" value="2" />\n            <label class="radio-label" for="deactivate-reason-2">I don\'t understand how to use Klout</label>\n            <input type="radio" id="deactivate-reason-3" class="radio-button" name="deactivate-reason" value="3" />\n            <label class="radio-label" for="deactivate-reason-3">I expected better perks</label>\n            <input type="radio" id="deactivate-reason-4" class="radio-button" name="deactivate-reason" value="4" />\n            <label class="radio-label" for="deactivate-reason-4">I am unhappy with my Klout score</label>\n            <input type="radio" id="deactivate-reason-5" class="radio-button" name="deactivate-reason" value="5" />\n            <label class="radio-label" for="deactivate-reason-5">This is temporary. I\'ll be back</label>\n            <input type="radio" id="deactivate-reason-6" class="radio-button" name="deactivate-reason" value="6" />\n            <label class="radio-label" for="deactivate-reason-6">Other</label>\n        </div>\n    </fieldset>\n    <fieldset class="section">\n        <div class="section-header">\n            <h3 class="header-text">Further explanation</h3>\n        </div>\n        <div class="section-body">\n            <textarea id="deactivate-reason-text" name="deactivate-reason-text"></textarea>\n        </div>\n    </fieldset>\n    <fieldset class="section">\n        <div class="section-header">\n            <h3 class="header-text">Are you sure you\'d like to opt out of Klout?</h3>\n        </div>\n        <div class="section-body">\n            <div class="tos-confirmation clearfix">\n                <p>\n                    Once you opt-out you will be removed from Klout.com within 24-48 hours. You will be removed from our\n                    API within 7 days. Traces of your data may be in our scoring system for up to 180 days after opting out.\n                    If you decide to opt back into Klout you will have to sign up again and it will take at least 90 days for us to\n                    accurately measure your influence.\n                </p>\n                <label class="text-label" for="opt-out-signature">Name <span class="required">(Required)</span></label>\n                <input type="text" id="opt-out-signature" class="text-field" name="opt-out-signature" placeholder="Please sign your name here" />\n            </div>\n            <div class="form-actions">\n                <a href="/corp/canceloptout" class="cancel-link">Cancel</a> or\n                <a id="submit-optout" class="submit-link">Submit</a>\n            </div>\n        </div>\n    </fieldset>\n</form>\n    </div>\n</div>'
);return __p.join("")},amphetamine.t["corp/perks"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="corp-perks">\n    <div class="content-header">\n        <h1 class="header-text">Klout Perks</h1>\n    </div>\n    <div class="content-body clearfix">\n        ',this["corp/sidebarnav"]({page:"perks"}),'\n        <div class="content-main">\n            <div class="section image-section first">\n                <p><img src="',options&&options.staticServer,'images/corp-perks-heading.jpg" alt="Klout Perks" width="650" height="215" /></p>\n            </div>\n            <div id="corp-perks-sections">\n                <div class="section">\n                    <h2 class="section-header">Free Stuff</h2>\n                    <div class="section-body">\n                        <p>\n                            Klout Perks are exclusive products or experiences that you earn based on your influence.<br />\n                            Influencers have earned sweet Perks like laptops and airline tickets.\n                        </p>\n                    </div>\n                </div>\n                <div class="section">\n                    <h2 class="section-header">Check Regularly</h2>\n                    <div class="section-body">\n                        <p>\n                            Perks are available to everyone, not just people with high <br />\n                            scores. We care about the topics that you\'re interested<br />\n                            and influential in.\n                        </p>\n                    </div>\n                </div>\n                <div class="section">\n                    <h2 class="section-header">Don\'t Stress</h2>\n                    <div class="section-body">\n                        <p>\n                            You have no obligation to talk about the product. You\'re <br />\n                            welcome to tell the world you love it, you dislike it, or say nothing at all.\n                        </p>\n                    </div>\n                </div>\n                <div class="section">\n                    <div id="corp-perks-button-hr">\n                        <span></span>\n                        <a href="/#/perks" class="button button-primary">FIND OUT WHICH PERKS YOU\'VE EARNED!</a>\n                        <span></span>\n                        <br class="clearer" />\n                    </div>\n                </div>\n                <div class="section">\n                    <h2 class="section-header">Commonly Asked Questions</h2>\n                    <div class="section-body">\n                        <ul id="corp-perks-faq-list">\n                            <li><a href="faq#doeskloutsharemyprivatedatawithadvertisers">Does Klout share my private data with advertisers?</a></li>\n                            <li><a href="faq#whydobrandswanttogivemefreestuff">Why do  brands want to give me free stuff?</a></li>\n                            <li><a href="faq#howdoyouchoosewhogetsperks">How do you choose who gets Perks?</a></li>\n                            <li><a href="faq#imeetthecriteriadisplayedbytheperk">I meet the criteria displayed by the Perk, why am I being told that I\'m ineligible?</a></li>\n                            <li><a href="faq#doihavetodoanythingifiacceptaperk">Do I have to do anything if I accept a Perk?</a></li>\n                            <li><a href="faq#whydoeslocationmatterforperks">Why does location matter for Perks? How do you determine it?</a></li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["corp/press"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="content-header">\n     <h1 class="header-text">Press</h1>\n</div>\n<div class="content-body clearfix">\n    ',this["corp/sidebarnav"]({page:"press"}),'\n    <div class="content-main">\n        <div class="splash">\n            <img src="',options&&options.staticServer,'images/corp/press-splash2.jpg" />\n        </div>\n        <div class="section">\n            <div class="section-header">\n                <h2>Klout in the News</h2>\n            </div>\n            <p>\n                For press inquiries, please email <a href="mailto:press@klout.com">press@klout.com</a>.\n            </p>\n        </div>\n\n        <ul id="press-grid">\n            <li>\n                <a target="_blank" href="http://www.nytimes.com/2011/06/26/sunday-review/26rosenbloom.html">\n                    <span class="caption">Got Twitter? You\'ve Been Scored</span>\n                    <img class="logo" src="',options&&options.staticServer,'images/corp/press/nytimes.png" alt="New York Times">\n                </a>\n            </li>\n            <li>\n                <a target="_blank" href="http://blogs.forbes.com/tomiogeron/2011/05/19/names-you-need-to-know-klout/">\n                    <span class="caption medium">The Klout score will become a new way of measuring people and their influence online</span>\n                    <img class="logo" src="',options&&options.staticServer,'images/corp/press/forbes.png" alt="Forbes">\n                </a>\n            </li>\n            <li>\n                <a target="_blank" href="http://techcrunch.com/2011/07/14/dont-have-a-free-spotify-invite-use-your-klout-perks/">\n                    <span class="caption">Don\'t Have A Free Spotify Invite? Use Your Klout Perks</span>\n                    <img class="logo" src="',options&&options.staticServer,'images/corp/press/techcrunch.png" alt="TechCrunch">\n                </a>\n            </li>\n            <li>\n                <a target="_blank" href="http://online.wsj.com/article/SB10001424052748704637704576082383466417382.html">\n                    <span class="caption small">Today, a new generation of VIPs is cultivating coolness through the world of social media</span>\n                    <img class="logo" src="',options&&options.staticServer,'images/corp/press/wsj.png" alt="Wall Street Journal">\n                </a>\n            </li>\n            <li class="video">\n                <a target="_blank" href="http://www.entrepreneur.com/video/220031">\n                    <img src="',options&&options.staticServer,'images/corp/press/entrepreneur-video.jpg" alt="Entrepreneur.com">\n                </a>\n            </li>\n            <li>\n                <a target="_blank" href="mailto:press@klout.com">\n                    <span class="caption medium">For press inquiries please email press@klout.com</span>\n                </a>\n            </li>\n            <li>\n                <a target="_blank" href="http://www.fastcompany.com/1762205/facebook-klout-vip">\n                    <span class="caption">Facebook Gets New VIP Sections</span>\n                    <img class="logo" src="',options&&options.staticServer,'images/corp/press/fastcompany.png" alt="Fast Company">\n                </a>\n            </li>\n            <li>\n                <a target="_blank" href="http://www.wired.co.uk/magazine/archive/2011/08/start/you-are-a-number?page=1">\n                    <span class="caption">Reputation-ranking site Klout quantifies your influence</span>\n                    <img class="logo" src="',options&&options.staticServer,'images/corp/press/wired.png" alt="Wired">\n                </a>\n            </li>\n            <li>\n                <a target="_blank" href="http://adage.com/article/digitalnext/marketing-las-vegas-palms-hotel-klout-scores/146189/">\n                    <span class="caption">The first step toward realizing that elusive ROI</span>\n                    <img class="logo" src="',options&&options.staticServer,'images/corp/press/adage.png" alt="Advertising Age">\n                </a>\n            </li>\n            <li>\n                <a target="_blank" href="http://www.adweek.com/news/advertising-branding/getting-your-klout-out-131629">\n                    <span class="caption">Klout scores are showing up on resumes</span>\n                    <img class="logo" src="',options&&options.staticServer,'images/corp/press/adweek.png" alt="AdWeek">\n                </a>\n            </li>\n            <li>\n                <a target="_blank" href="http://money.cnn.com/2010/06/25/technology/klout/index.htm">\n                    <span class="caption">The standard for measuring users\' online influence</span>\n                    <img class="logo" src="',options&&options.staticServer,'images/corp/press/cnnmoney.png" alt="CNN Money">\n                </a>\n            </li>\n            <li>\n                <a target="_blank" href="http://www.time.com/time/specials/packages/article/0,28804,2087815_2088159_2088154,00.html">\n                    <span class="caption">One of the 50 best websites of 2011</span>\n                    <img class="logo" src="',options&&options.staticServer,'images/corp/press/time.png" alt="CNN Money">\n                </a>\n            </li>\n        </ul>\n    </div>\n</div>');return __p.join("")},amphetamine.t["corp/privacy"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="content-header">\n     <h1 class="header-text">Privacy Policy</h1>\n</div>\n<div class="content-body clearfix">\n    <div class="content-main no-nav">\n        <p>This Privacy Policy may be updated from time to time for any reason; each version will apply to information collected while it was in place. We will notify you of any material changes to our Privacy Policy by posting the new Privacy Policy on our Site. You are advised to consult this Privacy Policy regularly for any changes.</p>\n        <p>By using our Site (http://klout.com) you are consenting to our processing of your information as set forth in this Privacy Policy now and as amended by us. "Processing" means using cookies on a computer or using or touching information in any way, including, but not limited to, collecting, storing, deleting, using, combining and disclosing information, all of which activities will take place in the United States. If you reside outside the U.S. your personally identifiable information will be transferred to the U.S., and processed and stored there under U.S. privacy standards. By visiting our Site and providing information to us, you consent to such transfer to, and processing in, the US.</p>\n        <p>If you have any questions or comments about this Privacy Policy or our use of your personally identifiable information, please contact us at <a href="mailto:privacy@klout.com">privacy@klout.com</a>, or:</p>\n        <p>\n        Klout<br>\n        77 Stillman Street, San Francisco, CA 94107<br>\n        Tel: 415-520-3951<br>\n        Fax: 415-777-2001<br>\n        <br>\n        <h3>Information Collection and Use</h3>\n        <br>\n        <p><strong>Information Collected Upon Registration.</strong> If you desire to have access to certain restricted sections of the Site, you will be required to become a registered user, and to submit certain personally identifiable information to Klout. This happens in a number of instances, such as when you sign up for the Service. Personally identifiable information that we may collect in such instances may include your IP address, full user name, password, email address, city, time zone, telephone number, and other information that you decide to provide us with, or that you decide to include in your public profile.</p>\n        <p><strong>Additional Information.</strong> Providing additional information beyond what is required at registration is entirely optional, but enables you to better identify yourself and find opportunities in the Klout system. If you contact us by email through the Site, we may keep a record of your contact information and correspondence, and may use your email address, and any information that you provide to us in your message, to respond to you.</p>\n        <p><strong>Use of Contact Information.</strong> In addition, we may use your contact information to market to you, and provide you with information about, our products and services, including but not limited to our Service. If you decide at any time that you no longer wish to receive such information or communications from us, please follow the unsubscribe instructions provided in any of the communications.</p>\n        <p><strong>Log Data.</strong> When you visit the Site, our servers automatically record information that your browser sends whenever you visit a website ("Log Data" ). This Log Data may include information such as your IP address, browser type or the domain from which you are visiting, the web-pages you visit, the search terms you use, and any advertisements on which you click. For most users accessing the Internet from an Internet service provider the IP address will be different every time you log on. We use Log Data to monitor the use of the Site and of our Service, and for the Site\'s technical administration. We do not associate your IP address with any other personally identifiable information to identify you personally, except in case of violation of the Terms of Service.</p>\n        <br>\n        <h3>Cookies</h3>\n        <br>\n        <p>Like many websites, we also use "cookie" technology to collect additional website usage data and to improve the Site and our service. A cookie is a small data file that we transfer to your computer\'s hard disk. We do not use cookies to collect personally identifiable information. Klout may use both session cookies and persistent cookies to better understand how you interact with the Site and our Service, to monitor aggregate usage by our users and web traffic routing on the Site, and to improve the Site and our services. A session cookie enables certain features of the Site and our service and is deleted from your computer when you disconnect from or leave the Site. A persistent cookie remains after you close your browser and may be used by your browser on subsequent visits to the Site. Persistent cookies can be removed by following your web browser help file directions. Most Internet browsers automatically accept cookies. You can instruct your browser, by editing its options, to stop accepting cookies or to prompt you before accepting a cookie from the websites you visit.</p>\n        <br>\n        <h3>Information Sharing and Disclosure</h3>\n        <br>\n        <p><strong>Service Providers.</strong> We engage certain trusted third parties to perform functions and provide services to us, including, without limitation, hosting and maintenance, customer relationship, database storage and management, and direct marketing campaigns. We will share your personally identifiable information with these third parties, but only to the extent necessary to perform these functions and provide such services, and only pursuant to binding contractual obligations requiring such third parties to maintain the privacy and security of your data.</p>\n        <p><strong>Business Transfers.</strong> Klout may sell, transfer or otherwise share some or all of its assets, including your personally identifiable information, in connection with a merger, acquisition, reorganization or sale of assets or in the event of bankruptcy. You will have the opportunity to opt out of any such transfer if the new entity\'s planned processing of your information differs materially from that set forth in this Privacy Policy.</p>\n        <br>\n        <h3>Security</h3>\n        <br>\n        <p>Klout is very concerned about safeguarding the confidentiality of your personally identifiable information. We employ administrative, physical and electronic measures designed to protect your information from unauthorized access.</p>\n        <p>We will make any legally-required disclosures of any breach of the security, confidentiality, or integrity of your unencrypted electronically stored personal data to you via email or conspicuous posting on this Site in the most expedient time possible and without unreasonable delay, consistent with (i) the legitimate needs of law enforcement or (ii) any measures necessary to determine the scope of the breach and restore the reasonable integrity of the data system.</p>\n        <br>\n        <h3>Links to Other Websites</h3>\n        <br>\n        <p>Our Site contains links to other websites. The fact that we link to a website is not an endorsement, authorization or representation of our affiliation with that third party. We do not exercise control over third party websites. These other websites may place their own cookies or other files on your computer, collect data or solicit personally identifiable information from you. Other sites follow different rules regarding the use or disclosure of the personally identifiable information you submit to them. We encourage you to read the privacy policies or statements of the other websites you visit.</p>\n        <br>\n        <h3>Our Policy Towards Children</h3>\n        <br>\n        <p>The Site is not directed to persons under 18. If a parent or guardian becomes aware that his or her child has provided us with personally identifiable information without their consent, he or she should contact us at <a href="mailto:privacy@klout.com">privacy@klout.com</a>. We do not knowingly collect personally identifiable information from children under 13. If we become aware that a child under 13 has provided us with personal identifiable Information, we will delete such information from our files.</p>\n        <br>\n        <h3>Use of Data</h3>\n        <br>\n        <p>Klout analyzes public data to measure influence and presents some of this data on Klout.com. Klout will never analyze your private data unless we are given explicit access.</p>\n        <p>If you are not a Klout user and wish to opt out of Klout, please <a href="/corp/optout">click here</a>. If you have a Klout account, please sign in before following this link in order to delete your account.</p>\n        <p>This Privacy Policy is effective as of June 6, 2011.</p>\n    </div>\n</div>');return __p.join("")},amphetamine.t["corp/sidebarnav"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var page=page||"";__p.push('\n<div class="sidebar">\n    <ul class="navigation">\n        <li><a class="nav-link '),page=="about"&&print("selected"),__p.push('"  href="about">About<div class="triangle"></div></a></li>\n        <li><a class="nav-link '),page=="kscore"&&print("selected"),__p.push('" href="kscore">The Klout Score<div class="triangle"></div></a></li>\n        <li><a class="nav-link '),page=="perks"&&print("selected"),__p.push('" href="perks">Klout Perks<div class="triangle"></div></a></li>\n        <li><a class="nav-link '),page=="faq"&&print("selected"),__p.push('" href="faq">FAQ<div class="triangle"></div></a></li>\n        <li><a class="nav-link '),page=="press"&&print("selected"),__p.push('" href="press">Press<div class="triangle"></div></a></li>\n        <li><a class="nav-link '),page=="careers"&&print("selected"),__p.push('" href="careers">Work at Klout<div class="triangle"></div></a></li>\n        <li><a class="nav-link '),page=="squad"&&print("selected"),__p.push('" href="squad">Klout Squad<div class="triangle"></div></a></li>\n        <li><a class="nav-link '),page=="business"&&print("selected"),__p.push('" href="business">For Business<div class="triangle"></div></a></li>\n        <li><a class="nav-link '),page=="contact"&&print("selected"),__p.push('" href="contact">Contact<div class="triangle"></div></a></li>\n    </ul>\n</div>')}return __p.join("")},amphetamine.t["corp/squad"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="corp-about">\n    <div class="content-header">\n        <h1 class="header-text">Klout Squad</h1>\n    </div>\n    <div class="content-body clearfix">\n        ',this["corp/sidebarnav"]({page:"squad"}),'\n        <div class="content-main">\n            <div class="section image-section first" style="margin-bottom: -20px">\n                <img src="',options&&options.staticServer,'images/corp/squad-splash.jpg" alt="Klout Squad" height="213" width="652"/>\n            </div>\n            <div class="section">\n                <h2 class="section-header">Klout Squad assemble!</h2>\n                <div class="section-body">\n                    <p>\n                        As a member of the Klout Squad you have the power to influence Klout. You will be first to know about changes to the Klout algorithms, experience features before everyone else, get access to exclusive Klout events and more. All we ask is for your honest feedback in return.\n                    </p>\n                <div class="section-body">\n                    <p>\n                        Your passion and insight for social media and Klout is appreciated and we look forward to getting to know you better as part of this small, invite-only, group.\n                    </p>\n                </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["corp/terms"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="content-header">\n     <h1 class="header-text">Terms of Service</h1>\n</div>\n<div class="content-body clearfix">\n    <div class="content-main no-nav">\n    <p>Welcome to Klout. By accessing the Klout website ("Site") or using the services offered by Klout ("Services") you agree and acknowledge to be bound by these Terms of Service ("Terms"). If you do not agree to these Terms, please do not access the Site or use the Services. Klout reserves the right to change these Terms at any time. We recommend that you periodically check this Site for changes.</p>\n\n    <h3>Registration Data; Account Security</h3>\n\n    <p>In consideration of your use of the Service, you agree to (a) provide accurate, current and complete information about you as may be prompted by any registration forms on the Service ("Registration Data"); (b) maintain the security of your password and identification; (c) maintain and promptly update the Registration Data, and any other information you provide to the Company, to keep it accurate, current and complete; and (d) be fully responsible for all use of your account and for any actions that take place using your account.</p>\n\n    <h3>Site Content</h3>\n\n    <p>You understand that all postings, messages, text, images or other materials ("Content") posted or published on, uploaded to, transmitted through, or linked from (hereinafter, "post" or "posted"), the Service are the sole responsibility of the person from whom such Content originated. You understand that Klout does not control, and is not responsible for, Content made available through the Service, and that by using the Service, you may be exposed to Content that is offensive, indecent, inaccurate, misleading, or otherwise objectionable. Furthermore, the Site and Content available through the Service may contain links to other websites which are completely independent of Klout. Klout makes no representation or warranty as to the accuracy, completeness or authenticity of the information contained in any such site. Your linking to any other websites is at your own risk. You agree that you must evaluate, and bear all risks associated with, the use of any Content, that you may not rely on said Content, and that under no circumstances will Klout be liable in any way for any Content or for any loss or damage of any kind incurred as a result of the use of any Content posted or otherwise made available via the Service. You acknowledge that Klout does not pre-screen or approve Content, but that Klout shall have the right (but not the obligation) in its sole discretion to refuse, delete or remove any Content that is available via the Service, in connection with violations of the letter or spirit of the Terms of Use or for any other reason.</p>\n\n    <h3>Access to the Service</h3>\n\n    <p>Klout grants you a limited license to access the Site and use the Services in accordance with these Terms and the instructions and guidelines posted on the Site. Klout reserves the rights to terminate your license to use the Site and Services at any time and for any reason or in the future charge for commercial usage.</p>\n\n    <h3>Feeds and API</h3>\n\n    <p>Klout provides access to portions of its Site and Services via RSS feeds and an API; for the purposes of these Terms, such access constitutes use of the Site and Services. Klout asks that you use these features respectfully, as outlined in the documentation. Klout reserves the rights to change these features at any time and to disable access to the feeds and the API at any time for any reason.</p>\n\n    <h3>Intellectual Property (Trademarks &amp; Copyrights)</h3>\n\n    <p>Klout, the Klout logo and the Klout design are trademarks or trade dress of Klout, and may not be used without express written permission from Klout, other than for attribution. All other trademarks not owned by Klout that appear on this Site are the property of their respective owners, who may or may not be affiliated with, connected to, or sponsored by Klout.</p>\n    <p>Klout-originated content included on the Site, such as text, graphics, logos, software and the compilation of all content on the Site, is the property of Klout and its licensors and protected by United States and international copyright laws. Except as set out in these Terms, no reproduction of any Klout -originated content is permitted without written permission from Klout.</p>\n\n    <h3>User Conduct</h3>\n\n    <p>You understand that except for advertising programs offered by us on the Service, the Service is available for your personal, non-commercial use only. You represent, warrant and agree that no User Content of any kind posted through your account or otherwise shared by you on or through the Service will violate or infringe upon the rights of any third party, including copyright, trademark, privacy, publicity or other personal or proprietary rights; be in violation of any law or used in furtherance of any such violation; or contain libelous, defamatory or otherwise unlawful material.</p>\n    <p>In addition, you agree not to use the Service to:\n        <ul>\n            <li><div>in any unlawful manner or in any other manner that could damage, disable, overburden or impair the Service;</div></li>\n            <li><div>post or otherwise make available any content that we deem to be harmful, threatening, unlawful, defamatory, infringing, abusive, inflammatory, harassing, vulgar, obscene, fraudulent, invasive of privacy or publicity rights, hateful, or racially, ethnically or otherwise objectionable;</div></li>\n            <li><div>impersonate any person or entity, or falsely state or otherwise misrepresent yourself, your age or your affiliation with any person or entity;</div></li>\n            <li><div>post or otherwise make available any unsolicited or unauthorized advertising, solicitations, promotional materials, "junk mail," "spam," "chain letters," "pyramid schemes," or any other form of solicitation;</div></li>\n            <li><div>post or otherwise make publicly available on the Service any private information of any third party, including addresses, phone numbers, email addresses, Social Security numbers and credit card numbers;</div></li>\n            <li><div>post or otherwise make available any material that contains software viruses or any other computer code, files or programs designed to interrupt, destroy or limit the functionality of any computer software or hardware or telecommunications equipment;</div></li>\n            <li><div>post or otherwise make available content that would constitute, encourage or provide instructions for a criminal offense, violate the rights of any party, or that would otherwise create liability or violate any local, state, national or international law;</div></li>\n            <li><div>use or attempt to use another\'s account, service or system without authorization from the Company, or create a false identity on the Service.</div></li>\n            <li><div>forge headers or otherwise manipulate identifiers in order to disguise the origin of any information transmitted by you;</div></li>\n        </ul>\n    </p>\n\n    <h3>No Warranty and Limitation of Liability</h3>\n\n    <p>KLOUT PROVIDES THE SITE AND SERVICES "AS IS" AND WITHOUT ANY WARRANTY OR CONDITION, EXPRESS, IMPLIED OR STATUTORY. KLOUT SPECIFICALLY DISCLAIMS ANY IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, NON-INFRINGEMENT, INFORMATION ACCURACY, INTEGRATION, INTEROPERABILITY OR QUIET ENJOYMENT. Some states do not allow the disclaimer of implied warranties, so the foregoing disclaimer may not apply to you.</p>\n    <p>You understand and agree that you use the Site and Services at your own discretion and risk and that you will be solely responsible for any damages that arise from such use. UNDER NO CIRCUMSTANCES SHALL KLOUT BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL, INCIDENTAL, CONSEQUENTIAL OR PUNITIVE DAMAGES OF ANY KIND, OR ANY OTHER DAMAGES WHATSOEVER (HOWEVER ARISING, INCLUDING BY NEGLIGENCE), INCLUDING WITHOUT LIMITATION, DAMAGES RELATED TO USE, MISUSE, RELIANCE ON, INABILITY TO USE AND INTERRUPTION, SUSPENSION, OR TERMINATION OF THE SITE OR SERVICES, DAMAGES INCURRED THROUGH ANY LINKS PROVIDED ON THE SITE AND THE NONPERFORMANCE THEREOF AND DAMAGES RESULTING FROM LOSS OF USE, SALES, DATA, GOODWILL OR PROFITS, WHETHER OR NOT KLOUT HAS BEEN ADVISED OF SUCH POSSIBILITY. YOUR ONLY RIGHT WITH RESPECT TO ANY DISSATISFACTION WITH THIS SITE OR SERVICES OR WITH KLOUT SHALL BE TO TERMINATE USE OF THIS SITE AND SERVICES. Some states do not allow the exclusion of liability for incidental or consequential damages, so the above exclusions may not apply to you.</p>\n\n    <h3>Other</h3>\n\n    <p>Klout and you are independent entities, and nothing in the Terms, or via use of the Site or Services, will create any partnership, joint venture, agency, franchise, sales representative, or employment relationship between Klout and you.</p>\n    <p>These Terms supersede any previous agreement and represent the entire agreement between Klout and you. These Terms are governed by the laws of the State of California without reference to conflict of laws principles. If any provision of the Terms is adjudged to be illegal or unenforceable, the continuation in full force of the remainder of the Terms will not be prejudiced, and the illegal or unenforceable provision of the Terms shall be severed accordingly.</p>\n\n    </div>\n</div>');return __p.join("")},amphetamine.t["user/avatar"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push(""),__p.push("\n");var size=typeof size!="undefined"?size:"mini",unlinked=typeof unlinked!="undefined"?unlinked:!1,displaySash=(typeof showSash!="undefined"?showSash:!0)&&size=="mini"&&(user.isTopPlusK||user.isTopScience),displayFlag=size=="mini"&&(typeof showScore=="undefined"||typeof showScore!="undefined"&&showScore!=0)||typeof showScore!="undefined"&&showScore==1;displayFlag=!isNaN(user.kScore)&&displayFlag,__p.push('\n<span class="',size,"-user avatar"),(typeof isFirst=="undefined"||typeof isFirst!="undefined"&&isFirst)&&print(" first"),typeof disableHover!="undefined"&&disableHover&&print(" no-hover"),__p.push('" '),typeof context!="undefined"&&context=="influenced_by"&&print('rel="follower"'),__p.push(" >\n    "),user!=null&&(__p.push("\n        "),typeof canHide!="undefined"&&canHide==1&&__p.push('\n            <a class="hide-soi-',user.nick||user.fbUid,' remove"></a>\n        '),__p.push("\n        "),user.nick!=null?(__p.push("\n            <",unlinked?"span":"a",' class="',typeof hoverMarkup!="undefined"&&hoverMarkup?"pic":"user-pic",'" ',unlinked?"":'href="/user/'+user.nick+'"',">\n                "),displaySash&&(user.isTopScience&&user.isTopPlusK?__p.push('\n                        <img class="sash" src="',options&&options.staticServer,'images/icons/sash-gold-blue-small.png"/>\n                '):user.isTopScience?__p.push('\n                        <img class="sash" src="',options&&options.staticServer,'images/icons/sash-gold-small.png"/>\n                '):user.isTopPlusK&&__p.push('\n                        <img class="sash" src="',options&&options.staticServer,'images/icons/sash-blue-small.png"/>\n                ')),__p.push('\n                <img class="user-img" src="/picture/n/'
,user.nick,'/small" alt="',user.name,'">\n                '),displayFlag&&__p.push('\n                    <div class="micro-flag ',this["view/scoreIs100"]({score:user.kScore}),'">',user.kScore,"</div>\n                "),__p.push("\n            </",unlinked?"span":"a",">\n        ")):user.fbUid!=null?(__p.push("\n            <",unlinked?"span":"a",' class="',typeof hoverMarkup!="undefined"&&hoverMarkup?"pic":"user-pic",' fb-unregistered">\n                <img class="user-img" src="/picture/fb/',user.fbUid,'/small" alt="',user.name,'">\n                '),displayFlag&&__p.push('\n                    <div class="micro-flag ',this["view/scoreIs100"]({score:user.kScore}),'">',user.kScore,"</div>\n                "),__p.push("\n            </",unlinked?"span":"a",">\n        ")):user.gpUid&&(__p.push("\n            <",unlinked?"span":"a",' class="',typeof hoverMarkup!="undefined"&&hoverMarkup?"pic":"user-pic",' gp-unregistered">\n                <img class="user-img" src="/picture/gp/',user.gpUid,'" alt="',user.name,'">\n                '),displayFlag&&__p.push('\n                    <div class="micro-flag ',this["view/scoreIs100"]({score:user.kScore}),'">',user.kScore,"</div>\n                "),__p.push("\n            </",unlinked?"span":"a",">\n        ")),typeof canRestore!="undefined"&&canRestore==1&&(typeof context!="undefined"?__p.push('\n                <a id="restore-',context,"-",user.nick||user.fbUid,'" class="restore">Restore</a>\n        '):__p.push('\n                <a class="restore restore-soi-',user.nick||user.fbUid,'">Restore</a>\n        ')),typeof hoverMarkup!="undefined"&&hoverMarkup&&print(amphetamine.view.renderUS(hoverMarkup,typeof hoverData!="undefined"?hoverData:null)),__p.push("\n    ")),__p.push("\n</span>")}return __p.join("")},amphetamine.t["user/connectedNetworks"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var disableInvite=typeof disableInvite!="undefined"&&disableInvite,isFirst=!0,isOwnProfile=typeof isOwnProfile!="undefined"&&isOwnProfile,isRegistered=typeof user.registered!="undefined"?user.registered:(user.ksUid||user.ksUID)&&user.nick,showCoreOnly=typeof showCoreOnly!="undefined"&&showCoreOnly,showDisconnect=typeof showDisconnect!="undefined"&&showDisconnect;showUnconnected=typeof showUnconnected!="undefined"&&showUnconnected,googleXfn=typeof googleXfn!="undefined"?googleXfn:!0,__p.push('\n<ul class="networks ',size,'-networks clearfix">\n    '),user.twUid||!isOwnProfile&&!isRegistered&&!user.fpUid&&!user.fbUid&&!user.gpUid?(__p.push('\n        <li class="icon first">\n            <a class="network-icon twitter" title="Twitter" href="http://twitter.com/',user.nick,'" '),googleXfn&&print('rel="me"'),__p.push(' target="_blank"></a>\n        </li>\n    '),isFirst=!1):showUnconnected&&(__p.push('\n        <li class="icon first">\n            <a class="network-icon twitter-off" title="Twitter" href="/oauth" rel="nofollow"></a>\n            <div class="callout">\n                <div class="triangle"></div>\n                <a href="/oauth"><strong>Connect with Twitter</strong> for a more accurate Klout Score!</a>\n            </div>\n        </li>\n    '),isFirst=!1),user.fpUid?(__p.push('\n        <li class="icon'),isFirst&&print(" first"),__p.push('">\n            <a class="network-icon fbpage" title="Facebook Page" href="http://facebook.com/profile.php?id=',user.fpUid,'" '),googleXfn&&print('rel="me"'),__p.push(' target="_blank"></a>\n            ',showDisconnect?'<span class="disconnect disconnect-fp"></span>':"","\n        </li>\n    "),isFirst=!1):user.fbUid?(__p.push('\n        <li class="icon'),isFirst&&print(" first"),__p.push('">\n            <a class="network-icon facebook" title="Facebook" href="http://facebook.com/profile.php?id=',user.fbUid,'" '),googleXfn&&print('rel="me"'),__p.push(' target="_blank"></a>\n            ',showDisconnect?'<span class="disconnect disconnect-fb"></span>':"","\n        </li>\n    "),isFirst=!1):showUnconnected&&(__p.push('\n        <li class="icon'),isFirst&&print(" first"),__p.push('">\n            <a class="network-icon facebook-off" title="Facebook" href="/fb_init" rel="nofollow"></a>\n            <div class="callout">\n                <div class="triangle"></div>\n                <a href="/fb_init"><strong>Connect with Facebook</strong> for a more accurate Klout Score!</a>\n            </div>\n        </li>\n    '),isFirst=!1),user.gpUid?(__p.push('\n        <li class="icon'),isFirst&&print(" first"),__p.push('">\n            <a class="network-icon gplus" title="Google+" href="http://plus.google.com/',user.gpUid,'" '),googleXfn&&print('rel="me"'),__p.push(' target="_blank"></a>\n            ',showDisconnect?'<span class="disconnect disconnect-gp"></span>':"","\n        </li>\n    "),isFirst=!1):showUnconnected&&(__p.push('\n        <li class="icon'),isFirst&&print(" first"),__p.push('">\n            <a class="network-icon gplus-off" title="Google+" href="/oauth/gp" rel="nofollow"></a>\n        </li>\n    '),isFirst=!1),user.liUid&&!showCoreOnly?__p.push('\n        <li class="icon">\n            <a class="network-icon linkedin" title="LinkedIn" href="http://linkedin.com"></a>\n            ',showDisconnect?'<span class="disconnect disconnect-li"></span>':"","\n        </li>\n    "):showUnconnected&&__p.push('\n        <li class="icon">\n            <a class="network-icon linkedin-off" title="LinkedIn" href="/oauth_li" rel="nofollow"></a>\n        </li>\n    '),user.fsUid&&!showCoreOnly?(__p.push('\n        <li class="icon">\n            <a class="network-icon foursquare" title="Foursquare" href="http://foursquare.com/user/',user.fsUid,'" '),googleXfn&&print('rel="me"'),__p.push(' target="_blank"></a>\n            ',showDisconnect?'<span class="disconnect disconnect-fs"></span>':"","\n        </li>\n    ")):showUnconnected&&__p.push('\n        <li class="icon">\n            <a class="network-icon foursquare-off" title="Foursquare" href="/oauth_fs" rel="nofollow"></a>\n        </li>\n    '),user.ytUid&&!showCoreOnly?(__p.push('\n        <li class="icon">\n            <a class="network-icon youtube" title="YouTube" href="http://youtube.com/',user.ytUid,'" '),googleXfn&&print('rel="me"'),__p.push(' target="_blank"></a>\n            ',showDisconnect?'<span class="disconnect disconnect-yt"></span>':"","\n        </li>\n    ")):showUnconnected&&__p.push('\n        <li class="icon">\n            <a class="network-icon youtube-off" title="YouTube" href="/oauth/yt" rel="nofollow"></a>\n        </li>\n    '),user.igUid&&!showCoreOnly?__p.push('\n        <li class="icon">\n            <a class="network-icon instagram" title="Instagram" href="http://instagr.am/" target="_blank"></a>\n            ',showDisconnect?'<span class="disconnect disconnect-ig"></span>':"","\n        </li>\n    "):showUnconnected&&__p.push('\n        <li class="icon">\n            <a class="network-icon instagram-off" title="Instagram" href="/oauth/ig" rel="nofollow"></a>\n        </li>\n    '),user.tuUid&&!showCoreOnly?(__p.push('\n        <li class="icon">\n            <a class="network-icon tumblr" title="Tumblr" href="http://',user.tuUid,'.tumblr.com" '),googleXfn&&print('rel="me"'),__p.push(' target="_blank"></a>\n            ',showDisconnect?'<span class="disconnect disconnect-tu"></span>':"","\n        </li>\n    ")):showUnconnected&&__p.push('\n        <li class="icon">\n            <a class="network-icon tumblr-off" title="Tumblr" href="/oauth/tu" rel="nofollow"></a>\n        </li>\n    '),user.blUid&&!showCoreOnly?(__p.push('\n        <li class="icon">\n            <a class="network-icon blogger" title="Blogger" href="http://blogger.com/profile/',user.blUid,'" '),googleXfn&&print('rel="me"'),__p.push(' target="_blank"></a>\n            ',showDisconnect?'<span class="disconnect disconnect-bl"></span>':"","\n        </li>\n    ")):showUnconnected&&__p.push('\n        <li class="icon">\n            <a class="network-icon blogger-off" title="Blogger" href="/oauth/bl" rel="nofollow"></a>\n        </li>\n    '),user.wpUid&&!showCoreOnly?__p.push('\n        <li class="icon">\n            <a class="network-icon wordpress" title="Wordpress" href="http://wordpress.com" target="_blank"></a>\n            ',showDisconnect?'<span class="disconnect disconnect-wp"></span>':"","\n        </li>\n    "):showUnconnected&&__p.push('\n        <li class="icon">\n            <a class="network-icon wordpress-off" title="Wordpress" href="/oauth/wp" rel="nofollow"></a>\n        </li>\n    '),user.laUid&&!showCoreOnly?(__p.push('\n        <li class="icon">\n            <a class="network-icon lastfm" title="Last.fm" href="http://www.last.fm/user/',user.laUid,'" '),googleXfn&&print('rel="me"'),__p.push(' target="_blank"></a>\n            ',showDisconnect?'<span class="disconnect disconnect-la"></span>':"","\n        </li>\n    ")):showUnconnected&&__p.push('\n        <li class="icon">\n            <a class="network-icon lastfm-off" title="Last.fm" href="/webauth/la" rel="nofollow"></a>\n        </li>\n    '),user.flUid&&!showCoreOnly?(__p.push('\n        <li class="icon">\n            <a class="network-icon flickr" title="Flickr" href="http://www.flickr.com/photos/',user.flUid,'" '),googleXfn&&print('rel="me"'),__p.push(' target="_blank"></a>\n            ',showDisconnect?'<span class="disconnect disconnect-fl"></span>':"","\n        </li>\n    ")):showUnconnected&&__p.push('\n        <li class="icon">\n            <a class="network-icon flickr-off" title="Flickr" href="/oauth/fl" rel="nofollow"></a>\n        </li>\n    '),isOwnProfile||(__p.push('\n        <li class="icon">\n            '),isRegistered?__p.push('\n                <a class="network-icon klout" title="Klout" href="/user/',user.nick,'"></a>\n            '):(__p.push('\n                <img class="network-icon klout-off" src="',amphetamine.config&&amphetamine.config.staticServer,'images/service-klout-mini-off-20x20.png" alt="Klout">\n\n                '),disableInvite||__p.push('\n                    <div class="callout ',user.fbUid?"fb":"tw",'-unregistered">\n                        <div class="triangle"></div>\n                        <a>',typeof customInvite!="undefined"&&customInvite||"Invite to Klout!","</a>\n                    </div>\n            ")),__p.push("\n        </li>\n    ")),__p.push("\n</ul>")}return __p.join("")},amphetamine.t["user/kClass"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("",kClass&&kClass.replace("_"," "),"");return __p.join("")},amphetamine.t["user/listify"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var delimiter="@",i,max=Math.min(users.length,typeof maxDisplay!="undefined"&&maxDisplay?maxDisplay:users.length),nick,prettyPrint=[];for(i=0;i<max;i++)nick=users[i].nick,i&&i==max-1?prettyPrint[i]=" and "+(nick&&nick.charAt()!="~"?delimiter+nick:users[i].name):prettyPrint[i]=" "+(nick&&nick.charAt()!="~"?delimiter+nick:users[i].name);prettyPrint=prettyPrint.join(","),print(typeof prettyPrint.trim=="function"?prettyPrint.trim():typeof jQuery!="undefined"?jQuery.trim(prettyPrint):prettyPrint),__p.push("")}return __p.join("")},amphetamine.t["user/scoreFlag"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isTopPlusK=typeof isTopPlusK!="undefined"&&isTopPlusK,isTopScience=typeof isTopScience!="undefined"&&isTopScience,size=typeof size=="undefined"||typeof size!="undefined"&&size=="normal"?"flag":size+"-flag";__p.push("\n"),score&&(__p.push('\n    <div class="',size," kscore ",this["view/scoreIs100"]({score:score}),'">\n        '),size=="large-flag"||size=="medium-flag"?(__p.push("\n            "),isTopPlusK&&isTopScience?__p.push('\n                <img class="sash" src="',amphetamine.config&&amphetamine.config.staticServer,'images/icons/sash-gold-blue.png"/>\n            '):isTopScience?__p.push('\n                <img class="sash" src="',amphetamine.config&&amphetamine.config.staticServer,'images/icons/sash-gold.png"/>\n            '):isTopPlusK?__p.push('\n                <img class="sash" src="',amphetamine.config&&amphetamine.config.staticServer,'images/icons/sash-blue.png"/>\n            '):__p.push('\n                <img class="kflag" src="',amphetamine.config&&amphetamine.config.staticServer,'images/stroke-flag.png"/>\n        ')):(__p.push("\n            "),isTopPlusK&&isTopScience?__p.push('\n                <img class="sash" src="',amphetamine.config&&amphetamine.config.staticServer,'images/icons/sash-gold-blue-small.png"/>\n            '):isTopScience?__p.push('\n                <img class="sash" src="',amphetamine.config&&amphetamine.config.staticServer,'images/icons/sash-gold-small.png"/>\n            '):isTopPlusK&&__p.push('\n                <img class="sash" src="',amphetamine.config&&amphetamine.config.staticServer,'images/icons/sash-blue-small.png"/>\n        ')),__p.push('\n        <span class="value">',isNaN(score)?score:Math.round(score),'</span>\n        <div class="hovercard"></div>\n    </div>\n')),__p.push("")}return __p.join("")},amphetamine.t["user/plusKHover"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="hovercard">\n    <strong>\n        '),voucher.name?print(voucher.name):print("This user"),__p.push("\n    </strong>\n    gave +K in\n    <strong>",topic_.display,'</strong>.\n\n    <div class="date">\n        <img src="images/icn_plusk.png" />\n        ',this["view/formatDate"]({date:voucher.ts}),"\n    </div>\n</div>");return __p.join("")},amphetamine.t["user/profileLink"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var name=arguments[0].showFirstName?user.firstName:user.name;name=name||user.name||"@"+user.nick,user.nick?__p.push('\n    <a class="profile-link" href="/user/',user.nick||"~"+user.ksUid,'">',name,"</a>\n"):user.fbUid?__p.push('\n    <a class="profile-link fb-unregistered">',name,"</a>\n"):__p.push('\n    <a class="profile-link">',name,"</a>\n"),__p.push("")}return __p.join("")},amphetamine.t["user/subList"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push(""),__p.push("\n");if(typeof users!="undefined"&&users&&users.length){__p.push("\n    ");var canHide=!1,canRestore=!1,disableHover=typeof size!="disableHover"&&disableHover,options=typeof size!="options"&&options?options:null,size=typeof size!="undefined"&&size?size:"mini";__p.push("\n    <ul"),typeof listId!="undefined"&&listId!=null&&print(' id="'+listId+'" '),__p.push(' class="',size,'-user-list clearfix">\n        ');for(var i=0,rowSize=typeof rowSize!="undefined"&&rowSize?rowSize:5,max=Math.min(users.length,typeof maxDisplay!="undefined"&&maxDisplay?maxDisplay:users.length);i<max;i++)__p.push('\n            <li class="user-item'),i%rowSize==0&&print(" first"),i<rowSize&&print(" first-row"),__p.push('">\n                '),typeof displayHide!="undefined"&&displayHide&&(canHide=!users[i].hidden),typeof displayRestore!="undefined"&&displayRestore&&(canRestore=users[i].hidden),__p.push("\n                ",this["user/avatar"]({canHide:canHide,canRestore:canRestore,disableHover:disableHover,options:options,size:size,user:users[i],context:typeof context!="undefined"?context:void 0}),"\n            </li>\n        ");__p.push("\n    </ul>\n")}__p.push("")}return __p.join("")},amphetamine.t["user/voucherList"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push(""),__p.push("\n");if(typeof users!="undefined"&&users&&users.length){__p.push('\n    <ul class="micro-user-list clearfix">\n        ');for(var i=0,rowSize=typeof rowSize!="undefined"&&rowSize?rowSize:5,max=Math.min(users.length,typeof maxDisplay!="undefined"&&maxDisplay?maxDisplay:users.length);i<max;i++)__p.push('\n            <li class="user-item'),i%rowSize==0&&print(" first"),i<rowSize&&print(" first-row"),__p.push('">\n                ',this["user/avatar"]({hoverData:{topic_:topic_,voucher:users[i]},hoverMarkup:"user/plusKHover",size:"micro",user:users[i]}),"\n            </li>\n        ");__p.push("\n    </ul>\n")}__p.push("")}return __p.join("")},amphetamine.t["user/rowProfile"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var context=typeof context!="undefined"?context:void 0,googleXfn=typeof googleXfn!="undefined"?googleXfn:!0;__p.push('\n<div class="row-details clearfix">\n    '),typeof topic_!="undefined"&&topic_&&typeof position!="undefined"?(topicTopThree?print('<div class="rank topThree">'+position+".</div>"):print('<div class="rank">'+position+".</div>"),print(this["user/avatar"]({canRestore:typeof canRestore!="undefined"&&canRestore!=null?canRestore:!1,isFirst:!1,user:user,context:context}))):(print(this["user/scoreFlag"]({score:user.kScore,isTopPlusK:user.isTopPlusK,isTopScience:user.isTopScience})),print(this["user/avatar"]({canRestore:typeof canRestore!="undefined"&&canRestore!=null?canRestore:!1,isFirst:!1,showSash:!1,showScore:!1,user:user,context:context}))),__p.push('\n    <div class="user-info row-info">\n        <hgroup class="row-header clearfix">\n            '),typeof displayPlusK!="undefined"&&displayPlusK?(__p.push('\n                <h3 class="name">\n                    ',this["user/profileLink"]({user:user}),"\n                </h3>\n                "),amphetamine.user&&amphetamine.user.nick!=user.nick&&(__p.push('\n                    <div class="plusK">\n                        <a href="/topics/plusk/',user.tid,'" class="plus-k-button'),amphetamine.user.canPlusK(user.tid)||__p.push(" inactive"),__p.push('"></a>\n                        <div class="hovercard">\n                            Give +K if <strong>',user.name,"</strong> influenced you recently about <strong>",topic_.display,"</strong>\n                        </div>\n                    </div>\n            "))):(__p.push('\n                <h3 class="name">\n                    ',this["user/profileLink"]({user:user}),"\n                </h3>\n                "),typeof canHide!="undefined"&&canHide&&__p.push('\n                    <a class="hide-soi" id="delete-',context,"-",user.nick||user.fbUid,'">\n                        <img class="remove" src="images/circle-x-placeholder.png" />\n                    </a>\n            ')),__p.push("\n        </hgroup>\n        ",this["user/connectedNetworks"]({disableInvite:typeof disableInvite!="undefined"&&disableInvite,showCoreOnly:!0,size:"mini",user:user,googleXfn:googleXfn}),'\n        <p class="description">',user.description,"</p>\n        "),typeof tab!="undefined"&&tab&&(tab=="influencers"||tab=="plusk")&&(__p.push('\n            <div class="inline-viral">\n            '),typeof tab!="undefined"&&tab&&tab=="influencers"?__p.push("\n                ",user.name," is a top influencer:\n                ",this["viral/topicInfluencers"]({nick:user.nick,position:position,topic_:topic_}),"\n            "):typeof tab!="undefined"&&tab&&tab=="plusk"&&__p.push("\n                ",user.name," is a top +K recipient:\n                ",this["viral/topicPlusK"]({nick:user.nick,position:position,topic_:topic_}),"\n            "),__p.push("\n            </div>\n        ")),__p.push("\n    </div>\n</div>")}return __p.join("")},amphetamine.t["dashboard/checklist"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="section">\n    <h4>Connect!</h4>\n    <ul>\n        <li class="twitter',checklist.connectedTwitter?" complete":"",'">\n            1) Connect with Twitter\n            <div><a href="/oauth" class="button-alt">Connect</a></div>\n        </li>\n        <li class="facebook',checklist.connectedFacebook?" complete":"",'">\n            2) Connect with Facebook\n            <div><a href="/fb_init" class="button-alt">Connect</a></div>\n        </li>\n        <li class="followklout',checklist.isFollowingKlout?" complete":"",'">\n            3) Follow Klout on Twitter\n            <div><a class="follow-klout button-alt">Follow</a></div>\n        </li>\n        <li class="likeklout',checklist.likesKlout?" complete":"",'">\n            4) Like Klout on Facebook\n            <div class="fb-like">\n                <fb:like href="facebook.com/kloutfb" send="false" layout="button_count" show_faces="false" font=""></fb:like>\n            </div>\n        </li>\n        <li class="sharescore',checklist.hasSharedScore?" complete":"",'">\n            5) Share Your Klout Score\n            <div id="viral_kloutScore-checklist" class="viral-unit">\n                <a class="tw viral"><img src="',options&&options.staticServer,'images/tweet.png"></a>\n                <a class="fb viral"><img src="',options&&options.staticServer,'images/share.png"></a>\n            </div>\n        </li>\n        <li class="visited-profile',checklist.visitedProfile?" complete":"",'">\n            6) Visit your profile\n            <div><a'),typeof nick!="undefined"&&nick&&print(' href="/user/'+nick+'"'),__p.push(' class="button-alt">View Profile</a></div>\n            <br class="clearer">\n        </li>\n    </ul>\n</div>');return __p.join("")},amphetamine.t["dashboard/layout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="dashboard" class="clearfix">\n    <div id="dashboard-intro">\n        <div class="overlay-loading"><img class="page-loading-icon" src="',options&&options.staticServer,'images/loading.gif"/></div>\n    </div>\n    <div id="sidebar">\n        <div id="navigation">\n            <ul>\n                '),streamsEnabled?__p.push('\n                    <li>\n                        <a id="dashboard-nav-stream" href="#/dashboard/updates">\n                            Updates\n                            <div class="triangle"></div>\n                        </a>\n                    </li>\n                    <li>\n                        <a id="dashboard-nav-welcome" href="#/dashboard/network">\n                            Network\n                            <div class="triangle"></div>\n                        </a>\n                    </li>\n                '):__p.push('\n                    <li>\n                        <a id="dashboard-nav-welcome" href="#/dashboard/welcome">\n                            Welcome\n                            <div class="triangle"></div>\n                        </a>\n                    </li>\n                    <li>\n                        <a id="dashboard-nav-stream" href="#/dashboard/updates" class="coming-soon">\n                            Score Updates\n                            <div class="triangle"></div>\n                        </a>\n                    </li>\n                '),__p.push('\n                <li>\n                    <a id="dashboard-nav-notifs" href="#/dashboard/notifications">\n                        Notifications\n                        <div class="triangle"></div>\n                    </a>\n                </li>\n            </ul>\n        </div>\n        <div id="checklist">\n        '),(typeof isOnboarded=="undefined"||!isOnboarded)&&checklist&&__p.push("\n            ",this["dashboard/checklist"]({checklist:checklist,options:options}),"\n        "),__p.push('\n        </div>\n        <div class="section">\n            <h4>Goodies</h4>\n            <div class="extension firefox">Klout for Firefox<br><a href="https://addons.mozilla.org/en-US/firefox/addon/klout/">learn more &hellip;</a></div>\n            <div class="extension chrome">Klout for Chrome<br><a href="https://chrome.google.com/webstore/detail/jjaakbhpcbpmojkhpiaacepfcaniglak">learn more &hellip;</a></div>\n            <div class="extension opera">Klout for Opera<br><a href="https://addons.opera.com/en/addons/extensions/details/klout-speed-dial/1.0.1/">learn more &hellip;</a></div>\n            <div class="extension fbtab">Facebook Top Fans Tab<br><a id="install-fan-tab">install &hellip;</a></div>\n        </div>\n    </div>\n    <div id="main-content"></div>\n</div>');return __p.join("")},amphetamine.t["dashboard/mainChecklist"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<p>To ensure the best experience, here are some steps you can take:</p>\n<div class="item twitter',checklist.connectedTwitter?" complete":"",'">\n    <h3>Connect Your Twitter Account!</h3>\n    <div class="contents">\n    <p>Help increase your Klout and connect your Twitter account.</p>\n    <a class="button highlight" href="/oauth">Connect your twitter account</a></div>\n    <div class="icon"></div>\n</div>\n<div class="item facebook',checklist.connectedFacebook?" complete":"",'">\n    <h3>Connect Your Facebook Account!</h3>\n    <div class="contents">\n        <p>Help increase your Klout and connect your Facebook account.\n        We will never post anything to your wall without your explicit consent.</p>\n        <a class="button highlight" href="/fb_init">Connect your facebook account</a>\n    </div>\n    <div class="icon"></div>\n</div>\n<div class="item followklout',checklist.isFollowingKlout?" complete":"",'">\n    <h3>Follow @klout on Twitter!</h3>\n    <div class="contents">\n        <p>Stay connected to Klout!</p>\n        <a class="button highlight follow-klout">Follow @klout</a>\n    </div>\n    <div class="icon"></div>\n</div>\n<div class="item likeklout',checklist.likesKlout?" complete":"",'">\n    <h3>Like Klout on Facebook!</h3>\n    <div class="contents">\n        <p>Like! Like! Like!</p>\n        <div class="fb-like"><fb:like href="facebook.com/kloutfb" send="false" layout="button_count" show_faces="false" colorscheme="dark" font=""></fb:like></div>\n    </div>\n    <div class="icon"></div>\n</div>\n<div class="item sharescore',checklist.hasSharedScore?" complete":"",'">\n    <h3>Share Your Klout Score!</h3>\n    <div class="contents">\n        <p>People want to know!</p>\n        <div id="viral_kloutScore-main-checklist" class="viral-unit">\n            <a class="tw viral"><img src="',options&&options.staticServer,'images/tweet.png"></a>\n            <a class="fb viral"><img src="',options&&options.staticServer,'images/share.png"></a>\n        </div>\n        <br class="clearer">\n    </div>\n    <div class="icon"></div>\n</div>\n<div class="item visited-profile',checklist.visitedProfile?" complete":"",'">\n    <h3>Visit Your Profile!</h3>\n    <div class="contents">\n        <p>Check out your all-new Klout profile!</p>\n        <a class="button highlight" href="/user/',nick,'">Visit your profile</a>\n    </div>\n    <div class="icon"></div>\n</div>');return __p.join("")},amphetamine.t["dashboard/mainContent"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),isNewUser&&checklist?__p.push('\n    <div class="onboarding">\n        ',this["dashboard/mainChecklist"]({checklist:checklist,nick:nick,options:options}),"\n    </div>\n"):(__p.push('\n    <ul id="dashboard-features">\n        '),rankitEnabled&&__p.push('\n            <li id="dashboard-compare-users-container" class="dashboard-feature">\n                <div id="dashboard-compare-users" class="list-section">\n                    <div class="section-header">\n                        <h2 class="header-text">Help Improve the Klout Score</h2>\n                    </div>\n                    <div class="section-body">\n                        <img class="section-loading-icon" src="',options&&options.staticServer,'images/loading-small.gif" />\n                    </div>\n                </div>\n            </li>\n        '),__p.push('\n        <li id="dashboard-suggested-influencers-container" class="dashboard-feature">\n            <div id="dashboard-suggested-influencers" class="list-section">\n                <div class="section-header">\n                    <h2 class="header-text">Has your network influenced you recently?</h2>\n                </div>\n                <div class="section-body">\n                    <img class="section-loading-icon" src="',options&&options.staticServer,'images/loading-small.gif" />\n                </div>\n            </div>\n        </li>\n        <li class="dashboard-feature">\n            <div id="dashboard-upcoming-perk" class="closeable"></div>\n        </li>\n        <li id="dashboard-surfaced-content-container" class="dashboard-feature">\n            <div id="dashboard-surfaced-content" class="list-section">\n                <div class="section-header">\n                    <h2 class="header-text">Recent buzz</h2>\n                </div>\n                <div class="section-body">\n                    <img class="section-loading-icon" src="',options&&options.staticServer,'images/loading-small.gif" />\n                </div>\n            </div>\n        </li>\n        <li class="dashboard-feature">\n            <div id="dashboard-lists"></div>\n        </li>\n        <li class="dashboard-feature last">\n            <div id="like-dashboard" class="list-section">\n                <div class="section-header">\n                    <h2 class="header-text">News and Updates</h2>\n                </div>\n                <div class="section-body"></div>\n            </div>\n        </li>\n    </ul>\n')),__p.push("");return __p.join("")},amphetamine.t["dashboard/updates"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="private-stream"></div>');return __p.join("")},amphetamine.t["dashboard/scoreDelta"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var scoreDelta=typeof delta!="undefined"&&delta?+(+delta).toFixed(2):0;__p.push('\n<div class="score-delta',scoreDelta?scoreDelta<0?" negative":" positive":" zero",'">\n    <h3 class="time-range">',timeDisplay,'</h3>\n    <p class="value">\n        ',scoreDelta?scoreDelta<0?(+scoreDelta).toFixed(2):"+"+(+scoreDelta).toFixed(2):"0.00","\n    </p>\n</div>")}return __p.join("")},amphetamine.t["dashboard/scoreInsights"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),typeof scoreInsights!="undefined"&&scoreInsights&&(__p.push('\n    <div id="dashboard-insights" class="clearfix">\n        ',this["user/scoreFlag"]({isTopPlusK:scoreInsights.isTopPlusK,isTopScience:scoreInsights.isTopScience,score:scoreInsights.kScore,size:"large"}),'\n        <div id="score-insights" class="list-section">\n            <div class="section-header">\n                <h1 class="header-text">\n                    Hi ',user.firstName,'.\n                    <span class="compliment">\n                        '),scoreInsights.scoreDeltas[scoreInsights.timePeriod]>0?print("Looking good!"):scoreInsights.scoreDeltas[scoreInsights.timePeriod]==0&&print("Holding steady."),__p.push("\n                    </span>\n                </h1>\n                ",this["user/connectedNetworks"]({isOwnProfile:!0,showUnconnected:!0,size:"normal",user:user}),'\n            </div>\n            <div class="section-body">\n                <ul class="insight-list clearfix">\n                    <li class="insight first">',this["dashboard/scoreDelta"]({delta:scoreInsights.scoreDeltas&&scoreInsights.scoreDeltas.day,timeDisplay:"1-day"}),'</li>\n                    <li class="insight">',this["dashboard/scoreDelta"]({delta:scoreInsights.scoreDeltas&&scoreInsights.scoreDeltas.week,timeDisplay:"7-day"}),'</li>\n                    <li class="insight">',this["dashboard/scoreDelta"]({delta:scoreInsights.scoreDeltas&&scoreInsights.scoreDeltas.month,timeDisplay:"30-day"}),'</li>\n                    <li class="insight last score-peaks clearfix">\n                        <h3 class="time-range">30-day</h3>\n                        <p class="score-high positive">\n                            <span class="label">High:</span>\n                            <span class="value ',this["view/scoreIs100"]({score:scoreInsights.high}),'">\n                                ',scoreInsights.high?scoreInsights.high.toFixed(2):"10.00",'\n                            </span>\n                        </p>\n                        <p class="score-low negative">\n                            <span class="label">Low:</span>\n                            <span class="value ',this["view/scoreIs100"]({score:scoreInsights.low}),'">\n                                ',scoreInsights.low?scoreInsights.low.toFixed(2):"10.00",'\n                            </span>\n                        </p>\n                    </li>\n                </ul>\n                <div class="score-insight ',scoreInsights.amplification||scoreInsights.network_score||scoreInsights.true_reach?"":"empty-insight ",'clearfix">\n                    '
),scoreInsights.amplification?print(this["insight/amplification"]({connectedNetworks:connectedNetworks,insight:scoreInsights.amplification,isOwnProfile:!0,nick:nick,showMore:!0,showVirals:!0})):scoreInsights.network_score?print(this["insight/network"]({connectedNetworks:connectedNetworks,insight:scoreInsights.network_score,isOwnProfile:!0,nick:nick,showMore:!0,showVirals:!0})):scoreInsights.true_reach?print(this["insight/trueReach"]({connectedNetworks:connectedNetworks,insight:scoreInsights.true_reach,isOwnProfile:!0,nick:nick,showMore:!0,showVirals:!0})):__p.push('\n                            <h3 class="header-text">\n                                Welcome to Klout! As we start learning more about you, we will display insights regarding your score.\n                            </h3>\n                    '),__p.push('\n                    <a class="button cta" href="/user/',nick,'/">View Your Profile</a>\n                </div>\n            </div>\n        </div>\n    </div>\n')),__p.push("");return __p.join("")},amphetamine.t["dashboard/suggestedInfluencers"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(typeof influencedBy!="undefined"&&influencedBy&&influencedBy.length){__p.push('\n    <div class="section-header">\n        <h2 class="header-text">Has your network influenced you recently?</h2>\n        <p class="header-caption">If so, be sure to give them a +K!</p>\n    </div>\n    <div class="section-body">\n        <ul class="user-list clearfix">\n            ');for(var i=0;i<influencedBy.length;i++)__p.push('\n                <li class="suggested-influencer clearfix'),i==0&&print(" first"),__p.push('">\n                    ',this["user/avatar"]({user:influencedBy[i]}),"\n                    ",this["topic/list"]({displayPlusK:!0,name:influencedBy[i].name,nick:influencedBy[i].nick,topics:influencedBy[i].topics}),"\n                </li>\n            ");__p.push('\n        </ul>\n    </div>\n    <div class="section-footer clearfix">\n        <a href="/#/profile/influencers" class="button view-more">View your network</a>\n    </div>\n')}__p.push("")}return __p.join("")},amphetamine.t["dashboard/surfacedContent"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),typeof topContent!="undefined"&&topContent&&topContent.content&&topContent.content.length&&__p.push('\n    <div class="section-header">\n        <h2 class="header-text">Recent buzz about "',topic_.display,'"</h2>\n    </div>\n    <div class="section-body">\n        ',this["topic/contentList"]({topic_:topic_,content:topContent.content}),'\n    </div>\n    <div class="section-footer clearfix">\n        <a href="/#/topic/',topic_.slug,'/content" class="button view-more">See more</a>\n    </div>\n'),__p.push("");return __p.join("")},amphetamine.t["dashboard/compareUsers"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="section-header">\n    <h2 class="header-text">Help Improve the Klout Score</h2>\n    <p class="header-caption">Share your insights on influence</p>\n</div>\n<div class="section-body">\n    ',this["user/subList"]({maxDisplay:20,rowSize:20,size:"micro",users:users}),'\n</div>\n<div class="section-footer clearfix">\n    <a href="/compare_feedback/user_pair" class="button view-more">Give Feedback</a>\n</div>');return __p.join("")},amphetamine.t["view/bannerNotif"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="banner-notif">\n    <img class="new" src="',amphetamine.config.staticServer,'images/new.png"/>\n    <div class="message">',message,'</div> <a class="cta" id="',ctaId,'">',ctaMessage,"</a>\n</div>");return __p.join("")},amphetamine.t["view/cap10k"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),!isNaN(+number)&&+number>1e3?print("10K+"):print(this["view/round2"]({number:number})),__p.push("");return __p.join("")},amphetamine.t["view/commas"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");function comma(a){a=""+a;if(a.length>3){var b=a.length%3,c=b>0?a.substring(0,b):"";for(i=0;i<Math.floor(a.length/3);i++)b==0&&i==0?c+=a.substring(b+3*i,b+3*i+3):c+=","+a.substring(b+3*i,b+3*i+3);return c}return a}print(comma(input+"")),__p.push("")}return __p.join("")},amphetamine.t["view/escapeHtml"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),print(string.replace("<","&lt;").replace(">","&gt;").replace('"',"&quot;").replace("'","&#x27;").replace("\\","&#x2F;")),__p.push("");return __p.join("")},amphetamine.t["view/formatDate"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var d,now,t,h,m,pm;arguments[0].date&&(d=new Date(isNaN(+date)?date.substring(5,7)+"/"+date.substring(8,10)+"/"+date.substring(0,4):+date),arguments[0].todayText&&(now=new Date(amphetamine.config.now),now.getMonth()==d.getMonth()&&now.getDate()==d.getDate()&&now.getFullYear()==d.getFullYear()&&(t=arguments[0].todayText)),arguments[0].format=="alt"?(h=d.getHours(),h>12?(pm=!0,h-=12):h==0&&(h=12),m=d.getMinutes(),m<10&&(m="0"+m),print(d.getMonth()+1+"/"+d.getDate()+" "+h+":"+m+" "+(pm?"pm":"am"))):print(t||["January","February","March","April","May","June","July","August","September","October","November","December"][d.getMonth()]+" "+d.getDate()+(arguments[0].includeYear===!1?"":", "+d.getFullYear()))),__p.push("")}return __p.join("")},amphetamine.t["view/indefiniteArticle"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("",word.toLowerCase().search(new RegExp("[aeiou]"))?"a":"an","");return __p.join("")},amphetamine.t["view/linkify"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var m,w,i,l,r=new RegExp('((?:http|https)(?::\\/{2}[\\w]+)(?:[\\/|\\.]?)(?:[^\\s"]*))');if(typeof text=="string"){text=text.replace(new RegExp("(^|\\W)@(\\w+)","g"),'$1<a href="/user/$2" class="linkified">@$2</a>'),w=text.split(new RegExp("\\text"));for(i=0,l=w.length;i<l;i++){m=r.exec(w[i]);if(m){m=m[0];while((new RegExp("\\W")).test(m.charAt(m.length-1)))m=m.substring(0,m.length-1);w[i]=w[i].replace(m,'<a href="'+m+'" target="blank" class="linkified">'+m+"</a>")}}text=w.join(" ")}print(text),__p.push("")}return __p.join("")},amphetamine.t["view/navigation"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<ul class="navigation">\n    ');for(var i=0,ii=tabs.length;i<ii;++i)__p.push('\n        <li><a href="',tabs[i].href,'" id="',tabs[i].domId,'" class="nav-link ',tabs[i].domClass,'">',tabs[i].display,'<div class="triangle"></div></a></li>\n    ');__p.push("\n</ul>")}return __p.join("")},amphetamine.t["view/pluralize"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),count<1||count==0||count>1?print(word+"s"):print(word),__p.push("");return __p.join("")},amphetamine.t["view/plusk-currency"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isSilver=typeof isSilver!="undefined"&&isSilver;__p.push('\n<img class="plusk-currency',isSilver?" plusks":"",'" src="',amphetamine.config&&amphetamine.config.staticServer,"images/icons/plusk-coin",isSilver?"-silver":"",'.png" alt="+K"/>')}return __p.join("")},amphetamine.t["view/possessive"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),name.charAt(name.length-1)=="s"?print(name+"'"):print(name+"'s"),__p.push("");return __p.join("")},amphetamine.t["view/profileBadge"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var hasContent=typeof content!="undefined"&&content;if(hasContent){var kScore=content.kScore,kClass=content.kClass,kSquad=content.kSquad,ksUid=content.ksUid,nick=content.nick,name=content.name,fbUid=content.fbUid,fpUid=content.fpUid,gpUid=content.gpUid,twUid=content.twUid,pluskTopics=content.pluskTopics,scienceTopics=content.scienceTopics,isTopPlusK=content.isTopPlusK,isTopScience=content.isTopScience,isUnregFbOrGpOnly=(fbUid||gpUid)&&!twUid&&(typeof content.registered!="undefined"&&!content.registered||!ksUid||!nick);__p.push('\n    <div class="user-summary clearfix">\n        '),isUnregFbOrGpOnly&&__p.push('\n            <div class="callout ',fbUid?"fb":"gp",'-unregistered">\n                <a class="button-alt"',gpUid?' href="https://plus.google.com/'+gpUid+'" target="_blank"':"",">Invite</a>\n            </div>\n        "),__p.push("\n        ",this["user/scoreFlag"]({isTopPlusK:isTopPlusK,isTopScience:isTopScience,score:kScore}),"\n        ",this["user/avatar"]({showSash:!1,showScore:!1,user:{isTopPlusK:isTopPlusK,isTopScience:isTopScience,kScore:kScore,name:name,nick:nick,fbUid:fbUid,twUid:twUid,gpUid:gpUid}}),'\n        <div class="user-info">\n            <h3 class="user-name">',content.name,"</h3>\n            ",this["user/connectedNetworks"]({disableInvite:isUnregFbOrGpOnly,showCoreOnly:!0,size:"mini",user:{nick:nick,fbUid:fbUid,fpUid:fpUid,gpUid:gpUid,ksUid:ksUid,twUid:twUid}}),'\n        </div>\n    </div>\n    <div class="user-topics clearfix">\n        '),isTopScience&&__p.push('\n            <div class="topic-leader section clearfix">\n                <div class="section-header">\n                    <h4 class="header-text">Topic Influencer</h4>\n                </div>\n                <div class="section-body">\n                    <img class="sash" src="',amphetamine.config.staticServer,'images/icons/sash-gold-mini.png"/>\n                    ',this["topic/listify"]({linkify:!0,separator:"-",topics:scienceTopics}),"\n                </div>\n            </div>\n        "),isTopPlusK&&__p.push('\n            <div class="topic-leader section clearfix">\n                <div class="section-header">\n                    <h4 class="header-text">+K Influencer</h4>\n                </div>\n                <div class="section-body">\n                    <img class="sash" src="',amphetamine.config.staticServer,'images/icons/sash-blue-mini.png"/>\n                    ',this["topic/listify"]({linkify:!0,separator:"-",topics:pluskTopics}),"\n                </div>\n            </div>\n        "),__p.push("\n    </div>\n    ");if(!isUnregFbOrGpOnly){__p.push('\n        <div class="badge-actions">\n            '),twUid&&__p.push('\n                <a class="button-alt add-to-list">ADD TO LIST</a>\n            '),__p.push("\n            "),nick!=amphetamine.user.nick&&__p.push('\n                <a class="add-influencer-invoke-search button-alt">Add Influencer</a>\n            '),__p.push('\n            <a class="add-topic-invoke-search button-alt">Add Topic</a>\n\n            ');var serviceId=twUid?1:2,serviceUid=twUid?twUid:fbUid;__p.push('\n            <div class="user-object">\n                <input type="hidden" name="isSelf" value="false">\n                <input type="hidden" name="serviceId" value="',serviceId,'">\n                <input type="hidden" name="serviceUid" value="',serviceUid,'">\n                <input type="hidden" name="nick" value="',nick,'">\n                <input type="hidden" name="firstName" value="',name,'">\n                <input type="hidden" name="lastName" value="">\n            </div>\n        </div>\n    ')}__p.push("\n")}else __p.push("\n    Loading...\n");__p.push("")}return __p.join("")},amphetamine.t["view/round"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var number=parseFloat(""+number),rv=""+number;if(isNaN(number))print("--");else{if(+number>1e3){var range=1e3,postFix="K";+number>1e9?(range=1e9,postFix="B"):+number>1e6&&(range=1e6,postFix="M"),rv=""+Math.round(+number/range)+postFix}print(rv)}__p.push("")}return __p.join("")},amphetamine.t["view/round2"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var number=parseFloat(""+number),rv=""+number;if(isNaN(number))print("--");else{if(number>1e3){var range=1e3,postFix="K";number>1e9?(range=1e9,postFix="B"):number>1e6&&(range=1e6,postFix="M"),number/=range,number=1e3*(number/1e3).toPrecision(2),(""+number).split(".")[1]&&(number=number.toFixed(1)),rv=number+postFix}print(rv)}__p.push("")}return __p.join("")},amphetamine.t["view/scoreIs100"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("",score&&score==100?"triple-score":"","");return __p.join("")},amphetamine.t["view/scoreSashHovercard"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<img class="hovercard-cutout" src="',amphetamine.config&&amphetamine.config.staticServer,'images/hovercard-cutout.png"/>\n<div class="influential-topics section">\n    <div class="section-header">\n        <h3>\n        '),isOwnProfile?print("You are "):print(name+" is "),isTopScience&&isTopPlusK?print("a +K and Top Influencer"):isTopScience?print("a Top Influencer"):isTopPlusK&&print("a +K Influencer"),__p.push('\n        </h3>\n    </div>\n    <div class="section-body">\n        '),isTopScience&&__p.push('\n            <div class="topic-leader section first">\n                <div class="section-body">\n                    <img class="sash" src="',amphetamine.config.staticServer,'images/icons/sash-gold-mini.png"/>\n                    ',this["topic/listify"]({linkify:!0,separator:"-",topics:scienceTopics}),"\n                </div>\n            </div>\n        "),isTopPlusK&&__p.push('\n            <div class="topic-leader section">\n                <div class="section-body">\n                    <img class="sash" src="',amphetamine.config.staticServer,'images/icons/sash-blue-mini.png"/>\n                    ',this["topic/listify"]({linkify:!0,separator:"-",topics:pluskTopics}),"\n                </div>\n            </div>\n        "),__p.push('\n    </div>\n    <div class="viral-wrapper clearfix">\n        ');var sashes=[];isTopPlusK&&sashes.push("+K"),isTopScience&&sashes.push("Top"),sashes=sashes.join(" and ");if(isOwnProfile)var viralMessage="According to @klout, my Klout score is "+kScore+" and I&#39;m a "+sashes+" Influencer";else var viralMessage="According to @klout, @"+nick+"'s Klout score is "+kScore+" and is a "+sashes+" Influencer";__p.push("\n        ",this["viral/largeFlagScoreSash"]({nick:nick,location:location,message:viralMessage}),"\n    </div>\n</div>")}return __p.join("")},amphetamine.t["view/truncate"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push(""),(!score||isNaN(score))&&print("0");var temp=(""+score).split("."),decimal;temp.length===1?decimal="0":temp.length===2?decimal=temp[1].substring(0,2):print("0"),print(""+temp[0]+"."+decimal),__p.push("")}return __p.join("")},amphetamine.t["understand/klout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isLoggedIn=typeof isLoggedIn!="undefined"&&isLoggedIn;__p.push('\n<div class="understand-klout-tab">\n    <div class="section first">\n        <div class="section-header clearfix">\n            <h2 class="header-text">What is Influence?</h2>\n            <img class="understand-influence" src="',options&&options.staticServer,'images/understand/everyone-has-influence.png" alt="What is Influence?"/>\n        </div>\n        <div class="section-body clearfix">\n            <img class="understand-history" src="',options&&options.staticServer,'images/understand/influence-history.png" alt="History of Influence"/>\n            <p class="body-text first">\n                Previously, people relied almost entirely on radio announcers, TV hosts, and traditional media to shape\n                their opinions. Today, you can drive the conversation, voice your opinion, and connect with people all over\n                the world using social media. Social media has democratized influence.\n            </p>\n            <p class="body-text">\n                Klout was founded in 2008 to help you measure and leverage your influence. We believe influence is the ability to drive action. For example, Oprah\'s opinion on\n                literature has inspired millions to read titles from her book club. But you don\'t have to be Oprah to\n                have influence. You influence your friend when she listens to a song you recommend on Facebook. You\n                influence your coworker when he checks out an article you posted on LinkedIn and shares it with someone\n                else. Social actions like these are a reflection of influence.\n            </p>\n        </div>\n    </div>\n    <div class="section">\n        <div class="section-header">\n            <h3 class="header-text">Klout measures your online influence from your social networks</h3>\n        </div>\n        <div class="section-body clearfix">\n            <img class="understand-measure" src="',options&&options.staticServer,'images/understand/influence-chart.png" alt="Measuring Influence"/>\n\n            Klout measures influence online using <a href="',isLoggedIn?"/#":"",'/understand/privacy">data from your social networks</a>.\n            Anywhere you have an online presence, you have the opportunity to influence people by creating or sharing\n            content that inspires actions such as likes, retweets, comments and more. The more engagement your posts\n            receive, the more influential you are. Klout uses this information to provide you a\n            <a href="',isLoggedIn?"/#":"",'/understand/score">Klout Score</a> that measures your overall influence.\n        </div>\n    </div>\n    <div class="list-section last">\n        <div class="section-header">\n            <h3 class="header-text">How Klout helps you</h3>\n        </div>\n        <div class="section-body">\n            <p class="body-text">We provide you with insights to help you better understand your own influence:</p>\n            <ul class="bulleted-list">\n                <li class="list-item first">Do others trust your opinions online?</li>\n                <li class="list-item">What ',isLoggedIn?'<a href="/#/topics">topics</a>':"topics",' are you the most influential on?</li>\n                <li class="list-item">How do you compare with your friends?</li>\n            </ul>\n            <p class="body-text">\n                Klout also gives you insight into the world around you. For example, did you know that\n                <a href="',isLoggedIn?"/#":"",'/ladygaga">Lady Gaga </a> is influenced by Ellen DeGeneres? Learn\n                more about the people in your network and discover new people to connect with using Klout.\n            </p>\n\t\t\t<p class="body-text">                \n                Finally, Klout can help you unlock new opportunities: from using your influence to network into a new job, or getting the chance to <a href="/#/perks" alt="Klout Perks">check out upcoming products and experiences</a> for free, our goal is to help you understand and leverage your influence.\n            </p>\n        </div>\n        <div class="section-footer">\n            <a class="button-primary" href="',isLoggedIn?"/#":"",'/understand/score">Next: The Klout Score</a>\n        </div>\n    </div>\n</div>')}return __p.join("")},amphetamine.t["understand/why"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isLoggedIn=typeof isLoggedIn!="undefined"&&isLoggedIn;__p.push('\n<div class="understand-why-tab">\n    <img class="understand-why" src="',options&&options.staticServer,'images/understand/benefits.png" alt="why"/>\n    <div class="list-section first">\n        <div class="section-header">\n            <h2 class="header-text">Understand and improve your online influence</h2>\n\t\t\t<p class="header-caption">\n                Klout provides powerful analysis and tools to help you more clearly understand your own influence, your\n                network\'s influence, and the topical interests that make each of us special. Using Klout, you can improve\n                your use of social media and better reach your network.\n            </p>\n        </div>\n        <div class="section-body">\n            <ul class="bulleted-list">\n                <li class="list-item first">\n                    <span class="item-header">Benchmark your success</span>.\n                    Your Klout Score updates daily and ',isLoggedIn?'<a href="/#/dashboard">your dashboard</a>':"your dashboard",'\n                    gives you insights as to why your Score has changed.\n                </li>\n                <li class="list-item">\n                    <span class="item-header">Learn about your influence network</span>.\n                    On your ',isLoggedIn?'<a href="/#/profile">Klout profile</a>':"Klout profile"," you can see\n                    ",isLoggedIn?'<a href="/#/profile/influencers">who you&#39;re influencing</a>':"who you&#39;re influencing",'\n                    by your content and who influences you.\n                </li>\n            </ul>\n        </div>\n    </div>\n    <div class="list-section last">\n        <div class="section-header">\n            <h2 class="header-text">Unlock your Influence</h2>\n            <p class="header-caption">You\'re influential and we believe that should be rewarded.</p>\n        </div>\n        <div class="section-body">\n            <ul class="bulleted-list">\n                <li class="list-item first">\n                    <span class="item-header">Earn Klout Perks</span>.\n                    Klout Perks are exclusive products or experiences that you earn based on your influence. Influencers\n                    have earned sweet perks like\n                    <a href="http://www.engadget.com/2011/10/21/got-klout-you-may-qualify-for-a-free-windows-phone/" target="top">phones</a>\n                    and\n                    <a href="http://www.cbsnews.com/8301-505123_162-43641886/virgin-america-teams-with-klout-to-give-freebies-to-social-media-stars/" target="top">airline tickets</a>,\n                    all because of their impact online. You\n                    can always find out ',isLoggedIn?'<a href="/#/perks">Perks you qualify for</a>':"Perks you qualify for",'\n                    on the Perks page!\n                </li>\n                <div class="did-you-know">\n                    <img class="did-you-know-icon" src="',options&&options.staticServer,'images/understand/blue-question-mark.png" alt="Did You Know?"/>\n                    <h4 class="header">Did You Know?</h4>\n                    Klout has run Perks with over 100 companies and Perks have been claimed over 300,000 times.\n                </div>\n                <li class="list-item">\n                    <span class="item-header">Your VIP Pass to the World</span>.\n                    Klout helps companies reward you for your influence. For instance, your Score or topics could get\n                    you exclusive sneak peeks, service upgrades, and free goods to try out.\n                </li>\n                <li class="list-item">\n                    <span class="item-header">Be discovered in the topics you care about</span>.\n                    Become a top influencer on ',isLoggedIn?'<a href="/#/topics">our Topic pages</a>':"our Topic pages",'\n                    and improve your online reputation.\n                </li>\n            </ul>\n            <p class="body-text">\n                This is just the beginning of what Klout can offer you. We will continue to improve in our goal to help\n                you understand and unlock your influence.\n            </p>\n        </div>\n        <div class="section-footer">\n            '),isLoggedIn?__p.push('\n                <a class="button-primary" href="/#/profile">View Your Profile</a>\n            '):__p.push('\n                <a class="button-primary" href="/">Sign up for Klout</a>\n            '),__p.push("\n        </div>\n    </div>\n</div>")}return __p.join("")},amphetamine.t["understand/layout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="understand-klout">\n    <div class="content-header clearfix">\n        <h1 class="header-text">Understand Klout</h1>\n        <img class="header-image" src="',options&&options.staticServer,'images/understand/understand-klout-banner.png" alt="Understand Klout"/>\n    </div>\n    <div class="content-body clearfix">\n        <div class="sidebar">\n            <ul class="navigation">\n                <li>\n                    <a class="nav-link klout-link selected" href="/#/understand/klout">\n                        What is Klout?\n                        <div class="triangle"></div>\n                    </a>\n                </li>\n                <li>\n                    <a class="nav-link score-link" href="/#/understand/score">\n                        The Klout Score\n                        <div class="triangle"></div>\n                    </a>\n                </li>\n                <li>\n                    <a class="nav-link topics-link" href="/#/understand/topics">\n                        Influential Topics\n                        <div class="triangle"></div>\n                    </a>\n                </li>\n                <li>\n                    <a class="nav-link privacy-link" href="/#/understand/privacy">\n                        Klout and Your Data\n                        <div class="triangle"></div>\n                    </a>\n                </li>\n                <li>\n                    <a class="nav-link why-link" href="/#/understand/why">\n                        Why Use Klout?\n                        <div class="triangle"></div>\n                    </a>\n                </li>\n            </ul>\n        </div>\n        <div class="content-main">\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["understand/privacy"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isLoggedIn=typeof isLoggedIn!="undefined"&&isLoggedIn;__p.push('\n<div class="understand-privacy-tab">\n    <div id="letter" class="quote-section first">\n        <img class="understand-privacy" src="',options&&options.staticServer,'images/understand/privacy.png" alt="Privacy"/>\n        <p class="body-text first">Privacy is central to what we do and enters into every decision we make here at Klout.</p>\n        <p class="body-text">\n            In the same way Google analyzes public websites to generate PageRank, Klout analyzes publicly-available data\n            to measure a person\'s influence.\n        </p>\n        <p class="body-text">\n            It\'s why we respect the privacy settings of all the networks we measure and do not analyze private accounts\n            unless given explicit permission to do so.\n        </p>\n        <p class="body-text">\n            It\'s why we enable anyone, even those with public data, to opt-out of being measured by Klout.\n        </p>\n        <p class="body-text">\n            It\'s why we have no interest in understanding the influence of minors.\n\t\t</p>\n\t\t<p class="body-text">\n            And it\'s why we\'ll continue to work with our network partners, and build our own safeguards, to ensure the\n            strictest of compliance with all privacy policies and regulations.\n        </p>\n    </div>\n    <p class="body-text">\n        Did you know that most of the posts, videos, pictures and other data you create and share on the social\n        web are available for the world to see? From Google to ad networks, thousands of companies track this\n        data and use it for purposes ranging from providing better search results to targeting you with advertising.\n    </p>\n    <p class="body-text">\n        Klout uses your content only to help you understand and benefit from your influence. We also want to help\n        you understand how your data is used across the web.\n    </p>\n    <p class="body-text">\n        If you are uncomfortable with your data being publicly available, we recommend that you set your various\n        social media accounts to private. For most networks, having a private account will limit your data to\n        only those you give access to.\n    </p>\n    <div class="network-list list-section quote-section">\n        <div class="section-header">\n            <h2 class="header-text">Privacy by Network</h2>\n        </div>\n        <div class="section-body">\n            <ul class="list networks">\n                <li class="list-item">\n                    <span class="service-ikon twitter"></span>\n                    <span class="item-header">Twitter</span>:\n                    <a href="https://support.twitter.com/articles/14016-about-public-and-protected-accounts" target="_top">Public vs Protected Tweets</a>\n                </li>\n                <li class="list-item">\n                    <span class="service-ikon facebook"></span>\n                    <span class="item-header">Facebook</span>:\n                    <a href="https://www.facebook.com/safety/tools/" target="_top">Safety Center</a>\n                </li>\n                <li class="list-item">\n                    <span class="service-ikon gplus"></span>\n                    <span class="item-header">Google+</span>:\n                    <a href="http://support.google.com/plus/bin/answer.py?hl=en&answer=1192471" target="_top">Public Profiles</a>\n                </li>\n                <li class="list-item">\n                    <span class="service-ikon linkedin"></span>\n                    <span class="item-header">LinkedIn</span>:\n                    <a href="http://learn.linkedin.com/settings/" target="_top">Settings & Personalization</a>\n                </li>\n                <li class="list-item">\n                    <span class="service-ikon foursquare"></span>\n                    <span class="item-header">Foursquare</span>:\n                    <a href="http://support.foursquare.com/forums/191152-privacy" target="_top">Privacy on Foursquare</a>\n                </li>\n                <li class="list-item">\n                    <span class="service-ikon youtube"></span>\n                    <span class="item-header">YouTube</span>:\n                    <a href="http://support.google.com/youtube/bin/answer.py?hl=en&answer=157177" target="_top">Private Videos</a>\n                </li>\n                <li class="list-item">\n                    <span class="service-ikon instagram"></span>\n                    <span class="item-header">Instagram</span>:\n                    <a href="http://instagr.am/about/faq/" target="_top">FAQ</a>\n                </li>\n                <li class="list-item">\n                    <span class="service-ikon tumblr"></span>\n                    <span class="item-header">Tumblr</span>:\n                    <a href="http://www.tumblr.com/policy/en/privacy" target="_top">Privacy Policy</a>\n                </li>\n                <li class="list-item">\n                    <span class="service-ikon blogger"></span>\n                    <span class="item-header">Blogger</span>:\n                    <a href="http://support.google.com/blogger/bin/answer.py?hl=en&answer=42673" target="_top">Controlling who can view your blog</a>\n                </li>\n                <li class="list-item">\n                    <span class="service-ikon wordpress"></span>\n                    <span class="item-header">WordPress</span>:\n                    <a href="http://codex.wordpress.org/Settings_Privacy_Screen" target="_top">Blog Privacy Settings</a>\n                </li>\n                <li class="list-item">\n                    <span class="service-ikon lastfm"></span>\n                    <span class="item-header">Last.fm</span>:\n                    <a href="http://www.last.fm/help/faq?category=96" target="_top">User account management </a>\n                </li>\n                <li class="list-item">\n                    <span class="service-ikon flickr"></span>\n                    <span class="item-header">Flickr</span>:\n                    <a href="http://www.flickr.com/help/privacy/" target="_top">Public/Private</a>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <p class="body-text">\n        Klout measures online influence based on public data; we measure private data only when we are explicitly given access from you, the user. <strong>We will never publicly share or display your private updates</strong>.\n    </p>\n    <div class="list-section">\n        <div class="section-header">\n            <h3 class="header-text">You can ALWAYS</h3>\n        </div>\n        <div class="section-body">\n            <ul class="bulleted-list">\n                <li class="list-item">Control information that\'s displayed on your profile, such as topics and influencers.</li>\n                <li class="list-item">Choose which networks Klout can access.</li>\n                <li class="list-item">Choose to <a class="opt-out-link" href="http://klout.com/corp/privacy">opt-out</a> at any time.</li>\n            </ul>\n        </div>\n    </div>\n    <div class="list-section">\n        <div class="section-header">\n            <h3 class="header-text">Klout will NEVER</h3>\n        </div>\n        <div class="section-body">\n            <ul class="bulleted-list">\n                <li class="list-item">Give any personally identifiable data to any third party without your explicit permission.</li>\n                <li class="list-item">Access any private data without your explicit permission.</li>\n                <li class="list-item">Access your private communications such as Facebook messages or Twitter DMs.</li>\n            </ul>\n        </div>\n    </div>\n    <p class="body-text">\n        Klout values your privacy and works with all network partners to ensure the strictest of compliance regarding\n        how your data is used.\n    </p>\n    <div class="section">\n        <div class="section-header">\n            <h2 class="header-text">Your data and perks</h2>\n            <p class="header-caption">\n                Your Klout can earn you Perks: exclusive products and experiences from brands. Throughout the Perks\n                process, <strong>the power is always in the your hands</strong>. No matter what, brands do not get access\n                to your private data.\n            </p>\n        </div>\n        <div class="section-body">\n            <div class="list-section">\n                <div class="section-header">\n                    <h3 class="header-text">The perk process</h3>\n                </div>\n                <div class="section-body">\n                    <ul class="bulleted-list">\n                        <li class="list-item">\n                            <span class="item-header">Perks Selection.</span>\n                            <span class="item-body">\n                                Because Klout does not collect or use your private network data, brands cannot target\n                                based on your private data. They simply set high-level requirements for the Perk (e.g.\n                                technology influencers with a Score above 30), and you decide if you wish to participate\n                                in a Perk or not.\n                            </span>\n                        </li>\n                        <li class="list-item">\n                            <span class="item-header">Participating in a Perk.</span>\n                            <span class="item-body">\n                                Even when you choose to participate in a Perk, the only information they see is the\n                                public posts you choose to make about their brand. If a Perk ever requires more\n                                information, we will explicitly let you know what information is needed before you\n                                decide to participate.\n                            </span>\n                        </li>\n                        <li class="list-item">\n                            <span class="item-header">Receiving a Perk.</span>\n                            <span class="item-body">\n                                Klout will ship items to you directly if a Perk involves a deliverable good.\n                                <strong>Your address and contact information is not, and will never be, shared with any brands or Perk sponsors</strong>.\n                                For Perk events, the brand is only given your name so that they can let you in at the\n                                door. Any other information will only be provided after your personal explicit consent.\n                            </span>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n        <div class="section-body">\n            <div class="list-section">\n                <div class="section-header">\n                    <h3 class="header-text">Code of ethics</h3>\n                </div>\n                <div class="section-body">\n                    <ul class="bulleted-list">\n                        <li class="list-item">Klout will never sell or give away your contact info.</li>\n                        <li class="list-item">Participating (or not participating) will not change your Klout Score.</li>\n                        <li class="list-item">\n                            You are receiving the Perk because you are influential and have authority on topics related\n                            to the Perk. You are welcome to tell the world you love the Perk, you dislike the Perk or\n                            say nothing at all.\n                        </li>\n                        <li class="list-item">\n                            If you decide to talk about the Perk, we will ask you to disclose that you received a sample\n                            (<a href="http://klout.com/corp/perks">http://klout.com/corp/perks</a>).\n                        </li>\n                        <li class="list-item">\n                            You must be 18 or older to qualify for Perks. Make sure your age is up-to-date in your <a href="/#/edit-settings/profile">profile</a>.\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n        <div class="section-footer">\n            <a class="button-primary" href="'
,isLoggedIn?"/#":"",'/understand/why">Next: Why Use Klout?</a>\n        </div>\n    </div>\n</div>')}return __p.join("")},amphetamine.t["understand/score"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isLoggedIn=typeof isLoggedIn!="undefined"&&isLoggedIn;__p.push('\n<div class="understand-score-tab">\n    <div class="list-section first">\n        <div class="section-header">\n            <h2 class="header-text">Your Klout Score measures your online influence on a scale of 1 to 100</h2>\n        </div>\n        <div class="section-body">\n            '),isLoggedIn||__p.push('\n                <img class="understand-score" src="',options&&options.staticServer,'images/understand/score.png" alt="The Klout Score"/>\n            '),__p.push('\n            <p class="section-body">\n            \tPeople have always had the power to influence others, and that power is being democratized with new social media tools. Klout\'s mission is to provide insights into everyone\'s influence.\n\t\t\t</p>\n\t\t\t<p class="section-body">\n                We measure your influence based on your ability to drive action in social networks. We process this\n                data on a daily basis to give you an ',isLoggedIn?'<a href="/#/dashboard">updated Klout Score</a>':"updated Klout Score","\n                each morning.\n            </p>\n            "),isLoggedIn&&__p.push('\n                <div class="score-range">\n                    <div id="user-position">\n                        ',this["user/scoreFlag"]({score:score.score}),"\n                        ",this["user/avatar"]({disableHover:!0,isFirst:!1,showSash:!1,showScore:!1,user:score}),"\n                    </div>\n                </div>\n            "),__p.push('\n            <p class="section-body">\n                Here are a few of the actions we use to measure influence:\n            </p>\n            <ul class="list networks">\n                <li class="list-item">\n                    <span class="service-ikon twitter"></span>\n                    <span class="item-header">Twitter</span>:\n                    Retweets and Mentions\n                </li>\n                <li class="list-item">\n                    <span class="service-ikon facebook"></span>\n                    <span class="item-header">Facebook</span>:\n                    Comments, Wall-Posts, Likes\n                </li>\n                <li class="list-item">\n                    <span class="service-ikon linkedin"></span>\n                    <span class="item-header">LinkedIn</span>:\n                    Comments, Likes\n                </li>\n                <li class="list-item">\n                    <span class="service-ikon foursquare"></span>\n                    <span class="item-header">Foursquare</span>:\n                    Tips, To-Do\'s, Done\n                </li>\n                <li class="list-item">\n                    <span class="service-ikon gplus"></span>\n                    <span class="item-header">Google+</span>:\n                    Comments, Reshares, +1\n                </li>\n            </ul>\n            <p class="body-text">\n                Other networks that we\'re working to measure are <strong>Facebook Pages</strong>, <strong>Youtube</strong>,\n                <strong>Instagram</strong>, <strong>Tumblr</strong>, <strong>Blogger</strong>, <strong>Wordpress</strong>,\n                <strong>Last.fm</strong> and <strong>Flickr</strong>. You can already link these accounts with your Klout profile, and we look forward to incorporating your activity from these networks to our score soon.\n            </p>\n            <p class="body-text">\n            </p>\n            <div class="did-you-know">\n                <img class="did-you-know-icon" src="',options&&options.staticServer,'images/understand/blue-question-mark.png" alt="Did You Know?"/>\n                <h4 class="header">Did You Know?</h4>\n                The average Klout Score is actually 20, not 50. As your Score increases, it becomes exponentially harder\n                to increase your Klout. That\'s why you see so many 20s and not as many 90s!\n            </div>\n        </div>\n    </div>\n    <div class="list-section last">\n        <div class="section-header">\n            <h2 class="header-text">Klout Core Concepts</h2>\n            '),isLoggedIn&&__p.push('\n                <img class="understand-score" src="',options&&options.staticServer,'images/understand/score.png" alt="The Klout Score"/>\n            '),__p.push('\n            <p class="header-caption">Now that you know what information goes into Klout, here are the principles that guide the Klout Score:</p>\n        </div>\n        <div class="section-body">\n            <ul id="core-concepts" class="list">\n                <li class="list-item first">\n                    <h3 class="item-header">Influence is the ability to drive action</h3>\n                    <div class="item-body">\n                        It\'s great to have lots of connections but what really matters is how people engage with\n                        the content you create. <strong>We believe it\'s better to have a small and engaged audience than\n                        a large network that doesn\'t act upon your content</strong>.\n                    </div>\n                </li>\n                <li class="list-item">\n                    <h3 class="item-header">Connecting networks can only help your Score</h3>\n                    <div class="item-body">\n                        We want to help you understand your influence wherever it may exist. We also understand\n                        given the number of different networks out there that it is nearly impossible for any\n                        person to be consistently effective across every network.\n                        ',isLoggedIn?'<a href="/#/edit-settings/networks">Adding more networks</a>':"Adding more networks",'\n                        helps us more accurately measure your influence and <strong>can only increase your Score</strong>.\n                    </div>\n                </li>\n                <li class="list-item">\n                    <h3 class="item-header">Everyone has Klout</h3>\n                    <div class="item-body">\n                        <strong>You are never penalized for connecting or engaging with someone with a low Klout score.</strong>\n                        In fact, you are helping build their Klout Score. The more influential you are the\n                        greater impact you have. All engagement positively contributes to your Score.\n                    </div>\n                </li>\n                <li class="list-item">\n                    <h3 class="item-header">Influence is built over time</h3>\n                    <div class="item-body">\n                        In most instances, your influence should not radically change from one day to the next.\n                        The Klout Score is based on a rolling 90-day window, with recent activity being weighted more than\n                        older activity. So being inactive over the weekend or taking short break won\'t have a major impact\n                        on your Score, but if you\'re inactive for longer periods your Score will decrease gradually.\n                    </div>\n                </li>\n                <li class="list-item">\n                    <h3 class="item-header">Being active is different than being influential</h3>\n                    <div class="item-body">\n                        Retweets, Likes, comments and other interactions on the social web are all signals of\n                        influence. However, just looking at the count of these actions does not tell the whole\n                        story of a person\'s influence. It\'s important to look at how much content a person\n                        creates compared to the amount of engagement they generate.\n                    </div>\n                </li>\n                <li class="list-item">\n                    <h3 class="item-header">Klout is constantly evolving</h3>\n                    <div class="item-body">\n                        The social web is changing every day and the Klout Score will continue to evolve and\n                        improve. The best strategy for obtaining a high Klout Score is to\n                        <strong>simply create great content</strong> that your network wants to share and engage with.\n                    </div>\n                </li>\n            </ul>\n            <div class="did-you-know">\n                <img class="did-you-know-icon" src="',options&&options.staticServer,'images/understand/blue-question-mark.png" alt="Did You Know?"/>\n                <h4 class="header">Did You Know?</h4>\n                Klout calculates billions of data points across over 100 million influencers every day.\n            </div>\n        </div>\n        <div class="section-footer">\n            <a class="button-primary" href="',isLoggedIn?"/#":"",'/understand/topics">Next: Influential Topics</a>\n        </div>\n    </div>\n</div>')}return __p.join("")},amphetamine.t["understand/topics"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isLoggedIn=typeof isLoggedIn!="undefined"&&isLoggedIn;__p.push('\n<div class="understand-topics-tab">\n    <div class="section first clearfix">\n        <div class="section-header">\n            <h2 class="header-text">Topics fill out the picture and are based on your interactions</h2>\n            <img class="understand-topics" src="',options&&options.staticServer,'images/understand/topics.png" alt="Influential Topics"/>\n        </div>\n        <div class="section-body">\n            <p class="section-body">\n                While the Klout Score is useful for ranking overall influence, we also strongly believe you\'re more\n                than just a number. Whether you\'re a musician, an engineer, or the President of the United States,\n                everyone is special in areas that can\'t always be boiled down to a single number, and Klout wants to\n                recognize you for that.\n            </p>\n            <p class="body-text">\n                Along with your Score, Klout finds your most influential topics based on the engagement you receive from\n                others. You can see these ',isLoggedIn?'<a href="/#/profile/topics">in your topics section</a>':"in your topics section",'.\n            </p>\n        </div>\n    </div>\n    <div class="list-section">\n        <div class="section-header">\n            <h3 class="header-text">Getting Topics on your profile</h3>\n        </div>\n        <div class="section-body">\n            <p class="body-text">\n                Topics can be added to your profile in two ways:\n            </p>\n            <ul class="bulleted-list">\n                <li class="list-item">\n                    Klout analyzes the content you produce on social networks and your audience\'s responses in order to\n                    assign you topics automatically.\n                </li>\n                <li class="list-item">\n                    While we process billions of pieces of content every day to generate topics, Klout users can also\n                    suggest topics for themselves and friends. Use the "Add Topic" button on any person\'s profile to give\n                    them another topic.\n                </li>\n            </ul>\n        </div>\n    </div>\n    <div class="section clearfix">\n        <div class="section-header">\n            <h3 class="header-text">Recognize your peers</h3>\n        </div>\n        <div class="section-body">\n            <p class="body-text">\n                You may notice orange +K buttons across the site. Giving someone a +K is a great way to acknowledge that\n                someone has influenced you. For example, giving your friend a +K in food after a stellar restaurant\n                recommendation is a great way to explicitly signal their influence.\n            </p>\n            <p class="body-text">\n                Giving +K is easy: just visit someone\'s topics section and click on the orange +K button next to the\n                topic. Your network will be sure to reciprocate when you start giving out your +Ks!\n            </p>\n            <div class="did-you-know">\n                <img class="did-you-know-icon" src="',options&&options.staticServer,'images/understand/blue-question-mark.png" alt="Did You Know?"/>\n                <h4 class="header">Did You Know?</h4>\n                Klout users give each other over 50 thousand +Ks every day. Giving +K to your network is a powerful signal\n                to show how they influence you.\n            </div>\n        </div>\n    </div>\n    <div class="section last">\n        <div class="section-header">\n            <h3 class="header-text">Discover top influencers</h3>\n        </div>\n        <div class="section-body">\n            <p class="body-text">\n                For some of the most popular topics, Klout has created topic pages. For example, on the\n                <a href="/#/topic/music/">Music topic page</a>, you will find people who are noted as Top Influencers\n                and Top +K recipients.\n            </p>\n            <p class="body-text">\n                Top influencers are people that we have found to be the most influential based on their content. Top +K\n                recipients shows the people who have received the most +Ks in a certain topic in the past 90 days.\n            </p>\n            <p class="body-text">If you are on a topic page leaderboard, you will receive a sash on your score!</p>\n            <ul class="klout-influence list">\n                <li class="list-item clearfix">\n                    <h4 class="item-header">\n                        <img class="sash-icon" src="',options&&options.staticServer,'images/understand/sash-gold.png" alt="Top Influencer"/>\n                    </h4>\n                    <div class="item-body">Top influencers detected by Klout receive a gold sash.</div>\n                </li>\n                <li class="list-item clearfix">\n                    <h4 class="item-header">\n                        <img class="sash-icon" src="',options&&options.staticServer,'images/understand/sash-blue.png" alt="+K Influencer"/>\n                    </h4>\n                    <div class="item-body">Top +K recipients receive a blue sash.</div>\n                </li>\n                <li class="list-item clearfix">\n                    <h4 class="item-header">\n                        <img class="sash-icon" src="',options&&options.staticServer,'images/understand/sash-blue-gold.png" alt="+K and Top Influencer"/>\n                    </h4>\n                    <div class="item-body">People who are top +K recipients and top influencers receive a blue and gold sash.</div>\n                </li>\n            </ul>\n        </div>\n        <div class="section-footer">\n            <a class="button-primary" href="',isLoggedIn?"/#":"",'/understand/privacy">Next: Klout and Your Data</a>\n        </div>\n    </div>\n</div>')}return __p.join("")},amphetamine.t["compare/compare-feedback-subject"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="compare-user-candidate">\n    <a href="/api/compare_feedback/',i,'">\n        <div class="compare-user-candidate-overlay"></div>\n    </a>\n    <div>\n        <ul class="user-list">\n            <li class="list-row">\n                ',this["user/rowProfile"]({user:user}),'\n            </li>\n        </ul>\n    </div>\n    <div class="button-container">\n        <a href="/api/compare_feedback/',i,'" class="button-primary">Select</a>\n    </div>\n</div>');return __p.join("")},amphetamine.t["compare/compare-feedback-header"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="section-header clearfix">\n    <h3 class="header-text">\n        '),dayCount<10?(__p.push("\n            Who is more influential to you?\n            "),dayCount>=0&&__p.push("\n                (",dayCount+1,"/10)\n            "),__p.push("\n        ")):__p.push("\n            Who should have a higher Klout score? (",dayCount+1-10,"/10)\n        "),__p.push("\n    </h3>\n</div>");return __p.join("")},amphetamine.t["compare/compare-feedback-loading"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a class="close close-modal"></a>\n<div class="section">\n    ',this["compare/compare-feedback-header"]({dayCount:dayCount}),'\n    <div id="compare-feedback-virals-loading" class="section-body">\n        <img src="',amphetamine.config.staticServer,'images/loading.gif">\n    </div>\n</div>');return __p.join("")},amphetamine.t["compare/compare-feedback-level"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var level=1,limits=[10,20,30,40,50,80,100,150,200];for(var i=0,ii=limits.length;i<ii;++i){var limit=limits[i];if(totalCount<limit){level=i+1;break}}__p.push("\nLevel ",level," Submitter")}return __p.join("")},amphetamine.t["compare/compare-feedback-loaded"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<a class="close close-modal"></a>\n'),dayCount==10?__p.push("\n    ",this["compare/compare-feedback-unlock-tier"]({lastPair:lastPair}),'\n    <div class="section" id="compare-feedback-loaded" style="display: none">\n'):__p.push('\n<div class="section">\n'),__p.push("\n    ",this["compare/compare-feedback-header"]({dayCount:dayCount}),"\n    ");if(lastPair&&lastPair.result!=="skip"){__p.push('\n        <div class="section-footer">\n            <p>\n                ');if(lastPair.result==0)var winner=lastPair.pair[0],loser=lastPair.pair[1];else if(lastPair.result==1)var winner=lastPair.pair[1],loser=lastPair.pair[0];winner.nick.charAt(0)=="~"?winner.nick=winner.name||winner.firstName:winner.nick="@"+winner.nick,loser.nick.charAt(0)=="~"?loser.nick=loser.name||loser.firstName:loser.nick="@"+loser.nick,__p.push("\n                ",this["compare/compare-feedback-viral"]({winnerName:winner.firstName,winnerNick:winner.nick,loserNick:loser.nick,me:amphetamine.user.nick}),"\n            </p>\n        </div>\n    ")}__p.push('\n    <div class="section-body">\n        <div class="compare-user-candidate-wrapper clearfix">\n            ',this["compare/compare-feedback-subject"]({user:pair[0],token:token,i:0}),'\n            <div class="compare-user-candidate-or clearfix">OR</div>\n            ',this["compare/compare-feedback-subject"]({user:pair[1],token:token,i:1}),'\n        </div>\n    </div>\n    <div id="compare-user-footer" class="section-footer">\n        <span class="message">\n            ',this["compare/compare-feedback-level"]({totalCount:totalCount}),'\n        </span>\n        <span class="button-container">\n            <a href="/api/compare_feedback/skip">I don\'t know these influencers</a>\n        </span>\n    </div>\n</div>')}return __p.join("")},amphetamine.t["compare/compare-feedback-unlock-tier"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div class="section" id="compare-feedback-unlock-tier">\n    <div class="section-header clearfix">\n        <h3 class="header-text">\n            Continue to Part 2: Who should have a higher Klout score?\n        </h3>\n    </div>\n    <div class="section-body">\n        <div id="compare-feedback-continue-checkmark">\n            <img class="icon" src="',amphetamine.config.staticServer,'images/continue-checkmark.png">\n        </div>\n    </div>\n    <div id="compare-user-footer" class="section-footer clearfix">\n        <span class="message">\n            Your answers will be used to tune the Klout algorithm.\n        </span>\n        <span class="button-container">\n            <a class="button-primary" href="/tier/2">NEXT</a>\n        </span>\n    </div>\n    ');if(lastPair&&lastPair.result!=="skip"){__p.push('\n        <div class="section-footer">\n                ');if(lastPair.result==0)var winner=lastPair.pair[0],loser=lastPair.pair[1];else if(lastPair.result==1)var winner=lastPair.pair[1],loser=lastPair.pair[0];winner.nick.charAt(0)=="~"?winner.nick=winner.name||winner.firstName:winner.nick="@"+winner.nick,loser.nick.charAt(0)=="~"?loser.nick=loser.name||loser.firstName:loser.nick="@"+loser.nick,__p.push("\n                ",this["compare/compare-feedback-viral"]({winnerName:winner.firstName,winnerNick:winner.nick,loserNick:loser.nick,me:amphetamine.user.nick}),"\n        </div>\n    ")}__p.push("\n</div>")}return __p.join("")},amphetamine.t["compare/compare-feedback-limit-reached"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<a class="close close-modal"></a>\n<div class="section">\n    <div class="section-header clearfix">\n        <h3 class="header-text">\n            Thank you for your insights\n        </h3>\n    </div>\n    <div class="section-body">\n        You have reached your limit of 20 submissions per day. Please come back tomorrow!\n        <div id="compare-feedback-limit-reached-icon">\n            <img class="icon" src="',amphetamine.config.staticServer,'images/awesome-checkmark.png">\n        </div>\n    </div>\n    <div id="compare-user-footer" class="section-footer limit-reached clearfix">\n        <span class="message">\n            Your answers will be used to tune the Klout algorithm.\n        </span>\n        <span class="button-container">\n            <a class="button-primary close-modal">OKAY</a>\n        </span>\n    </div>\n    ');if(lastPair&&lastPair.result!=="skip"){__p.push('\n        <div class="section-footer">\n                ');if(lastPair.result==0)var winner=lastPair.pair[0],loser=lastPair.pair[1];else if(lastPair.result==1)var winner=lastPair.pair[1],loser=lastPair.pair[0];winner.nick.charAt(0)=="~"?winner.nick=winner.name||winner.firstName:winner.nick="@"+winner.nick,loser.nick.charAt(0)=="~"?loser.nick=loser.name||loser.firstName:loser.nick="@"+loser.nick,__p.push("\n                ",this["compare/compare-feedback-viral"]({winnerName:winner.firstName,winnerNick:winner.nick,loserNick:loser.nick,me:amphetamine.user.nick}),"\n        </div>\n    ")}__p.push("\n</div>")}return __p.join("")},amphetamine.t["compare/compare-feedback-error"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a class="close close-modal"></a>\n<div class="section">\n    <div class="section-header clearfix">\n        <h3 class="header-text">\n            Sorry, an error has occurred\n        </h3>\n    </div>\n    <div class="section-body">\n        Please try again!\n    </div>\n    <div id="compare-user-footer" class="section-footer">\n        <div class="button-container">\n            <a class="button-primary close-modal">OKAY</a>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["compare/compare-feedback-viral"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="compare-feedback-virals-container" class="flash success">\n<span id="compare-feedback-virals-icon">\n    <img class="icon" src="',amphetamine.config.staticServer,'images/trans-checkmark.png">\n</span>\n<span id="compare-feedback-virals" class="viral-unit">\n    <a class="tw viral"></a>\n    <a class="fb viral"></a>\n    <input type="hidden" name="viralMessage" value="I selected ',winnerNick," as more influential than ",loserNick,' on @klout. Check out my profile: ">\n    <input type="hidden" name="viralEvent" value="compare_influence">\n    <input type="hidden" name="viralRoute" value="/user/',me,'">\n    <input type="hidden" name="viralMeta" value="no_meta">\n</span>\n<span id="compare-feedback-virals-message">\n    You just voted for ',winnerName,"!\n</span>\n</div>");return __p.join("")},amphetamine.t["modal/modal"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="underlay"></div>\n<div class="modal-contents ',id,'">\n    <div class="contents clearfix" id="',id,'">\n        <a class="close close-modal"></a>\n        '),typeof content=="string"?__p.push("\n            ",content,"\n        "):__p.push("\n            ",this["modal/"+id]?this["modal/"+id](content):"","\n        "),__p.push("\n    </div>\n</div>");return __p.join("")},amphetamine.t["modal/amphetamine-dialog"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="message">',message,'</div>\n<div class="panel">\n    <input type="button" value="&nbsp;OK&nbsp;" class="button highlight button-primary ok">\n    '),typeof type!="undefined"&&type=="confirm"&&__p.push('\n        <input type="button" value="&nbsp;Cancel&nbsp;" class="button-secondary cancel">\n    '),__p.push('\n    <br class="clearer">\n</div>');return __p.join("")},amphetamine.t["modal/achievement-modal"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<h2>Woo Hoo! New Achievement!</h2>\n<div class="achievement-icon">\n    <img id="achievement-image" src="',amphetamine.config.staticServer,"images/achievements/",id,"-",seriesId,'-l.png" alt="Your achievement">\n</div>\n<div class="achievement-info">\n    <h3 id="achievement-name" class="achievement-',id,'">',name,'</h3>\n    <p id="achievement-description"">',description,'</p>\n    <div id="viral_achievement_hover" class="viral-unit">\n        <a class="tw viral">\n            <img src="',amphetamine.config.staticServer,'images/tweet.png">\n        </a>\n        <a class="fb viral">\n            <img src="',amphetamine.config.staticServer,'images/share.png">\n        </a>\n        <a class="li viral">\n            <img src="',amphetamine.config.staticServer,'images/li-share-off.png">\n        </a>\n        <input type="hidden" name="viralMessage" value="I earned the \'',name,'\' achievement on @klout, check it out!"/>\n        <input type="hidden" name="viralEvent" value="achievement_earned_modal"/>\n        <input type="hidden" name="viralMeta" value="',name,'"/>\n    </div>\n</div>\n<br class="clearer">');return __p.join("")},amphetamine.t["modal/add-influencer-search"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="clearfix">\n    <div class="search-container section clearfix">\n        <div class="section-header">\n            <h3 class="header-text">Add other users who influence you</h3>\n        </div>\n        <div class="section-body clearfix">\n            <div class="flash error" style="display: none;"></div>\n            <div class="search influencer-search">\n                <input class="searchfield" type="text" placeholder="Enter a user\'s name" autocomplete="off">\n                <input class="submit-button" type="image" src="',amphetamine.config.staticServer,'images/magnifying-glass.png" alt="Search">\n                <div class="search-results">\n                </div>\n            </div>\n        </div>\n        <div class="section-footer">\n            <a id="add-influenced-by" class="influenced-by-add add button-alt">Add</a>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["modal/add-influencer-search-from-comparison"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="clearfix">\n    <div class="search-container section clearfix">\n        <div class="section-header">\n            <h3 class="header-text">Add other users who influence you</h3>\n        </div>\n        <div class="section-body clearfix">\n            <div class="flash error" style="display: none;"></div>\n            <div class="search influencer-search">\n                <input class="searchfield" type="text" placeholder="Enter a user\'s name" autocomplete="off">\n                <input class="submit-button" type="image" src="',amphetamine.config.staticServer,'images/magnifying-glass.png" alt="Search">\n                <div class="search-results">\n                </div>\n            </div>\n        </div>\n        <div class="section-footer">\n            <a id="add-influenced-by-from-comparison" class="influenced-by-add add button-alt">Add</a>\n            <img class="spinner" src="',amphetamine.config.staticServer,'images/loading-small.gif" width="48" height="27" />\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["modal/addPerkUGC"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="addPerkUGCContainer">\n    '),havePerkAssets?(__p.push("    \n        <h3>Hey "),typeof userName!="undefined"&&__p.push("",userName,"!"),__p.push("</h3>\n        <p>You should have recently received the <span>",perkName,'</span> perk. We\'d love to hear what you thought!</p>\n        <div id="addPerkUGCError">Sorry, something went wrong.  Please check image sizes and try again.</div>\n        <form id="addPerkUGCForm">\n            <div id="addPerkUGCStep1" class="addPerkUGCStep">\n                <label for="addPerkUGCRating">1. Rate your perk!</label>\n                <div id="addPerkUGCRating" class="starContainer">\n                    <input type="radio" class="star" name="rating" value="1" />\n                    <input type="radio" class="star" name="rating" value="2" />\n                    <input type="radio" class="star" name="rating" value="3" />\n                    <input type="radio" class="star" name="rating" value="4" />\n                    <input type="radio" class="star" name="rating" value="5" />\n                    <br class="clearer" />\n                </div>\n            </div>\n            <div id="addPerkUGCStep2" class="addPerkUGCStep">\n                <label for="addPerkUGCComment">2. Tell us about your perk</label>\n                <textarea id="addPerkUGCComment" name="comment"></textarea>\n            </div>\n            <div id="addPerkUGCStep3" class="addPerkUGCStep">\n                <label for="addPerkUGCUploadPicture">3. Upload pictures <span>(Up to 3, less than 1MB)</span></label>\n                <ul id="addPerkUGCFileList"></ul>\n                <div id="addPerkUGCFileInputContainer"></div>\n                <div id="addPerkUGCBrowseButton">\n                    <a class="button-alt">Add a Picture</a>\n                </div>\n                <br class="clearer" />\n            </div>\n            <div id="addPerkUGCSlidingImage">\n                <div class="imageContainer">\n                    <img src="',perkImage,'" height="80" />\n                </div>\n                <div id="perkImageHighlight"></div>\n                <div id="arrow"></div>\n            </div>\n            <div id="addPerkUGCPerksBox"></div>\n        </form>\n        <br class="clearer" />\n        <div id="addPerkUGCTray">\n            <a href="#" id="addPerkUGCSubmitButton" class="button-primary">Submit</a>\n            <a href="#" id="addPerkUGCDeclineButton" class="button-secondary">No Thanks</a>\n        </div>\n        <div id="addPerkUGCOverlay"></div>\n        <div class="spinner"></div>\n    ')):__p.push('\n        <div id="addPerkUGCContainerLoading">\n            <div class="spinner"></div>\n        </div>\n    '),__p.push("\n</div>");return __p.join("")},amphetamine.t["modal/addPerkUGCSuccess"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="addPerkUGCSuccessContainer">\n    <h3>Thanks for the feedback!</h3>\n    <p>Now let others know about your perk experience.</p>\n    <div id="viral_addPerkUGCSuccess" class="viral-unit perk-ugc ugc-add">\n        <a class="tw viral"></a>\n        <a class="fb viral"></a>\n        <a class="li viral"></a>\n        <input type="hidden" name="viralMessage" value="I just left a ',rating," star rating for the ",client," perk on @klout. ",perkHashtag,'" />\n        <input type="hidden" name="viralRoute" value="/perk/',client,"/",campaign,'" />\n    </div>\n</div>');return __p.join("")},amphetamine.t["modal/add-to-list"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div id="add-to-list-panel">\n    '),typeof addendum!="undefined"&&(__p.push('\n        <span class="mini-user">\n            '),addendum.scoreData&&__p.push('\n            <span class="micro-flag">',addendum.scoreData.klout_score_norm,"</span>\n            "),__p.push("\n            "
),addendum.nick&&__p.push('\n                <a class="userpic"><img src="/picture/n/',addendum.nick,'/small" alt="',addendum.bioData&&addendum.bioData.name||addendum.nick,'"></a>\n            '),__p.push('\n        </span>\n        <span class="intro"><span>What list do you want to add ',addendum.bioData&&addendum.bioData.name||addendum.nick," to?</span></span>\n    ")),__p.push('\n    <ul id="select-lists-list">\n        ');if(typeof lists!="undefined"){__p.push("\n            ");for(var i=0,l=lists.length;i<l;i++)__p.push('\n                <li>\n                    <input type="checkbox" value="',lists[i].listId,'"'),lists[i].isMember&&__p.push(" checked"),__p.push(">\n                    ",lists[i].name||"Klout List #"+lists[i].listId,"\n                    "),lists[i].added?__p.push('\n                        <span class="feedback">Added!</span>\n                    '):lists[i].removed&&__p.push('\n                        <span class="feedback">Removed</span>\n                    '),__p.push("\n                </li>\n            ");__p.push("\n        ")}__p.push('\n    </ul>\n    <br class="clearer">\n    <a class="create-new-list">Or create a new list</a>\n</div>')}return __p.join("")},amphetamine.t["modal/add-topic"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="clearfix">\n    ',this["topic/icon"]({size:"normal",topic:topic,unlinked:!0}),'\n    <div class="add-topic-form-container section">\n        <div class="section-header">\n            <h3 class="header-text">Add ',topic.display,' as a Topic</h3>\n        </div>\n        <div class="section-body">\n            <div class="target-user">\n                ',this["user/avatar"]({size:"micro",user:user}),'\n                <span class="target-name">',user.firstName+" "+user.lastName,'</span>\n                <a class="search-link">Change</a>\n            </div>\n            <div class="user-search-form-container" style="display: none;">\n                <div class="flash error" style="display: none;"></div>\n                <div id="user-search-form" class="clearfix">\n                    <div class="search influencer-search">\n                        <input class="searchfield" type="text" placeholder="Enter a user\'s name" autocomplete="off">\n                        <input class="submit-button" type="image" src="',amphetamine.config.staticServer,'images/magnifying-glass.png" alt="Search">\n                        <div class="search-results">\n                        </div>\n                    </div>\n                    <br class="clearer">\n                </div>\n            </div>\n            ',this["modal/addTopicNominationDetails"]({isSelf:isSelf,topic:topic,user:user}),'\n        </div>\n        <div class="section-footer">\n            <form id="add-topic-form">\n                <input type="hidden" id="target-nick" name="target-nick" value="',user.nick,'">\n                <input type="hidden" id="target-service-uid" name="target-service-uid" value="',user.twUid?user.twUid:user.fbUid,'">\n                <input type="hidden" id="target-service-id" name="target-service-id" value="',user.twUid?1:2,'">\n                <span class="add-topic-cost">\n                    <span class="cost">Requires:</span>\n                    <span class="quantity">5</span>\n                    ',this["view/plusk-currency"](),'\n                </span>\n                <input type="submit" class="submit-button button-primary" value="Add Topic">\n            </form>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["modal/add-topic-error"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),error=="insufficientPlusK"?__p.push("\n<h3>Insufficient +Ks</h3>Sorry, you don't have enough +Ks.\n"):error=="invalidTopic"?__p.push("\n<h3>Invalid Topic</h3>Sorry, that isn't a valid topic.\n"):error=="maxTopicsReached"?__p.push("\n<h3>Maximum Topics</h3>This influencer already has 20 topics listed on their page; you may only list 20 topics at any time.\n"):error=="topicHidden"||error=="topicDeleted"?__p.push("\nWe're sorry, ",topic.display," is not an appropriate topic for ",targetUser.firstName,". Please try adding a different topic.\n"):__p.push("\n<h3>Oops!</h3>\nThere was an error adding this topic. Please try again or contact support at contact@klout.com.\n"),__p.push("");return __p.join("")},amphetamine.t["modal/addTopicNominationDetails"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="nomination-details">\n</div>');return __p.join("")},amphetamine.t["modal/add-topic-search"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="clearfix">\n    <img class="topics-icon" src="',amphetamine.config.staticServer,'images/icons/generic-topic.png" alt="Topics Icon">\n    <div class="topic-search-container section">\n        <div class="section-header">\n            <h3 class="header-text">What topic would you like to add?</h3>\n        </div>\n        <div class="topic-search section-body clearfix">\n            <div class="flash error" style="display: none;"></div>\n            <div class="search" class="add-topic-search">\n                <input class="searchfield" type="text" placeholder="Search for topic" autocomplete="off">\n                <input class="submit-button" type="image" src="',amphetamine.config.staticServer,'images/magnifying-glass.png" alt="Search">\n                <div class="search-results">\n                </div>\n                <form id="add-topic-form">\n                    <input type="hidden" id="target-nick" name="target-nick" value="',user.nick,'" />\n                    <input type="hidden" id="target-service-uid" name="target-service-uid" value="',serviceUid,'" />\n                    <input type="hidden" id="target-service-id" name="target-service-id" value="',serviceId,'" />\n                </form>\n            </div>\n        </div>\n        <div class="section-footer">\n            <span class="add-topic-cost">\n                <span class="cost">Requires:</span>\n                <span class="quantity">5</span>\n                ',this["view/plusk-currency"](),'\n            </span>\n            <a class="add-topic add button-secondary">Add</a>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["modal/add-topic-viral"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="section">\n    <div class="section-header clearfix">\n        <h3 class="header-text">\n            You just added ',topic_.displayName," to ",isSelf?"your":(user.firstName||user.name||user.nick)+"'s",' topics.\n        </h3>\n    </div>\n    <div class="section-body">\n        ',this["viral/topicNomination"]({isSelf:isSelf,origin:origin,topic_:topic_,user:user}),"\n    </div>\n</div>");return __p.join("")},amphetamine.t["modal/confirm-plusk"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var originUser=arguments[0].originUser;__p.push('\n<div class="section">\n    <div class="section-body">\n        ',this["user/avatar"]({disableHover:!0,size:"mini",user:originUser||recipient}),'\n        <div class="plusk-details">\n            '),originUser&&__p.push('\n                <p class="first">\n                    ',this["user/profileLink"]({user:originUser})," gave ",this["user/profileLink"]({user:recipient}),"\n                    +K about ",this["topic/link"]({topic:topic}),".\n                </p>\n            "),__p.push("\n            <p>\n                Give a +K if ",this["user/profileLink"]({user:recipient}),"\n                influenced you recently",originUser?"!":" about "+this["topic/link"]({topic:topic})+"!",'\n            </p>\n        </div>\n    </div>\n    <div class="section-footer">\n        <a class="button-secondary cancel">Cancel</a>\n        <a class="button button-primary ok">Give +K</a>\n    </div>\n</div>')}return __p.join("")},amphetamine.t["modal/daily-prompt"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div id="lottery" class="clearfix">\n    ',this["user/scoreFlag"]({isTopPlusK:scoreInsights.isTopPlusK,isTopScience:scoreInsights.isTopScience,score:score,size:"medium"}),'\n    <div class="info">\n        <div class="item first">\n            <div class="score-delta-message">\n                '),typeof increase!="undefined"?__p.push("\n                    <h3>Your Klout Score went up!</h3>\n                    <p>Your Klout Score has increased by +",increase.change," in the past ",increase.delta," ",amphetamine.view.renderUS("view/pluralize",{count:increase.delta,word:"day"}),".</p>\n                "):typeof decrease!="undefined"?__p.push("\n                    <h3>Oh no!</h3>\n                    <p>Your Klout Score fell ",decrease.change," points in the past day.</p>\n                "):typeof score!="undefined"&&__p.push("\n                    <h3>Welcome back!</h3>\n                    <p>Your Klout Score is steady at ",score,".</p>\n                "),__p.push('\n            </div>\n            <div id="viral_kloutScore-daily-prompt" class="viral-unit clearfix">\n                <a class="li viral"></a>\n                <a class="fb viral"></a>\n                <a class="tw viral"></a>\n            </div>\n            ');if(typeof isOver18=="undefined"||isOver18=="0000-00-00"){__p.push('\n                <div id="alert">We updated our <a href="/corp/privacy">privacy policy</a>. To continue participating in Klout Perks, please complete your profile.\n                    <br /><br />\n                    <div id="modalDobPrompt">\n                    <label for="edit-profile-birthday-month">Birthday</label>\n                    ');var oldDob="0000-00-00",oldDobArray=oldDob.split("-"),oldDobYear=+oldDobArray[0],oldDobMonth=+oldDobArray[1],oldDobDay=+oldDobArray[2],months=[];_.each(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],function(a,b){months.push({value:b+1,display:a,selected:oldDobMonth==b+1})});var days=[];_.each(_.range(1,32),function(a){days.push({value:a,display:a,selected:oldDobDay==a})});var now=+(new Date),currentYear=(new Date(now)).getFullYear(),years=[];_.each(_.range(currentYear-13,currentYear-100-1,-1),function(a){years.push({value:a,display:a,selected:oldDobYear==a})}),__p.push("\n                    ",this["setting/rowInputSelect"]({id:"daily-modal-birthday-month",name:"birthdayMonth",choices:months,options:{caption:"Month"}}),"&nbsp;&nbsp;&nbsp;\n                    ",this["setting/rowInputSelect"]({id:"daily-modal-birthday-day",name:"birthdayDay",choices:days,options:{caption:"Day"}}),"&nbsp;&nbsp;&nbsp;\n                    ",this["setting/rowInputSelect"]({id:"daily-modal-birthday-year",name:"birthdayYear",choices:years,options:{caption:"Year"}}),'\n                    <a id="modalSaveDob" class="button button-primary invite" onclick="";>Save</a>\n                    </div>\n                    <p class="fine-print">*You must be 18 or older to qualify for Perks.</p>\n                </div>\n                <div id="incorrectDob" class="hidden">\n                    Sorry, please enter a valid birthday.\n                </div>\n            ')}__p.push("\n        </div>\n    </div>\n</div>")}return __p.join("")},amphetamine.t["modal/disconnect-fb-page"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<h2>Connect with your personal Facebook account</h2>\n<br>\n<p>Do you want to connect your personal Faceook account to this Klout account?</p><br>\n<p>You can only associate your Klout account with a Facebook personal account or a Facebook page. <em>You cannot connect as both with the same Klout account.</em></p><br>\n<p>If you wish to proceed, please select &quot;connect&quot; below.</p>\n<br class="clearer">\n<a class="button unlink" id = "unlink-service-fp" style="float: right;">CONNECT</a>\n<br class="clearer">');return __p.join("")},amphetamine.t["modal/edit-list-modal"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div id="edit-list-panel">\n    <div class="name-description">\n        <h3>2. Name Your List</h3>\n        <input type="text" value="',arguments[0].name||"",'" placeholder="Type List Name Here" id="edit-list-name">\n        <textarea id="edit-list-description" placeholder="Type List Description Here">',typeof description!="undefined"?description:"",'</textarea>\n        <p>You can come back and edit your description as well as add and remove people at any time!</p>\n        <a class="edit-list-cancel cancel button-secondary">Cancel</a>\n        <a id="edit-list-save" class="button-primary">Save</a>\n        <div id="list-save-status">',typeof saveStatus!="undefined"?saveStatus:"",'</div>\n    </div>\n    <div class="users">\n        <h3>\n            1. Add People\n            <a class="import-list">or import a Twitter list</a>\n        </h3>\n        <input type="text" id="list-user-search" placeholder="Enter a Twitter username here"> <a id="add-user" class="list-user-add add button-alt">Add</a>\n        <img id="listed-user-loading" src="',amphetamine.config.staticServer,'images/loading-small.gif">\n        <div id="list-user-search-status">',typeof searchStatus!="undefined"?searchStatus:"",'</div>\n        <div class="listed-users">\n            ');if(typeof users!="undefined"){__p.push("\n                ");for(var i=0,l=Math.max(10,users.length);i<l;i++)__p.push('\n                <div class="listed-user">\n                    <span class="idx">',i+1,".</span>\n                    "),users[i]&&__p.push('\n                        <img src="',users[i].pic||"/picture/"+users[i].twUid,'">\n                        ',users[i].username,' -\n                        <span class="irl-name">',users[i].name,"</span>\n                        <a class='remove'><img src=\"",amphetamine.config.staticServer,'images/list_remove.png" class="tw',users[i].twUid,'"></a>\n                    '),__p.push("\n                </div>\n                ");__p.push("\n            ")}__p.push('\n        </div>\n    </div>\n    <br class="clearer">\n</div>')}return __p.join("")},amphetamine.t["modal/fb-page-accounts"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("<h2>Connect as a Facebook Page</h2>\n<br>\n");if(typeof error!="undefined")__p.push("\n    <p>",error,"</p>\n");else{__p.push("\n    ");if(typeof data!="undefined"&&data){__p.push('\n        <p>We found the following pages you manage. You can only connect one Facebook page per Klout account. Select the page you would like associated with your Klout.</p>\n        <hr>\n        <ul class="service-list">\n            ');for(var i=0,l=data.length;i<l;i++)__p.push('\n                <li><div class="label">',data[i].name,'</div> <a class="button" href="/api/fbpages/connect?pageId=',data[i].id,"&context=",context,'">Connect</a></li>\n            ');__p.push("\n        </ul>\n    ")}__p.push("\n")}__p.push("")}return __p.join("")},amphetamine.t["modal/fb-fantab-install"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("<h2>Install Facebook Fan Tab</h2>\n<br>\n");if(typeof error!="undefined")__p.push("\n    <p>",error,"</p>\n");else{__p.push("\n    ");if(typeof data!="undefined"&&data){__p.push('\n        <p>On which fan page would you like to install the Klout Facebook Fan Tab?</p>\n        <hr>\n        <ul class="service-list">\n            ');for(var i=0,l=data.length;i<l;i++)__p.push('\n                <li><div class="label">',data[i].name,'</div> <a class="button" target="_blank" href="/api/fbpages/connect?pageId=',data[i].id,"&context=",context,'">Install</a></li>\n            ');__p.push("\n        </ul>\n    ")}__p.push("\n")}__p.push("")}return __p.join("")},amphetamine.t["modal/fb-friend-invite"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isNux=typeof context!="undefined"&&context=="nux"?!0:!1;__p.push('\n<form id="fb-friend-invite-form" class="section clearfix">\n    <div class="flash error" style="display: none;"></div>\n    '),isNux||__p.push('\n    <div class="section-header">\n        <h3 class="header-text">Tell your friends about Klout and compare scores</h3>\n        <p class="header-caption">Invite friends from Facebook</p>\n    </div>\n    '),__p.push('\n    <div class="section-body">\n        '),friends.length?__p.push('\n            <div class="friend-filter">\n                <input class="text-input" type="text" name="friend-filter" value="Search friends">\n            </div>\n            ',this["modal/fbUserList"]({users:friends}),"\n        "):__p.push("\n            We could not find any of your friends on Facebook\n        "),__p.push('\n    </div>\n    <div class="section-footer clearfix">\n        <div class="select-all">\n            <input id="select-all-friends" class="checkbox-input" type="checkbox" name="select-all" value="true" checked="checked">\n            <label class="user-name" for="select-all-friends">Select all</label>\n        </div>\n\n        <input type="submit" class="submit-button button-primary" value="Invite">\n    </div>\n</form>')}return __p.join("")},amphetamine.t["modal/fbUserList"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var rowSize=typeof rowSize!="undefined"&&rowSize?rowSize:3;__p.push('\n<ul class="fb-friend-list clearfix">\n    ');for(var i=0,rowSize=3;i<users.length;i++)__p.push('\n        <li class="fb-friend ',i%rowSize==0?"first":""," ",i<rowSize?"first-row":"",'">\n            <input id="friend-',users[i].id,'" class="checkbox-input" type="checkbox" name="friend" value="',users[i].id,'" ',users[i].selected?'checked="checked"':"",'>\n            <img class="user-img" src="/picture/fb/',users[i].id,'/small" alt="',users[i].name,'">\n            <label class="user-name" for="friend-',users[i].id,'">',users[i].name,"</label>\n        </li>\n    ");__p.push("\n</ul>")}return __p.join("")},amphetamine.t["modal/import-list"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div id="import-list-panel">\n    ');if(typeof selectedList=="undefined"||!selectedList){__p.push("\n        ");if(typeof lists!="undefined"){__p.push("\n            "),lists.lists&&__p.push("\n                <h3>Select a Twitter list</h3>\n            "),__p.push('\n            <ul id="import-lists-list">\n                ');if(lists.lists){__p.push("\n                ");for(var i=0,l=lists.lists.length;i<l;i++)__p.push("\n                    <li>\n                        "),lists.lists[i].importing?__p.push('\n                            <img src="',amphetamine.config.staticServer,'images/loading.gif">\n                        '):__p.push('\n                            <a class="button-alt" id="import-',lists.lists[i].id,'">Import list</a>\n                        '),__p.push('\n                        <span class="list-name">',lists.lists[i].name,'</span>\n                        <input type="hidden" value="',lists.lists[i].description,'">\n                    </li>\n                ')}__p.push("\n            </ul>\n            "),lists.lists||__p.push("\n                <h3>Sorry, we did not find any Twitter lists.</h3>\n            "),__p.push("\n        ")}else __p.push('\n            <img src="{{staticServer}}images/loading.gif" width="177" height="99" class="loading">\n        ');__p.push("\n    ")}else __p.push("\n        "),typeof error!="undefined"?__p.push("\n            An error occurred during the import process. Please try again in a few minutes.\n        "):__p.push("\n            <h3>Importing ",selectedList.name,'</h3>\n            <img src="',amphetamine.config.staticServer,'images/loading.gif" width="177" height="99" class="loading">\n        '),__p.push("\n    ");__p.push("\n</div>")}return __p.join("")},amphetamine.t["modal/influencer-added"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<h3>You added ",screenName,' as one of your influencers on @klout!</h3>\n<div>\n    <span id="added-influencer-virals" class="viral-unit">\n        <a class="tw viral"><img class="',nick,'" src="',amphetamine.config.staticServer,'images/tweet.png"></a>\n        <a class="fb viral"><img class="',nick,'" src="',amphetamine.config.staticServer,'images/share.png"></a>\n    </span>\n</div>');return __p.join("")},amphetamine.t["modal/invalid-topic"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<h3>Sorry, we don\'t have enough data to create a page for this topic yet.</h3>\n<br>\n<p>We\'re continuing to grow, so please check back later!</p>\n<br>\n<p>In the meantime, check out some other popular influential topics.</p>\n<div class="section-footer">\n    <a class="close-modal button-alt">Okay</a>\n</div>');return __p.join("")},amphetamine.t["modal/invite-influencee"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="item soi-invite">\n    '),typeof influencee!="undefined"&&(__p.push("\n    <h3>You influence ",influencee.name,'</h3>\n    <div class="invite-influencee">\n        <div class="influencee">\n            ',this["user/avatar"]({disableHover:!0,size:"mini",user:influencee}),'\n        </div>\n        <p>But they aren\'t signed up for Klout yet.</p>\n        <p>Invite them to Klout today!</p>\n    </div>\n    <br class="clearer">\n    <a '),influencee.nick||__p.push('id="fb-invite-',influencee.fbUid,'"'),__p.push('class="button button-primary invite">Invite to Klout</a>\n    <input type="hidden" name="viralMessage" value="'),influencee.twUid?__p.push("@",influencee.nick,", sign"):__p.push("Sign"),__p.push(' up for Klout and see how we compare!">\n    <input type="hidden" name="viralLink" value="'),influencee.twUid&&__p.push("/user/",influencee.nick,""),__p.push('">\n    <input type="hidden" name="viralEvent" value="invite_influencer">\n    ')),__p.push("\n</div>");return __p.join("")},amphetamine.t["modal/network-connect"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),typeof reauth!="undefined"?__p.push("\nYou have reauthorized your ",network," account.\n"):__p.push("\n<h3>You linked your Klout account with your ",network,' account.</h3>\n<div>\n    <span id="connect-',shortName,'" class="viral-unit">\n        <a class="tw viral"><img src="',amphetamine.config.staticServer,'images/tweet.png"></a>\n        <a class="fb viral"><img src="',amphetamine.config.staticServer,'images/share.png"></a>\n    </span>\n</div>\n'),__p.push("\n<br>");return __p.join("")},amphetamine.t["modal/network-connect-nux"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="network-connected">\n    <div class="score">\n        <img class ="flag" src="',amphetamine.config.staticServer,'images/stroke-flag.png" alt="Klout Flag">\n        '),typeof score!="undefined"&&__p.push("\n            <div>",score,"</div>\n        "),__p.push("\n    </div>\n    <h3>You linked your Klout account with your ",connectedNetwork.network,' account.</h3>\n    <div>\n        <span id="connect-',connectedNetwork.shortName,'" class="viral-unit">\n            '),authUser.twUid&&__p.push('\n                <a class="tw viral"><img src="',amphetamine.config.staticServer,'images/tweet.png"></a>\n            '),__p.push("\n            "),authUser.fbUid&&__p.push('\n                <a class="fb viral"><img src="',amphetamine.config.staticServer,'images/share.png"></a>\n            '),__p.push('\n        </span>\n    </div>\n    <br clear="all">\n</div>');return __p.join("")},amphetamine.t["modal/notif-share"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),typeof plusK!="undefined"?(__p.push("\n    <h3>I received +K in ",plusK.topic,""),plusK.actor&&__p.push(" from ",plusK.actor.name||plusK.actor.nick,""),__p.push('.</h3>\n    <div>\n        <span id="notif-share-virals" class="viral-unit">\n            <a class="tw viral"><img src="',amphetamine.config.staticServer,'images/tweet.png"></a>\n            <a class="fb viral"><img src="',amphetamine.config.staticServer,'images/share.png"></a>\n            <input type="hidden" name="viralEvent" value="plusK_thanks">\n            <input type="hidden" name="viralMessage" value="I received +K in ',plusK.topic,""),plusK.actor&&__p.push(" from @",plusK.actor.nick,""),__p.push(', thanks!">\n        </span>\n    </div>\n')):typeof topicNomination!="undefined"&&(__p.push("\n    <h3>\n        I was added as an influencer about ",topicNomination.topic_.display,"\n        "),topicNomination.actor&&__p.push("by ",topicNomination.actor.name||topicNomination.actor.nick,""),__p.push('.\n    </h3>\n    <div>\n        <span id="notif-share-virals" class="viral-unit">\n            <a class="tw viral"><img src="',amphetamine.config.staticServer,'images/tweet.png"></a>\n            <a class="fb viral"><img src="',amphetamine.config.staticServer,'images/share.png"></a>\n            <input type="hidden" name="viralMessage" value="I was added as an influencer about ',topicNomination.topic_.display,""),topicNomination.actor&&__p.push(" by @",topicNomination.actor.nick,""),__p.push(', thanks!">\n            <input type="hidden" name="viralEvent" value="topic_add">\n            <input type="hidden" name="viralMeta" value="',topicNomination.topic_.display,'">\n        </span>\n    </div>\n')),__p.push("");return __p.join("")},amphetamine.t["modal/nps"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<form id="klout-nps" class="section clearfix">\n    <div class="flash error"></div>\n    <div class="section-header">\n        <h3 class="header-text">How likely is it that you would recommend Klout to a friend or colleague?</h3>\n    </div>\n    <div class="section-body">\n        <div class="radio-section">\n            <div class="section-header">\n                <p class="min-header">Not Likely</p>\n                <p class="max-header">Highly Likely</p>\n            </div>\n            <div class="section-body">\n                <label class="radio-label first" for="nps-0">0</label>\n                <label class="radio-label" for="nps-1">1</label>\n                <label class="radio-label" for="nps-2">2</label>\n                <label class="radio-label" for="nps-3">3</label>\n                <label class="radio-label" for="nps-4">4</label>\n                <label class="radio-label" for="nps-5">5</label>\n                <label class="radio-label" for="nps-6">6</label>\n                <label class="radio-label" for="nps-7">7</label>\n                <label class="radio-label" for="nps-8">8</label>\n                <label class="radio-label" for="nps-9">9</label>\n                <label class="radio-label" for="nps-10">10</label>\n                <input type="radio" id="nps-0" class="radio-button first" name="nps" value="0" />\n                <input type="radio" id="nps-1" class="radio-button" name="nps" value="1" />\n                <input type="radio" id="nps-2" class="radio-button" name="nps" value="2" />\n                <input type="radio" id="nps-3" class="radio-button" name="nps" value="3" />\n                <input type="radio" id="nps-4" class="radio-button" name="nps" value="4" />\n                <input type="radio" id="nps-5" class="radio-button" name="nps" value="5" />\n                <input type="radio" id="nps-6" class="radio-button" name="nps" value="6" />\n                <input type="radio" id="nps-7" class="radio-button" name="nps" value="7" />\n                <input type="radio" id="nps-8" class="radio-button" name="nps" value="8" />\n                <input type="radio" id="nps-9" class="radio-button" name="nps" value="9" />\n                <input type="radio" id="nps-10" class="radio-button" name="nps" value="10" />\n            </div>\n        </div>\n    </div>\n    <div class="section-footer clearfix">\n        <input type="submit" class="submit-button button-primary" value="Complete" />\n    </div>\n</form>');return __p.join("")},amphetamine.t["modal/nps-thanks"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<h3>Thanks for participating. Tell your friends about Klout!</h3>\n<br>\n<span id="viral_nps" class="simplified-virals viral-unit">\n    <a class="tw viral"></a>\n    <a class="fb viral"></a>\n    <input type="hidden" name="viralMessage" value="My @klout score is ',score,'. Sign up to find out yours!">\n    <input type="hidden" name="viralEvent" value="nps">\n    <input type="hidden" name="viralRoute" value="/">\n    <input type="hidden" name="viralMeta" value="no_meta">\n</span>');return __p.join("")},amphetamine.t["modal/nux-start"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="nux-start">\n    <img src="',amphetamine.config.staticServer,'images/excitement.png">\n    <h3>Great, You\'re In!</h3>\n    <p>The Klout Score measures your influence on a scale of 1 to 100. A higher score means you are driving more online action.</p>\n    <p>Improve your score by connecting your networks and friends.</p>\n    <div class="ready"><a id="start-nux" class="button-primary close-modal">I\'m ready</a></div>\n    <br clear="all">\n</div>');return __p.join("")},amphetamine.t["modal/optOutConfirmation"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="opt-out-confirmation">\n    Thanks, you have successfully opted out of Klout. You will be removed from Klout.com within 24-48 hours.\n    You will be removed from our API within 7 days. If you decide to opt back into Klout you will have to sign up\n    again and it will take at least 90 days for us to accurately measure your influence. For the quickest removal from our\n    systems you can choose to deauthorize the Klout app from your social accounts by going into the relevant\n    networkâ€™s settings page.\n</div>');return __p.join("")},amphetamine.t["modal/perks-error"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),typeof disabled!="undefined"&&disabled?__p.push("\n    <h3>Wow -- Everyone loves ",client,'!</h3>\n    <p>We\'re all out of invites for today, but will have more accounts for influencers very soon. Check back tomorrow!</p>\n    <a class="button-primary">OK</a>\n'):__p.push('\n    <h3>Sorry, we\'re having trouble loading this perk.</h3>\n    <p>Please try again.</p>\n    <a class="button-primary">OK</a>\n'),__p.push('\n<br class="clearer">');return __p.join("")},amphetamine.t["modal/plus-k-modal"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<h3>You gave +K to ",recipient.name,"!</h3>\n"),typeof isTopicAdd!="undefined"&&isTopicAdd&&__p.push("\n    <p>",recipient.name," is already a ",topic," influencer, so you just gave them another +K!</p>\n"),__p.push("\n<div>\n    ",this["viral/gavePlusK"]({giver:giver,recipient:recipient,tid:tid,topic:topic,totalVouches:totalVouches}),"\n</div>");return __p.join("")},amphetamine.t["modal/publicProfileNag"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var bioData=typeof bioData!="undefined"?bioData:null,fbUid=typeof fbUid!="undefined"?fbUid:null,scoreData=typeof scoreData!="undefined"?scoreData:null;__p.push('\n<div id="amphetamine-modal" class="modal">\n    <div class="underlay"></div>\n    <div class="modal-contents">\n        <div id="public-profile-nag" class="contents">\n            <a class="close-modal close">&nbsp;</a>\n            <h2>Sign up for Klout today!</h2>\n            <br class="clearer">\n            <div class="public-user">\n                <div class="mini-user">\n                    ',this["user/avatar"]({size:"mini",user:{kScore:scoreData&&scoreData.klout_score_norm,fbUid:fbUid,name:bioData.name,nick:nick}}),"\n                </div>\n                <p>\n                    See who ",bioData?bioData.name:nick,'\n                    influences, their influential topics, and much more!\n                </p>\n            </div>\n            <br class="clearer">\n            <div>\n                '),typeof ref!="undefined"&&ref?__p.push('\n                    <span>\n                        <a class="tw-connect-button" href="/oauth?next='
,ref,'"></a>\n                        <span class="or">OR</span>\n                        <a class="fb-connect-button" href="/oauth_fb?next=',ref,'"></a>\n                    </span>\n                '):__p.push('\n                    <span>\n                        <a class="tw-connect-button" href="/oauth?next=/user/',nick,'"></a>\n                        <span class="or">OR</span>\n                        <a class="fb-connect-button" href="/oauth_fb?next=/user/',nick,'"></a>\n                    </span>\n                '),__p.push('\n                <br class="clearer">\n            </div>\n        </div>\n    </div>\n</div>')}return __p.join("")},amphetamine.t["modal/reauth-invalid-token"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("Your ",arguments[0].network=="gp"?"Google+":"Facebook"," authorization has expired. Please reauthorize now.");return __p.join("")},amphetamine.t["modal/saving-modal"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<h3>",caption,'</h3>\n<img src="',amphetamine.config.staticServer,'images/loading-small.gif">');return __p.join("")},amphetamine.t["modal/share-new-list"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<h3>Nice list! Tell your friends to checkout &quot;",name||"Klout List #"+listId,'&quot;</h3>\n<div>\n    <span id="share-new-list-virals" class="viral-unit">\n        <a class="tw viral"><img src="',amphetamine.config.staticServer,'images/tweet.png"></a>\n        <a class="fb viral"><img src="',amphetamine.config.staticServer,'images/share.png"></a>\n    </span>\n</div>');return __p.join("")},amphetamine.t["modal/welcome-modal"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("",this["user/scoreFlag"]({score:score,size:"medium"}),'\n<div class="welcome-message">\n    <h3>Welcome to Klout'),typeof name!="undefined"&&__p.push(", ",name,"!"),__p.push("</h3>\n    "),typeof score!="undefined"&&__p.push("\n        <p>Your Klout score is ",score,".</p>\n    "),__p.push('\n    <p>Share your score and let others discover your Klout!</p>\n    <div id="viral_kloutScore-welcome" class="viral-unit clearfix">\n        <a class="li viral"><img src="',amphetamine.config.staticServer,'images/li-share-off.png"></a>\n        <a class="fb viral"><img src="',amphetamine.config.staticServer,'images/share.png"></a>\n        <a class="tw viral"><img src="',amphetamine.config.staticServer,'images/tweet.png"></a>\n    </div>\n    <br style="clear: right;"></br>\n</div>');return __p.join("")},amphetamine.t["modal/perk-add-age"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<label class="left-label" for="edit-profile-birthday-month">Birthday</label>\n');var oldDob=profileInfo.dob||"0000-00-00",oldDobArray=oldDob.split("-"),oldDobYear=+oldDobArray[0],oldDobMonth=+oldDobArray[1],oldDobDay=+oldDobArray[2],months=[];_.each(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],function(a,b){months.push({value:b+1,display:a,selected:oldDobMonth==b+1})});var days=[];_.each(_.range(1,32),function(a){days.push({value:a,display:a,selected:oldDobDay==a})});var currentYear=(new Date(now)).getFullYear(),years=[];_.each(_.range(currentYear-13,currentYear-100-1,-1),function(a){years.push({value:a,display:a,selected:oldDobYear==a})}),__p.push("\n",this["setting/rowInputSelect"]({id:"edit-profile-birthday-month",name:"birthday-month",choices:months,options:{caption:"Month"}}),"&nbsp;&nbsp;&nbsp;\n",this["setting/rowInputSelect"]({id:"edit-profile-birthday-day",name:"birthday-day",choices:days,options:{caption:"Day"}}),"&nbsp;&nbsp;&nbsp;\n",this["setting/rowInputSelect"]({id:"edit-profile-birthday-year",name:"birthday-year",choices:years,options:{caption:"Year"}}),"")}return __p.join("")},amphetamine.t["modal/perk-add-email"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("",this["setting/rowInputText"]({id:"edit-profile-email",label:"Email",name:"email",value:profileInfo.email,maxLength:255}),"");return __p.join("")},amphetamine.t["modal/perk-save-information"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<input type="checkbox" id=\'save-information\' name="save" checked>&nbsp;Save this information for later use');return __p.join("")},amphetamine.t["modal/perk-underAge"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<h3>Sorry</h3>\n<p>You must be over 18 to participate in Klout Perks.</p>\n<a class="button-primary">OK</a>');return __p.join("")},amphetamine.t["modal/compare-feedback"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("");return __p.join("")},amphetamine.t["modal/compare-feedback-loading"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a class="close close-modal"></a>\n<div class="section">\n    <div class="section-header clearfix">\n        <h3 class="header-text">\n            Who is more influential to you?\n            '),dayCount>0&&__p.push("\n                (",dayCount," of 10)\n            "),__p.push('\n        </h3>\n    </div>\n    <div id="compare-feedback-virals-loading" class="section-body">\n        <img src="',amphetamine.config.staticServer,'images/loading.gif">\n    </div>\n</div>');return __p.join("")},amphetamine.t["modal/compare-feedback-loaded"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<a class="close close-modal"></a>\n<div class="section">\n    <div class="section-header clearfix">\n        <h3 class="header-text">\n            Who is more influential to you? (',dayCount," of 10)\n        </h3>\n    </div>\n    ");if(lastPair&&lastPair.result!=="skip"){__p.push('\n        <div class="section-footer">\n            <p>\n                ');if(lastPair.result==0)var winner=lastPair.pair[0],loser=lastPair.pair[1];else if(lastPair.result==1)var winner=lastPair.pair[1],loser=lastPair.pair[0];winner.nick.charAt(0)=="~"?winner.nick=winner.name||winner.firstName:winner.nick="@"+winner.nick,loser.nick.charAt(0)=="~"?loser.nick=loser.name||loser.firstName:loser.nick="@"+loser.nick,__p.push("\n                ",this["modal/compare-feedback-viral"]({winnerName:winner.firstName,winnerNick:winner.nick,loserNick:loser.nick,me:amphetamine.user.nick}),"\n            </p>\n        </div>\n    ")}__p.push('\n    <div class="section-body">\n        <div class="compare-user-candidate-wrapper clearfix">\n            ',this["modal/compare-feedback-subject"]({user:pair[0],token:token,i:0}),'\n            <div class="compare-user-candidate-or clearfix">OR</div>\n            ',this["modal/compare-feedback-subject"]({user:pair[1],token:token,i:1}),'\n        </div>\n    </div>\n    <div id="compare-user-footer" class="section-footer">\n        <a href="/api/compare_feedback/skip">I don\'t know these influencers</a>\n    </div>\n</div>')}return __p.join("")},amphetamine.t["modal/compare-feedback-limit-reached"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<a class="close close-modal"></a>\n<div class="section">\n    <div class="section-header clearfix">\n        <h3 class="header-text">\n            Thank you for your insights\n        </h3>\n    </div>\n    <div class="section-body">\n        You have reached your limit of 10 submissions per day. Please come back tomorrow!\n        <div id="compare-feedback-limit-reached-icon">\n            <img class="icon" src="',amphetamine.config.staticServer,'images/awesome-checkmark.png">\n        </div>\n    </div>\n    <div id="compare-user-footer" class="section-footer limit-reached clearfix">\n        <span class="message">\n            Your answers will be used to tune the Klout algorithm.\n        </span>\n        <span class="button-container">\n            <a class="button-primary close-modal">OKAY</a>\n        </span>\n    </div>\n    ');if(lastPair&&lastPair.result!=="skip"){__p.push('\n        <div class="section-footer">\n                ');if(lastPair.result==0)var winner=lastPair.pair[0],loser=lastPair.pair[1];else if(lastPair.result==1)var winner=lastPair.pair[1],loser=lastPair.pair[0];winner.nick.charAt(0)=="~"?winner.nick=winner.name||winner.firstName:winner.nick="@"+winner.nick,loser.nick.charAt(0)=="~"?loser.nick=loser.name||loser.firstName:loser.nick="@"+loser.nick,__p.push("\n                ",this["modal/compare-feedback-viral"]({winnerName:winner.firstName,winnerNick:winner.nick,loserNick:loser.nick,me:amphetamine.user.nick}),"\n        </div>\n    ")}__p.push("\n</div>")}return __p.join("")},amphetamine.t["modal/compare-feedback-error"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a class="close close-modal"></a>\n<div class="section">\n    <div class="section-header clearfix">\n        <h3 class="header-text">\n            Sorry, an error has occurred\n        </h3>\n    </div>\n    <div class="section-body">\n        Please try again!\n    </div>\n    <div id="compare-user-footer" class="section-footer">\n        <div class="button-container">\n            <a class="button-primary close-modal">OKAY</a>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["modal/compare-feedback-viral"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="compare-feedback-virals-container" class="flash success">\n<span id="compare-feedback-virals-icon">\n    <img class="icon" src="',amphetamine.config.staticServer,'images/trans-checkmark.png">\n</span>\n<span id="compare-feedback-virals" class="viral-unit">\n    <a class="tw viral"></a>\n    <a class="fb viral"></a>\n    <input type="hidden" name="viralMessage" value="I selected ',winnerNick," as more influential than ",loserNick,' on @klout. Check out my profile: ">\n    <input type="hidden" name="viralEvent" value="compare_influence">\n    <input type="hidden" name="viralRoute" value="/user/',me,'">\n    <input type="hidden" name="viralMeta" value="no_meta">\n</span>\n<span id="compare-feedback-virals-message">\n    You just voted for ',winnerName,"!\n</span>\n</div>");return __p.join("")},amphetamine.t["insight/amplification"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(typeof insight!="undefined"&&insight){var nickMapping=typeof nickMapping!="undefined"?nickMapping:null,showMore=typeof showMore!="undefined"&&showMore,showVirals=typeof showVirals!="undefined"&&showVirals;typeof bioData!="undefined"&&!bioData.firstName&&bioData.first_name&&(bioData.firstName=bioData.first_name),__p.push('\n    <h3 class="header-text">\n        In the past ',insight.timePeriod,", ",isOwnProfile?"your":bioData.firstName+"'s",'\n        <span class="insight-type">\n            <span class="type">Amplification</span>\n            <span class="hovercard clearfix" style="display: none;">\n                <span class="text">\n                    Amplification is <span class="emphasis">how much you influence people</span>. It indicates how likely your audience is to respond and how close you are to your entire network.\n                </span>\n                <span class="image">\n                    <img src="/images/insight-amplification.png"/>\n                </span>\n            </span>\n        </span>\n        '),insight.delta?__p.push("\n            ",insight.delta>0?"increased":"decreased"," by ",Math.abs(insight.delta),"\n            ",this["view/pluralize"]({count:Math.abs(insight.delta),word:"point"}),"\n        "):__p.push("\n            has remained steady\n        "),__p.push('\n    </h3>\n    <div class="insight-details section">\n        '),insight.delta&&(__p.push('\n            <div class="section-header">\n                <h4 class="header-text">\n                    '),insight.delta>0?__p.push("\n                        ",isOwnProfile?"You":bioData.firstName," increased ",isOwnProfile?"your":"their"," influence ",insight.network.toLowerCase()=="facebook"&&!arguments[0].fbUid?"":"on "+insight.network," recently\n                    "):__p.push("\n                        ",isOwnProfile?"Your":bioData.firstName+"'s"," influence ",insight.network.toLowerCase()=="facebook"&&!arguments[0].fbUid?"":"on "+insight.network," decreased recently\n                    "),__p.push("\n                </h4>\n            </div>\n        ")),__p.push('\n        <div class="section-body clearfix">\n            '),showVirals&&__p.push("\n                ",this["viral/insight"]({connectedNetworks:connectedNetworks,insight:insight,isOwnProfile:isOwnProfile,nick:nick,nickMapping:nickMapping,showMore:showMore,subscore:"amplification"}),"\n            "),__p.push("\n        </div>\n    </div>\n")}__p.push("")}return __p.join("")},amphetamine.t["insight/network"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(typeof insight!="undefined"&&insight){var nickMapping=typeof nickMapping!="undefined"?nickMapping:null,showMore=typeof showMore!="undefined"&&showMore,showVirals=typeof showVirals!="undefined"&&showVirals;typeof bioData!="undefined"&&!bioData.firstName&&bioData.first_name&&(bioData.firstName=bioData.first_name),__p.push('\n    <h3 class="header-text">\n        In the past ',insight.timePeriod,", ",isOwnProfile?"your":bioData.firstName+"'s",'\n        <span class="insight-type">\n            <span class="type">Network Impact</span>\n            <span class="hovercard clearfix" style="display: none;">\n                <span class="text">\n                    Network Impact measures <span class="emphasis">the influence of your audience</span>. For example, Justin Timberlake has a high Network Impact because he interacts with other very influential people.\n                </span>\n                <span class="image">\n                    <img src="/images/insight-network.png"/>\n                </span>\n            </span>\n        </span>\n        '),insight.delta?__p.push("\n            ",insight.delta>0?"increased":"decreased"," by ",Math.abs(insight.delta).toFixed(2),"\n            ",this["view/pluralize"]({count:Math.abs(insight.delta),word:"point"}),"\n        "):__p.push("\n            has remained steady\n        "),__p.push('\n    </h3>\n    <div class="insight-details section">\n        '),insight.users&&insight.users.length&&insight.delta>0&&__p.push('\n            <div class="section-header">\n                <h4 class="header-text">\n                    These influencers in ',isOwnProfile?"your":bioData.firstName+"'s"," network recently\n                    ",insight.delta>0?"gained":"lost"," influence\n                </h4>\n            </div>\n        "),__p.push('\n        <div class="section-body clearfix">\n            '),insight.delta>0&&__p.push("\n                ",this["user/subList"]({maxDisplay:7,rowSize:7,size:"micro",users:insight.users}),"\n            "),__p.push("\n            "),showVirals&&__p.push("\n                ",this["viral/insight"]({connectedNetworks:connectedNetworks,insight:insight,isOwnProfile:isOwnProfile,nick:nick,nickMapping:nickMapping,showMore:showMore,subscore:"network"}),"\n            "),__p.push("\n        </div>\n    </div>\n")}__p.push("")}return __p.join("")},amphetamine.t["insight/trueReach"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(typeof insight!="undefined"&&insight){var nickMapping=typeof nickMapping!="undefined"?nickMapping:null,showMore=typeof showMore!="undefined"&&showMore,showVirals=typeof showVirals!="undefined"&&showVirals;typeof bioData!="undefined"&&!bioData.firstName&&bioData.first_name&&(bioData.firstName=bioData.first_name),__p.push('\n\n    <h3 class="header-text">\n        In the past ',insight.timePeriod,", ",isOwnProfile?"your":bioData.firstName+"'s",'\n        <span class="insight-type">\n            <span class="type">True Reach</span>\n            <span class="hovercard clearfix" style="display: none;">\n                <span class="text">\n                    True Reach is the <span class="emphasis">number of people you influence</span>, both within your\n                    immediate network and across their extended networks. Influencers like Justin Bieber have high True\n                    Reach because their content spreads to a large audience.\n                </span>\n                <span class="image">\n                    <img src="/images/insight-reach.png"/>\n                </span>\n            </span>\n        </span>\n        '),insight.delta?__p.push("\n            ",insight.delta>0?"increased":"decreased"," by\n            ",this["view/round"]({number:Math.abs(insight.delta)}),"\n        "):__p.push("\n            has remained steady\n        "),__p.push('\n    </h3>\n    <div class="insight-details section">\n        '),insight.users&&insight.users.length&&insight.delta>0&&__p.push('\n            <div class="section-header">\n                <h4 class="header-text">\n                    ',isOwnProfile?"Your":bioData.firstName+"'s"," immediate influence network ",insight.delta>0?"now":"no longer"," includes\n                </h4>\n            </div>\n        "),__p.push('\n        <div class="section-body clearfix">\n            '),insight.delta>0&&__p.push("\n                ",this["user/subList"]({maxDisplay:7,rowSize:7,size:"micro",users:insight.users}),"\n            "),__p.push("\n            "),showVirals&&__p.push("\n                ",this["viral/insight"]({connectedNetworks:connectedNetworks,insight:insight,isOwnProfile:isOwnProfile,nick:nick,nickMapping:nickMapping,showMore:showMore,subscore:"trueReach"}),"\n            "),__p.push("\n        </div>\n    </div>\n")}__p.push("")}return __p.join("")},amphetamine.t["setting/rowInputText"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="row">\n    <label class="left-label" for="',id,'">',label,'</label>\n    <input type="text" id="',id,'" name="',name,'" value="',value||"",'" maxlength="',maxLength,'">\n</div>');return __p.join("")},amphetamine.t["setting/rowInputTextCustom"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div>\n    <label class="left-label" for="',id,'">',label,'</label>\n    <input type="text" id="',id,'" name="',name,'" value="',value||"",'" maxlength="',maxLength,'">\n</div>');return __p.join("")},amphetamine.t["setting/rowInputSelect"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<select id="',id,'" name="',name,'">\n'),options.caption&&__p.push('\n        <option value="">',options.caption,"</option>\n"),_.each(choices,function(a){print(["<option ",a.selected?"selected":"",' value="',a.value,'">',a.display,"</option>"].join(""))}),__p.push("\n</select>");return __p.join("")},amphetamine.t["setting/header"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<h1>",header,"</h1>");return __p.join("")},amphetamine.t["setting/layout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div id="edit-profile">\n    <div class="content-header clearfix">\n    </div>\n    <div class="content-body clearfix">\n        <div class="sidebar" class="vertical-bar">\n            ');var tabs=[];tabs.push({href:"/#/edit-settings/profile",domClass:"profile-link",display:"PROFILE SETTINGS"}),tabs.push({href:"/#/edit-settings/networks",domClass:"networks-link",display:"CONNECTED NETWORKS"}),tabs.push({href:"/#/edit-settings/email",domClass:"email-link",display:"EMAIL SETTINGS"}),amphetamine.config.blockingEnabled&&tabs.push({href:"/#/edit-settings/privacy",domClass:"privacy-link",display:"PRIVACY SETTINGS"}),__p.push("\n            ",amphetamine.view.renderUS("view/navigation",{tabs:tabs}),'\n        </div>\n        <div class="content-main">\n        </div>\n    </div>\n</div>')}return __p.join("")},amphetamine.t["setting/flash"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),typeof flash!="undefined"&&(__p.push("\n    "),typeof flash.error!="undefined"?__p.push('\n        <div class="flash error">\n    '):typeof flash.success!="undefined"&&__p.push('\n        <div class="flash success">\n    '),__p.push("\n            <p>",flash.msg,"</p>\n        </div>\n")),__p.push("");return __p.join("")},amphetamine.t["setting/profile"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div id="profile-settings">\n    '),typeof flash!="undefined"&&__p.push("\n        ",this["setting/flash"]({flash:flash}),"\n    "),__p.push('\n    <div class="heading">\n        <h2>Profile Settings</h2>\n        <p>Edit your basic profile information below.</p>\n    </div>\n    <form id="edit-profile-form" action="/">\n        <div class="row">\n            <input type="radio" id="edit-profile-individual-influencer" value="individual" name="influencerType"> <label for="edit-profile-individual-influencer">I am an individual influencer</label>\n            <br/>\n            <input type="radio" id="edit-profile-brand-influencer" value="brand" name="influencerType"> <label for="edit-profile-brand-influencer">I am a brand influencer</label>\n        </div>\n        <div class="individual-only-fields">\n            ',this["setting/rowInputText"]({id:"edit-profile-firstName",label:"First Name",name:"firstName",value:profileInfo.firstName,maxLength:16}),"\n            ",this["setting/rowInputText"]({id:"edit-profile-lastName",label:"Last Name",name:"lastName",value:profileInfo.lastName,maxLength:24}),'\n        </div>\n        <div class="brand-only-fields">\n            ',this["setting/rowInputText"]({id:"edit-profile-brand",label:"Brand Name",name:"brand",value:profileInfo.brand,maxLength:255}),"\n        </div>\n        ",this["setting/rowInputText"]({id:"edit-profile-email",label:"Email",name:"email",value:profileInfo.email,maxLength:255}),'\n        <div class="row individual-only-fields">\n            <label class="left-label"for="edit-profile-gender">Gender</label>\n            <select id="edit-profile-gender" name="gender">\n                <option value="">Select your gender</option>\n                <option ',profileInfo.gender=="m"?"selected":"",' value="m">Male</option>\n                <option ',profileInfo.gender=="f"?"selected":"",' value="f">Female</option>\n            </select>\n        </div>\n        <div class="row dob individual-only-fields',params.bday!=null&params.bday=="true"?" highlight":"",'">\n            <label class="left-label"for="edit-profile-birthday-month">Birthday</label>\n            ');var oldDob=profileInfo.dob||"0000-00-00",oldDobArray=oldDob.split("-"),oldDobYear=+oldDobArray[0],oldDobMonth=+oldDobArray[1],oldDobDay=+oldDobArray[2],months=[];_.each(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],function(a,b){months.push({value:b+1,display:a,selected:oldDobMonth==b+1})});var days=[];_.each(_.range(1,32),function(a){days.push({value:a,display:a,selected:oldDobDay==a})});var now=+(new Date),currentYear=(new Date(now)).getFullYear(),years=[];_.each(_.range(currentYear-13,currentYear-100-1,-1),function(a){years.push({value:a,display:a,selected:oldDobYear==a})}),__p.push("\n            ",this["setting/rowInputSelect"]({id:"edit-profile-birthday-month",name:"birthday-month",choices:months,options:{caption:"Month"}}),"&nbsp;&nbsp;&nbsp;\n            ",this["setting/rowInputSelect"]({id:"edit-profile-birthday-day",name:"birthday-day",choices:days,options:{caption:"Day"}}),"&nbsp;&nbsp;&nbsp;\n            ",this["setting/rowInputSelect"]({id:"edit-profile-birthday-year",name:"birthday-year",choices:years,options:{caption:"Year"}}),'\n            <p class="fine-print">*You must be 18 or older to qualify for Perks.</p>\n        </div>\n        ');var n=authUser;__p.push("\n        "),n.twUid&&(n.fbUid||n.fpUid)&&(__p.push('\n            <div class="row">\n                '),authUser.twUid&&__p.push('\n                    <label class="left-label">Profile pic</label>\n                    <div class="pic-picker">\n                        <div class="userpic">\n                            <img src="/picture/',authUser.twUid,'">\n                        </div>\n                        <input type="radio" id="tw-pic" value="1" name="picPref" ',profileInfo.profile_pic_service_id==1?"checked":"",'>\n                        <label class="left-label" for="tw-pic">Use Twitter pic</label>\n                    </div>\n                '),__p.push("\n                "),authUser.fbUid?__p.push('\n                    <div class="pic-picker">\n                        <div class="userpic">\n                            <img src="/picture/fb/',authUser.fbUid,'">\n                        </div>\n                        <input type="radio" value="2" id="fb-pic" name="picPref" ',profileInfo.profile_pic_service_id==2?"checked":"",'>\n                        <label class="left-label" for="fb-pic">Use Facebook pic</label>\n                    </div>\n                '):authUser.fpUid&&__p.push('\n                    <div class="pic-picker">\n                        <div class="userpic">\n                            <img src="/picture/fb/',authUser.fpUid,'">\n                        </div>\n                        <input type="radio" value="2" id="fb-pic" name="picPref" ',profileInfo.profile_pic_service_id==2?"checked":"",'>\n                        <label class="left-label" for="fb-pic">Use Facebook fan page pic</label>\n                    </div>\n                '),__p.push("\n            </div>\n        ")),__p.push('\n        <br class="clearer">\n        '),authUser.twUid?__p.push('\n            <div class="row">\n                <label class="left-label" for="edit-profile-about-text">About</label>\n                <input type="radio" ',profileInfo.aboutServiceId==1||profileInfo.aboutServiceId==null?"checked":"",' id="edit-profile-1-about" value="1" name="aboutServiceId"> <label for="edit-profile-1-about">Use about text from Twitter</label>\n                <br/>\n\n                <label class="left-label" for="">&nbsp;</label>\n                <input type="radio" ',profileInfo.aboutServiceId==0?"checked":"",' id="edit-profile-0-about" value="0" name="aboutServiceId"> <label for="edit-profile-0-about">Use this instead:</label>\n                <br class="clearer">\n                <br class="clearer">\n                <label class="left-label" for="">&nbsp;</label>\n                <textarea id="edit-profile-about-text" name="aboutText">',profileInfo.aboutText||"","</textarea>\n            </div>\n        "):__p.push('\n            <div class="row">\n                <label class="left-label" for="edit-profile-about-text">About</label>\n                <input type="hidden" name="aboutServiceId" value="0">\n                <textarea id="edit-profile-about-text" name="aboutText">',profileInfo.aboutText||"",'</textarea><label for="edit-profile-about-text"></label>\n            </div>\n        '),__p.push('\n        <div class="heading">\n        <h2>Contact Information</h2>\n        <p>Used to send you <a href="http://klout.com/corp/perks">Perks</a>!</p>\n        </div>\n         <div class="contact-information-fields">\n            ',this["setting/rowInputText"]({id:"edit-profile-phone",label:"Phone",name:"phone",value:profileInfo.phone,maxLength:24}),"\n            ",this["setting/rowInputText"]({id:"edit-profile-address",label:"Address",name:"address",value:profileInfo.address,maxLength:24}),"\n            ",this["setting/rowInputText"]({id:"edit-profile-addressLine2",label:"Address line 2",name:"addressLine2",value:profileInfo.addressLine2,maxLength:24}),"    \n            ",this["setting/rowInputText"]({id:"edit-profile-city",label:"City",name:"city",value:profileInfo.city,maxLength:24}),"    \n            ");var oldState=profileInfo.state,states=[],abbreviations=[],checkSelected=function(a){a[1]==oldState?states.push({value:a[1],display:a[0],selected:!0}):states.push({value:a[1],display:a[0],selected:!1})};_.each([["Alabama","AL"],["Alaska","AK"],["Arizona","AZ"],["Arkansas","AR"],["California","CA"],["Colorado","CO"],["Connecticut","CT"],["Delaware","DE"],["District Of Columbia","DC"],["Florida","FL"],["Georgia","GA"],["Hawaii","HI"],["Idaho","ID"],["Illinois","IL"],["Indiana","IN"],["Iowa","IA"],["Kansas","KS"],["Kentucky","KY"],["Louisiana","LA"],["Maine","ME"],["Maryland","MD"],["Massachusetts","MA"],["Michigan","MI"],["Minnesota","MN"],["Mississippi","MS"],["Missouri","MO"],["Montana","MT"],["Nebraska","NE"],["Nevada","NV"],["New Hampshire","NH"],["New Jersey","NJ"],["New Mexico","NM"],["New York","NY"],["North Carolina","NC"],["North Dakota","ND"],["Ohio","OH"],["Oklahoma","OK"],["Oregon","OR"],["Pennsylvania","PA"],["Rhode Island","RI"],["South Carolina","SC"],["South Dakota","SD"],["Tennessee","TN"],["Texas","TX"],["Utah","UT"],["Vermont","VT"],["Virginia","VA"],["Washington","WA"],["West Virginia","WV"],["Wisconsin","WI"],["Wyoming","WY"]],function(a,b){checkSelected(a)}),__p.push("\n            <div class=\"row\">\n                <div id='stateSelect' class = ",profileInfo.country=="United States"?"":"hidden",' >\n                <label class="left-label">State</label>\n                ',this["setting/rowInputSelect"]({id:"edit-profile-state-select",name:"state",choices:states,options:{caption:"Select your state"}}),"&nbsp;&nbsp;&nbsp;\n                </div>\n                <div id='stateTextArea' class = ",profileInfo.country=="United States"?"hidden":""," >\n                ",this["setting/rowInputTextCustom"]({id:"edit-profile-state-textarea",label:"State",name:"state",value:profileInfo.state,maxLength:24}),'\n                </div>\n            </div>\n            <div class="row">\n                <label class="left-label"for="edit-profile-zip">Zip</label>\n                <input type="hidden" name="fzip" value="',profileInfo.zip,'"/>\n                <input type="text" id="edit-profile-zip" name="zip" maxlength="5" value="',profileInfo.zip,'">\n            </div>\n            ');var oldCountry=profileInfo.country,countries=[],checkSelected=function(a){a==oldCountry?countries.push({value:a,display:a,selected:!0}):countries.push({value:a,display:a,selected:!1})};_.each(["Afghanistan","Ã…land Islands","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antarctica","Antigua And Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia And Herzegovina","Botswana","Bouvet Island","Brazil","British Indian Ocean Territory","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central African Republic","Chad","Chile","China","Christmas Island","Cocos (Keeling) Islands","Colombia","Comoros","Congo"],function(a,b){checkSelected(a)}),_.each(["Congo, The Democratic Republic Of The","Cook Islands","Costa Rica","Cote Divoire","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands (Malvinas)","Faroe Islands","Fiji","Finland","France","French Guiana","French Polynesia","French Southern Territories","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guernsey","Guinea","Guinea-bissau","Guyana","Haiti","Heard Island And Mcdonald Islands","Holy See (Vatican City State)"],function(a,b){checkSelected(a)}),_.each(["Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran, Islamic Republic Of","Iraq","Ireland","Isle Of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Korea, Democratic Peoples Republic Of","Korea, Republic Of","Kuwait","Kyrgyzstan","Lao Peoples Democratic Republic","Latvia","Lebanon","Lesotho","Liberia","Libyan Arab Jamahiriya","Liechtenstein","Lithuania","Luxembourg","Macao","Macedonia, The Former Yugoslav Republic Of","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Micronesia, Federated States Of","Moldova, Republic Of"],function(a,b){checkSelected(a)}),_.each(["Monaco","Mongolia","Montenegro"
,"Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","Netherlands Antilles","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Palestinian Territory, Occupied","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn","Poland","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russian Federation","Rwanda","Saint Helena","Saint Kitts And Nevis","Saint Lucia","Saint Pierre And Miquelon","Saint Vincent And The Grenadines","Samoa","San Marino","Sao Tome And Principe","Saudi Arabia","Senegal","Serbia","Seychelles"],function(a,b){checkSelected(a)}),_.each(["Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Georgia And The South Sandwich Islands","Spain","Sri Lanka","Sudan","Suriname","Svalbard And Jan Mayen","Swaziland","Sweden","Switzerland","Syrian Arab Republic","Taiwan","Tajikistan","Tanzania, United Republic Of","Thailand","Timor-leste","Togo","Tokelau","Tonga","Trinidad And Tobago","Tunisia","Turkey","Turkmenistan","Turks And Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","United States Minor Outlying Islands","Uruguay","Uzbekistan","Vanuatu","Venezuela","Viet Nam","Virgin Islands, British","Virgin Islands","United States","Wallis And Futuna","Western Sahara","Yemen","Zambia","Zimbabwe"],function(a,b){checkSelected(a)}),__p.push('\n            <div class="row">\n                <label class="left-label"for="edit-profile-country">Country</label>\n                ',this["setting/rowInputSelect"]({id:"edit-profile-country",name:"country",choices:countries,options:{caption:"Select your country"}}),'&nbsp;&nbsp;&nbsp;\n            </div>\n        </div>\n        \n        <br class="clearer">\n        <a class="button-primary edit-settings-submit" id="edit-profile-submit">SAVE SETTINGS</a>\n    </form>\n</div>')}return __p.join("")},amphetamine.t["setting/optOut"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="klout-privacy">\n    ',this["privacy/privacyInfo"](),'\n    <div id="deactivate-account" class="section first" style="display: none;">\n        <div class="flash error" style="display: none;"></div>\n        <div class="section-header">\n            <h2 class="header-text">Opt out of Klout</h2>\n        </div>\n        <div class="section-body">\n            ',this["privacy/optOutForm"](),"\n        </div>\n    </div>\n</div>");return __p.join("")},amphetamine.t["setting/connectedNetworkStatus"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="status">\n'),authUser[network+"Uid"]?(__p.push("\n    Connected\n    "),authUser[network+"Uid"]&&(typeof suppressUnlink=="undefined"||!suppressUnlink)&&__p.push('\n        <a id="unlink-service-',network,'" class="unlink">Unlink</a>\n    '),__p.push("\n")):__p.push('\n    <div class="action"><a class="button-primary" href="',href,'">CONNECT NOW</a></div>\n'),__p.push("\n</div>");return __p.join("")},amphetamine.t["setting/connectedNetworkStatusFull"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="service">\n    <div class="connected-network ',network,'"></div>\n    <div class="name">',name,"</div>\n    ",this["setting/connectedNetworkStatus"]({authUser:authUser,profileInfo:profileInfo,network:network,href:href}),'\n</div>\n<br class="clearer">');return __p.join("")},amphetamine.t["setting/networks"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),typeof flash!="undefined"&&__p.push("\n    ",this["setting/flash"]({flash:flash}),"\n"),__p.push('\n<div class="heading">\n    <h2>Identity Networks</h2>\n    <p>Your Klout account must be connected to at least one of these networks.</p>\n</div>\n\n'),authUser&&__p.push('\n    <div id="connected-networks">\n        ',this["setting/identityNetworks"]({authUser:authUser,profileInfo:profileInfo}),'\n        <hr>\n        <div class="heading">\n            <h2>Additional Networks</h2>\n            <p>Connect to more networks so we can accurately gauge your influence across the social web.</p>\n        </div>\n        ',this["setting/connectedNetworkStatusFull"]({authUser:authUser,profileInfo:profileInfo,name:"LinkedIn",network:"li",href:"/oauth_li"}),"\n        ",this["setting/connectedNetworkStatusFull"]({authUser:authUser,profileInfo:profileInfo,name:"Foursquare",network:"fs",href:"/oauth_fs"}),"\n        ",this["setting/connectedNetworkStatusFull"]({authUser:authUser,profileInfo:profileInfo,name:"YouTube",network:"yt",href:"/oauth/yt"}),"\n        ",this["setting/connectedNetworkStatusFull"]({authUser:authUser,profileInfo:profileInfo,name:"Instagram",network:"ig",href:"/oauth/ig"}),"\n        ",this["setting/connectedNetworkStatusFull"]({authUser:authUser,profileInfo:profileInfo,name:"Tumblr",network:"tu",href:"/oauth/tu"}),"\n        ",this["setting/connectedNetworkStatusFull"]({authUser:authUser,profileInfo:profileInfo,name:"Blogger",network:"bl",href:"/oauth/bl"}),"\n        ",this["setting/connectedNetworkStatusFull"]({authUser:authUser,profileInfo:profileInfo,name:"Wordpress.com",network:"wp",href:"/oauth/wp"}),"\n        ",this["setting/connectedNetworkStatusFull"]({authUser:authUser,profileInfo:profileInfo,name:"Last.fm",network:"la",href:"/webauth/la"}),"\n        ",this["setting/connectedNetworkStatusFull"]({authUser:authUser,profileInfo:profileInfo,name:"Flickr",network:"fl",href:"/oauth/fl"}),'\n        <hr>\n        <div class="heading">\n            <h2>Coming Soon!</h2>\n            <p>We\'re actively working with many other networks to be able to gauge your influence everywhere on the web. Stay tuned!</p>\n            <img class="upcoming-networks-banner" src="',options.staticServer,'images/upcoming-networks3.png" alt="More networks coming soon">\n        </div>\n        <br class="clearer">\n        <a class="button-primary edit-settings-submit" id="edit-networks-submit">SAVE SETTINGS</a>\n        <br class="clearer">\n    </div>\n'),__p.push("");return __p.join("")},amphetamine.t["setting/identityNetworks"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div class="service">\n    <div class="',typeof greyOutIcons!="undefined"&&greyOutIcons&&!authUser.twUid?"un":"",'connected-network tw"></div>\n    <div class="name">Twitter</div>\n    <div class="status">\n        '),authUser.twUid?__p.push("\n            Connected as @",profileInfo.nick,"\n        "):__p.push('\n            <div class="action"><a class="button-primary" href="/oauth">CONNECT NOW</a></div>\n        '),__p.push('\n    </div>\n</div>\n<br class="clearer">\n<div class="service">\n    '),authUser.fpUid?__p.push('\n        <div class="',typeof greyOutIcons!="undefined"&&greyOutIcons&&!authUser.fpUid?"un":"",'connected-network fp"></div>\n    '):__p.push('\n        <div class="',typeof greyOutIcons!="undefined"&&greyOutIcons&&!authUser.fbUid?"un":"",'connected-network fb"></div>\n    '),__p.push('\n    <div class="name">Facebook</div>\n    <div class="status">\n        '),authUser.fpUid&&(__p.push("\n            Connected as ",profileInfo.brand,"\n            "),(typeof suppressUnlink=="undefined"||!suppressUnlink)&&__p.push('<a id="unlink-service-fp" class="unlink">Unlink</a>'),__p.push("\n        ")),__p.push("\n\n        "),authUser.fbUid?(__p.push("\n            Connected as ",authUser.fbName||profileInfo.firstName+" "+profileInfo.lastName,"\n            "),(typeof suppressUnlink=="undefined"||!suppressUnlink)&&__p.push('<a id="unlink-service-fb" class="unlink">Unlink</a>'),__p.push("\n            "),authUser.twUid&&__p.push('\n                <div class="substatus">\n                    <a id="connect-fb-page"><img class="fp-icon" src="',amphetamine.config.staticServer,'images/fb-fanpage-icon.png" alt="Facebook Fan Page">Connect as a Facebook page you manage</a>\n                </div>\n            '),__p.push("\n        ")):(__p.push("\n            "),authUser.fpUid||__p.push('\n                <div class="action"><a class="button-primary" href="/fb_init">CONNECT NOW</a></div>\n            '),__p.push("\n        ")),__p.push('\n    </div>\n</div>\n<br class="clearer">\n<div class="service">\n    <div class="',typeof greyOutIcons!="undefined"&&greyOutIcons&&!authUser.gpUid?"un":"",'connected-network gp"></div>\n    <div class="name">Google+</div>\n    ');var suppressUnlink=suppressUnlink||undefined;__p.push("\n    ",this["setting/connectedNetworkStatus"]({authUser:authUser,profileInfo:profileInfo,network:"gp",href:"/oauth/gp",suppressUnlink:suppressUnlink}),'\n</div>\n<br class="clearer">')}return __p.join("")},amphetamine.t["setting/email"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push(""),typeof flash!="undefined"&&__p.push("\n    ",this["setting/flash"]({flash:flash}),"\n"),__p.push('\n<div class="heading">\n    <h2>Email Settings</h2>\n    '),profileInfo.email&&__p.push("\n        <p>Please choose what emails you would like to receive at ",profileInfo.email,". You may change your email address below.</p>\n    "),__p.push('\n</div>\n<form id="edit-email-form" action="/">\n    ',this["setting/rowInputText"]({id:"edit-email-settings-email",label:"Email",name:"email",value:profileInfo.email,maxLength:255}),"\n    <br/><br/>\n    ");if(typeof emailInfo!="undefined"&&emailInfo.prefs){__p.push('\n        <h3>Klout Perks:</h3>\n        \n        <div class="row">\n            <input id="email-setting-perks" type="checkbox" name="email-settings" value="perks" ',emailInfo.prefs.perks=="1"?"checked":"",'>\n            <label id="email-setting-perks-label" class="right-label" for="email-setting-perks">\n                Let me know when I\'m eligible for a perk! \n            </label>\n            <br />\n            <div class="fine-print">\n                *You must be 18 or older to qualify for Perks.\n            </div>\n        </div>\n        <div class="clearer"></div>\n        <div id="dobPrompt" class="individual-only-fields">\n            <label class="left-label"for="edit-email-birthday-month">Birthday</label>\n            ');var oldDob=profileInfo.dob||"0000-00-00",oldDobArray=oldDob.split("-"),oldDobYear=+oldDobArray[0],oldDobMonth=+oldDobArray[1],oldDobDay=+oldDobArray[2],months=[];_.each(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],function(a,b){months.push({value:b+1,display:a,selected:oldDobMonth==b+1})});var days=[];_.each(_.range(1,32),function(a){days.push({value:a,display:a,selected:oldDobDay==a})});var now=new Date,currentYear=now.getFullYear(),years=[];_.each(_.range(currentYear-13,currentYear-100-1,-1),function(a){years.push({value:a,display:a,selected:oldDobYear==a})}),__p.push("\n            ",this["setting/rowInputSelect"]({id:"edit-email-birthday-month",name:"birthday-month",choices:months,options:{caption:"Month"}}),"&nbsp;&nbsp;&nbsp;\n            ",this["setting/rowInputSelect"]({id:"edit-email-birthday-day",name:"birthday-day",choices:days,options:{caption:"Day"}}),"&nbsp;&nbsp;&nbsp;\n            ",this["setting/rowInputSelect"]({id:"edit-email-birthday-year",name:"birthday-year",choices:years,options:{caption:"Year"}}),'\n        </div>\n        <div class="clearer"></div>\n      \n        <h3>General:</h3>\n            <div class="row">\n                <input id="email-setting-dailyDigest" type="checkbox" name="email-settings" value="dailyDigest" ',emailInfo.prefs.dailyDigest=="1"?"checked":"",'>\n                <label class="right-label" for="email-setting-dailyDigest">Send me a daily digest of notifications on the site (no more than once per day).</label>\n            </div>\n            <div class="row">\n                <input id="email-setting-newsletter" type="checkbox" name="email-settings" value="newsletter" ',emailInfo.prefs.newsletter=="1"?"checked":"",'>\n                <label class="right-label" for="email-setting-newsletter">Send me general updates about what\'s happening at Klout (no more than once per week).</label>\n            </div>\n        <br class="clearer"><br>\n        <a class="button-primary edit-settings-submit" id="edit-email-submit">SAVE SETTINGS</a>\n        <br class="clearer">\n    ')}__p.push("\n</form>")}return __p.join("")},amphetamine.t["setting/privacy"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div class="heading">\n    <h2>Privacy Settings</h2>\n    <p>Klout values your privacy. <a href="/corp/privacy">Click here</a> to learn more.</p>\n    <h3>Blocked Users</h3>\n    <p>Blocking someone means you won\'t be able to see each other on Klout.</p>\n    <br>\n    ');if(blockedUsers.length>0)for(var i=0;i<blockedUsers.length;i++)__p.push('\n    <div class="blocked-user clearfix">\n        <div class="avatar">\n            <img src="/picture/n/',blockedUsers[i].nick,'/small">\n        </div>\n        <div class="info">\n            <h4>',blockedUsers[i].name,'</h4><br>\n            <a id="unblock-user-',i,'" class="unblock-user">Unblock</a>\n        </div>\n    </div>\n    ');else __p.push('\n        <div class="blocked-user clearfix">\n\n          <div class="info">\n              <h4>You haven\'t blocked any users.</h4><br>\n          </div>\n        </div>\n    ');__p.push("\n</div>")}return __p.join("")},amphetamine.t["home/control"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="home">\n    <div id="content">\n        <img id = "person"  src = "',amphetamine.config&&amphetamine.config.staticServer,'images/home-user-3.png" alt="Person with Klout score">\n        <img id = "caption" src = "',amphetamine.config&&amphetamine.config.staticServer,'images/everyone-has-klout.png" alt="Everyone has Klout. Discover yours!">\n        <div id = "sign-up-bar">\n            <div class="buttons">\n                <a id="tw-connect" href="/oauth" class="login-btn"></a>\n                <div class="or">OR</div>\n                <a id="fb-connect" href="/oauth_fb" class="login-btn"></a>\n            </div>\n        </div>\n        <div id = "steps">\n            <div class="step">\n                <div class="image"><img src="',amphetamine.config&&amphetamine.config.staticServer,'images/icon-klout.png" alt="Klout Score flag"></div>\n                <div class="caption">Register today and discover your Klout!</div>\n                <a href="http://klout.com/corp/kscore" target="_blank">Learn More...</a>\n            </div>\n            <div class="center step">\n                <div class="image"><img src="',amphetamine.config&&amphetamine.config.staticServer,'images/icon-social-networks.png" alt="Social Networks"></div>\n                <div class="caption">Compare your Klout with connections on Twitter, Facebook, and LinkedIn</div>\n            </div>\n            <div class="step">\n                <div class="image"><img src="',amphetamine.config&&amphetamine.config.staticServer,'images/icon-perks.png" alt="Klout Perks"></div>\n                <div class="caption">Get cool perks based on your Klout!</div>\n                <a href="http://klout.com/corp/perks">Learn More...</a>\n            </div>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["home/privacy"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="home-simple">\n    <div id="content">\n        <div class="logo-tagline">\n            <img class="logo" src="',amphetamine.config&&amphetamine.config.staticServer,'images/logo-dark-large.png" alt="Klout">\n            <div class="tagline">Klout measures your influence on your social networks.</div>\n        </div>\n        <div class="signup" style="height: 106px">\n            <img class="sash" src="',amphetamine.config&&amphetamine.config.staticServer,'images/sign-up-sash.png" alt="Sign up">\n            <div class="buttons">\n                <a id="tw-connect" href="/oauth" class="login-btn"></a>\n                <div class="or">OR</div>\n                <a id="fb-connect" href="/oauth_fb" class="login-btn"></a>\n            </div>\n            <p class="privacy-blurb"><img class="padlock" src="',amphetamine.config&&amphetamine.config.staticServer,'images/icon_padlock.gif" alt="">Connecting helps us determine your influence. We won\'t post anything without your permission.</p>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["home/simple"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="home-simple">\n    <div id="content">\n        <div class="logo-tagline">\n            <img class="logo" src="',amphetamine.config&&amphetamine.config.staticServer,'images/logo-dark-large.png" alt="Klout">\n            <div class="tagline">Klout measures your influence on your social networks.</div>\n        </div>\n        <div class="signup">\n            <img class="sash" src="',amphetamine.config&&amphetamine.config.staticServer,'images/sign-up-sash.png" alt="Sign up">\n            <div class="buttons">\n                <a id="tw-connect" href="/oauth" class="login-btn"></a>\n                <div class="or">OR</div>\n                <a id="fb-connect" href="/oauth_fb" class="login-btn"></a>\n            </div>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["home/simplev2"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="home-simplev2">\n    <div id="content">\n        <div class="logo-tagline">\n            <img class="logo" src="',amphetamine.config&&amphetamine.config.staticServer,'images/klout-logo-large.png" alt="Klout">\n            <div class="tagline">Klout measures your influence<br>across social networks.</div>\n        </div>\n        <div class="signup">\n            <img class="sash" src="',amphetamine.config&&amphetamine.config.staticServer,'images/sign-up-sash2.png" alt="Sign up">\n            <div class="buttons">\n                <a id="tw-connect" href="/oauth" class="login-btn"></a>\n                <div class="or">OR</div>\n                <a id="fb-connect" href="/oauth_fb" class="login-btn"></a>\n            </div>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["stream/private-stream"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div id="user-stream">\n    ');if(!arguments[0].enabled)__p.push('\n        <h2 class="header-text">Coming Soon!</h2>\n    ');else{__p.push('\n        <div class="user-stream">\n            ');if(typeof days=="undefined")__p.push('\n                <img class="page-loading-icon" src="',amphetamine.config.staticServer,'images/loading.gif">\n            ');else if(days){__p.push("\n                ");for(var day in days)__p.push('\n                    <div class="day" id="',day,'">\n                        <h3 class="date">\n                            '),days[day].scoreChange&&__p.push("\n                                ",this["stream/score-change"]({scoreChange:days[day].scoreChange}),"\n                            "),__p.push("\n                            ",this["view/formatDate"]({date:new Date(day),todayText:"Today",includeYear:!1}),'\n                        </h3>\n                        <div class="day-networks">\n                            '),!days[day].tw&&!days[day].fb&&!days[day].gp?__p.push("\n                                <div class=\"no-stories-today\">We didn't find any influential interactions today. If you believe we've missed something, please let us know.</div>\n                            "):(__p.push("\n                                "),days[day].tw&&__p.push("\n                                    ",this["stream/private-stream-network-stories"]({shortName:"tw",network:days[day].tw}),"\n                                "),__p.push("\n                                "),days[day].fb&&__p.push("\n                                    ",this["stream/private-stream-network-stories"]({shortName:"fb",network:days[day].fb}),"\n                                "),__p.push("\n                                "),days[day].gp&&__p.push("\n                                    ",this["stream/private-stream-network-stories"]({shortName:"gp",network:days[day].gp}),"\n                                "),__p.push("\n                            ")),__p.push("\n                        </div>\n                    </div>\n                ");__p.push("\n            ")}else __p.push('\n                <h3 class="date">Today</h3>\n                <div class="no-stories-today">Welcome to Klout. As we start learning more about you, we will display your influential content here.</div>\n            ');__p.push("\n        </div>\n    ")}__p.push("\n</div>")}return __p.join("")},amphetamine.t["stream/private-stream-network-stories"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var l=network.stories.length;__p.push('\n<div class="network-stories ',shortName,'">\n    <div class="network">\n        <div class="network-icon"></div>\n        ',network.count," influential interaction",network.count==1?"":"s","\n        "),network.stories.length?__p.push('\n            <a class="collapse">collapse</a>\n        '):__p.push('\n            <a class="expand">expand</a>\n        '),__p.push("\n    </div>\n    ");if(l){__p.push('\n        <div class="stories">\n            ');for(var i=0;i<l;i++)__p.push("\n                ",this["stream/"+network.stories[i].type]({story:network.stories[i],index:i}),"\n            ");__p.push("\n            "),network.stories.length&&network.count>network.stories.length&&__p.push('\n                <a class="more-stories">See ',Math.min(network.count-network.stories.length,10)," more</a>\n            "),__p.push("\n        </div>\n    ")}__p.push("\n</div>")}return __p.join("")},amphetamine.t["stream/insights"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div class="story insights',index==0?" wurst":"",'">\n    '),story.impactGlobal&&__p.push('\n        <div class="impact">\n            <div class="impact-meter">\n                <div class="meter ',story.impactGlobal.toLowerCase(),'"> </div>\n            </div>\n        </div>\n    '),__p.push('\n    <span class="actor">\n        ',story.actor?this["user/avatar"]({size:"micro",user:story.actor}):"",'\n    </span>\n    <span class="action">',story.actor.isSelf?"You":story.actor.name,"\n        "),story.influenced&&__p.push('\n        and <a class="others">',story.influenced.length," other",story.influenced.length>1?"s":"","</a>\n        "),__p.push("\n    "),story.action==1?__p.push("\n        retweeted you\n    "):story.action==2?__p.push("\n        mentioned you\n    "):story.action==1e3?__p.push("\n        commented\n    "):story.action==1001?__p.push("\n        liked your post\n    "):story.action==1002?__p.push("\n        posted on your wall\n    "):story.action==1003?__p.push("\n        liked your comment\n    "):story.action==4e3?__p.push("\n        gave you a +1\n    "):story.action==4001?__p.push("\n        commented on Google+\n    "):story.action==4002&&__p.push("\n        reshared on Google+\n    "),__p.push("</span>\n    "),story.messageId&&__p.push('\n        <a href="',this["stream/message-href"]({story:story}),'" target="_blank" class="content-date">',this["view/formatDate"]({date:story.contentDate,format:"alt"}),"</a>\n    "),__p.push("<br>\n    ");if(story.influenced){__p.push('\n        <div class="influenced hovercard">\n            ');for(var i=0,l=story.influenced.length;i<l;i++)__p.push("\n                ",story.influenced[i]?this["user/avatar"]({size:"micro",user:story.influenced[i]}):"","\n            ");__p.push("\n        </div>\n    ")}__p.push("\n</div>")}return __p.join("")},amphetamine.t["stream/message-href"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),story.network==1?__p.push("\nhttp://twitter.com/",story.action==2?story.actor.nick:amphetamine.user.nick,"/statuses/",story.messageId,"\n"):story.network==2?__p.push("\nhttp://www.facebook.com/",amphetamine.user.fbUid,"/posts/",story.messageId.split("_")[1],"\n"):story.network==13&&__p.push("\n/dashboard/stream/gplus/",story.messageId,"\n"),__p.push("");return __p.join("")},amphetamine.t["stream/score-change"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span class="delta',scoreChange>0?" positive":scoreChange<0?" negative":"",'">\n'),+scoreChange>0?__p.push('\n    <img src="',amphetamine.config.staticServer,'images/icons/up-arrow.png">\n'):+scoreChange<0?__p.push('\n    <img src="',amphetamine.config.staticServer,'images/streams_down_arr.png">\n'):__p.push('\n    <span class="zero">--</span>\n'),__p.push('\n    <span class="icon"></span>\n    <span class="score-change">',scoreChange==0?"0.00":scoreChange,'</span>\n    <span class="score-down"><img src="',amphetamine.config.staticServer,'images/question-mark.png"></span>\n    <span class="score-down-explanation hovercard">Klout measures your score over a 90-day period. Your engagement may not have been as high as it used to be.</span>\n</span>');return __p.join("")},amphetamine.t["stream/public-stream"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div class="public-stream">\n    ');if(typeof stories=="undefined")__p.push("\n        "),type=="topic"?__p.push('\n            <div class="overlay-loading"><img src="',amphetamine.config.staticServer,'images/loading.gif" class="page-loading-icon"></div>\n        '):__p.push('\n            <img src="',amphetamine.config.staticServer,'images/loading-small.gif">\n        '),__p.push("\n    ");else{__p.push('\n        <h2 class="header-text">Activity</h2>\n        ');if(!stories)__p.push("\n            We didn't find any activity.\n        ");else{__p.push("\n            ");for(var i=0,l=stories.length;i<l;i++)__p.push("\n                ",this["stream/public-stream-story"]({story:stories[i],id:id}),"\n            ");__p.push("\n        ")}__p.push("\n    ")}__p.push("\n</div>")}return __p.join("")},amphetamine.t["stream/public-stream-story"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="stream-story">\n    <div class="actor">\n        ',this["user/avatar"]({user:story.actor}),'\n    </div>\n    <div class="action">\n        ',this["stream/"+story.action]({story:story,id:id}),'\n    </div>\n    <br class="clearer">\n</div>');return __p.join("")},amphetamine.t["stream/+K"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a href="/user/',story.actor.nick,'">',story.actor.ksUid==amphetamine.user.ksUID?"You":story.actor.name,'</a>\ngave\n<a href="/user/',story.target.nick,'">',story.target.ksUid==amphetamine.user.ksUID?"you":story.target.name,'</a> +K\nabout <a href="/#/topic/',story.topicSlug,'">',story.topic,'</a>\n<div class="timestamp">',story.displayDate," ",this["viral/stream-story-+K"]({story:story,id:id}),"</div>");return __p.join("")},amphetamine.t["stream/addTopic"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a href="/user/',story.actor.nick,'">',story.actor.ksUid==amphetamine.user.ksUID?"You":story.actor.name,'</a>\nadded <a href="/#/topic/',story.topicSlug,'">',story.topic,"</a>\nas one of\n"),story.target.ksUid==amphetamine.user.ksUID?__p.push("\n    your\n"):story.target.ksUid==story.actor.ksUid?__p.push("\n    their\n"):__p.push('\n    <a href="/user/',story.target.nick,'">',story.target.name+"'s","</a>\n"),__p.push('\ninfluential topics\n<div class="timestamp">',story.displayDate," ",this["viral/stream-story-add-topic"]({story:story,id:id}),"</div>");return __p.join("")},amphetamine.t["stream/accountCreated"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a href="/user/',story.actor.nick,'">',story.actor.ksUid==amphetamine.user.ksUID?"You":story.actor.name,"</a>\njust claimed\n",story.actor.ksUid==amphetamine.user.ksUID?"your":"their",'\nKlout profile!\n<div class="timestamp">',story.displayDate," ",this["viral/stream-story-account-created"]({story:story,id:id}),"</div>");return __p.join("")},amphetamine.t["stream/networkAdded"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a href="/user/',story.actor.nick,'">',story.actor.ksUid==amphetamine.user.ksUID?"You":story.actor.name,"</a>\njust added\n",story.network,"\nto\n",story.actor.ksUid==amphetamine.user.ksUID?"your":"their",'\nKlout profile!\n<div class="timestamp">',story.displayDate," ",this["viral/stream-story-network-added"]({story:story,id:id}),"</div>");return __p.join("")},amphetamine.t["stream/achievement"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a href="/user/',story.actor.nick,'">',story.actor.ksUid==amphetamine.user.ksUID?"You":story.actor.name,'</a>\nearned the\n<a href="/user/',story.actor.nick,'/achievements">',story.achievement,'</a>\nachievement!\n<div class="timestamp">',story.displayDate," ",this["viral/stream-story-achievement"]({story:story,id:id}),"</div>");return __p.join("")},amphetamine.t["stream/listMembers"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var listSize=story.listSize,members=[story.target];story.others&&story.others.length&&members.push.apply(members,story.others),__p.push('\n<a href="/user/',members[0].nick,'">',members[0].ksUid==amphetamine.user.ksUID?"you":members[0].name,"</a>"),members.length>1&&(__p.push(""),listSize==2?__p.push(" and"):__p.push(","),__p.push(' <a href="/user/',members[1].nick,'">',members[1].ksUid==amphetamine.user.ksUID?"you":members[1].name,"</a>"),listSize>2&&(__p.push(",\n        and\n        "),members[2]?__p.push('\n            <a href="/user/',members[1].nick,'">',members[2].ksUid==amphetamine.user.ksUID?"you":members[2].name,"</a>\n        "):__p.push("\n            ",listSize-2," other",listSize-2!=1?"s":"","\n        "),__p.push("\n    ")),__p.push("\n")),__p.push("")}return __p.join("")},amphetamine.t["stream/listAdd"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a href="/user/',story.actor.nick,'">',story.actor.ksUid==amphetamine.user.ksUID?"You":story.actor.name,"</a>\nadded ",this["stream/listMembers"]({story:story})," to ",story.actor.ksUid==amphetamine.user.ksUID?"your":"their",' list, <a href="/user/',story.actor.nick,"/list/",story.listId,'">',story.listName,'</a>\n<div class="timestamp">',story.displayDate," ",this["viral/stream-story-list-add"]({story:story,id:id}),"</div>");return __p.join("")},amphetamine.t["stream/listCreated"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a href="/user/',story.actor.nick,'">',story.actor.ksUid==amphetamine.user.ksUID?"You":story.actor.name,'</a>\ncreated the list <a href="/user/',story.actor.nick,"/list/",story.listId,'">',story.listName,"</a>\n"),story.target&&__p.push("\n    and added ",this["stream/listMembers"]({story:story}),"\n    to it.\n"),__p.push('\n<div class="timestamp">',story.displayDate," ",this["viral/stream-story-list-created"]({story:story,id:id}),"</div>");return __p.join("")},amphetamine.t["admin/layout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="admin-layout">\n    <div class="content-header clearfix">\n        <div style="position: absolute; top: 10px; right: 0px; z-index: 100" class="admin-search section-body clearfix">\n            <div class="search" class="admin-search">\n                <input class="searchfield" type="text" placeholder="Elastic Search" autocomplete="off">\n                <input class="submit-button" type="image" src="',amphetamine.config.staticServer,'images/magnifying-glass.png" alt="Search">\n                <div class="search-results">\n                </div>\n            </div>\n        </div>\n        <h1 class="header-text">Customer Support Admin</h1>\n    </div>\n    <div class="content-body clearfix">\n        <div class="sidebar">\n            <ul class="navigation">\n                <li><a href="#/admin/user" class="nav-link user-search-link">User Search<div class="triangle" ></div></a></li>\n                <li><a href="#/admin/topic" class="nav-link topic-search-link">Topic Search<div class="triangle" ></div></a></li>\n            </ul>\n        </div>\n        <div class="content-main"></div>\n    </div>\n</div>'
);return __p.join("")},amphetamine.t["admin/detailRow"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var round=round?round:!1;for(var i=0;i<scoreDetails.dates.length;i++){var date=scoreDetails.dates[i],attributeData=scoreDetails[date][network]&&scoreDetails[date][network][attribute];print("<td>"),typeof attributeData=="string"?round?print(attributeData?(+attributeData).toFixed(2):"--"):print(attributeData?attributeData:"--"):typeof attributeData=="object"?__p.push("\n            ",this["admin/bucket"]({data:attributeData}),"\n"):print("--"),print("</td>")}__p.push("")}return __p.join("")},amphetamine.t["admin/bucket"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<table class="bucket">\n    <tr>\n        <td>Total</td><td>',data.total,"</td>\n    </tr>\n    <tr>\n        <td>0-20</td><td>",data["0_20"],"</td>\n    </tr>\n    <tr>\n        <td>20-40</td><td>",data["20_40"],"</td>\n    </tr>\n    <tr>\n        <td>40-60</td><td>",data["40_60"],"</td>\n    </tr>\n    <tr>\n        <td>60-80</td><td>",data["60_80"],"</td>\n    </tr>\n    <tr>\n        <td>80-100</td><td>",data["80_100"],"</td>\n    </tr>\n</table>");return __p.join("")},amphetamine.t["admin/scoreDetails"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(scoreDetails&&!_.isEmpty(scoreDetails)){__p.push('\n    <table id="score-detadils">\n        <tr><td></td><td></td>\n            ');for(var i=0;i<scoreDetails.dates.length;i++)print("<th>"+scoreDetails.dates[i]+"</th>");__p.push('\n        </tr>\n\n        <tr class="bold-orange">\n            <th>Klout</th>\n            <td>Score</td>\n            ',this["admin/detailRow"]({network:"klout",attribute:"klout_score",scoreDetails:scoreDetails,round:!0}),'\n        </tr>\n        <tr class="bold">\n            <th>Twitter</th>\n            <td>People Rank</td>\n            ',this["admin/detailRow"]({network:"twitter",attribute:"page_rank",scoreDetails:scoreDetails,round:!0}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Comp. Score</td>\n            ",this["admin/detailRow"]({network:"twitter",attribute:"comp_score",scoreDetails:scoreDetails,round:!0}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Retweets</td>\n            ",this["admin/detailRow"]({network:"twitter",attribute:"retweets",scoreDetails:scoreDetails}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Mentions</td>\n            ",this["admin/detailRow"]({network:"twitter",attribute:"mentions",scoreDetails:scoreDetails}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Actor Count</td>\n            ",this["admin/detailRow"]({network:"twitter",attribute:"actor_count",scoreDetails:scoreDetails}),'\n        </tr>\n        <tr class="bold">\n            <th>Facebook</th>\n            <td>People Rank</td>\n            ',this["admin/detailRow"]({network:"facebook",attribute:"page_rank",scoreDetails:scoreDetails,round:!0}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Comp. Score</td>\n            ",this["admin/detailRow"]({network:"facebook",attribute:"comp_score",scoreDetails:scoreDetails,round:!0}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Comments</td>\n            ",this["admin/detailRow"]({network:"facebook",attribute:"comments",scoreDetails:scoreDetails}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Wall Posts</td>\n            ",this["admin/detailRow"]({network:"facebook",attribute:"wallposts",scoreDetails:scoreDetails}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Likes</td>\n            ",this["admin/detailRow"]({network:"facebook",attribute:"likes",scoreDetails:scoreDetails}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Actor Count</td>\n            ",this["admin/detailRow"]({network:"facebook",attribute:"actor_count",scoreDetails:scoreDetails}),'\n        </tr>\n        <tr class="bold">\n            <th>Google+</th>\n            <td>People Rank</td>\n            ',this["admin/detailRow"]({network:"googleplus",attribute:"page_rank",scoreDetails:scoreDetails,round:!0}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Comp. Score</td>\n            ",this["admin/detailRow"]({network:"googleplus",attribute:"comp_score",scoreDetails:scoreDetails,round:!0}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Comments</td>\n            ",this["admin/detailRow"]({network:"googleplus",attribute:"comments",scoreDetails:scoreDetails}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Reshares</td>\n            ",this["admin/detailRow"]({network:"googleplus",attribute:"reshares",scoreDetails:scoreDetails}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>+1s</td>\n            ",this["admin/detailRow"]({network:"googleplus",attribute:"plusones",scoreDetails:scoreDetails}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Actor Count</td>\n            ",this["admin/detailRow"]({network:"googleplus",attribute:"actor_count",scoreDetails:scoreDetails}),'\n        </tr>\n        <tr class="bold">\n            <th>Foursquare</th>\n            <td>People Rank</td>\n            ',this["admin/detailRow"]({network:"foursquare",attribute:"page_rank",scoreDetails:scoreDetails,round:!0}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Comp. Score</td>\n            ",this["admin/detailRow"]({network:"foursquare",attribute:"comp_score",scoreDetails:scoreDetails,round:!0}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Tips to do</td>\n            ",this["admin/detailRow"]({network:"foursquare",attribute:"tips_to_do",scoreDetails:scoreDetails}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Tips done</td>\n            ",this["admin/detailRow"]({network:"foursquare",attribute:"tips_done",scoreDetails:scoreDetails}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Actor Count</td>\n            ",this["admin/detailRow"]({network:"foursquare",attribute:"actor_count",scoreDetails:scoreDetails}),'\n        </tr>\n        <tr class="bold">\n            <th>LinkedIn</th>\n            <td>People Rank</td>\n            ',this["admin/detailRow"]({network:"linkedin",attribute:"page_rank",scoreDetails:scoreDetails,round:!0}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Comp. Score</td>\n            ",this["admin/detailRow"]({network:"linkedin",attribute:"comp_score",scoreDetails:scoreDetails,round:!0}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Comments</td>\n            ",this["admin/detailRow"]({network:"linkedin",attribute:"comments",scoreDetails:scoreDetails}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Likes</td>\n            ",this["admin/detailRow"]({network:"linkedin",attribute:"likes",scoreDetails:scoreDetails}),"\n        </tr>\n        <tr>\n            <td>&nbsp;</td><td>Actor Count</td>\n            ",this["admin/detailRow"]({network:"linkedin",attribute:"actor_count",scoreDetails:scoreDetails}),"\n        </tr>\n    </table>\n")}else __p.push("\n    Cannot find any score details for ",user.firstName,"!\n");__p.push("")}return __p.join("")},amphetamine.t["admin/scoreOverview"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),scoreOverview&&!_.isEmpty(scoreOverview)?(__p.push('\n    <div class="stats clearfix">\n        <div class="stats-section tw">\n            <h3><div class="service-button tw"></div> Twitter</h3>\n            '),scoreOverview.twitter&&__p.push("\n            <table>\n               <tr><th>Retweets</th><td>",scoreOverview.twitter.retweets,'</td></tr>\n               <tr class="alt"><th>Mentions</th><td>',scoreOverview.twitter.mentions,"</td></tr>\n               <tr><th>Valid?</th><td>",scoreOverview.twitter.token_valid_flag,'</td></tr>\n               <tr class="alt"><th>Date</th><td class="small">',scoreOverview.twitter.token_valid_date,"</td></tr>\n           </table>\n           "),__p.push('\n        </div>\n        <div class="stats-section fb">\n            <h3><div class="service-button fb"></div> Facebook</h3>\n            '),scoreOverview.facebook?__p.push("\n            <table>\n               <tr><th>Comments</th><td>",scoreOverview.facebook.comments,'</td></tr>\n               <tr class="alt"><th>Wall Posts</th><td>',scoreOverview.facebook.wallposts,"</td></tr>\n               <tr><th>Likes</th><td>",scoreOverview.facebook.likes,'</td></tr>\n               <tr class="alt"><th>Valid?</th><td>',scoreOverview.facebook.token_valid_flag,'</td></tr>\n               <tr><th>Date</th><td class="small">',scoreOverview.facebook.token_valid_date,"</td></tr>\n           </table>\n            "):__p.push('\n            <div class="disclaimer">No data</div>\n            '),__p.push('\n        </div>\n        <div class="stats-section gp">\n            <h3><div class="service-button gp"></div> Google+</h3>\n            '),scoreOverview.googleplus?__p.push("\n            <table>\n               <tr><th>Comments</th><td>",scoreOverview.googleplus.comments,'</td></tr>\n               <tr class="alt"><th>Reshares</th><td>',scoreOverview.googleplus.reshares,"</td></tr>\n               <tr><th>+1s</th><td>",scoreOverview.googleplus.plusones,'</td></tr>\n               <tr class="alt"><th>Valid?</th><td>',scoreOverview.googleplus.token_valid_flag,'</td></tr>\n               <tr><th>Date</th><td class="small">',scoreOverview.googleplus.token_valid_date,"</td></tr>\n           </table>\n            "):__p.push('\n            <div class="disclaimer">No data</div>\n            '),__p.push('\n\n        </div>\n        <div class="stats-section fs">\n            <h3><div class="service-button fs"></div> 4sq</h3>\n            '),scoreOverview.foursquare?__p.push("\n            <table>\n                <tr><th>Tips to do</th><td>",scoreOverview.foursquare.tips_to_do,'</td></tr>\n                <tr class="alt"><th>Tips done</th><td>',scoreOverview.foursquare.tips_done,"</td></tr>\n                <tr><th>Valid?</th><td>",scoreOverview.foursquare.token_valid_flag,'</td></tr>\n                <tr class="alt"><th>Date</th><td class="small">',scoreOverview.foursquare.token_valid_date,"</td></tr>\n             </table>\n            "):__p.push('\n            <div class="disclaimer">No data</div>\n            '),__p.push('\n        </div>\n    </div>\n    <div class="stats clearfix">\n        <div class="stats-section li">\n            <h3><div class="service-button li"></div> LinkedIn</h3>\n            '),scoreOverview.linkedin?__p.push("\n            <table>\n                 <tr><th>Comments</th><td>",scoreOverview.linkedin.comments,'</td></tr>\n                 <tr class="alt"><th>Likes</th><td>',scoreOverview.linkedin.likes,"</td></tr>\n                <tr><th>Valid?</th><td>",scoreOverview.linkedin.token_valid_flag,'</td></tr>\n                <tr class="alt"><th>Date</th><td class="small">',scoreOverview.linkedin.token_valid_date,"</td></tr>\n             </table>\n            "):__p.push('\n            <div class="disclaimer">No data</div>\n            '),__p.push("\n        </div>\n    </div>\n")):__p.push("\n    Cannot find any score overview data for ",user.firstName,"!\n"),__p.push("");return __p.join("")},amphetamine.t["admin/topic"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<form id="edit-topic-form" class="edit-topic-form section first" action="/">\n    <div class="section-header clearfix">\n        <h2 class="header-text">',this["topic/link"]({topic:arguments[0]}),'</h2>\n        <a class="button-primary" href="/admin/invalidate/topic/',topic,'">Flush Topic Cache</a>\n    </div>\n    <div class="section-body clearfix">\n        <img class="topic-image" src="',url,'" />\n\n        <fieldset class="field-section clearfix">\n            <label class="text-label first" for="topic-id">ID</label>\n            <input type="text" id="topic-id" class="text-field first" name="id" value="',id,'" disabled="disabled" />\n            <label class="text-label" for="topic-text-id">Text ID</label>\n            <input type="text" id="topic-text-id" class="text-field" name="topic" value="',topic,'" disabled="disabled" />\n            <label class="text-label" for="topic-display">Display</label>\n            <input type="text" id="topic-display" class="text-field" name="display" value="',display,'" />\n            <label class="text-label" for="topic-slug">Slug</label>\n            <input type="text" id="topic-slug" class="text-field" name="slug" value="',slug,'" />\n            <label class="text-label" for="topic-icon-url">Image URL</label>\n            <input type="text" id="topic-icon-url" class="text-field" name="url" value="',url,'" />\n            <a id="topic-icon-upload" class="upload-button button-alt">Upload New Image</a>\n            <input type="file" id="file-upload-field" class="upload-field" name="fileUpload" />\n        </fieldset>\n    </div>\n    <div class="section-footer">\n        <div class="form-actions">\n            <input type="submit" class="button-primary" value="Save" />\n        </div>\n    </div>\n</form>');return __p.join("")},amphetamine.t["admin/topicSearch"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="section first">\n    <div class="section-header">\n        <h2 class="header-text">Topic Search</h2>\n    </div>\n    <div class="legacy-search topic-search section-body">\n        <form id="topic-search-form">\n            <input class="searchfield" type="text" placeholder="Search" autocomplete="off">\n            <input class="submit-button" type="image" src="',amphetamine.config.staticServer,'images/magnifying-glass.png" alt="Search">\n        </form>\n    </div>\n</div>');return __p.join("")},amphetamine.t["admin/user"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div class="section first">\n    <table class="user-overview">\n        <tr>\n            <td>Klout ID</td>\n            <td>',user.ksUid,"</td>\n        </tr>\n        <tr>\n            <td>Registered</td>\n            <td>",user.registered,'</td>\n        </tr>\n    </table>\n</div>\n<div class="section">\n    <form id="edit-profile-form" class="edit-profile-form" action="/">\n        <div class="section-header">\n            <h2 class="section-header">Profile Settings</h2>\n        </div>\n        <div class="edit-profile section-body">\n            <div class="row">\n                <input type="radio" id="edit-profile-individual-influencer" value="individual" name="influencerType" '),profileInfo.isBrand!=1&&print('checked="checked"'),__p.push(' <label for="edit-profile-individual-influencer">I am an individual influencer</label>\n                <br/>\n                <input type="radio" id="edit-profile-brand-influencer" value="brand" name="influencerType" '),profileInfo.isBrand==1&&print('checked="checked"'),__p.push('> <label for="edit-profile-brand-influencer">I am a brand influencer</label>\n            </div>\n            <div class="individual-only-fields">\n                ',this["setting/rowInputText"]({id:"edit-profile-firstName",label:"First Name",name:"firstName",value:profileInfo.firstName,maxLength:16}),"\n                ",this["setting/rowInputText"]({id:"edit-profile-lastName",label:"Last Name",name:"lastName",value:profileInfo.lastName,maxLength:24}),'\n            </div>\n            <div class="brand-only-fields">\n                ',this["setting/rowInputText"]({id:"edit-profile-brand",label:"Brand Name",name:"brand",value:profileInfo.brand,maxLength:255}),"\n            </div>\n            ",this["setting/rowInputText"]({id:"edit-profile-email",label:"Email",name:"email",value:profileInfo.email,maxLength:255}),'\n            <div class="row individual-only-fields">\n                <label class="left-label"for="edit-profile-gender">Gender</label>\n                <select id="edit-profile-gender" name="gender">\n                    <option value="">Select your gender</option>\n                    <option ',profileInfo.gender=="m"?"selected":"",' value="m">Male</option>\n                    <option ',profileInfo.gender=="f"?"selected":"",' value="f">Female</option>\n                </select>\n            </div>\n            <div class="row individual-only-fields">\n                <label class="left-label"for="edit-profile-birthday-month">Birthday</label>\n                ');var oldDob=profileInfo.dob||"0000-00-00",oldDobArray=oldDob.split("-"),oldDobYear=+oldDobArray[0],oldDobMonth=+oldDobArray[1],oldDobDay=+oldDobArray[2],months=[];_.each(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],function(a,b){months.push({value:b+1,display:a,selected:oldDobMonth==b+1})});var days=[];_.each(_.range(1,32),function(a){days.push({value:a,display:a,selected:oldDobDay==a})});var currentYear=(new Date).getFullYear(),years=[];_.each(_.range(currentYear-13,currentYear-100-1,-1),function(a){years.push({value:a,display:a,selected:oldDobYear==a})}),__p.push("\n                ",this["setting/rowInputSelect"]({id:"edit-profile-birthday-month",name:"birthday-month",choices:months,options:{caption:"Month"}}),"&nbsp;&nbsp;&nbsp;\n                ",this["setting/rowInputSelect"]({id:"edit-profile-birthday-day",name:"birthday-day",choices:days,options:{caption:"Day"}}),"&nbsp;&nbsp;&nbsp;\n                ",this["setting/rowInputSelect"]({id:"edit-profile-birthday-year",name:"birthday-year",choices:years,options:{caption:"Year"}}),'\n            </div>\n            <div class="row">\n                <label class="left-label"for="edit-profile-zip">Zip Code</label>\n                <input type="hidden" name="fzip" value="',profileInfo.zip,'"/>\n                <input type="text" id="edit-profile-zip" name="zip" maxlength="5" value="',profileInfo.zip,'">\n            </div>\n            ');var n=user;__p.push("\n            "),n.twUid&&(n.fbUid||n.fpUid)&&(__p.push('\n            <div class="row">\n                '),user.twUid&&__p.push('\n                <label class="left-label">Profile pic</label>\n                <div class="pic-picker">\n                    <div class="userpic">\n                        <img src="/picture/',user.twUid,'">\n                    </div>\n                    <input type="radio" id="tw-pic" value="1" name="picPref" ',user.picPref=="tw"?"checked":"",'>\n                    <label class="left-label" for="tw-pic">Use Twitter pic</label>\n                </div>\n                '),__p.push("\n                "),user.fbUid?__p.push('\n                <div class="pic-picker">\n                    <div class="userpic">\n                        <img src="/picture/fb/',user.fbUid,'">\n                    </div>\n                    <input type="radio" value="2" id="fb-pic" name="picPref" ',user.picPref=="fb"||!user.picPref?"checked":"",'>\n                    <label class="left-label" for="fb-pic">Use Facebook pic</label>\n                </div>\n                '):user.fpUid&&__p.push('\n                <div class="pic-picker">\n                    <div class="userpic">\n                        <img src="/picture/fb/',user.fpUid,'">\n                    </div>\n                    <input type="radio" value="2" id="fb-pic" name="picPref" ',user.picPref=="fb"?"checked":"",'>\n                    <label class="left-label" for="fb-pic">Use Facebook fan page pic</label>\n                </div>\n                '),__p.push("\n            </div>\n            ")),__p.push("\n            "),user.twUid?__p.push('\n            <div class="row">\n                <label class="left-label" for="edit-profile-about-text">About</label>\n                <input type="radio" ',profileInfo.aboutServiceId==1||profileInfo.aboutServiceId==null?"checked":"",' id="edit-profile-1-about" value="1" name="aboutServiceId"> <label for="edit-profile-1-about">Use about text from Twitter</label>\n                <br/>\n\n                <label class="left-label" for="">&nbsp;</label>\n                <input type="radio" ',profileInfo.aboutServiceId==0?"checked":"",' id="edit-profile-0-about" value="0" name="aboutServiceId"> <label for="edit-profile-0-about">Use this instead:</label>\n                <br class="clearer">\n                <br class="clearer">\n                <label class="left-label" for="">&nbsp;</label>\n                <textarea id="edit-profile-about-text" name="aboutText">',profileInfo.aboutText||"","</textarea>\n            </div>\n            "):__p.push('\n            <div class="row">\n                <label class="left-label" for="edit-profile-about-text">About</label>\n                <input type="hidden" name="aboutServiceId" value="0">\n                <textarea id="edit-profile-about-text" name="aboutText">',profileInfo.aboutText||"",'</textarea><label for="edit-profile-about-text"></label>\n            </div>\n            '),__p.push("\n        </div>\n        "),user.registered&&__p.push('\n        <div class="section-footer">\n            <input type="submit" class="submit-button button-primary" value="Save">\n        </div>\n        '),__p.push("\n    </form>\n</div>\n"),user.registered&&__p.push('\n    <div class="section">\n        <div class="section-header">\n            <h2 class="section-header">Connected Services</h2>\n        </div>\n        <div class="section-body">\n            ',this["user/connectedNetworks"]({isOwnProfile:!0,showDisconnect:!0,size:"normal",user:user}),"\n        </div>\n    </div>\n"),__p.push('\n<div id="user-soi" class="user-soi section">\n    <div class="section-header">\n        <h2 class="section-header">SOI</h2>\n    </div>\n    <div class="section-body clearfix"></div>\n</div>\n<div id="user-topics" class="user-topics section">\n    <div class="section-header">\n        <h2 class="section-header">Topics</h2>\n    </div>\n    <div class="section-body"></div>\n</div>\n<div id="user-lists" class="user-lists section">\n    <div class="section-header">\n        <h2 class="section-header">Lists</h2>\n    </div>\n    <div class="section-body"></div>\n</div>\n'),user.registered&&__p.push('\n    <div class="section">\n        <div class="section-header">\n            <h2 class="section-header">Opt-In Controls</h2>\n        </div>\n        <div class="section-body">\n            <ul class="control-list clearfix">\n                <li class="control first"><a class="button-primary" href="/admin/account/disable/',user.nick,'">Disable</a></li>\n                <li class="control"><a class="button-primary" href="/admin/account/delete/',user.nick,'">Delete</a></li>\n                <li class="control"><a class="button-primary" href="/admin/account/dand/',user.nick,'">Full Opt-Out</a></li>\n            </ul>\n        </div>\n    </div>\n    <div class="section">\n        <div class="section-header">\n            <h2 class="section-header">Other Controls</h2>\n        </div>\n        <div class="section-body">\n            <ul class="control-list clearfix">\n                <li class="control first"><a class="button-primary" href="/admin/invalidate/',user.nick,'">Flush Cache</a></li>\n                <li class="control"><a class="button-primary" href="/admin/plusk/refill/',user.nick,'">Refill +K</a></li>\n                <li class="control"><a class="button-primary" href="/admin/onboarding/reset/',user.nick,'">Reset Onboarding/NUX</a></li>\n                <li class="control"><a class="button-primary" href="/admin/user/switch/',user.nick,'">Impersonate</a></li>\n            </ul>\n        </div>\n    </div>\n'),__p.push('\n<div id="score-overview" class="score-overview section">\n    <div class="section-header">\n        <h2 class="header-text">Score Overview - 90 Days</h2>\n    </div>\n    <div class="section-body"></div>\n</div>\n<div id="score-details" class="score-details section">\n    <div class="section-header clearfix">\n        <h2 class="header-text">Score Details</h2>\n        <div class="score-details-date-select">\n            <label>Start Date</label>\n            <select id="detail-start-month" name="month">\n                ');for(var i=1;i<=12;i++){var selected=startDate.month==i?'selected = "selected"':"";print("<option "+selected+" value ="+i+">"+i+"</option>")}__p.push('\n            </select>\n            <select id="detail-start-day" name="day">\n                ');for(var i=1;i<=31;i++){var selected=startDate.day==i?'selected = "selected"':"";print("<option "+selected+" value ="+i+">"+i+"</option>")}__p.push('\n            </select>\n            <select id="detail-start-year" name="year">\n                ');for(var i=2011;i<=2012;i++){var selected=startDate.year==i?'selected = "selected"':"";print("<option "+selected+" value ="+i+">"+i+"</option>")}__p.push('\n            </select>\n            <input type="submit" id="detail-date-submit" value="Apply">\n        </div>\n    </div>\n    <div class="section-body"></div>\n</div>')}return __p.join("")},amphetamine.t["admin/userDisabled"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="section first">\n    <div class="section-header">\n        <h2 class="section-header">Profile Settings</h2>\n    </div>\n    <div class="section-body">\n        <p>\n            The user you searched for (',"@"+arguments[0].nick||"~"+arguments[0].fbUid,')\n            is currently disabled.\n        </p>\n        <a class="enable-button button-primary">Re-enable User?</a>\n    </div>\n</div>');return __p.join("")},amphetamine.t["admin/userLists"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(lists&&lists.length){__p.push('\n    <ul class="list-list">\n        ');for(var i=0,l=lists.length;i<l;i++)__p.push('\n            <li class="list list-id-',lists[i].listId," clearfix"),i==0&&print(" first"),__p.push('">\n                <a class="list-link" href="/user/',lists[i].createdBy.nick||lists[i].createdBy,"/list/",lists[i].slug||lists[i].listId,'">\n                    ',lists[i].name||"Klout List #"+lists[i].listId,'\n                </a>\n                <span class="remove" alt="Remove"></span>\n            </li>\n        ');__p.push("\n    </ul>\n")}else __p.push("\n    ",user.firstName," has not created any lists yet.\n");__p.push("")}return __p.join("")},amphetamine.t["admin/userSearch"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="section first">\n    <div class="section-header">\n        <h2 class="header-text">User Search</h2>\n    </div>\n    <div class="legacy-search user-search section-body">\n        <form id="user-search-form" action="/">\n            <input class="searchfield" type="text" placeholder="Search" autocomplete="off">\n            <input class="submit-button" type="image" src="',amphetamine.config.staticServer,'images/magnifying-glass.png" alt="Search">\n        </form>\n    </div>\n</div>');return __p.join("")},amphetamine.t["admin/userSoi"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="influencer-of first section">\n    <div class="section-header">\n        <h3 class="header-text">Influencer Of</h3>\n    </div>\n    <div class="section-body">\n        '),soi&&soi.influencerOf&&soi.influencerOf.length?__p.push("\n            ",this["user/subList"]({disableHover:!0,displayHide:!0,displayRestore:!0,users:soi.influencerOf}),"\n        "):__p.push("\n            ",user.firstName," does not influence anyone yet.\n        "),__p.push('\n    </div>\n</div>\n<div class="influenced-by section">\n    <div class="section-header">\n        <h3 class="header-text">Influenced By</h3>\n    </div>\n    <div class="section-body">\n        '),soi&&soi.influencedBy&&soi.influencedBy.length?__p.push("\n            ",this["user/subList"]({disableHover:!0,displayHide:!0,displayRestore:!0,users:soi.influencedBy}),"\n        "):__p.push("\n            ",user.firstName," does not have any influencers yet.\n        "),__p.push("\n    </div>\n</div>");return __p.join("")},amphetamine.t["admin/userTopics"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),topics&&topics.length?__p.push("\n    ",this["topic/list"]({displayRemove:!0,topics:topics}),"\n"):__p.push("\n    ",user.firstName," does not have any topics yet.\n"),__p.push("");return __p.join("")},amphetamine.t["notifs/addtopics"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isGlobal=!!arguments[0].isGlobal,isFirst=!!arguments[0].isFirst,isUnread=notif.status=="new"||notif.status=="viewed",size=isGlobal?"micro":"mini";__p.push('\n<li class="notif addtopics clearfix ',isUnread?"unread":""," ",isFirst?"first":"",'" id="notif',notif.id,'">\n    '),typeof notif.actor!="undefined"&&notif.actor?__p.push('\n        <div class="row-details two-col clearfix">\n            ',amphetamine.view.renderUS("user/avatar",{disableHover:isGlobal,size:size,unlinked:isGlobal,user:notif.actor}),"\n    "):__p.push('\n        <div class="row-details one-col clearfix">\n    '),__p.push('\n        <div class="notif-info row-info">\n            <p class="description">\n                Your Add Topics Perk has arrived! Add topics to yourself and others on Klout.\n            </p>\n        </div>\n    </div>\n    <div class="row-aside">\n        <a class="profile-link button notif-cta cta" href="/#/profile/topics">Go</a>\n    </div>\n</li>')}return __p.join("")},amphetamine.t["notifs/badToken"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isGlobal=!!arguments[0].isGlobal,isFirst=!!arguments[0].isFirst,isUnread=notif.status=="new"||notif.status=="viewed",size=isGlobal?"micro":"mini";__p.push('\n<li class="notif badToken clearfix ',isUnread?"unread":""," ",isFirst?"first":"",'" id="notif',notif.id,'">\n    '),typeof notif.actor!="undefined"&&notif.actor?__p.push('\n        <div class="row-details two-col clearfix">\n            ',amphetamine.view.renderUS("user/avatar",{disableHover:isGlobal,size:size,unlinked:isGlobal,user:notif.actor}),"\n    "):__p.push('\n        <div class="row-details one-col clearfix">\n    '),__p.push('\n        <div class="notif-info row-info">\n            <p class="description">\n                Your ',notif.network,' token has expired. This usually happens when you revoke access or change your password. Please reconnect.\n            </p>\n        </div>\n    </div>\n    <div class="row-aside">\n        <a class="profile-link button notif-cta cta" href="/#/edit-settings/networks">Reconnect</a>\n    </div>\n</li>')}return __p.join("")},amphetamine.t["notifs/dropdown"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<li class="list-header"><h4 class="header-text">Notifications</h4></li>\n');if(arguments[0].notifs&&notifs.length)for(var i=0;i<Math.min(5,notifs.length);i++)print(amphetamine.view.renderUS("notifs/picker",{isFirst:i==0,isGlobal:!0,notif:notifs[i]}));else print('<li class="empty">No notifications.</li>');__p.push('\n<li class="notif see-more"><a class="see-more-link button" href="/#/dashboard/notifications">View all Klout notifications</a></li>')}return __p.join("")},amphetamine.t["notifs/generic"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isGlobal=!!arguments[0].isGlobal,isFirst=!!arguments[0].isFirst,isUnread=notif.status=="new"||notif.status=="viewed",size=isGlobal?"micro":"mini";__p.push('\n<li class="notif generic clearfix ',isUnread?"unread":""," ",isFirst?"first":"",'" id="notif',notif.id,'">\n    '),typeof notif.actor!="undefined"&&notif.actor?__p.push('\n        <div class="row-details two-col clearfix">\n            ',amphetamine.view.renderUS("user/avatar",{disableHover:isGlobal,size:size,unlinked:isGlobal,user:notif.actor}),"\n    "):__p.push('\n        <div class="row-details one-col clearfix">\n    '),__p.push('\n        <div class="notif-info row-info">\n            <p class="description">\n                ',notif.template,'\n            </p>\n        </div>\n    </div>\n    <div class="row-aside"></div>\n</li>')}return __p.join("")},amphetamine.t["notifs/genericScoring"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isGlobal=!!arguments[0].isGlobal,isFirst=!!arguments[0].isFirst,isUnread=notif.status=="new"||notif.status=="viewed",size=isGlobal?"micro"
:"mini";__p.push('\n<li class="notif generic-scoring clearfix ',isUnread?"unread":""," ",isFirst?"first":"",'" id="notif',notif.id,'">\n    '),typeof notif.actor!="undefined"&&notif.actor?__p.push('\n        <div class="row-details two-col clearfix">\n            ',amphetamine.view.renderUS("user/avatar",{disableHover:isGlobal,size:size,unlinked:isGlobal,user:notif.actor}),"\n    "):__p.push('\n        <div class="row-details one-col clearfix">\n    '),__p.push('\n        <div class="notif-info row-info">\n            <p class="description">\n                We\'ve launched the biggest improvement ever to the accuracy and transparency of the Klout scoring model. <a href="http://corp.klout.com/blog/2011/10/a-more-accurate-transparent-klout-score/" target="_blank">Learn more about the update</a>, and view your profile today to check it out!\n            </p>\n        </div>\n    </div>\n    <div class="row-aside">\n        <a class="profile-link button notif-cta cta" href="',isGlobal?"http://corp.klout.com/blog/2011/10/a-more-accurate-transparent-klout-score/":"/#/profile",'">View</a>\n    </div>\n</li>')}return __p.join("")},amphetamine.t["notifs/listAdd"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var actor=notif.actor.firstName?notif.actor.firstName:notif.actor.name?notif.actor.name:notif.actor.nick,isGlobal=!!arguments[0].isGlobal,isFirst=!!arguments[0].isFirst,isUnread=notif.status=="new"||notif.status=="viewed",size=isGlobal?"micro":"mini";__p.push('\n<li class="notif list-add clearfix ',isUnread?"unread":""," ",isFirst?"first":"",'" id="notif',notif.id,'">\n    '),typeof notif.actor!="undefined"&&notif.actor?__p.push('\n        <div class="row-details two-col clearfix">\n            ',amphetamine.view.renderUS("user/avatar",{disableHover:isGlobal,size:size,unlinked:isGlobal,user:notif.actor}),"\n    "):__p.push('\n        <div class="row-details one-col clearfix">\n    '),__p.push('\n        <div class="notif-info row-info">\n            <p class="description">\n                '),isGlobal?__p.push('\n                    <span class="profile">',actor,'</span> added you to the list\n                    <span class="list">',notif.listName||"Klout List #"+notif.listId,"</span>\n                "):__p.push('\n                    <a class="profile-link" href="/user/',notif.actor.nick,'">',actor,'</a> added you to the list\n                    <a class="list-link notif-cta" href="/user/',notif.actor.nick,"/list/",notif.listId,'">\n                        ',notif.listName||"Klout List #"+notif.listId,"\n                    </a>\n                "),__p.push("\n            </p>\n            "),isGlobal||__p.push('\n                <p class="date">',notif.date,"</p>\n            "),__p.push('\n        </div>\n    </div>\n    <div class="row-aside">\n        <a class="list-link button notif-cta cta" href="/user/',notif.actor.nick,"/list/",notif.listId,'">View List</a>\n    </div>\n</li>')}return __p.join("")},amphetamine.t["notifs/newPerk"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isGlobal=!!arguments[0].isGlobal,isFirst=!!arguments[0].isFirst,isUnread=notif.status=="new"||notif.status=="viewed",size=isGlobal?"micro":"mini";__p.push('\n<li class="notif new-perk clearfix ',isUnread?"unread":""," ",isFirst?"first":"",'" id="notif',notif.id,'">\n    '),typeof notif.actor!="undefined"&&notif.actor?__p.push('\n        <div class="row-details two-col clearfix">\n            ',amphetamine.view.renderUS("user/avatar",{disableHover:isGlobal,size:size,unlinked:isGlobal,user:notif.actor}),"\n    "):__p.push('\n        <div class="row-details one-col clearfix">\n    '),__p.push('\n        <div class="notif-info row-info">\n            <p class="description">\n                ',notif.template,'\n            </p>\n        </div>\n    </div>\n    <div class="row-aside">\n        <a class="profile-link button notif-cta cta" href="/#/perk/',notif.slug,'">View Perk</a>\n    </div>\n</li>')}return __p.join("")},amphetamine.t["notifs/newTopics"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isGlobal=!!arguments[0].isGlobal,isFirst=!!arguments[0].isFirst,isUnread=notif.status=="new"||notif.status=="viewed",size=isGlobal?"micro":"mini";__p.push('\n<li class="notif new-topics clearfix ',isUnread?"unread":""," ",isFirst?"first":"",'" id="notif',notif.id,'">\n    '),typeof notif.actor!="undefined"&&notif.actor?__p.push('\n        <div class="row-details two-col clearfix">\n            ',amphetamine.view.renderUS("user/avatar",{disableHover:isGlobal,size:size,unlinked:isGlobal,user:notif.actor}),"\n    "):__p.push('\n        <div class="row-details one-col clearfix">\n    '),__p.push('\n        <div class="notif-info row-info">\n            <p class="description">\n                '),notif.topic_?__p.push("\n                    Klout believes you are influential in ",isGlobal?notif.topic_.display:this["topic/link"]({topic:notif.topic_}),".\n                "):__p.push("\n                    You have a new topic!\n                "),__p.push("\n            </p>\n            "),isGlobal||__p.push('\n                <p class="date">',notif.date,"</p>\n            "),__p.push('\n        </div>\n    </div>\n    <div class="row-aside">\n        <a class="profile-link button notif-cta cta" href="/profile/topics">View Now</a>\n    </div>\n</li>')}return __p.join("")},amphetamine.t["notifs/picker"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isGlobal=!!arguments[0].isGlobal,isFirst=!!arguments[0].isFirst;notif.listAdd&&notif.listAdd.actor&&notif.listAdd.actor.nick?print(amphetamine.view.renderUS("notifs/listAdd",{isGlobal:isGlobal,isFirst:isFirst,notif:notif.listAdd})):notif.plusK&&notif.plusK.actor&&notif.plusK.actor.nick?print(amphetamine.view.renderUS("notifs/plusK",{isGlobal:isGlobal,isFirst:isFirst,notif:notif.plusK})):notif.soiAdd&&notif.soiAdd.actor&&notif.soiAdd.actor.nick?print(amphetamine.view.renderUS("notifs/soiAdd",{isGlobal:isGlobal,isFirst:isFirst,notif:notif.soiAdd})):notif.topicPreview&&notif.topicPreview.actor&&notif.topicPreview.actor.nick?print(amphetamine.view.renderUS("notifs/topicPreview",{isGlobal:isGlobal,isFirst:isFirst,notif:notif.topicPreview})):notif.genericScoring&&notif.genericScoring.actor&&notif.genericScoring.actor.nick?print(amphetamine.view.renderUS("notifs/genericScoring",{isGlobal:isGlobal,isFirst:isFirst,notif:notif.genericScoring})):notif.newTopics&&notif.newTopics.actor&&notif.newTopics.actor.nick?print(amphetamine.view.renderUS("notifs/newTopics",{isGlobal:isGlobal,isFirst:isFirst,notif:notif.newTopics})):notif.newPerk&&notif.newPerk.actor&&notif.newPerk.actor.nick?print(amphetamine.view.renderUS("notifs/newPerk",{isGlobal:isGlobal,isFirst:isFirst,notif:notif.newPerk})):notif.topicNomination&&notif.topicNomination.actor&&notif.topicNomination.actor.nick?print(amphetamine.view.renderUS("notifs/topicNomination",{isGlobal:isGlobal,isFirst:isFirst,notif:notif.topicNomination})):notif.generic&&notif.generic.actor&&notif.generic.actor.nick?print(amphetamine.view.renderUS("notifs/generic",{isGlobal:isGlobal,isFirst:isFirst,notif:notif.generic})):notif.addtopics&&notif.addtopics.actor&&notif.addtopics.actor.nick?print(amphetamine.view.renderUS("notifs/addtopics",{isGlobal:isGlobal,isFirst:isFirst,notif:notif.addtopics})):notif.badToken&&notif.badToken.actor&&notif.badToken.actor.nick&&print(amphetamine.view.renderUS("notifs/badToken",{isGlobal:isGlobal,isFirst:isFirst,notif:notif.badToken})),__p.push("")}return __p.join("")},amphetamine.t["notifs/plusK"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var actor=notif.actor.firstName?notif.actor.firstName:notif.actor.name?notif.actor.name:notif.actor.nick,isGlobal=!!arguments[0].isGlobal,isFirst=!!arguments[0].isFirst,isUnread=notif.status=="new"||notif.status=="viewed",size=isGlobal?"micro":"mini";__p.push('\n<li class="notif plusK clearfix ',isUnread?"unread":""," ",isFirst?"first":"",'" id="notif',notif.id,'">\n    '),typeof notif.actor!="undefined"&&notif.actor?__p.push('\n        <div class="row-details two-col clearfix">\n            ',amphetamine.view.renderUS("user/avatar",{disableHover:isGlobal,size:size,unlinked:isGlobal,user:notif.actor}),"\n    "):__p.push('\n        <div class="row-details one-col clearfix">\n    '),__p.push('\n        <div class="notif-info row-info">\n            <p class="description">\n                '),isGlobal?__p.push('\n                    <span class="profile">',actor,"</span> gave you +K\n                    ",notif.topic_?'in <span class="topic">'+notif.topic_.display+"</span>":"","\n                "):__p.push('\n                    <a class="profile-link" href="/user/',notif.actor.nick,'">',actor,"</a> gave you +K in\n                    ",notif.topic_?"in "+this["topic/link"]({topic:notif.topic_}):"","\n                "),__p.push("\n            </p>\n            "),isGlobal||__p.push('\n                <p class="date">',notif.date,"</p>\n            "),__p.push('\n        </div>\n    </div>\n    <div class="row-aside">\n        <a class="button cta notif-cta">Share</a>\n    </div>\n</li>')}return __p.join("")},amphetamine.t["notifs/soiAdd"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var actor=notif.actor.firstName?notif.actor.firstName:notif.actor.name?notif.actor.name:notif.actor.nick,isGlobal=!!arguments[0].isGlobal,isFirst=!!arguments[0].isFirst,isUnread=notif.status=="new"||notif.status=="viewed",size=isGlobal?"micro":"mini";__p.push('\n<li class="notif soi-add clearfix ',isUnread?"unread":""," ",isFirst?"first":"",'" id="notif',notif.id,'">\n    '),typeof notif.actor!="undefined"&&notif.actor?__p.push('\n        <div class="row-details two-col clearfix">\n            ',amphetamine.view.renderUS("user/avatar",{disableHover:isGlobal,size:size,unlinked:isGlobal,user:notif.actor}),"\n    "):__p.push('\n        <div class="row-details one-col clearfix">\n    '),__p.push('\n        <div class="notif-info row-info">\n            <p class="description">\n                '),isGlobal?__p.push('\n                    <span class="profile">',actor,"</span> added you as one of their influencers!\n                "):__p.push('\n                    <a class="profile-link" href="/user/',notif.actor.nick,'">',actor,"</a>\n                    added you as one of their influencers!\n                "),__p.push("\n            </p>\n            "),isGlobal||__p.push('\n                <p class="date">',notif.date,"</p>\n            "),__p.push('\n        </div>\n    </div>\n    <div class="row-aside">\n        <a class="profile-link button notif-cta cta" href="/user/',notif.actor.nick,'/influencers">View Influencers</a>\n    </div>\n</li>')}return __p.join("")},amphetamine.t["notifs/topicNomination"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var actor=notif.actor.firstName?notif.actor.firstName:notif.actor.name?notif.actor.name:notif.actor.nick,isGlobal=!!arguments[0].isGlobal,isFirst=!!arguments[0].isFirst,isUnread=notif.status=="new"||notif.status=="viewed",size=isGlobal?"micro":"mini";__p.push('\n<li class="notif topic-nomination clearfix ',isUnread?"unread":""," ",isFirst?"first":"",'" id="notif',notif.id,'">\n    '),typeof notif.actor!="undefined"&&notif.actor?__p.push('\n        <div class="row-details two-col clearfix">\n            ',amphetamine.view.renderUS("user/avatar",{disableHover:isGlobal,size:size,unlinked:isGlobal,user:notif.actor}),"\n    "):__p.push('\n        <div class="row-details one-col clearfix">\n    '),__p.push('\n        <div class="notif-info row-info">\n            <p class="description">\n                '),isGlobal?__p.push('\n                    <span class="profile">',actor,"</span> added you as an influencer about\n                    ",notif.topic_?'<span class="topic">'+notif.topic_.display+"</span>":"","\n                "):__p.push('\n                    <a class="profile-link" href="/user/',notif.actor.nick,'">',actor,"</a> added you as an influencer about\n                    ",notif.topic_?this["topic/link"]({topic:notif.topic_}):"","\n                "),__p.push("\n            </p>\n            "),isGlobal||__p.push('\n                <p class="date">',notif.date,"</p>\n            "),__p.push('\n        </div>\n    </div>\n    <div class="row-aside">\n        <a class="button cta notif-cta">Share</a>\n    </div>\n</li>')}return __p.join("")},amphetamine.t["notifs/topicPreview"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isGlobal=!!arguments[0].isGlobal,isFirst=!!arguments[0].isFirst,isUnread=notif.status=="new"||notif.status=="viewed",size=isGlobal?"micro":"mini";__p.push('\n<li class="notif topic-preview clearfix ',isUnread?"unread":""," ",isFirst?"first":"",'" id="notif',notif.id,'">\n    '),typeof notif.actor!="undefined"&&notif.actor?__p.push('\n        <div class="row-details two-col clearfix">\n            ',amphetamine.view.renderUS("user/avatar",{disableHover:isGlobal,size:size,unlinked:isGlobal,user:notif.actor}),"\n    "):__p.push('\n        <div class="row-details one-col clearfix">\n    '),__p.push('\n        <div class="notif-info row-info">\n            <p class="description">\n                You\'re one of the first users selected to preview Klout\'s new topic pages. Click on any\n                topic link across the site to see top influencers, the most influential content, and\n                much more coming soon!\n            </p>\n        </div>\n    </div>\n    <div class="row-aside">\n        <a class="profile-link button notif-cta cta" href="/topic/klout">View Now</a>\n    </div>\n</li>')}return __p.join("")},amphetamine.t["notifs/list"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div class="section-header">\n    <h2 class="header-text">\n        Notifications\n        '),typeof showControls!="undefined"&&showControls&&__p.push('\n            <a class="clear-all-notifs">Clear all</a>\n        '),__p.push("\n    </h2>\n    "),(typeof notifs=="undefined"||typeof notifs!="undefined"&&(!notifs||notifs.length==0))&&__p.push('\n        <p class="header-caption">You have no new notifications.</p>\n    '),__p.push('\n</div>\n<div class="section-body">\n    ');if(typeof notifs!="undefined"&&notifs&&notifs.length){__p.push('\n        <ul class="notif-list">\n            ');for(var i=0;i<notifs.length;i++)print(amphetamine.view.renderUS("notifs/picker",{notif:notifs[i]}));__p.push("\n        </ul>\n        ");var MAX_NOTIFS=3;typeof showControls!="undefined"&&showControls&&totalNotifs>MAX_NOTIFS&&(__p.push('\n            <div class="controls clearfix">\n                <a href="#/dashboard/notifications" class="button view-more">\n                    View More'),totalNotifs>MAX_NOTIFS&&print(" ("+(totalNotifs-MAX_NOTIFS)+")"),__p.push("</a>\n            </div>\n        ")),__p.push("\n    ")}__p.push("\n</div>")}return __p.join("")},amphetamine.t["viral/generateMarkup"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isFirst=!0,isLoggedIn=typeof connectedNetworks!="undefined"&&!!connectedNetworks,nickMapping=typeof nickMapping!="undefined"?nickMapping:null,nickReplacer=function(a){var b=nickMapping&&nickMapping[a.replace("@","").toLowerCase()];return b?b:a},showLinkedIn=typeof showLinked!="undefined"&&showLinkedIn,showViralText=!1,type=typeof type!="undefined"?type:"normal";type=="compact"?(showViralText=!0,type="compact-virals"):type=="generic"?type="generic-virals":type=="normal"?type="normal-virals":type=="text"?type="textonly-virals":type=="unstyled"&&(type="unstyled-virals"),__p.push('\n    <div class="simplified-virals viral-unit ',type,'">\n        <ul class="virals">\n        ');if(isLoggedIn&&connectedNetworks.twUid||!isLoggedIn)print('<li class="viral-container first"><a class="tw viral-link">'+(showViralText?"tweet":"")+"</a></li>"),isFirst=!1;if(isLoggedIn&&(connectedNetworks.fbUid||connectedNetworks.fpUid)||!isLoggedIn)print('<li class="viral-container'+(isFirst?" first":"")+'"><a class="fb viral-link">'+(showViralText?"share":"")+"</a></li>"),isFirst=!1;showLinkedIn&&(isLoggedIn&&connectedNetworks.liUid||!isLoggedIn)&&(print('<li class="viral-container'+(isFirst?" first":"")+'"><a class="li viral-link"></a></li>'),isFirst=!1),__p.push('\n        </ul>\n\n        <input type="hidden" name="viralMessageTw" value="',message.replace(new RegExp("@~([0-9]+)","g"),nickReplacer),'">\n        <input type="hidden" name="viralMessage" value="',message.replace(new RegExp("@([A-Za-z0-9_]+)","g"),nickReplacer).replace(new RegExp("@~([0-9]+)","g"),nickReplacer),'">\n        <input type="hidden" name="viralEvent" value="',event,'">\n        <input type="hidden" name="viralRoute" value="',route,'">\n        ');if(typeof meta!="undefined"&&meta)for(var property in meta)meta.hasOwnProperty(property)&&print('<input type="hidden" name="viralMeta'+property.charAt(0).toUpperCase()+property.substr(1)+'" value="'+meta[property]+'">');typeof image!="undefined"&&image&&print('<input type="hidden" name="viralImage" value="'+image+'">'),typeof title!="undefined"&&title&&print('<input type="hidden" name="viralTitle" value="'+title+'">'),__p.push("\n    </div>")}return __p.join("")},amphetamine.t["viral/gavePlusK"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push(""),__p.push('\n<span id="viral_TopicPageGavePlusK" class="viral-unit">\n    <a class="tw viral"><img src="',amphetamine.config.staticServer,'images/tweet.png"></a>\n    <a class="fb viral"><img src="',amphetamine.config.staticServer,'images/share.png"></a>\n    ');var message="I gave @"+recipient.nick+" +K about "+topic+" on @klout";__p.push('\n    <input type="hidden" name="viralMessage" value="',message,'">\n    <input type="hidden" name="viralEvent" value="plusk_gave">\n    <input type="hidden" name="viralRoute" value="/plusk/gave/',giver.ksUid,"/",recipient.ksUid,"/",tid,'">\n    <input type="hidden" name="viralMeta" value="',topic,'">\n</span>')}return __p.join("")},amphetamine.t["viral/insight"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var delta=Math.abs(insight.delta),markupOptions={},message;subscore=="amplification"?insight.delta?insight.delta>0?message="In the past "+insight.timePeriod+", "+(isOwnProfile?"my":"@"+nick+"'s")+" Amplification increased by "+delta+" points on @klout":message="Oh no, in the past "+insight.timePeriod+", "+(isOwnProfile?"my":"@"+nick+"'s")+" Amplication decreased by "+delta+" points on @klout":message=(isOwnProfile?"My":".@"+nick+"'s")+" Amplification is steady on @klout":subscore=="network"?(delta=delta.toFixed(2),insight.delta?insight.delta>0?message="In the past "+insight.timePeriod+", "+(isOwnProfile?"my":"@"+nick+"'s")+" Network increased by "+delta+" points on @klout":message="Oh no, in the past "+insight.timePeriod+", "+(isOwnProfile?"my":"@"+nick+"'s")+" Network decreased by "+delta+" points on @klout":message=(isOwnProfile?"My":".@"+nick+"'s")+" Network is steady on @klout"):subscore=="trueReach"&&(insight.delta?insight.delta>0?message="In the past "+insight.timePeriod+", "+(isOwnProfile?"my":"@"+nick+"'s")+" True Reach increased by "+delta+" influencers on @klout":message="Oh no, in the past "+insight.timePeriod+", "+(isOwnProfile?"my":"@"+nick+"'s")+" True Reach decreased by "+delta+" influencers on @klout":message=(isOwnProfile?"My":".@"+nick+"'s")+" True Reach is steady on @klout"),markupOptions.connectedNetworks=connectedNetworks,markupOptions.nickMapping=nickMapping,markupOptions.type="compact",markupOptions.event="scoreInsights",markupOptions.message=message,markupOptions.route="/user/"+nick,markupOptions.meta={subscore:subscore},showMore&&print('<div class="see-more-virals clearfix">'),print(this["viral/generateMarkup"](markupOptions)),showMore&&print('<span class="see-more"><a class="see-more-link" href="/user/'+nick+'/">see more...</a></span></div>'),__p.push("")}return __p.join("")},amphetamine.t["viral/nickBioInfluencerOf"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var displayName=isOwnProfile?"I'm":"@"+nick+" is",markupOptions={};markupOptions.connectedNetworks=connectedNetworks,markupOptions.nickMapping=nickMapping,markupOptions.type="compact",markupOptions.event="influencer_of",markupOptions.message="According to @klout, "+displayName+" influential to "+this["user/listify"]({users:influencees,maxDisplay:4}),markupOptions.route="/user/"+nick,connectedNetworks&&print('<div class="see-more-virals clearfix">'),print(this["viral/generateMarkup"](markupOptions)),connectedNetworks&&print('<span class="see-more"><a class="see-more-link" href="/user/'+nick+'/influencers">see more...</a></span></div>'),__p.push("")}return __p.join("")},amphetamine.t["viral/nickBioInfluentialAbout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var displayName=isOwnProfile?"I'm":"@"+nick+" is",markupOptions={};markupOptions.connectedNetworks=connectedNetworks,markupOptions.nickMapping=nickMapping,markupOptions.type="compact",markupOptions.event="influential_about",markupOptions.message="According to @klout, "+displayName+" influential about "+this["topic/listify"]({topics:topics,maxDisplay:4}),markupOptions.route="/user/"+nick,connectedNetworks&&print('<div class="see-more-virals clearfix">'),print(this["viral/generateMarkup"](markupOptions)),connectedNetworks&&print('<span class="see-more"><a class="see-more-link" href="/user/'+nick+'/topics">see all...</a></span></div>'),__p.push("")}return __p.join("")},amphetamine.t["viral/largeFlagScoreSash"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span id="top-influencer-virals" class="viral-unit">\n    <a class="tw viral"></a>\n    <a class="fb viral"></a>\n    <a class="li viral"></a>\n    <input type="hidden" name="viralMessage" value="',message,'">\n    <input type="hidden" name="viralEvent" value="top_influencer">\n    <input type="hidden" name="viralRoute" value="/user/',nick,'">\n    <input type="hidden" name="viralMetaLocation" value="',location,'">\n</span>');return __p.join("")},amphetamine.t["viral/stream-story-add-topic"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span class="viral-unit">\n    &bull; <a class="tw viral-textonly compact-viral viral-links">tweet</a> &bull;\n    <a class="fb viral-textonly compact-viral viral-links">share</a>\n    <input type="hidden" name="viralMessage" value="',story.actor.ksUid==amphetamine.user.ksUID?"I":story.actor.name," added ",story.topic," to ",story.target.ksUid==amphetamine.user.ksUID?"my":story.target.ksUid==story.actor.ksUid?"their":story.target.name+"'s",' influential topics!">\n    <input type="hidden" name="viralMessageTw" value="',story.actor.ksUid==amphetamine.user.ksUID?"I":story.actor.twUid?"@"+story.actor.nick:story.actor.name," added ",story.topic," to ",story.target.ksUid==amphetamine.user.ksUID?"my":story.target.ksUid==story.actor.ksUid?"their":(story.target.twUid?"@"+story.target.nick:story.target.name)+"'s",' influential topics!">\n    <input type="hidden" name="viralEvent" value="activity_stream">\n    <input type="hidden" name="viralRoute" value="/user/',story.target.nick,'/topics">\n</span>');return __p.join("")},amphetamine.t["viral/stream-story-+K"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span class="viral-unit">\n    &bull; <a class="tw viral-textonly compact-viral viral-links">tweet</a> &bull;\n    <a class="fb viral-textonly compact-viral viral-links">share</a>\n    <input type="hidden" name="viralMessage" value="',story.actor.ksUid==amphetamine.user.ksUID?"I":story.actor.name," gave ",story.target.ksUid==amphetamine.user.ksUID?"me":story.target.name," +K in ",story.topic,'!">\n    <input type="hidden" name="viralMessageTw" value="',story.actor.ksUid==amphetamine.user.ksUID?"I":story.actor.twUid?"@"+story.actor.nick:story.actor.name," gave ",story.target.ksUid==amphetamine.user.ksUID?"me":story.target.twUid?"@"+story.target.nick:story.target.name," +K in ",story.topic,'!">\n    <input type="hidden" name="viralEvent" value="activity_stream">\n    <input type="hidden" name="viralRoute" value="/user/',story.target.nick,'">\n</span>');return __p.join("")},amphetamine.t["viral/stream-story-account-created"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span class="viral-unit">\n    &bull; <a class="tw viral-textonly compact-viral viral-links">tweet</a> &bull;\n    <a class="fb viral-textonly compact-viral viral-links">share</a>\n    <input type="hidden" name="viralMessage" value="',story.actor.ksUid==amphetamine.user.ksUID?"I":story.actor.name," just claimed ",story.actor.ksUid==amphetamine.user.ksUID?"my":"their",' Klout profile!">\n    <input type="hidden" name="viralMessageTw" value="',story.actor.ksUid==amphetamine.user.ksUID?"I":story.actor.twUid?"@"+story.actor.nick:story.actor.name," just claimed ",story.actor.ksUid==amphetamine.user.ksUID?"my":"their",' Klout profile!">\n    <input type="hidden" name="viralEvent" value="activity_stream">\n    <input type="hidden" name="viralRoute" value="/user/',story.actor.nick,'">\n</span>');return __p.join("")},amphetamine.t["viral/stream-story-network-added"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span class="viral-unit">\n    &bull; <a class="tw viral-textonly compact-viral viral-links">tweet</a> &bull;\n    <a class="fb viral-textonly compact-viral viral-links">share</a>\n    <input type="hidden" name="viralMessage" value="',story.actor.ksUid==amphetamine.user.ksUID?"I":story.actor.name," just added ",story.network," to ",story.actor.ksUid==amphetamine.user.ksUID?"my":"their",' Klout profile!">\n    <input type="hidden" name="viralMessageTw" value="',story.actor.ksUid==amphetamine.user.ksUID?"I":story.actor.twUid?"@"+story.actor.nick:story.actor.name," just added ",story.network," to ",story.actor.ksUid==amphetamine.user.ksUID?"my":"their",' Klout profile!">\n    <input type="hidden" name="viralEvent" value="activity_stream">\n    <input type="hidden" name="viralRoute" value="/user/',story.actor.nick,'">\n</span>');return __p.join("")},amphetamine.t["viral/stream-story-achievement"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span class="viral-unit">\n    &bull; <a class="tw viral-textonly compact-viral viral-links">tweet</a> &bull;\n    <a class="fb viral-textonly compact-viral viral-links">share</a>\n    <input type="hidden" name="viralMessage" value="',story.actor.ksUid==amphetamine.user.ksUID?"I":story.actor.name," earned the ",story.achievement,' achievement!">\n    <input type="hidden" name="viralMessageTw" value="',story.actor.ksUid==amphetamine.user.ksUID?"I":story.actor.twUid?"@"+story.actor.nick:story.actor.name," earned the ",story.achievement,' achievement!">\n    <input type="hidden" name="viralEvent" value="activity_stream">\n    <input type="hidden" name="viralRoute" value="/user/',story.actor.nick,'/achievements">\n</span>');return __p.join("")},amphetamine.t["viral/stream-story-list-created"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span class="viral-unit">\n    &bull; <a class="tw viral-textonly compact-viral viral-links">tweet</a> &bull;\n    <a class="fb viral-textonly compact-viral viral-links">share</a>\n    <input type="hidden" name="viralMessage" value="',story.actor.ksUid==amphetamine.user.ksUID?"I":story.actor.name," created the list ",story.listName,""),story.target&&__p.push(" and added ",this["viral/stream-story-list-members"]({story:story,network:null})," to it."),__p.push('">\n    <input type="hidden" name="viralMessageTw" value="',story.actor.ksUid==amphetamine.user.ksUID?"I":story.actor.twUid?"@"+story.actor.nick:story.actor.name," created the list ",story.listName,""),story.target&&__p.push(" and added ",this["viral/stream-story-list-members"]({story:story,network:"tw"})," to it."),__p.push('">\n    <input type="hidden" name="viralEvent" value="activity_stream">\n    <input type="hidden" name="viralRoute" value="/user/',story.actor.nick,"/list/",story.listId,'">\n</span>');return __p.join("")},amphetamine.t["viral/stream-story-list-add"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span class="viral-unit">\n    &bull; <a class="tw viral-textonly compact-viral viral-links">tweet</a> &bull;\n    <a class="fb viral-textonly compact-viral viral-links">share</a>\n    <input type="hidden" name="viralMessage" value="',story.actor.ksUid==amphetamine.user.ksUID?"I":story.actor.name," added ",this["viral/stream-story-list-members"]({story:story,network:null})," to ",story.actor.ksUid==amphetamine.user.ksUID?"my":"their"," list, ",story.listName,'">\n    <input type="hidden" name="viralMessageTw" value="',story.actor.ksUid==amphetamine.user.ksUID?"I":story.actor.twUid?"@"+story.actor.nick:story.actor.name," added ",this["viral/stream-story-list-members"]({story:story,network:"tw"})," to ",story.actor.ksUid==amphetamine.user.ksUID?"my":"their"," list, ",story.listName,'">\n    <input type="hidden" name="viralEvent" value="activity_stream">\n    <input type="hidden" name="viralRoute" value="/user/',story.actor.nick,"/list/",story.listId,'">\n</span>');return __p.join("")},amphetamine.t["viral/stream-story-list-members"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var listSize=story.listSize,members=[story.target];story.others&&story.others.length&&members.push.apply(members,story.others);for(var i=0,l=members.length;i<l;i++)members[i].ksUid==amphetamine.user.ksUID?members[i]="me":network=="tw"&&members[i].twUid?members[i]="@"+members[i].nick:members[i]=members[i].name;members.length==1?members=members[0]:listSize>2?(members[2]?members[2]="and "+members[2]:members[2]="and "+(listSize-2)+" others",members=members.join(", ")):members=members[0]+" and "+members[1],print(members),__p.push("")}return __p.join("")},amphetamine.t["viral/topicBestContent"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="viral_TopicPage1" class="viral-unit">\n    <a class="tw viral"></a>\n    <a class="fb viral"></a>\n    <a class="li viral"></a>\n    <input type="hidden" name="viralMessage" value="Check out some of the best content about ',topic_.display,' on @klout.com">\n    <input type="hidden" name="viralEvent" value="topic_content">\n    <input type="hidden" name="viralRoute" value="/topic/',topic_.slug,'/influencers">\n    <input type="hidden" name="viralMeta" value="',topic_.display,'">\n</div>');return __p.join("")},amphetamine.t["viral/topicContent"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span id="viral_TopicPageContent" class="viral-unit">\n    <a class="tw viral-textonly compact-viral viral-links">tweet</a> &bull;\n    <a class="fb viral-textonly compact-viral viral-links">share</a>\n    <input type="hidden" name="viralMessage" value="',message,' via @klout.com">\n    <input type="hidden" name="viralEvent" value="topic_content_reshare">\n    <input type="hidden" name="viralRoute" value="/topic/',topic_.slug,'/content">\n    <input type="hidden" name="viralMeta" value="',topic_.display,'">\n</span>');return __p.join("")},amphetamine.t["viral/topicNomination"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<span id="viral_TopicPageNomination" class="viral-unit">\n    ');var displayName;isSelf?displayName="my":user.nick.charAt()=="~"?displayName=(user.firstName+" "+user.lastName).trim()+"'s":displayName="@"+user.nick+"'s",__p.push('\n    <a class="tw viral"></a>\n    <a class="fb viral"></a>\n    <a class="li viral"></a>\n    <input type="hidden" name="viralMessage" value="I added ',topic_.displayName," to ",displayName,' topics on @klout">\n    <input type="hidden" name="viralEvent" value="add_topic">\n    <input type="hidden" name="viralRoute" value="/user/',user.nick,'/topics">\n    <input type="hidden" name="viralMeta" value="',topic_.displayName
,'">\n    <input type="hidden" name="viralMetaLocation" value="',origin,'">\n</span>')}return __p.join("")},amphetamine.t["viral/topicTopContent"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span id="viral_TopicPageHeader" class="viral-unit">\n    '),isPublic||__p.push('\n        <a class="tw viral-textonly compact-viral viral-links">tweet</a> &bull;\n        <a class="fb viral-textonly compact-viral viral-links">share</a> &bull;\n        <a class="viral-links" href="#/topic/',topic_.slug,'/content">see more...</a>\n    '),__p.push('\n    <input type="hidden" name="viralMessage" value="Check out some of the best content about ',topic_.display,' on @klout">\n    <input type="hidden" name="viralEvent" value="topic_content">\n    <input type="hidden" name="viralRoute" value="/topic/',topic_.slug,'/influencers">\n    <input type="hidden" name="viralMeta" value="',topic_.display,'">\n</span>');return __p.join("")},amphetamine.t["viral/topicInfluencers"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span id="viral_topinfluencerlist" class="viral-unit">\n    <a class="tw viral-textonly compact-viral viral-links">tweet</a> &bull;\n    <a class="fb viral-textonly compact-viral viral-links">share</a>\n    <input type="hidden" name="viralMessage" value="According to @klout, @',nick," is the #",position," influencer about ",topic_.display,' right now">\n    <input type="hidden" name="viralMessage2" value="@',nick,", you're the #",position," influencer about ",topic_.display,' on @klout! Sign in today and check it out!">\n    <input type="hidden" name="viralEvent" value="topic_leaders_user">\n    <input type="hidden" name="viralRoute" value="/topic/',topic_.slug,'/influencers">\n</span>');return __p.join("")},amphetamine.t["viral/topicPlusK"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span id="viral_topplusklist" class="viral-unit">\n    <a class="tw viral-textonly compact-viral viral-links">tweet</a> &bull;\n    <a class="fb viral-textonly compact-viral viral-links">share</a>\n    <input type="hidden" name="viralMessage" value="Wow, @',nick," is the #",position," +K recipient about ",topic_.display,' right now on @klout!">\n    <input type="hidden" name="viralMessage2" value="@',nick,", you're the #",position," +K recipient about ",topic_.display,' on @klout! Sign in today and check it out!">\n    <input type="hidden" name="viralEvent" value="topic_leaders_plusK_user">\n    <input type="hidden" name="viralRoute" value="/topic/',topic_.slug,'/influencers_plusk">\n</span>');return __p.join("")},amphetamine.t["viral/topicPlusKRequest"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span id="viral_TopicPage7" class="viral-unit links">\n    Get more +Ks:\n    <a class="compact-viral tw viral-textonly viral-links">tweet</a> &bull;\n    <a class="compact-viral fb viral-textonly viral-links">share</a>\n    '),isOwnProfile?__p.push('\n        <input type="hidden" name="viralMessage" value="Please +K my influence in ',topic,' on @klout">\n    '):__p.push('\n        <input type="hidden" name="viralMessage" value="',nick.charAt()=="~"?name:"@"+nick," is influential about ",topic,' on @klout. Give a +K if you think so too">\n    '),__p.push('\n    <input type="hidden" name="viralEvent" value="plusK_ask">\n    <input type="hidden" name="viralRoute" value="/plusk/',ksUid,"/",tid,'">\n</span>');return __p.join("")},amphetamine.t["viral/topicSummaryInfluencers"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span id="viral_TopicPage5" class="viral-unit links">\n    <a class="tw viral-textonly compact-viral viral-links">tweet</a> &bull;\n    <a class="fb viral-textonly compact-viral viral-links">share</a> &bull;\n    <input type="hidden" name="viralMessage" value="According to @klout, the top influencers about ',topic_.display," are ",names,'. Check it out!">\n    <input type="hidden" name="viralEvent" value="topic_leaders">\n    <input type="hidden" name="viralRoute" value="/topic/',topic_.slug,'/influencers">\n    <input type="hidden" name="viralMeta" value="',topic_.display,'">\n</span>\n<a class="viral-links" href="#/topic/',topic_.slug,'/influencers">see more...</a>');return __p.join("")},amphetamine.t["viral/topicSummaryPlusK"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span id="viral_TopicPage4" class="viral-unit links">\n    <a class="tw viral-textonly compact-viral viral-links">tweet</a> &bull;\n    <a class="fb viral-textonly compact-viral viral-links">share</a> &bull;\n    <input type="hidden" name="viralMessage" value="According to @klout, the top +K recipients about ',topic_.display," are ",names,'. Check it out!">\n    <input type="hidden" name="viralEvent" value="topic_leaders_plusK">\n    <input type="hidden" name="viralRoute" value="/topic/',topic_.slug,'/influencers_plusk">\n    <input type="hidden" name="viralMeta" value="',topic_.display,'">\n</span>\n<a class="viral-links" href="#/topic/',topic_.slug,'/influencers_plusk">see more...</a>');return __p.join("")},amphetamine.t["viral/topicTopInfluencers"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span id="viral_TopicPage2" class="viral-unit">\n    <a class="tw viral"></a>\n    <a class="fb viral"></a>\n    <a class="li viral"></a>\n    <input type="hidden" name="viralMessage" value="According to @klout, the top influencers about ',topic_.display," are ",names,'. Check it out!">\n    <input type="hidden" name="viralEvent" value="topic_leaders">\n    <input type="hidden" name="viralRoute" value="/topic/',topic_.slug,'/influencers">\n    <input type="hidden" name="viralMeta" value="',topic_.display,'">\n</span>');return __p.join("")},amphetamine.t["viral/topicTopPlusK"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<span id="viral_TopicPage3" class="viral-unit">\n    <a class="tw viral"></a>\n    <a class="fb viral"></a>\n    <a class="li viral"></a>\n    <input type="hidden" name="viralMessage" value="According to @klout, the top +K recipients about ',topic_.display," are ",names,'. Check it out!">\n    <input type="hidden" name="viralEvent" value="topic_leaders_plusK">\n    <input type="hidden" name="viralRoute" value="/topic/',topic_.slug,'/influencers_plusk">\n    <input type="hidden" name="viralMeta" value="',topic_.slug,'">\n</span>');return __p.join("")},amphetamine.t["search/typeaheadResults"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<ul class="results-list">\n    ');if(influencers&&influencers.length>0){__p.push('\n       <li class="header">Influencers</li>\n       ');for(var i=0;i<influencers.length;i++)__p.push('\n        <li id="influencer-result-',i,'" class="search-result">\n            <a href="/user/',influencers[i].nick,'" class="result clearfix '),i==0&&__p.push(" selected "),__p.push('">\n                <span class="avatar">\n                    <span class="image"><img src="/picture/n/',influencers[i].nick,'/small" alt="',influencers[i].name,'"></span>\n                    <span class="micro-flag">'),print(Math.round(influencers[i].kloutScore)),__p.push('</span>\n                </span>\n                <span class="name">',influencers[i].name,"</span>\n            </a>\n            \n        </li>\n        ");__p.push("\n    ")}__p.push("\n    ");if(topics&&topics.length>0){__p.push('\n       <li class="header">Topics</li>\n        ');for(var i=0;i<topics.length;i++)__p.push('\n        <li id="topic-result-',i,'" class="search-result">\n            <a href="/topic/',topics[i].slug,'" class="result clearfix '),i==0&&(influencers.length==0||context=="add-topic")&&__p.push(" selected "),__p.push('">\n                <span class="avatar">\n                    <span class="image"><img src="',topics[i].imageUrl,'" /></span>\n                </span>\n                <span class="name">',topics[i].displayName,"</span>\n            </a>\n        </li>\n        ");__p.push("\n    ")}__p.push("\n    "),topics.length==0&&influencers.length==0?(__p.push("\n        "),context=="header"?(__p.push("\n            "),query&&query.length>2?__p.push('\n                <li class="footer"><a href="/#/search/',query,'">See results for ',query,"</a></li>\n            "):__p.push('\n                <li class="footer"><span>No results.</span></li>\n            '),__p.push("\n        ")):__p.push('\n            <li class="footer"><span>No results.</span></li>\n        '),__p.push("\n    ")):context=="header"&&__p.push('\n    <li class="footer"><a href="/#/search/',query,'">View more results</a></li>\n    '),__p.push("\n</ul>")}return __p.join("")},amphetamine.t["search/layout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="full-search-results">\n    <div class="content-header clearfix">\n        <h1 class="header-text">Search results'),typeof results!="undefined"&&__p.push(" for &quot;",query,"&quot;</h1> "),__p.push('\n    </div>\n    <div class="content-body clearfix">\n        <div class="sidebar">\n            <ul class="navigation">\n                <li><a class="nav-link'),arguments[0].filter=="influencers"&&__p.push(" selected"),__p.push('"'),typeof results!="undefined"&&__p.push(' href="/#/search/',query,'/influencers"'),__p.push('>Influencers<div class="triangle"></div></a></li>\n                <li><a class="nav-link'),arguments[0].filter=="topics"&&__p.push(" selected"),__p.push('"'),typeof results!="undefined"&&__p.push(' href="/#/search/',query,'/topics"'),__p.push('>Topics<div class="triangle"></div></a></li>\n            </ul>\n        </div>\n        <div class="content-main">\n            <div class="overlay-loading"><img class="page-loading-icon" src="',amphetamine.config.staticServer,'images/loading.gif"/></div>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["search/influencers"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(typeof results!="undefined"){__p.push("\n    ");if(results){__p.push('\n        <ul class="user-list">\n            ');for(var i=0,l=results.length;i<l;i++)__p.push('\n                <li class="search-result list-row clearfix ',i==0?"first":"",'">\n                    ',amphetamine.view.renderUS("user/rowProfile",{user:results[i]}),'\n                    <div class="row-aside">\n                        ',amphetamine.view.renderUS("topic/list",{displayPlusK:amphetamine.user&&amphetamine.user.nick!=results[i].nick,nick:results[i].nick,name:results[i].name,topics:results[i].topics}),"\n                    </div>\n                </li>\n            ");__p.push("\n        </ul>\n    ")}else __p.push("\n        There are no results for &quot;",query,"&quot;\n    ");__p.push("\n")}__p.push("")}return __p.join("")},amphetamine.t["search/topics"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(typeof results!="undefined"){__p.push("\n    ");if(results){__p.push('\n        <ul class="topic-list">\n            ');for(var i=0,l=results.length;i<l;i++)__p.push('\n                <li class="search-result list-row clearfix ',i==0?"first":"",'">\n                    <div class="avatar">\n                        <div class="image"><a href="/#/topic/',results[i].slug,'"><img src="',results[i].imageUrl,'"></a></div>\n                    </div>\n                    <h3 class="name"><a href="/#/topic/',results[i].slug,'">',results[i].displayName,"</a></h3>\n                </li>\n            ");__p.push("\n        </ul>\n    ")}else __p.push("\n        There are no results for &quot;",query,"&quot;\n    ");__p.push("\n")}__p.push("")}return __p.join("")},amphetamine.t["nick/achievementList"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(typeof achievements!="undefined"&&achievements&&achievements.length){__p.push('\n    <ul class="achievement-list">\n        ');for(var i=0,l=achievements.length;i<l;i++)__p.push('\n            <li id="achievement-',achievements[i].achievement_id,"-",achievements[i].series_id,'"\n                class="ks-achievement'),i%7==0&&print(" first"),__p.push('" >\n                <img class="achievement-image" alt="',achievements[i].name,'"\n                     src="',amphetamine.config&&amphetamine.config.staticServer,"images/achievements/",achievements[i].achievement_id,"-",achievements[i].series_id,'-s.png">\n                <div class="achievement-name">',achievements[i].name,'</div>\n                <div class="achievement-description">',achievements[i].description,'</div>\n                <div class="achievement-earned-at">',achievements[i].earned_at,"</div>\n            </li>\n        ");__p.push("\n    </ul>\n")}__p.push("")}return __p.join("")},amphetamine.t["nick/achievements"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(typeof ksAchievementsData!="undefined"&&ksAchievementsData){var displayName=ksAchievementsData.firstName?ksAchievementsData.firstName:bioData.name,hasAchievements=ksAchievementsData.achievements&&ksAchievementsData.achievements.length,hasLegacy=ksAchievementsData.legacy&&ksAchievementsData.legacy.length;hasAchievements&&__p.push('\n            <div class="list-section first">\n                <div class="section-header">\n                    <div class="viral-header clearfix">\n                        <h2 class="header-text">\n                            ',(isOwnProfile?"You've":displayName)+" earned "+ksAchievementsData.count,"\n                            ",amphetamine.view.renderUS("view/pluralize",{count:ksAchievementsData.count,word:"achievement"}),'!\n                        </h2>\n                        <span id="ks-achievements-virals" class="viral-unit">\n                            <a class="tw viral"></a>\n                            <a class="fb viral"></a>\n                            <a class="li viral"></a>\n                        </span>\n                    </div>\n                </div>\n                <div class="section-body clearfix">\n                    ',amphetamine.view.renderUS("nick/achievementList",{achievements:ksAchievementsData.achievements}),"\n                </div>\n            </div>\n    ");if(!hasAchievements||hasLegacy)__p.push('\n            <div id="legacy-achievements" class="list-section'),hasAchievements||print(" first"),__p.push('">\n                <div class="section-header">\n                    '),hasLegacy?__p.push('\n                        <div class="viral-header clearfix">\n                            <h2 class="header-text">Legacy Achievements</h2>\n                            <span id="achievements-virals" class="viral-unit">\n                                <a class="tw viral"></a>\n                                <a class="fb viral"></a>\n                                <a class="li viral"></a>\n                            </span>\n                        </div>\n                    '):__p.push('\n                        <h2 class="header-text">\n                            ',isOwnProfile?"You haven't":displayName+" hasn't",' earned any achievements\n                        </h2>\n                        <p class="header-caption">Be on the look-out for awesome new achievements coming soon!</p>\n                    '),__p.push('\n                </div>\n                <div class="section-body clearfix">\n                    '),hasLegacy?__p.push("\n                        ",amphetamine.view.renderUS("nick/achievementList",{achievements:ksAchievementsData.legacy}),"\n                    "):__p.push('\n                        <img alt="Achievements Placeholder" src="',amphetamine.config&&amphetamine.config.staticServer,'images/achievements/placeholder-grid.png">\n                    '),__p.push("\n                </div>\n            </div>\n")}__p.push("")}return __p.join("")},amphetamine.t["nick/addUserOptions"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),!isOwnProfile&&isLoggedIn&&__p.push('\n    <ul class="dropdown-menu">\n        <li class="menu-item">\n            <a class="button-alt">Add <span class="plus">+</span></a>\n            <ul class="add-user-actions">\n                <li class="user-action first">\n                    <a id="add-to-list-',arguments[0].twUid,'" class="add-to-list action-link">Add to a list</a>\n                </li>\n                <li class="user-action">\n                    <a class="add-topic-invoke-search action-link">Add a topic</a>\n                </li>\n                <li class="user-action">\n                    <a class="add-influencer-invoke-search action-link">Add as an influencer</a>\n                </li>\n            </ul>\n        </li>\n    </ul>\n'),__p.push("");return __p.join("")},amphetamine.t["nick/bio"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var bioData=typeof bioData!="undefined"?bioData:null,isRegistered=typeof userData!="undefined"&&userData,kClass=typeof kClass!="undefined"?kClass:null,kSquadId=typeof kSquadId!="undefined"?kSquadId:null,networkData={nick:bioData&&bioData.screen_name,unregistered:!isRegistered};__p.push('\n<div id="user-pic">\n    <img src="/picture/n/',nick,"",isRegistered&&userData.picPref?"?picPref="+userData.picPref+(userData.fpUid?userData.fbUid:""):"",'" alt="',bioData&&bioData.name,'">\n    '),isRegistered&&kSquadId==1?__p.push('\n        <div class="kclass ksquad">\n            <a class="kclass-link" href="/corp/squad" target="_blank">Klout Squad</a>\n        </div>\n    '):kClass&&(__p.push('\n        <div class="kclass">\n            '),isLoggedIn?__p.push('\n                <a class="kclass-link" href="/user/',nick,'/kloutstyle">',kClass.replace("_"," "),"</a>\n            "):print(kClass.replace("_"," ")),__p.push("\n        </div>\n    ")),__p.push('\n</div>\n<div id="bio">\n    <h1 id="user-name">',bioData?bioData.name:"","</h1>\n    ",this["user/connectedNetworks"]({customInvite:"Invite to Klout, and increase your verified connections!",disableInvite:!!options.isPublic,isOwnProfile:isOwnProfile,size:"normal",user:isRegistered?userData:networkData}),"\n    "),bioData&&__p.push('\n        <div id="profile-description">\n            ',this["view/linkify"]({text:bioData.description}),'\n        </div>\n        <div id="location">',bioData.location,"</div>\n    "),__p.push('\n</div>\n<br class="clearer" >\n',bioData?"":"&nbsp;","\n",isLoggedIn&&!isOwnProfile?'<div class="add-user-dropdown"></div>':"","")}return __p.join("")},amphetamine.t["nick/comparison"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="comparison-container">\n    <div id="compare" class="list-section">\n        ',this["nick/comparisonChartPlaceHolder"]({}),'\n    </div>\n    \n    <div id="networksOfInfluence" class="list-section">\n        ',this["nick/comparisonNetworksOfInfluencePlaceHolder"]({}),'\n    </div>\n    \n    <div id="influencersAndTopics" class="list-section">\n        ',this["nick/comparisonInfluencersAndTopicsPlaceHolder"]({}),"\n    </div>\n</div>");return __p.join("")},amphetamine.t["nick/comparisonChartPlaceHolder"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="section-header">\n    <div class="viral-header clearfix">\n        <h2 class="header-text">\n            Compare Klout!\n        </h2>\n    </div>\n</div>\n<img class="comparisonLoader" src="images/loading-small.gif" width="43" height="24" >');return __p.join("")},amphetamine.t["nick/comparisonNetworksOfInfluencePlaceHolder"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="section-header">\n    <div class="viral-header clearfix">\n        <h2 class="header-text">\n            Networks of Influence\n        </h2>\n    </div>\n</div>\n<img class="comparisonLoader" src="images/loading-small.gif" width="43" height="24" >');return __p.join("")},amphetamine.t["nick/comparisonInfluencersAndTopicsPlaceHolder"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="section-header">\n    <div class="viral-header clearfix">\n        <h2 class="header-text">\n            Influencers &amp; Topics\n        </h2>\n    </div>\n</div>\n<img class="comparisonLoader" src="images/loading-small.gif" width="43" height="24">');return __p.join("")},amphetamine.t["nick/comparisonChart"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var twitterNick=nick;twitterNick.charAt(0)=="~"?twitterNick=bioData.name:twitterNick="@"+twitterNick,__p.push('\n<div class="section-header">\n    <div class="viral-header clearfix">\n        <h2 class="header-text">\n            Compare Klout!\n        </h2>\n        <span id="viral_compare" class="viral-unit">\n    \n            <a class="viral tw">\n                <input type="hidden" name="twMessage" value="I compared my @klout with ',twitterNick,', how does your @klout compare?">\n            </a>\n            <a class="viral fb">\n                <input type="hidden" name="fbMessage" value="I compared my Klout with ',bioData.name,', how does your Klout compare?">\n            </a>\n        </span>\n    </div>\n    <p class="header-caption">\n        See how you and ',bioData.name,' stack up.\n    </p>\n</div>\n<div class="section-body">\n    <div id="scoreComparisonChartContainer">\n        <div id="comparison-chart"></div>\n    </div>\n    <div id="totalPlusKReceivedContainer">\n        <div id="totalPlusKReceived-chart"></div>\n    </div>\n    <br class="clearer">\n</div>')}return __p.join("")},amphetamine.t["nick/comparisonNetworksOfInfluence"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var twitterNick=nick;twitterNick.charAt(0)=="~"?twitterNick=bioData.name:twitterNick="@"+twitterNick,__p.push("\n");var self=this,subjectsMap={tw:"Twitter",fb:"Facebook",gp:"Google+",li:"LinkedIn",fs:"Foursquare"},otherKsUid=userTwoKsUid,showTwitterAt100Percent=!1;userData||(showTwitterAt100Percent=!0);var meKsUid=authUser.ksUID,seenUnconnectedNetwork=!1,userName=bioData.firstName+(bioData.lastName?"":" "+bioData.lastName);__p.push('\n<div class="section-header">\n    ');var maxMeScore=-1,maxOtherScore=-1,maxMeNetwork=null,maxOtherNetwork=null;_(network).each(function(a,b){var c=a[meKsUid]||0,d=a[otherKsUid]||0;c>maxMeScore&&(maxMeScore=c,maxMeNetwork=b),d>maxOtherScore&&(maxOtherScore=d,maxOtherNetwork=b)}),__p.push('\n    <div class="viral-header clearfix">\n        <h2 class="header-text">\n            Networks of Influence\n        </h2>\n        <span id="viral_compare_networks" class="viral-unit">\n            <a class="viral tw">\n                <input type="hidden" name="twMessage" value="According to @klout, ',subjectsMap[maxOtherNetwork]," is ",twitterNick,'\'s primary network of influence.">\n            </a>\n            <a class="viral fb">\n                <input type="hidden" name="fbMessage" value="According to Klout, ',subjectsMap[maxOtherNetwork]," is ",bioData.name,'\'s primary network of influence.">\n            </a>\n        </span>\n    </div>\n    <p class="header-caption">\n        '),maxMeNetwork&&maxOtherNetwork&&(__p.push("\n            "),maxMeNetwork==maxOtherNetwork?__p.push("\n                You and ",bioData.name," both use ",subjectsMap[maxMeNetwork]," as the primary way to spread your influence.\n            "):__p.push("\n                You use ",subjectsMap[maxMeNetwork]," as the primary way to spread your influence. ",subjectsMap[maxOtherNetwork]," is ",bioData.name,"'s primary network of influence.\n            "),__p.push("\n        ")),__p.push('\n    </p>\n</div>\n<div class="section-body">\n    <div id="networksOfInfluenceChart">\n        '),_(subjectsMap).each(function(a,b){print("<ul>");var c,d=network[b]?network[b][meKsUid]:c,e=network[b]?network[b][otherKsUid]:c,f={};typeof d=="undefined"&&(seenUnconnectedNetwork?f.hide=!0:(f.cta=!0,f.ctaNetwork=b,seenUnconnectedNetwork=!0)),typeof e=="undefined"&&(e=-1),a=="Twitter"&&showTwitterAt100Percent&&(e=1),print(self["nick/comparisonBarRow"]({subject:a,meScore:d,otherScore:e,options:f})),print("</ul>")}),__p.push("\n    </div>\n</div>")}return __p.join("")},amphetamine.t["nick/comparisonInfluencersAndTopics"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var twitterNick=nick;twitterNick.charAt(0)=="~"?twitterNick=bioData.name:twitterNick="@"+twitterNick;var shareMatrix={influencersInCommon:sharedSoi&&sharedSoi.people.sharedSoi&&sharedSoi.shared&&sharedSoi.people.sharedSoi.length>0,thirdUserHasInfluencers:sharedSoi&&sharedSoi.people.sharedSoi&&sharedSoi.people.sharedSoi.length>0,topicsInCommon:topics&&topics.shared,firstUserHasTopicsToNominate:topics&&!topics.shared&&topics.sharedTopics.length>0};__p.push('\n<div class="section-header">\n    <div class="viral-header clearfix">\n        <h2 class="header-text">\n            Influencers &amp; Topics\n        </h2>\n        <span id="viral_compare_influencers_topics" class="viral-unit">\n            '),sharedSoi&&sharedSoi.people.sharedSoi&&sharedSoi.shared&&sharedSoi.people.sharedSoi.length>0?(__p.push('\n                <a class="viral tw">\n                    <input type="hidden" name="twMessage" value="According to @klout, ',twitterNick," and I have ",sharedSoi.people.sharedSoi.length," influencer"),sharedSoi.people.sharedSoi.length-1&&print("s"),__p.push(' in common.">\n                </a>\n                <a class="viral fb">\n                    <input type="hidden" name="fbMessage" value="According to Klout, ',bioData.name," and I have ",sharedSoi.people.sharedSoi.length," influencer"),sharedSoi.people.sharedSoi.length-1&&print("s"),__p.push(' in common.">\n                </a>\n            ')):__p.push('\n                <a class="viral tw">\n                    <input type="hidden" name="twMessage" value="According to @klout, ',twitterNick,' and I don\'t have any influencers in common.">\n                </a>\n                <a class="viral fb">\n                    <input type="hidden" name="fbMessage" value="According to Klout, ',bioData.name," and I don't have any influencers in common.\">\n                </a>\n            "),__p.push('\n        </span>\n    </div>\n    <p class="header-caption">\n        '),shareMatrix.influencersInCommon&&shareMatrix.topicsInCommon?(__p.push("\n            "),sharedSoi.people.sharedSoi.length>1?__p.push("\n                You and ",bioData.name," influence ",sharedSoi.people.sharedSoi.length," of the same people and are both influential about ",this["topic/compareCommaSeparatedLinkedList"]({displayRemove:!1,isPublic:!isLoggedIn,topics:topics.sharedTopics}),".    \n            "):__p.push("\n                You and ",bioData.name,' influence <a href="/user/',sharedSoi.people.sharedSoi[0].nick,'">',sharedSoi.people.sharedSoi[0].name,"</a> and are both influential about ",this["topic/compareCommaSeparatedLinkedList"]({displayRemove:!1,isPublic:!isLoggedIn,topics:topics.sharedTopics}),".    \n            "),__p.push("\n        ")):shareMatrix.influencersInCommon&&!shareMatrix.topicsInCommon?(__p.push("\n            "),sharedSoi.people.sharedSoi.length>1?__p.push("\n                You and ",bioData.name," influence ",sharedSoi.people.sharedSoi.length,' of the same people but aren\'t influential about the same topics.  <a href="#" class="add-topic-invoke-search">Nominate</a> them for one of yours if they\'ve influenced you recently.\n            '):__p.push("\n                You and ",bioData.name,' influence <a href="/user/',sharedSoi.people.sharedSoi[0].nick,'">',sharedSoi.people.sharedSoi[0].name,'</a> but aren\'t influential about the same topics.  <a href="#" class="add-topic-invoke-search">Nominate</a> them for one of yours if they\'ve influenced you recently.\n            '),__p.push("\n        ")):!shareMatrix.influenersInCommon&&shareMatrix.thirdUserHasInfluencers&&shareMatrix.topicsInCommon?__p.push("\n            You and ",bioData.name," don't share any influencers but are both influential about ",this["topic/compareCommaSeparatedLinkedList"]({displayRemove:!1,isPublic:!isLoggedIn,topics:topics.sharedTopics}),'.  <a class="add-influencer-invoke-search-from-comparison">Let us know</a> if one of ',bioData.name,"'s influencers has recently influenced you.\n        "):!shareMatrix.influencersInCommon&&!shareMatrix.thirdUserHasInfluencers&&shareMatrix.topicsInCommon?__p.push("\n            You and ",bioData.name," don't share any influencers but are both influential about ",this["topic/compareCommaSeparatedLinkedList"]({displayRemove:!1,isPublic:!isLoggedIn,topics:topics.sharedTopics}),".\n        "):!shareMatrix.influencersInCommon&&shareMatrix.thirdUserHasInfluencers&&!shareMatrix.topicsInCommon&&__p.push("\n            You and ",bioData.name,' don\'t share any influencers and aren\'t influential about the same topics.  <a href="#" class="add-topic-invoke-search">Nominate</a> them for one of your topics if they\'ve influenced you recently or <a class="add-influencer-invoke-search-from-comparison">let us know</a> if one of their influencers has influenced you.\n        '),__p.push('\n    </p>\n</div>\n<div class="section-body">\n    <div id="influencersAndTopicsChart">\n        <div id="mySharedContainer">\n            <div class="userContainer">\n                ',amphetamine.view.renderUS("user/avatar",{user:{kScore:Math.round(authData.score),nick:authData.nick}}),"\n            </div>\n            "),typeof sharedSoi.people!="undefined"&&sharedSoi.people!=null&&sharedSoi.people.mySoi!=null&&__p.push('\n                <div class="userSoi">\n                    ',this["user/subList"]({size:"micro",users:sharedSoi.people.mySoi,maxDisplay:10}),"\n                </div>\n            "),__p.push("\n            "),typeof topics.myTopics!="undefined"&&topics.myTopics!=null&&topics.myTopics.length&&__p.push('\n                <div class="userTopics">\n                    ',this["topic/commaSeparatedLinkedList"]({displayRemove:!1,isPublic:!isLoggedIn,topics:topics.myTopics.slice(0,6)}),"\n                </div>\n            "),__p.push('\n        </div>\n        <div id="ourSharedContainer">\n            '),sharedSoi.shared&&sharedSoi.people.sharedSoi.length&&__p.push('\n                <div id="sharedInfluencers">\n                    <p>Shared Influencers</p>\n                    ',this["user/subList"]({size:"micro",users:sharedSoi.people.sharedSoi}),"\n                </div>\n            "),__p.push("\n            "),typeof topics.sharedTopics!="undefined"&&topics.sharedTopics!=null&&topics.sharedTopics.length&&topics.shared&&__p.push('\n                <div id="sharedTopics">\n                    <p>Shared Topics</p>\n                    ',this["topic/commaSeparatedLinkedList"]({displayRemove:!1,isPublic:!isLoggedIn,topics:topics.sharedTopics}),"\n                </div>\n            "),__p.push('\n        </div>\n        <div id="theirSharedContainer">\n            <div class="userContainer">\n                ',amphetamine.view.renderUS("user/avatar",{user:{kScore:Math.round(comparisonData.scoreData.kscore),nick:bioData.screen_name,fbUid:bioData.facebook_id,twUid:bioData.twitter_id}}),"\n            </div>\n            "),typeof sharedSoi.people!="undefined"&&sharedSoi.people!=null&&sharedSoi.people.theirSoi!=null&&__p.push('\n                <div class="userSoi">\n                    ',this["user/subList"]({size:"micro",users:sharedSoi.people.theirSoi,maxDisplay:10}),"\n                </div>\n            "),__p.push("\n            "),typeof topics.theirTopics!="undefined"&&topics.theirTopics!=null&&topics.theirTopics.length&&__p.push('\n                <div class="userTopics">\n                    ',this["topic/commaSeparatedLinkedList"]({displayRemove:!1,isPublic:!isLoggedIn,topics:topics.theirTopics.slice(0,6)}),"\n                </div>\n            "),__p.push('\n        </div>\n        <br class="clearer">\n    </div>\n</div>')}return __p.join("")},amphetamine.t["nick/comparisonBar"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push(""),percent=Math.round(percent*100),__p.push("\n");var maxWidth=276;__p.push("\n");var width=Math
.round(maxWidth*percent/100);__p.push("\n");var labelWidth=36;__p.push("\n");var buffer=7;__p.push('\n<div class="comparison-bar-wrapper ',classes,'">\n    ');if(width<maxWidth-labelWidth)var x=width+buffer;else var x=width-labelWidth;var positionDirection=direction=="left"?"right":"left";print(this["nick/comparisonBarLabel"]({label:percent,direction:positionDirection,x:x})),__p.push('\n    <div class="comparison-bar" style="width: ',width,'px;">\n    </div>\n</div>')}return __p.join("")},amphetamine.t["nick/comparisonBarEmpty"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="comparison-bar-empty">\n</div>');return __p.join("")},amphetamine.t["nick/comparisonBarLabel"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="label'),label>90&&print(" inside"),__p.push('" style="',direction,": ",x,'px">\n    ',label,"%\n</div>");return __p.join("")},amphetamine.t["nick/comparisonBarRow"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<li class="comparison-bar-row">\n    ');if(options.cta){__p.push("\n        ");var href="";options.ctaNetwork=="tw"?href="/oauth":options.ctaNetwork=="fb"?href="/fb_init":options.ctaNetwork=="gp"?href="/oauth/gp":options.ctaNetwork=="li"?href="/oauth_li":options.ctaNetwork=="fs"&&(href="/oauth_fs"),__p.push('\n        <div class="comparison-bar-empty">\n            <div class="callout-base-left">\n                <div class="triangle"></div>\n                <a href="',href,'">Connect to learn more!</a>\n            </div>\n        </div>\n    ')}else options.hide?__p.push("\n        ",this["nick/comparisonBarEmpty"](),"\n    "):__p.push("\n        ",this["nick/comparisonBar"]({percent:meScore,direction:"left",classes:"me"}),"\n    ");__p.push("\n    ",this["nick/comparisonBarSubject"]({subject:subject}),"\n    "),otherScore!=-1&&__p.push("\n        ",this["nick/comparisonBar"]({percent:otherScore,direction:"right",classes:"other"}),"\n    "),__p.push("\n\n</li>")}return __p.join("")},amphetamine.t["nick/comparisonBarSubject"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="subject-wrapper">\n    <div class="subject">\n        ',subject,"\n    </div>\n</div>");return __p.join("")},amphetamine.t["nick/detail"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="detail-wrapper">\n    <div id="navigation">\n        <ul>\n            '),isOwnProfile||__p.push('\n                <li><a id="comparison" href="/user/',nick,'/comparison">Comparison<div class="triangle"></div></a></li>\n            '),__p.push('\n            <li><a id="score-analysis" href="/user/',nick,'/score-analysis">Score Analysis<div class="triangle"></div></a></li>\n            <li><a id="topics" href="/user/',nick,'/topics">Topics<div class="triangle"></div></a></li>\n            <li><a id="influencers" href="/user/',nick,'/influencers">Influencers<div class="triangle"></div></a></li>\n            '),arguments[0].publicStreamsEnabled&&__p.push('\n            <li><a id="activity" href="/user/',nick,'/activity">Activity<div class="triangle"></div></a></li>\n            '),__p.push('\n            <li><a id="lists" href="/user/',nick,'/lists">Lists<div class="triangle"></div></a></li>\n            <li><a id="kloutstyle" href="/user/',nick,'/kloutstyle">Klout Style<div class="triangle"></div></a></li>\n            <li><a id="perks" href="/user/',nick,'/perks">Perks<div class="triangle"></div></a></li>\n            <li><a id="achievements" href="/user/',nick,'/achievements">Achievements<div class="triangle"></div></a></li>\n        </ul>\n    </div>\n    <div id="content">\n        <div class="tab comparison clearfix"></div>\n        <div class="tab kloutstyle"></div>\n        <div class="tab score-analysis"></div>\n        <div class="tab influencers"></div>\n        <div class="tab activity"><img src="',amphetamine.config.staticServer,'images/loading-small.gif"></div>\n        <div class="tab perks"></div>\n        <div class="tab lists" id="profile-lists"></div>\n        <div class="tab achievements"></div>\n        <div class="tab topics"></div>\n        '),typeof blockingEnabled!="undefined"&&blockingEnabled&&__p.push('\n            <a id="block-user">Block User</a>\n        '),__p.push("\n    </div>\n</div>");return __p.join("")},amphetamine.t["nick/influencerList"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isUnregFbOnly,user;if(typeof users!="undefined"&&users&&users.length){__p.push('\n    <ul class="user-list">\n        ');for(var i=0,l=users.length;i<l;i++)user=users[i],isUnregFbOnly=user.fbUid&&!user.twUid&&(typeof user.registered!="undefined"&&!user.registered||!user.ksUid||!user.nick),__p.push('\n            <li class="influencee list-row clearfix ',i==0?"first":"",'">\n                '),isUnregFbOnly&&__p.push('\n                    <div class="callout fb-unregistered">\n                        <a class="button-alt">Invite</a>\n                    </div>\n                '),__p.push("\n                ",amphetamine.view.renderUS("user/rowProfile",{canHide:!users[i].hidden&&isOwnProfile,canRestore:users[i].hidden,disableInvite:isUnregFbOnly,user:users[i],context:typeof context!="undefined"?context:void 0}),'\n                <div class="row-aside">\n                    ',amphetamine.view.renderUS("topic/list",{displayPlusK:amphetamine.user&&amphetamine.user.nick!=users[i].nick,nick:users[i].nick,name:users[i].name,topics:users[i].topics}),"\n                </div>\n            </li>\n        ");__p.push("\n    </ul>\n")}__p.push("")}return __p.join("")},amphetamine.t["nick/influencerOf"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var connectedNetworks=typeof connectedNetworks!="undefined"?connectedNetworks:null,backupName=arguments[0].userData?userData.firstName+" "+userData.lastName:"",hasInfluencees=typeof influencerOf!="undefined"&&influencerOf&&influencerOf.length,name=typeof bioData=="undefined"?backupName.length?backupName:nick:bioData.name,firstName=name&&name.split(" ")[0];__p.push("\n<div",hasInfluencees?"":' class="empty-list"','>\n    <div class="section-header">\n        <h4 class="header-text">\n            '),isLoggedIn&&hasInfluencees&&typeof scoreData!="undefined"&&scoreData&&scoreData.true_reach?__p.push("\n                Influences ",this["view/round"]({number:scoreData.true_reach}),"\n                ",this["view/pluralize"]({count:scoreData.true_reach,word:"other"}),"\n            "):__p.push("\n                Influence network\n            "),__p.push("\n        </h4>\n    </div>\n    "),hasInfluencees?__p.push('\n        <div class="section-body">\n            ',this["user/subList"]({context:"influenced_by",users:influencerOf}),'\n        </div>\n        <div class="section-footer">\n            ',this["viral/nickBioInfluencerOf"]({connectedNetworks:connectedNetworks,influencees:influencerOf,isOwnProfile:isOwnProfile,nick:nick,nickMapping:nickMapping}),"\n        </div>\n    "):(__p.push('\n        <div class="section-body">\n            '),isOwnProfile?__p.push("\n                Add other users to your influence network. As they add you back, they'll appear here.\n            "):isLoggedIn?__p.push("\n                Does ",firstName," influence you? Add them to your network.\n            "):__p.push("\n                ",firstName," currently does not have any influencers.\n            "),__p.push("\n        </div>\n        "),isLoggedIn&&__p.push('\n            <div class="section-footer">\n                <a class="add-influencer-invoke-search button-alt">Add influencer</a>\n            </div>\n    ')),__p.push("\n</div>")}return __p.join("")},amphetamine.t["nick/influencers"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(typeof influencers!="undefined"&&influencers){var displayName=bioData.firstName?bioData.firstName:bioData.name,hasInfluencedBy=influencers.influencedBy&&influencers.influencedBy.length,hasInfluencerOf=influencers.influencerOf&&influencers.influencerOf.length;__p.push('\n\n    <div id="influencers" class="',influencers.isFb?"fb-network":"tw-network",'">\n        <div class="tabsWrapper">\n            <ul class="tabs">\n                '),isOwnProfile?__p.push("\n                        <li",!tab||tab=="profile_1st_influencers"?' class="active"':"","><a>You influence</a></li>\n                        <li",tab=="profile_1st_influenced_by"?' class="active"':"","><a>Your influencers</a></li>\n                "):__p.push("\n                        <li",!tab||tab=="profile_3rd_influencers"?' class="active"':"","><a>Influences</a></li>\n                        <li",tab=="profile_3rd_influenced_by"?' class="active"':"","><a>Influenced By</a></li>\n                "),__p.push("\n            </ul>\n            "),isOwnProfile&&__p.push('\n                <a class="button-alt add-influencer-invoke-search">Add an Influencer</a>\n            '),__p.push('\n            <div class="influencer-of a-tab ',!tab||tab=="profile_1st_influencers"||tab=="profile_3rd_influencers"?"active":"",""),hasInfluencerOf||print(" empty-list"),__p.push('">\n                '),hasInfluencerOf?__p.push("\n                    ",amphetamine.view.renderUS("nick/influencerList",{isOwnProfile:isOwnProfile,users:influencers.influencerOf,context:"influencers-influencer-of"}),"\n                "):(__p.push('\n                    <p class="caption">\n                        ',isOwnProfile?"You haven't":displayName+" hasn't"," influenced anyone recently.\n                        "),isOwnProfile?__p.push('\n                            Engage with more users across the web to increase your True Reach. <a href="http://klout.com/corp/kscore">Learn more</a>\n                        '):__p.push('\n                            Increase your True Reach by engaging with more users across the web. <a href="http://klout.com/corp/kscore">Learn more</a>\n                        '),__p.push("\n                    </p>\n                ")),__p.push("\n            </div>\n            ");if(hasInfluencedBy||hasInfluencerOf||isOwnProfile)__p.push('\n                <div class="influenced-by a-tab ',tab=="profile_1st_influenced_by"||tab=="profile_3rd_influenced_by"?"active":"",""),hasInfluencedBy||print(" empty-list"),__p.push('">\n                    '),hasInfluencedBy?__p.push("\n                        ",amphetamine.view.renderUS("nick/influencerList",{isOwnProfile:isOwnProfile,users:influencers.influencedBy,context:"influenced-by"}),"\n                    "):(__p.push('\n                        <p class="caption">\n                            '),isOwnProfile?__p.push("\n                                Add influencers who've influenced you recently on Twitter, Facebook, and other networks!\n                            "):__p.push("\n                                ",displayName," hasn't been influenced by anyone recently.\n                            "),__p.push("\n                        </p>\n                    ")),__p.push("\n                </div>\n            ");__p.push("\n        </div>\n    </div>\n")}__p.push("")}return __p.join("")},amphetamine.t["nick/influentialAbout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var connectedNetworks=typeof connectedNetworks!="undefined"?connectedNetworks:null,backupName=arguments[0].userData?userData.firstName+" "+userData.lastName:"",hasTopics=typeof influentialAbout!="undefined"&&influentialAbout&&influentialAbout.count,name=typeof bioData=="undefined"?backupName.length?backupName:nick:bioData.name,firstName=name&&name.split(" ")[0];__p.push("\n<div",hasTopics?"":' class="empty-list"','>\n    <div class="section-header">\n        <h4 class="header-text">\n            '),hasTopics?__p.push("\n                Influential about ",this["view/round"]({number:influentialAbout.count}),"\n                ",this["view/pluralize"]({count:influentialAbout.count,word:"topic"}),"\n            "):__p.push("\n                Influential topics\n            "),__p.push("\n        </h4>\n    </div>\n    "),hasTopics?__p.push('\n        <div class="section-body">\n            ',this["topic/list"]({displayPlusK:isLoggedIn&&!isOwnProfile,displayRemove:!1,isPublic:!isLoggedIn,topics:influentialAbout.topics}),'\n        </div>\n        <div class="section-footer">\n            ',this["viral/nickBioInfluentialAbout"]({connectedNetworks:connectedNetworks,isOwnProfile:isOwnProfile,nick:nick,nickMapping:nickMapping,topics:influentialAbout.topics}),"\n        </div>\n    "):(__p.push('\n        <div class="section-body">\n            '),isOwnProfile?__p.push('\n                <p class="first">\n                    Klout has not detected a topic for you yet. Get started by adding a topic to yourself.\n                </p>\n            '):isLoggedIn?__p.push("\n                Did ",firstName," influence you about something? Add that topic for ",firstName,',\n                or check out some <a href="/#/topics">Featured Topics</a> for ideas!\n            '):__p.push("\n                    ",firstName," currently does not have any topics.\n            "),__p.push("\n        </div>\n        "),isLoggedIn&&__p.push('\n            <div class="section-footer empty-list">\n                <a class="add-topic-invoke-search button-alt">Add a topic</a>\n            </div>\n    ')),__p.push("\n</div>")}return __p.join("")},amphetamine.t["nick/kloutStyle"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div class="chart-section">\n    '),typeof kClass!="undefined"&&kClass&&__p.push('\n        <div class="section-header">\n            <div class="viral-header clearfix">\n                <h2 class="header-text">\n                    ',isOwnProfile?"You are":(typeof bioData!="undefined"&&bioData&&bioData.firstName)+" is","\n                    ",this["view/indefiniteArticle"]({word:kClass}),'\n                    <strong class="kclass">',kClass.replace("_"," "),'</strong>\n                </h2>\n                <span id="klout-style-virals" class="viral-unit">\n                    <a class="tw viral"></a>\n                    <a class="fb viral"></a>\n                    <a class="li viral"></a>\n                </span>\n            </div>\n        </div>\n    '),__p.push('\n    <div class="section-body chart">\n        <p class="header-caption">',typeof kClassDescription!="undefined"&&kClassDescription?kClassDescription:"","</p>\n        ");if(typeof kClassified!="undefined"&&kClassified){__p.push('\n            <div id="kclass-grid">\n                <div id="influence-matrix-container"></div>\n                <div id="influence-matrix">\n                    ');for(var i=0;i<kClassified.length;i++)__p.push('\n                        <div id="zone-',kClassified[i].id,'" class="zone">\n                            ',this["user/subList"]({disableHover:!0,rowSize:2,size:"mini",users:kClassified[i].users}),"\n                        </div>\n                    ");__p.push('\n                    <br class="clearer">\n                </div>\n            </div>\n        ')}__p.push("\n    </div>\n</div>")}return __p.join("")},amphetamine.t["nick/layout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="profile">\n    <div id="user-info" class="clearfix">\n        <div id="score"></div>\n        <div id="meta-info-soi">\n            <div id="meta-info"></div>\n            <div id="meta-sub-info">\n                <div id="topics-soi" class="clearfix">\n                    <div id="influencer-of" class="list-section"></div>\n                    <div id="influential-about" class="list-section"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div id="detail"></div>\n</div>');return __p.join("")},amphetamine.t["nick/simple"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var name=bioData?bioData.name:nick,score=scoreData&&scoreData.klout_score_norm;__p.push('\n\n<div id="home-simplev2">\n    <div id="content">\n        <div class="logo-tagline-profile">\n            <div class="avatar">\n            '),print(this["user/scoreFlag"]({score:score,size:"normal"})),__p.push('\n            <img class="userpic" src="/picture/n/',nick,'/small">\n            </div>\n            <div class="tagline">',name," has a Klout score of ",score,'.<br>What\'s yours?</div>\n        </div>\n        <div class="signup">\n            <img class="sash" src="',amphetamine.config&&amphetamine.config.staticServer,'images/sign-up-sash2.png" alt="Sign up">\n            <div class="buttons">\n                <a id="tw-connect" href="/oauth?from=profile&next=/user/',nick,'" class="login-btn"></a>\n                <div class="or">OR</div>\n                <a id="fb-connect" href="/oauth_fb?from=profile&next=/user/',nick,'" class="login-btn"></a>\n            </div>\n        </div>\n    </div>\n</div>')}return __p.join("")},amphetamine.t["nick/listMemberships"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var displayName=bioData.firstName?bioData.firstName:bioData.name,hasLists=typeof listMemberships!="undefined"&&listMemberships;__p.push('\n<div class="list-memberships list-section a-tab'),hasLists||print(" empty-list"),__p.push('">\n    '),hasLists?__p.push("\n        ",amphetamine.view.renderUS("nick/listOfLists",{lists:listMemberships.lists,type:"memberships"}),"\n    "):__p.push('\n        <p class="caption">\n            ',isOwnProfile?"You haven't":displayName+" hasn't"," been added to any lists\n        </p>\n    "),__p.push("\n</div>")}return __p.join("")},amphetamine.t["nick/listOfLists"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(typeof lists!="undefined"&&lists&&lists.length){__p.push('\n    <ul class="list-list">\n        ');for(var i=0,l=lists.length;i<l;i++)__p.push("\n        "),lists[i]&&(__p.push('\n            <li class="list list-row clearfix'),i==0&&print(" first"),__p.push('">\n                <div class="row-details two-col clearfix">\n                    ',amphetamine.view.renderUS("user/avatar",{user:lists[i].createdBy}),'\n                    <div class="user-info row-info">\n                        <hgroup class="row-header clearfix">\n                            <h3 class="name">\n                                <a class="list-link" href="/user/',lists[i].createdBy.nick||lists[i].createdBy,"/list/",lists[i].slug||lists[i].listId,'">\n                                    ',lists[i].name||"Klout List #"+lists[i].listId,"\n                                </a>\n                            </h3>\n                            "),type=="personal"&&typeof isOwnProfile!="undefined"&&isOwnProfile&&__p.push('\n                                <a class="delete-list" href="/#/list/delete/',lists[i].listId,'">\n                                    <img class="remove" src="',amphetamine.config&&amphetamine.config.staticServer,'images/circle-x-placeholder.png">\n                                </a>\n                            '),__p.push('\n                        </hgroup>\n                        <p class="list-info">\n                            ',lists[i].usersCount,"\n                            ",amphetamine.view.renderUS("view/pluralize",{count:lists[i].usersCount,word:"user"}),"\n                            "),type=="personal"&&typeof isOwnProfile!="undefined"&&isOwnProfile&&__p.push('\n                                | <a class="edit-list" href="/#/list/edit/',lists[i].listId,'">edit</a>\n                            '),__p.push('\n                        </p>\n                    </div>\n                </div>\n                <div class="row-aside">\n                    ',amphetamine.view.renderUS("user/subList",{maxDisplay:10,size:"micro",users:lists[i].users}),"\n                </div>\n            </li>\n        "));__p.push("\n    </ul>\n")}__p.push("")}return __p.join("")},amphetamine.t["nick/listsWrapper"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="tabsWrapper">\n    <ul class="tabs">\n        '),isOwnProfile?__p.push('\n            <li class="active"><a>Your lists</a></li>\n            <li><a>Lists you\'ve been added to</a></li>\n        '):__p.push('\n            <li class="active"><a>',bioData.firstName,"&#39;s lists</a></li>\n            <li><a>Lists ",bioData.firstName,"&#39;s been added to</a></li>\n        "),__p.push("\n    </ul>\n    "),isOwnProfile&&__p.push('\n        <a class="button-alt edit-list" href="/#/list/new">Create a new list</a>\n    '),__p.push('\n    <div class="lists"></div>\n    <div class="list-memberships"></div>\n</div>');return __p.join("")},amphetamine.t["nick/personalLists"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var displayName=bioData.firstName?bioData.firstName:bioData.name,hasLists=typeof lists!="undefined"&&lists&&lists.length;__p.push('\n<div class="personal-lists list-section a-tab active'),hasLists||print(" empty-list"),__p.push('">\n    '),hasLists&&__p.push("\n        ",amphetamine.view.renderUS("nick/listOfLists",{isOwnProfile:isOwnProfile,lists:lists,type:"personal"}),"\n    "),__p.push('\n    <div class="list-addition clearfix">\n        '),typeof authUser!="undefined"&&authUser&&authUser.twUid&&(__p.push("\n             "),hasLists||(__p.push('\n                <p class="caption">\n                    ',isOwnProfile?"You haven't":displayName+" hasn't"," created any lists.\n                    "),isOwnProfile&&__p.push('\n                        <a class="edit-list" href="/#/lists/new">Why not create one now?</a>\n                    '),__p.push("\n                </p>\n            ")),__p.push("\n        ")),__p.push("\n    </div>\n</div>")}return __p.join("")},amphetamine.t["nick/scoreAnalysis"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isRegistered=typeof userData!="undefined"&&userData,scoreData=typeof scoreData!="undefined"&&scoreData?scoreData:null;__p.push('\n<div id="score-analysis-chart"></div>\n<div id="score-analysis-section">\n    <div class="chart-section">\n        <div class="section-header">\n            <div class="viral-header clearfix">\n                <h2 class="header-text">Score Analysis</h2>\n            </div>\n            <p class="header-caption">\n                ',scoreData&&scoreData.rangeText&&scoreData.rangeText.kloutScore,'\n            </p>\n        </div>\n        <div class="section-body chart featured">\n            <div class="detail">\n                <h3 class="heading">',isOwnProfile?"Your ":"","Klout Score:</h3>\n                "),scoreData&&__p.push('\n                    <div class="score">',this["view/truncate"]({score:scoreData.klout_score||scoreData.klout_score_norm}),"</div>\n                "),__p.push('\n                <span id="viral_kloutScore" class="viral-unit clearfix">\n                    <a class="tw viral"></a>\n                    <a class="fb viral"></a>\n                </span>\n                <br class="clearer">\n                <div class="footnote">\n                    <p>\n                        The Klout Score measures influence on a scale of 1 to 100.\n                        <a href="/corp/kscore" target="_blank">Learn more</a>\n                    </p>\n                    <br class="clearer">\n                </div>\n            </div>\n            <div id="klout-score-chart" class="chart-content"></div>\n            <hr>\n        </div>\n    </div>\n    '),scoreData&&(__p.push('\n        <div class="chart-section stats">\n            <h2>90-day Activity</h2>\n                <div class="section tw">\n                    <h3><div class="service-button"></div> Twitter</h3>\n                    '),isRegistered&&!userData.twUid?isOwnProfile?__p.push('\n                            Connect your Twitter account for a more accurate Klout score.\n                            <br class="clearer">\n                            <a class="button-alt" href="/oauth">Connect</a>\n                    '):print("This person hasn't connected a Twitter account to their Klout account."):scoreData.networkStats&&scoreData.networkStats.tw?__p.push("\n                        <table>\n                            <tr>\n                                <th>Retweets</th>\n                                <td>",this["view/round2"]({number:scoreData.networkStats.tw.retweets}),'</td>\n                            </tr>\n                            <tr class="alt">\n                                <th>Mentions</th>\n                                <td>',this["view/round2"]({number:scoreData.networkStats.tw.mentions}),"</td>\n                            </tr>\n                            <tr>\n                                <th>Followers</th>\n                                <td>",this["view/round2"]({number:scoreData.networkStats.tw.followers}),'</td>\n                            </tr>\n                            <tr class="alt">\n                                <th>Following</th>\n                                <td>',this["view/round2"]({number:scoreData.networkStats.tw.following}),"</td>\n                            </tr>\n                        </table>\n                    "):print("We do not have Twitter activity statistics for this person."),__p.push('\n                </div>\n                <div class="section fb">\n                    <h3><div class="service-button fb"></div> Facebook</h3>\n                    '),isRegistered?userData.fbUid?print("Facebook activity statistics are coming soon."):isOwnProfile?__p.push('\n                                Connect your Facebook account for a more accurate Klout score.\n                                <br class="clearer">\n                                <a class="button-alt" href="/fb_init">Connect</a>\n                    '):print("This person hasn't connected a Facebook account to their Klout account."):__p.push('\n                        This person has not yet registered for Klout.\n                        <br class="clearer">\n                        <a class="button-alt stats-invite">Invite to Klout</a>\n                    '),__p.push('\n                </div>\n                <div class="section gp">\n                    <h3><div class="service-button gp"></div>Google+</h3>\n                    '),isRegistered?userData.gpUid&&scoreData.networkStats&&scoreData.networkStats.gp?__p.push("\n                            <table>\n                                <tr>\n                                    <th>+1s</th>\n                                    <td>",this["view/cap10k"]({number:scoreData.networkStats.gp.plusones}),'</td>\n                                </tr>\n                                <tr class="alt">\n                                    <th>Comments</th>\n                                    <td>',this["view/cap10k"]({number:scoreData.networkStats.gp.comments}),"</td>\n                                </tr>\n                                <tr>\n                                    <th>Reshares</th>\n                                    <td>",this["view/cap10k"]({number:scoreData.networkStats.gp.reshares}),'</td>\n                                </tr>\n                                <tr>\n                                    <th colspan="2" class="disclaimer">Values are for public posts only.</th>\n                                </tr>\n                            </table>\n                    '):isOwnProfile?__p.push('\n                                Connect your Google+ account for a more accurate Klout score.\n                                <br class="clearer">\n                                <a class="button-alt" href="/oauth/gp">Connect</a>\n                    '):print("This person hasn't connected a Google+ account to their Klout account."):__p.push('\n                        This person has not yet registered for Klout.\n                        <br class="clearer">\n                        <a class="button-alt stats-invite">Invite to Klout</a>\n                    '),__p.push("\n                </div>\n            <hr>\n        </div>\n    ")),__p.push('\n\n    <div class="chart-section">\n        <div class="section-header">\n            <div id="true-reach-insights" class="score-insight clearfix"></div>\n        </div>\n        <div class="section-body chart">\n            <div class="detail">\n                <div class="insights">\n                    '),scoreData&&__p.push('\n                        <h3 class="header">',isOwnProfile?"Your ":"",'True Reach:</h3>\n                        <div class="metric">',this["view/round"]({number:scoreData.true_reach}),'</div>\n                        <div id="viral_trueReach" class="viral-unit clearfix">\n                            <a class="tw viral"></a>\n                            <a class="fb viral"></a>\n                        </div>\n                         <div class="footnote">\n                            <p>\n                                True Reach is the number of people you influence, both within your immediate network and\n                                across their extended networks.\n                            </p>\n                            <br class="clearer">\n                        </div>\n                    '),__p.push('\n                </div>\n            </div>\n            <div id="true-reach-chart" class="chart-content"></div>\n            <hr>\n        </div>\n    </div>\n\n    <div class="chart-section">\n        <div class="section-header">\n            <div id="amplification-insights" class="score-insight clearfix"></div>\n        </div>\n        <div class="section-body chart">\n            <div class="detail">\n                <div class="insights">\n                    '),scoreData&&__p.push('\n                        <h3 class="header">',isOwnProfile?"Your ":"",'Amplification:</h3>\n                        <div class="metric">',this["view/round"]({number:scoreData.amplification_norm}),'</div>\n                        <div id="viral_amplification" class="viral-unit clearfix">\n                            <a class="tw viral"></a>\n                            <a class="fb viral"></a>\n                        </div>\n                        <div class="footnote">\n                            <p>Amplification indicates how much you influence people.</p>\n                            <br class="clearer">\n                        </div>\n                    '),__p.push('\n                </div>\n            </div>\n            <div id="amplification-chart" class="chart-content"></div>\n            <hr>\n        </div>\n    </div>\n\n    <div class="chart-section">\n        <div class="section-header">\n            <div id="network-insights" class="score-insight clearfix"></div>\n        </div>\n        <div class="section-body chart">\n            <div class="detail">\n                <div class="insights">\n                    '),scoreData&&__p.push('\n                        <h3 class="header">',isOwnProfile?"Your ":"",'Network:</h3>\n                        <div class="metric">',this["view/round"]({number:scoreData.network_norm}),'</div>\n                        <div id="viral_network" class="viral-unit clearfix">\n                            <a class="tw viral"></a>\n                            <a class="fb viral"></a>\n                        </div>\n                        <div class="footnote">\n                            <p>Network Impact measures the influence of your network.</p>\n                            <br class="clearer">\n                        </div>\n                    '),__p.push('\n                </div>\n            </div>\n            <div id="network-chart" class="chart-content"></div>\n        </div>\n    </div>\n</div>')}return __p.join("")},amphetamine.t["nick/topicRowContent"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var MILLIS_PER_HOUR=36e5,MILLIS_PER_DAY=MILLIS_PER_HOUR*24,REQUIRED_PLUSK=5,remainingDays,remainingHours,remainingPlusks,topic_=topic.topic_;__p.push('\n<div class="row-details two-col">\n    ',amphetamine.view.renderUS("topic/icon",{showSash:!0,topic:topic_}),'\n    <div class="topic-info row-info clearfix">\n        <hgroup class="row-header clearfix'
,isOwnProfile?" perkEligibility":"",'">\n            <h3 class="name">\n                ',this["topic/link"]({topic:topic_}),"\n            </h3>\n            "),!topic.hidden&&isOwnProfile?__p.push('\n                <img src="',amphetamine.config&&amphetamine.config.staticServer,'images/circle-x-placeholder.png" class="remove">\n            '):isOwnProfile||(__p.push('\n                <div class="plusK',topic.canPlusK?" tid"+topic.id:"",'">\n                    <div class="hovercard">\n                        Give +K if <strong>',user.name,"</strong>\n                        influenced you recently about <strong>",topic_.display,'</strong>.\n                    </div>\n                    <a href="/topics/plusk/',topic.id,'" class="plus-k-button'),amphetamine.user.canPlusK(topic.id)||__p.push(" inactive"),__p.push('"></a>\n                </div>\n            ')),__p.push("\n        </hgroup>\n        "),topic.hidden&&isOwnProfile&&__p.push('\n            <a class="button-primary restore-topic">Restore</a>\n        '),__p.push('\n        <div class="influence-meter clearfix">\n            <div class="meter">\n                <p class="hovercard">\n                    Topic strength is measured by +K and content analysis performed across the social web.\n                    '),isOwnProfile||__p.push("\n                        <br><br>\n                        Give +K if <strong>",user.name,"</strong>\n                        recently influenced you about <strong>",topic_.display,"</strong>.\n                    "),__p.push('\n                </p>\n                <div class="days"></div>\n            </div>\n            <span class="message',isOwnProfile?" perkEligibility":"",'">\n                <p class="hovercard">\n                    You\'re eligible for Klout Perks in this topic.\n                </p>\n                '),topic.daysRemaining<=23?__p.push("\n                    <span>LOW</span>\n                "):topic.daysRemaining<=45?__p.push('\n                    <span class="perkBox">MEDIUM</span>\n                '):topic.daysRemaining<=67?__p.push('\n                    <span class="perkBox">HIGH</span>\n                '):topic.daysRemaining<=72?__p.push('\n                    <span class="perkBox">STRONG</span>\n                '):__p.push('\n                    <span class="perkBox">STRONG</span>\n                '),__p.push('\n            </span>\n            <br class="clearer">\n        </div>\n        ',this["viral/topicPlusKRequest"]({isOwnProfile:isOwnProfile,ksUid:ksUid,name:user.name,nick:nick,tid:topic.id,topic:topic_.display}),'\n    </div>\n</div>\n<div class="row-aside">\n    <div class="vouchers">\n        '),topic.plusKers&&topic.plusKers.length?__p.push('\n            <h4 class="header-text">Recent +Ks</h4>\n            ',this["user/voucherList"]({maxDisplay:5,topic_:topic_,users:topic.plusKers}),"\n        "):(__p.push('\n            <div class="no-vouchers">\n            '),isOwnProfile?(__p.push("\n                "),user.connectedServices&&topic.addedBy==user.connectedServices.ksUID?__p.push("\n                    You've added ",this["topic/link"]({topic:topic_})," as a topic.\n                "):__p.push("\n                    Klout believes you are influential about ",this["topic/link"]({topic:topic_}),".\n                "),__p.push("\n            ")):(__p.push("\n                "),user.connectedServices&&topic.addedBy==user.connectedServices.ksUID?__p.push("\n                    ",this["user/profileLink"]({user:user})," added ",this["topic/link"]({topic:topic_})," as a topic.\n                    Give +K if you agree.\n                "):__p.push("\n                    Give +K if ",this["user/profileLink"]({user:user})," has influenced you recently about ",this["topic/link"]({topic:topic_}),".\n                "),__p.push("\n            ")),__p.push("\n            </div>\n        ")),__p.push("\n    </div>\n</div>")}return __p.join("")},amphetamine.t["nick/topics"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var hasTopics=typeof topics!="undefined"&&topics&&topics.length,numTopics=hasTopics?topics.length:"no";__p.push('\n<div class="topic-lists">\n    <div id="topix" class="tabsWrapper">\n        <div class="topics">\n            <div class="section">\n                <div class="section-header">\n                    <div class="viral-header clearfix">\n                        '),hasTopics?__p.push('\n                            <h2 class="header-text">\n                                ',isOwnProfile?"You are influential about":(bioData.firstName||bioData.name)+" is influential about","\n                                ",numTopics," ",this["view/pluralize"]({count:isNaN(+numTopics)?0:numTopics,word:"topic"}),'\n                                <span class="help">\n                                    <img class="question-icon" src="/images/question-mark-new.png">\n                                    <span class="hovercard">\n                                        Topics are added when Klout automatically finds topics that users engage with you about or when a user directly adds a topic.\n                                    </span>\n                                </span>\n                            </h2>\n                        '):__p.push('\n                            <h2 class="header-text">\n                                ',isOwnProfile?"You do not":(bioData.firstName||bioData.name)+" does not",' have any topics\n                                <span class="help">\n                                    <img class="question-icon" src="/images/question-mark-new.png">\n                                    <span class="hovercard">\n                                        Topics are added when Klout automatically finds topics that users engage with you about or when a user directly adds a topic.\n                                    </span>\n                                </span>\n                            </h2>\n                        '),__p.push('\n                        <span class="add-topic-disabled">\n                            <a class="',!hasTopics||numTopics<maxTopics?"button-alt add-topic-invoke-search":"button-secondary",'">\n                                Add a Topic\n                            </a>\n                            '),numTopics>=maxTopics&&(__p.push('\n                                <span class="hovercard">\n                                    Sorry, ',isOwnProfile?"you've":(bioData.firstName||bioData.name)+" has"," reached the maximum of 20 topics.\n                                    "),isOwnProfile&&__p.push("\n                                        Please remove a topic first if you would like to add a new one.\n                                    "),__p.push("\n                                </span>\n                            ")),__p.push("\n                        </span>\n                    </div>\n                </div>\n                "),hasTopics?__p.push('\n                    <div class="section-body">\n                        ',this["nick/topicsList"]({bioData:bioData,isOwnProfile:isOwnProfile,ksUid:ksUid,nick:nick,topics:topics}),"\n                    </div>\n                "):__p.push('\n                    <div class="section-body">\n                        ',isOwnProfile?"Topics are subjects that you are influential about. Topics can be added either directly by the user or by Klout based on your content. Once you have topics, others can recognize your influence by giving you +Ks.<br><br>Get started by adding a topic for yourself.":"Be the first to add a topic for "+(bioData.firstName||bioData.name)+".","\n                    </div>\n                "),__p.push("\n            </div>\n        </div>\n    </div>\n</div>")}return __p.join("")},amphetamine.t["nick/topicList"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(typeof topics!="undefined"&&topics&&topics.length){__p.push('\n    <ul class="topic-list">\n        ');for(var i=0,l=topics.length;i<l;i++)__p.push("\n        "),topics[i]&&(__p.push('\n            <li class="list list-row clearfix'),i==0&&print(" first"),__p.push('">\n                <div class="row-details clearfix">\n                    ',amphetamine.view.renderUS("topic/icon",{topic:topics[i].topic}),'\n                    <div class="user-info row-info">\n                        <h3 class="name">\n                            ',this["topic/link"]({topic:topics[i].topic_}),"\n                        </h3>\n                        "),topics[i].description&&__p.push('\n                            <p class="description">',topics[i].description,"</p>\n                        "),__p.push('\n                        <p class="list-info">\n                            ',topics[i].usersCount,"\n                            ",amphetamine.view.renderUS("view/pluralize",{count:topics[i].usersCount,word:"user"}),"\n                            |\n                            "),type=="memberships"?print("Created by "+topics[i].createdBy.name):print("Created on "+amphetamine.view.renderUS("view/formatDate",{date:topics[i].date})),__p.push('\n                        </p>\n                    </div>\n                </div>\n                <div class="row-aside">\n                    ',amphetamine.view.renderUS("user/subList",{maxDisplay:5,size:"micro",users:topics[i].plusKers}),"\n                </div>\n            </li>\n        "));__p.push("\n    </ul>\n")}__p.push("")}return __p.join("")},amphetamine.t["nick/topicsList"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<ul class="topics-list">\n    ');for(var i=0;i<topics.length;i++)__p.push('\n        <li id="tid',topics[i].id,'" class="topic list list-row clearfix">\n            ',this["nick/topicRowContent"]({isOwnProfile:isOwnProfile,ksUid:ksUid,nick:nick,topic:topics[i],user:bioData}),"\n        </li>\n    ");__p.push("\n</ul>")}return __p.join("")},amphetamine.t["nick/upcomingPerk"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<h2 class="offer" id="dashboard-upcoming-perk-title">You have a Perk launching soon<a class="dashboard-close">close</a></h2>\n<br class="clearer">\n<div class="section-body">\n    <ul class="perk-list">\n        <li class="list-row clearfix" >\n            <div class="row-details clearfix">\n                <div class="perk-pic">\n                    <a class="perk-link" href="#/perk/',upcomingPerk.client.nameShort,"/",upcomingPerk.campaign.nameShort,'">\n                        <img class="perk-image" src=',upcomingPerk.details.imageUrl,'>\n                    </a>\n                </div>\n                <div class="perk-info">\n                    <h3 class="header-text">\n                        <a class="perk-link" href="#/perk/',upcomingPerk.client.nameShort,"/",upcomingPerk.campaign.nameShort,'">\n                            '),upcomingPerk.details.heading.length?__p.push("\n                                ",upcomingPerk.details.heading,"\n                            "):__p.push("\n                                ",upcomingPerk.campaign.name,"\n                            "),__p.push('\n                        </a>\n                    </h3>\n                    <div class="description null-styles">\n                        ',upcomingPerk.details.description,'\n                    </div>\n                </div>\n            </div>\n            <div class="row-aside">\n                <div id="dashboard-upcoming-perk-fb-like"></div>\n                <p>Like this perk to be notified as soon as it launches.</p>\n            </div>\n        </li>\n    </ul>\n</div>');return __p.join("")},amphetamine.t["privacy/optOutForm"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<form id="deactivate-account-form" action="/">\n    <fieldset class="section first">\n        <div class="section-header">\n            <h3 class="header-text">Reason you\'re leaving <span class="required">(Required)</span></h3>\n        </div>\n        <div class="section-body">\n            <input type="radio" id="deactivate-reason-0" class="radio-button" name="deactivate-reason" value="0" />\n            <label class="radio-label" for="deactivate-reason-0">I don\'t find Klout useful</label>\n            <input type="radio" id="deactivate-reason-1" class="radio-button" name="deactivate-reason" value="1" />\n            <label class="radio-label" for="deactivate-reason-1">I am concerned with privacy</label>\n            <input type="radio" id="deactivate-reason-2" class="radio-button" name="deactivate-reason" value="2" />\n            <label class="radio-label" for="deactivate-reason-2">I don\'t understand how to use Klout</label>\n            <input type="radio" id="deactivate-reason-3" class="radio-button" name="deactivate-reason" value="3" />\n            <label class="radio-label" for="deactivate-reason-3">I expected better perks</label>\n            <input type="radio" id="deactivate-reason-4" class="radio-button" name="deactivate-reason" value="4" />\n            <label class="radio-label" for="deactivate-reason-4">I am unhappy with my Klout score</label>\n            <input type="radio" id="deactivate-reason-5" class="radio-button" name="deactivate-reason" value="5" />\n            <label class="radio-label" for="deactivate-reason-5">This is temporary. I\'ll be back</label>\n            <input type="radio" id="deactivate-reason-6" class="radio-button" name="deactivate-reason" value="6" />\n            <label class="radio-label" for="deactivate-reason-6">Other</label>\n        </div>\n    </fieldset>\n    <fieldset class="section">\n        <div class="section-header">\n            <h3 class="header-text">Further explanation</h3>\n        </div>\n        <div class="section-body">\n            <textarea id="deactivate-reason-text" name="deactivate-reason-text"></textarea>\n        </div>\n    </fieldset>\n    <fieldset class="section">\n        <div class="section-header">\n            <h3 class="header-text">Are you sure you\'d like to opt out of Klout?</h3>\n        </div>\n        <div class="section-body">\n            <div class="tos-confirmation clearfix">\n                <p>\n                    Once you opt-out you will be removed from Klout.com within 24-48 hours. You will be removed from our\n                    API within 7 days. Traces of your data may be in our scoring system for up to 180 days after opting out.\n                    If you decide to opt back into Klout you will have to sign up again and it will take at least 90 days for us to\n                    accurately measure your influence.\n                </p>\n                <label class="text-label" for="opt-out-signature">Name <span class="required">(Required)</span></label>\n                <input type="text" id="opt-out-signature" class="text-field" name="opt-out-signature" value="Please sign your name here" />\n            </div>\n            <div class="form-actions">\n                <a class="cancel-link">Cancel</a> or\n                <a class="submit-link">Submit</a>\n            </div>\n        </div>\n    </fieldset>\n</form>');return __p.join("")},amphetamine.t["privacy/privacyInfo"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="klout-benefits"'),typeof hide!="undefined"&&hide&&print(' style="display: none;"'),__p.push('>\n    <div class="section first">\n        <div class="section-header">\n            <h2 class="header-text">Klout Values Individuals</h2>\n        </div>\n        <div class="section-body">\n            Everyone has Klout and we believe you should be recognized for it. Our mission is to help you understand\n            that influence and use it to make your life better.\n        </div>\n    </div>\n    <div class="section">\n        <div class="section-header">\n            <h2 class="header-text">Klout Perks</h2>\n        </div>\n        <div class="section-body">\n            Klout Perks are exclusive products or experiences you earn based on your influence. Past Perks include\n            laptops, international roundtrip flights, and pre-release movie screenings.\n            <a href="/#/perks">Check out the Perks you qualify for</a>.\n        </div>\n    </div>\n    <div class="section">\n        <div class="section-header">\n            <h2 class="header-text">VIP Treatment</h2>\n        </div>\n        <div class="section-body">\n            Businesses are starting to recognize the power of influencers to affect their brand. Your Klout can get\n            you upgrades at hotels, free drinks in casinos, and upgraded flights. If you opt out of Klout, businesses\n            will no longer be able to reward your influence.\n        </div>\n    </div>\n    <div class="section">\n        <div class="section-header">\n            <h2 class="header-text">We Value Your Privacy</h2>\n        </div>\n        <div class="section-body">\n            Klout only analyzes public data or data that we are given explicit access to. We never share your private\n            information with any third party or brand and you can control the information that we make available on\n            your Klout profile page.\n        </div>\n    </div>\n    <div class="section">\n        <div class="section-body">\n            <a class="profile-link button-primary" href="/#/profile">Nevermind I\'d like to keep my Klout</a>\n            or\n            <a class="opt-out-link">Continue opting-out</a>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["friends/friendList"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var isUnregFbOnly,user;if(users!=null&&users.length){__p.push('\n    <ul class="user-list">\n        ');for(var i=0;i<users.length;i++)user=users[i],isUnregFbOnly=!arguments[0].nux&&user.fbUid&&!user.twUid&&(typeof user.registered!="undefined"&&!user.registered||!user.ksUid||!user.nick),__p.push('\n            <li class="friend list-row clearfix',i?"":" prime",'">\n                '),isUnregFbOnly&&__p.push('\n                    <div class="callout fb-unregistered">\n                        <a class="button-alt">Invite</a>\n                    </div>\n                '),__p.push("\n                ",amphetamine.view.renderUS("user/rowProfile",{disableInvite:isUnregFbOnly,user:user}),'\n                <div class="row-aside">\n                    ',amphetamine.view.renderUS("topic/list",{displayPlusK:amphetamine.user&&amphetamine.user.nick!=user.nick,nick:user.nick,name:user.name,topics:user.topics}),"\n                </div>\n            </li>\n        ");__p.push("\n    </ul>\n")}__p.push("")}return __p.join("")},amphetamine.t["friends/networkFriends"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),typeof network!="undefined"&&network=="fb"?(__p.push("\n    "),typeof friends=="undefined"&&__p.push('\n    <div id="friendListLoading" class="overlay-loading"><img src="images/loading.gif"></div>\n    '),__p.push('\n    <div id="fb-friends" class="list-section">\n        <div class="section-header">\n            <h2 class="header-text">Facebook Friends</h2>\n            <p class="header-caption">\n            '),typeof friends=="undefined"?__p.push("\n            We're currently loading and sorting your Facebook friends.<br />This may take up to a minute for users with more than 1,000 friends\n            "):__p.push("\n            These are your most influential friends on Facebook.\n            "),__p.push("\n            </p>\n        </div>\n")):typeof network!="undefined"&&network=="tw"?(__p.push("\n    "),typeof friends=="undefined"&&__p.push('\n    <div id="friendListLoading" class="overlay-loading"><img src="images/loading.gif"></div>\n    '),__p.push('\n    <div id="twitter-follows" class="list-section">\n        <div class="section-header">\n            <h2 class="header-text">Twitter Follows</h2>\n            <p class="header-caption">\n            '),typeof friends=="undefined"?__p.push("\n            We're currently loading and sorting your Twitter follows.<br />This may take up to a minute for users who follow more than 1,000 users\n            "):__p.push("\n            These are the most influential users you follow on Twitter.\n            "),__p.push("\n            </p>\n        </div>\n")):typeof date!="undefined"&&date?(__p.push('\n    <div id="list-users" class="list-section">\n        <div class="section-header">\n            <div class="viral-header clearfix">\n                <h2 class="header-text">\n                    ',typeof name!="undefined"&&name?name:"Klout List #"+listId,'\n                </h2>\n                <span id="list-virals" class="viral-unit">\n                    <a class="tw viral"></a>\n                    <a class="fb viral"></a>\n                    <a class="li viral"></a>\n                </span>\n            </div>\n            '),typeof description!="undefined"&&description&&description.length&&__p.push('\n                <p class="header-caption">',description,"</p>\n            "),__p.push("\n        </div>\n")):__p.push("\n    <div>\n"),__p.push("\n    "),arguments[0].friends&&!arguments[0].listId&&(__p.push('\n        <ul id="friend-list-tabs" class="tabs">\n            '),arguments[0].network=="tw"?__p.push('\n                <li class="tab',typeof sortByScore=="undefined"||!sortByScore.tw?" active":"",'"><a>Recently Followed</a></li>\n                <li class="tab',typeof sortByScore!="undefined"&&sortByScore.tw?" active":"",' by-score"><a>Highest Klout Score</a></li>\n            '):__p.push('\n                <li class="tab',typeof sortByScore=="undefined"||!sortByScore.fb?" active":"",'"><a>Alphabetical</a></li>\n                <li class="tab',typeof sortByScore!="undefined"&&sortByScore.fb?" active":"",' by-score"><a>Highest Klout Score</a></li>\n            '),__p.push("\n        </ul>\n    ")),__p.push('\n    <div class="section-body',arguments[0].friends&&!arguments[0].listId?" friend-list":"",'">\n        '),typeof error!="undefined"&&error&&(typeof listId=="undefined"||typeof listId!="undefined"&&listId==null)?(__p.push('\n            <p class="error">\n                We didn\'t find any of\n                '),typeof network!="undefined"&&network=="fb"?__p.push("\n                    your friends on Facebook.\n                "):typeof network!="undefined"&&network=="tw"&&__p.push("\n                    your follows on Twitter. Your Tweet Stream may be protected.\n                "),__p.push("\n                If this is an error, please try reloading the page.\n            </p>\n        ")):typeof friends!="undefined"&&friends&&friends.length&&__p.push("\n            ",amphetamine.view.renderUS("friends/friendList",{users:friends}),"\n        "),__p.push("\n    </div>\n</div>");return __p.join("")},amphetamine.t["toaster/toaster"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="toaster">\n    <div class="toast"'),typeof id!="undefined"&&__p.push(' id="',id,'"'),__p.push('">\n        <a class="close-toast"></a>\n        <div class="contents">\n            '),typeof content=="string"?__p.push("\n                ",content,"\n            "):__p.push("\n                ",this["toaster/"+id]?this["toaster/"+id](content):"","\n            "),__p.push("\n        </div>\n    </div>\n</div>");return __p.join("")},amphetamine.t["toaster/improved-plusk"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<p><strong>We\'ve improved +K!</strong></p>\n<p class="plusk">\nYour +Ks are now saved every day. Check back soon for lots more things you can use your +Ks for!\n</p>');return __p.join("")},amphetamine.t["toaster/walletGrant-plusKGet"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<p><strong>More +Ks</strong></p>\n<p class="plusk">\nYou received ',subject.walletChange," +K",subject.walletChange>1?"s":""," from other influencers while you were away!\n</p>");return __p.join("")},amphetamine.t["toaster/walletGrant-profileVisit"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<p><strong>Profile visit</strong></p>\n<p class="plusk">\nYou received ',subject.walletChange," +K",subject.walletChange>1?"s":""," for visiting profiles!\n</p>");return __p.join("")},amphetamine.t["toaster/walletGrant-siteVisit"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<p><strong>Welcome back!</strong></p>\n<p class="plusk">\nYou received ',subject.walletChange," +K",subject.walletChange>1?"s":""," for visiting Klout.com\n</p>");return __p.join("")},amphetamine.t["toaster/walletGrant-achievement"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<p><strong>Mazel tov!</strong></p>\n<p class="plusk">\nYou received ',subject.walletChange," +K",subject.walletChange>1?"s":""," for doing something awesome.\n</p>");return __p.join("")},amphetamine.t["toaster/walletSpend"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<p><strong>You spent +K</strong></p>\n<p class="plusk">\nYou spent +K.\n</p>');return __p.join("")},amphetamine.t["toaster/walletSpend-addTopic"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<p><strong>You spent +K</strong></p>\n<p class="plusk">\nYou spent ',subject.walletChange," +K.\n</p>");return __p.join("")},amphetamine.t["ugc/perksPromptForUGCList"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");for(var j=0;j<perksToPromptFor.length;j++)__p.push('\n    <li class="list list-row ugcPrompt clearfix'),j==0&&print(" first"),__p.push('">\n        <div class="row-details two-col clearfix">\n            ',this["user/avatar"]({user:perksUGCUsers["0,"+userId]}),'\n            <div class="row-info">\n                <p class="text">\n                    '),isOwnProfile||view=="perk"?__p.push('\n                        You participated in the <a href="/perk',perksToPromptFor[j].slug,'">',perksToPromptFor[j].headline,"</a> perk. Let us know what you thought!\n                    "):__p.push("\n                        ",bioData.name,' participated in the <a href="/perk',perksToPromptFor[j].slug,'">',perksToPromptFor[j].headline,"</a> perk but hasn't left feedbeck yet.\n                    "),__p.push('\n                </p>\n            </div>\n        </div>\n        <div class="row-aside">\n            '),isOwnProfile||view=="perk"?__p.push('\n                <a href="/#/perk',perksToPromptFor[j].slug,'/AddPerkUGC" class="button-primary addPerkUGC">Leave Feedback</a>\n                <a href="/#/DeclinePerkUGC/',perksToPromptFor[j].campaignId,"/",userId,'" class="declinePerkUGC">No Thanks</a>\n            '):__p.push('\n<!--\n                <a class="fb viral-nostyle button button-alt">Let them know!</a>\n                <input type="hidden" name="viralMessage" value="',bioData.name,", I want to know what you thought of the ",perksToPromptFor[j].headline,' perk!">\n                <input type="hidden" name="viralEvent" value="">\n-->\n            '),__p.push("\n            \n        </div>\n    </li>\n");__p.push("")}return __p.join("")},amphetamine.t["ugc/perksUGCList"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<ul class="perksUGC-list">\n    '),isOwnProfile&&__p.push("\n        ",amphetamine.view.renderUS("ugc/perksPromptForUGCList",{isOwnProfile:isOwnProfile,bioData:bioData,perksUGCUsers:perksUGCUsers,view:view,perksToPromptFor:perksToPromptFor,userId:userId}),"\n    "),__p.push("\n    ");if(typeof perksUGC!="undefined"&&perksUGC&&perksUGC.length){__p.push("\n        ");for(var i=0;i<perksUGC.length;i++){__p.push("\n            ");if(perksUGC[i]&&(perksUGC[i].state=="public"||perksUGC[i].state=="moderated")){__p.push('\n                <li class="list list-row clearfix'),i==0&&print(" first"),__p.push('">\n                    <div class="row-details two-col clearfix">\n                        ',this["user/avatar"]({user:perksUGCUsers["0,"+perksUGC[i].userId]}),'\n                        <div class="row-info">\n                            <p class="text">',isOwnProfile&&view=="nick"?"You":perksUGCUsers["0,"+perksUGC[i].userId].name,' rated a perk from <a href="/perk/',perkInfos[perksUGC[i].campaignId].clientShortName,"/",perkInfos[perksUGC[i].campaignId].campaignShortName,'">',perkInfos[perksUGC[i].campaignId].clientName,'</a></p>\n                            <div class="starContainer">\n                                ');for(var j=1;j<=5;j++)__p.push('\n                                    <input type="radio" class="star" name="rating',perksUGC[i].campaignId,"",perksUGC[i].userId,'" value="',j,'" disabled="disabled" '),j==perksUGC[i].rating&&__p.push(' checked="checked" '),__p.push(" />\n                                ");__p.push('\n                                <br class="clearer" />\n                            </div>\n                            '),perksUGC[i].message.length&&__p.push('\n                                <p class="text message">&#8220;',perksUGC[i].message,"&#8221;</p>\n                            "),__p.push("\n                            ");if(perksUGC[i].attachments.length){__p.push('\n                                <ul class="ugcThumbnailList">\n                                    ');for(var j=0;j<perksUGC[i].attachments.length;j++)__p.push('\n                                        <li style="background: url(',perksUGC[i].attachments[j].thumbnailUrl,') no-repeat;"><a href="',perksUGC[i].attachments[j].url,'" rel="',perksUGC[i].userId,"",perksUGC[i].campaignId,'"></a></li>\n                                    ');__p.push('\n                                </ul>\n                                <br class="clearer" />                     \n                            ')}__p.push('\n                            <div class="ugcTimeStampAndVirals">\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row-aside">\n                        '),view=="nick"?(__p.push("\n                            "),perkInfos[perksUGC[i].campaignId].image.length&&__p.push('\n                                Review of:\n                                <a href="/perk/',perkInfos[perksUGC[i].campaignId].clientShortName,"/",perkInfos[perksUGC[i].campaignId].campaignShortName,'">\n                                    <img src="',perkInfos[perksUGC[i].campaignId].image,'" width="130" />\n                                </a>                            \n                            '),__p.push("\n                        ")):(__p.push("\n                            "),influencerOfs[perksUGCUsers["0,"+perksUGC[i].userId].nick].length&&__p.push("\n                                Influences:\n                                ",this["user/subList"]({size:"micro",users:influencerOfs[perksUGCUsers["0,"+perksUGC[i].userId].nick]}),"\n                            "),__p.push("                            \n                        ")),__p.push("\n                    </div>\n                </li>\n            ")}__p.push("\n        ")}__p.push("\n    ")}else view=="perk"&&__p.push('\n        <div class="section-body">No one has reviewed this perk yet.</div>\n    ');__p.push("\n    "),isOwnProfile||__p.push("\n        ",amphetamine.view.renderUS("ugc/perksPromptForUGCList",{isOwnProfile:isOwnProfile,bioData:bioData,perksUGCUsers:perksUGCUsers,view:view,perksToPromptFor:perksToPromptFor,userId:userId}),"\n    "),__p.push("    \n</ul>")}return __p.join("")},amphetamine.t["ugc/perksUGC"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a id="refreshPerksUGC"></a>\n<div class="perksUGC-lists list-section">\n    '),view=="nick"&&(__p.push('\n        <div class="section-header">\n            '),perksUGC&&perksUGC.length||userPerks&&userPerks.length?__p.push('\n                <div class="viral-header clearfix">\n                    <h2 class="header-text">\n                        ',isOwnProfile?"You've":bioData.name," participated in ",userPerks.length," ",amphetamine.view.renderUS("view/pluralize",{count:userPerks.length,word:"perk"}),'\n                    </h2>\n                </div>\n                <p class="header-caption">\n                    '
,isOwnProfile?"Be sure to leave feedback so we can find the best perks for you!":'Visit our <a href="/perks">perks index</a> to see if we have any perks for you.',"\n                </p>\n            "):isOwnProfile?__p.push('\n                <h2 class="header-text">You haven\'t participated in any recent perks.</h2>\n                <div class="section-body">\n                    Don\'t worry, we\'re sure to have a perk that\'s just right for you soon!<br /><br />\n                    In the meantime, make sure that your <a href="/edit-settings/profile">profile is up-to-date</a> so that we can find the best perks for you.\n                </div>\n            '):isOwnProfile?__p.push('\n                <h2 class="header-text">You haven\'t participated in any recent perks.</h2>\n                <div class="section-body">\n                    Don\'t worry, we\'re sure to have a perk that\'s just right for you soon!<br /><br />\n                    In the meantime, make sure that your <a href="/edit-settings/profile">profile is up-to-date</a> so that we can find the best perks for you.\n                </div>\n             '):(__p.push("\n                "),userPerks&&userPerks.length?__p.push('\n                    <h2 class="header-text">\n                        ',bioData.name," has participated in ",userPerks.length," ",amphetamine.view.renderUS("view/pluralize",{count:perksUGC.length,word:"perk"}),"\n                    </h2>\n                    <div class=\"section-body\">\n                        But hasn't left feedback for any perks yet!  Why don't you let ",bioData.firstName," know?\n                    </div>\n                "):__p.push('\n                    <h2 class="header-text">\n                        ',bioData.firstName," has not participated in any recent perks.\n                    </h2>\n                "),__p.push("\n            ")),__p.push("\n        </div>\n    ")),__p.push('\n    <div class="section-body">\n        ',amphetamine.view.renderUS("ugc/perksUGCList",{perksUGC:perksUGC,isOwnProfile:isOwnProfile,bioData:bioData,perkInfos:perkInfos,perksUGCUsers:perksUGCUsers,view:view,influencerOfs:influencerOfs,perksToPromptFor:perksToPromptFor,userId:userId}),"\n    </div>\n</div>");return __p.join("")},amphetamine.t["perks/layout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="perksListingContainer" class="',alertMessage.enabled?"makeRoomForAlertBanner":"",'">\n    ',amphetamine.view.renderUS("perks/alertBanner",{alertMessage:alertMessage}),'\n    <div class="content-header clearfix">\n        <div id="perksLogo">\n            <a href="#/perks/featured"><img src="',amphetamine.config&&amphetamine.config.staticServer,'images/klout-perks-logo.png" width="218" height="33" border="0" /></a>\n        </div>\n        <span id="perksGeneralDescription">Klout Perks are exclusive products or experiences that you earn based on your influence.<br />Klout values your privacy. <a href="/corp/faq#doeskloutsharemyprivatedatawithadvertisers">Learn More</a></span>\n    </div>\n    <div id="featuredPerkContainer"></div>\n    <div class="content-body clearfix">\n        <div class="sidebar" class="vertical-bar">\n            ',amphetamine.view.renderUS("view/navigation",{tabs:tabs}),'\n        </div>\n        <div class="content-main"></div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["perks/alertBanner"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),alertMessage.enabled&&(__p.push('\n    <div id="perksAlertBanner">\n        <span class="message">\n            ',alertMessage.message,"\n        </span>\n        "),alertMessage.cta.enabled&&__p.push('\n            <a class="cta" href="',alertMessage.cta.href,'">',alertMessage.cta.text,"</a>\n        "),__p.push("\n    </div>\n")),__p.push("");return __p.join("")},amphetamine.t["perks/perksNav"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<ul class="navigation">\n    ');for(var i=0,ii=tabs.length;i<ii;++i)__p.push("\n        "),tabs[i].hr!=null?__p.push("\n            <li><hr /></li>\n        "):__p.push('\n            <li><a href="',tabs[i].href,'" class="nav-link ',tabs[i].domClass,'">',tabs[i].display,"</a></li>\n        "),__p.push("\n    ");__p.push("\n</ul>")}return __p.join("")},amphetamine.t["perks/ageGate"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="perks-age-gate">\n    <div id="ageGateError" class="error">&nbsp;</div>\n    <div class="content-body clearfix">\n        <input id="perks-age-gate-bday-month" placeholder="MM" maxlength="2" size="1" />\n        -\n        <input id="perks-age-gate-bday-day" placeholder="DD" maxlength="2" size="1" />\n        -\n        <input id="perks-age-gate-bday-year" placeholder="YYYY" maxlength="4" size="1" />\n    </div>\n    <br class="clearer">\n    <div id ="ageGateButtons" class="clearfix">\n        <a id=\'perks-age-gate-submit\' class="button button-primary" id>Submit</a>\n        <a id=\'perks-age-gate-cancel\' class="button-secondary" id>Cancel</a>\n    </div>\n    <br class="clearer">\n</div>');return __p.join("")},amphetamine.t["perks/header"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),filter=="current"?__p.push('\n    <div class="section-header">\n        <h1 class="header-text">Current Perks</h1>\n    </div>\n'):filter=="past"?__p.push('\n    <div class="section-header">\n        <h1 class="header-text">Past Perks</h1>\n    </div>\n'):filter=="upcoming"&&__p.push('\n    <div class="section-header">\n        <h1 class="header-text">Upcoming Perks</h1>\n    </div>\n'),__p.push("");return __p.join("")},amphetamine.t["perks/criteriaScore"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),perk.getMinScore()==0&&perk.getMaxScore()==100?__p.push("\n    All topical influencers\n"):perk.getMinScore()>0&&perk.getMaxScore()==100?__p.push("\n    Klout scores above ",perk.getMinScore(),"\n"):perk.getMinScore()==0&&perk.getMaxScore()<100?__p.push("\n    Klout scores below ",perk.getMaxScore(),"\n"):perk.getMinScore()>0&&perk.getMaxScore()<100&&__p.push("\n    Klout scores between ",perk.getMinScore()," and ",perk.getMaxScore(),"\n"),__p.push("");return __p.join("")},amphetamine.t["perks/criteriaTopics"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(perk.getTopics().length>0){__p.push('\n    <div class="criteria-topics">\n        ');var linkedTopics=perk.getTopics(),validTopics=[];for(var i=0,ii=linkedTopics.length;i<ii;++i)validTopics.push(this["topic/link"]({topic:{slug:linkedTopics[i].slug,display:linkedTopics[i].display}}));__p.push("\n        ",validTopics.join(", "),'\n        <br class="clearer" />\n        <p><a href="/#/',amphetamine.user.nick,'/topics">Medium strength topic influence required</a></p>\n    </div>\n')}__p.push("")}return __p.join("")},amphetamine.t["perks/criteriaLocations"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(perk.getLocations().length>0){__p.push('\n    <div class="criteria-locations">\n        ');for(var i=0,ii=perk.getLocations().length;i<ii;++i){__p.push("\n            ");var location=[],city=perk.getLocations()[i].city,state=perk.getLocations()[i].state,country=perk.getLocations()[i].country;city&&location.push(city),state&&location.push(state),country&&location.push(country),__p.push("\n            ",location.join(", "),"\n        ")}__p.push("\n    </div>\n")}__p.push("")}return __p.join("")},amphetamine.t["perks/socialEligibility"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(perk.getEligibilityFriendsCount()>0){__p.push("\n     ");var subListUsers=[];_.each(perk.getEligibilityFriends(),function(a,b){users["0,"+a]!=null&&subListUsers.push(users["0,"+a])}),__p.push("\n    ",amphetamine.view.renderUS("user/subList",{size:"micro",users:subListUsers}),'\n    <p class="eligibility">\n        ');if(perk.getNetwork()!=null){__p.push('\n            <span id="viral_perksIndex" class="viral-unit">\n                ');if(perk.isNetworkFb()){var names=[],firstName="",lastName="",name="";_.each(perk.getEligibilityFriends(),function(a,b){users["0,"+a]!=null&&(firstName=users["0,"+a].firstName!=null?users["0,"+a].firstName:"",lastName=users["0,"+a].lastName!=null?users["0,"+a].lastName:"",firstName.length&&lastName.length?name=firstName+" "+lastName:firstName.length&&!lastName.length?name=firstName:!firstName.length&&lastName.length?name=lastName:name="",names.push(name))});var andName=names.pop();names.length==0?names=andName:names=names.join(", ")+" and "+andName,__p.push('\n\n                    <a class="fb viral-nostyle button button-alt">Let them know!</a>\n                    <input type="hidden" name="viralMessage" value="Check out this Klout Perk from ',perk.getClient(),". ",names," earned it! ",perk.getHashtag(),'">\n                    <input type="hidden" name="viralRoute" value="',perk.getPerkUrl(),'">\n                    <input type="hidden" name="viralEvent" value="perks_index">\n                ')}else if(perk.isNetworkTw()){var nicks=[];_.each(perk.getEligibilityFriends(),function(a,b){users["0,"+a]!=null&&users["0,"+a].nick!=null&&nicks.push("@"+users["0,"+a].nick)}),nicks=nicks.join(" "),__p.push('\n                    <a class="tw viral-nostyle button button-alt">Let them know!</a>\n                    <input type="hidden" name="viralMessage" value="Check out this Klout Perk from ',perk.getClient(),". ",nicks," earned it. ",perk.getHashtag(),'">\n                    <input type="hidden" name="viralRoute" value="',perk.getPerkUrl(),'">\n                    <input type="hidden" name="viralEvent" value="perks_index">\n                ')}__p.push("\n            </span>\n        ")}__p.push("\n    </p>\n")}__p.push("")}return __p.join("")},amphetamine.t["perks/eligibility"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),perk.getStatus()=="expired"?__p.push('\n    <h4>Sorry, this perk is over.</h4>\n    <a href="',perk.getPerkUrl(),'" class="button button-alt over">Learn more</a>\n'):perk.getStatus()=="full"?__p.push('\n    <h4>Sorry, this perk is full.</h4>\n    <a href="',perk.getPerkUrl(),'" class="button button-alt full">Learn more</a>    \n'):perk.getStatus()=="preview"&&perk.isEligible()?__p.push('\n    <div id="upcoming-perk-fb-like-',perk.getUniqueId(),'" class="perkLike"></div>\n    <h4 class="likeText">Like this perk for priority access.</h4>\n'):perk.getStatus()=="preview"&&!perk.isEligible()?__p.push('\n    <a href="',perk.getPerkUrl(),'" class="button button-alt">Learn more</a>\n'):!perk.isEligible()&&!perk.getEligibilityFriendsCount()?__p.push('\n    <a href="',perk.getPerkUrl(),'" class="button button-alt">Learn more</a>\n'):perk.canClaimPerk()&&perk.isEligible()?(__p.push("\n    "),perk.getSpotsRemaining()&&__p.push('\n        <span class="numPerksRemaining">Only ',perk.getSpotsRemaining()," Left!</span>\n    "),__p.push('\n    <a href="',perk.getPerkUrl(),'" class="button button-primary eligible">Claim this perk!</a>\n')):perk.getStatus()=="completed"?__p.push('\n    <a href="',perk.getPerkUrl(),'" class="button button-primary imin">I\'m In!</a>\n'):__p.push("\n    ",amphetamine.view.renderUS("perks/socialEligibility",{perk:perk,users:users}),"\n"),__p.push("");return __p.join("")},amphetamine.t["perks/ineligibilityBlurb"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),!perk.isEligible()&&perk.getStatus()!="full"&&perk.getStatus()!="expired"&&(__p.push('\n    <h4 class="ineligibilityBlurb">Sorry, you\'re not eligible'),perk.getEligibilityFriendsCount()?__p.push(" but ",perk.getEligibilityFriendsCount()," of your friends are."):__p.push("."),__p.push(' <a href="#" class="eligibilityCriteriaHover">How to be eligible</a>\n    </h4>\n    <div class="eligibilityKloutScore">',amphetamine.view.renderUS("perks/criteriaScore",{perk:perk}),'</div>\n    <div class="eligibilityTopics">',amphetamine.view.renderUS("perks/criteriaTopics",{perk:perk}),'</div>\n    <div class="eligibilityLocations">',amphetamine.view.renderUS("perks/criteriaLocations",{perk:perk}),"</div>\n")),__p.push("");return __p.join("")},amphetamine.t["perks/sash"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),perk.getStatus()=="preview"&&__p.push('\n    <div class="sash upcoming">\n        <a href="',perk.getPerkUrl(),'"></a>\n    </div>\n'),__p.push("");return __p.join("")},amphetamine.t["perks/featuredPerk"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var hasFeaturedPerk=typeof perk!="undefined"&&perk!=null;__p.push("\n"),hasFeaturedPerk&&__p.push('\n    <ul class="perks-list">\n        <li class="perk">\n            <div class="perkImage">\n                <img src="',perk.getImageUrl(),'" />\n            </div>\n            <div class="perkTopHighlight">\n                <a href="',perk.getPerkUrl(),'"></a>\n            </div>\n            ',amphetamine.view.renderUS("perks/sash",{perk:perk}),'\n            <div class="perkInfoOverlay">\n                <table cellpadding="0" cellspacing="0">\n                    <tr>\n                        <td>\n                            <h2>\n                                <a href="',perk.getPerkUrl(),'">',perk.getHeading(),"</a>\n                            </h2>\n                            ",amphetamine.view.renderUS("perks/ineligibilityBlurb",{perk:perk,topics:topics}),'\n                        </td>\n                        <td>\n                            <div class="topRight">\n                                ',amphetamine.view.renderUS("perks/eligibility",{perk:perk,users:users}),"\n                            </div>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n        </li>\n    </ul>\n"),__p.push("")}return __p.join("")},amphetamine.t["perks/perksView"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div class="tab">\n    ');var hasPerks=typeof perks!="undefined"&&perks!=null&&perks.length;__p.push("\n    ");if(hasPerks){__p.push('\n        <div class="list-section">\n            ',amphetamine.view.renderUS("perks/header",{filter:filter}),'\n            <div class="section-body">\n                <ul class="perks-list">\n                    ');for(var i=0,ii=perks.length;i<ii;++i)__p.push('\n                        <li class="perk">\n                            <div class="perkImage">\n                                    <img src="',perks[i].getImageUrl(),'" />\n                            </div>\n                            <div class="perkTopHighlight">\n                                <a href="',perks[i].getPerkUrl(),'"></a>\n                            </div>\n                            ',amphetamine.view.renderUS("perks/sash",{perk:perks[i]}),'\n                            <div class="perkInfoOverlay">\n                                <table cellpadding="0" cellspacing="0">\n                                    <tr>\n                                        <td>\n                                            <h2>\n                                                <a href="',perks[i].getPerkUrl(),'">',perks[i].getHeading(),"</a>\n                                            </h2>\n                                            ",amphetamine.view.renderUS("perks/ineligibilityBlurb",{perk:perks[i],topics:topics}),'\n                                        </td>\n                                        <td>\n                                            <div class="topRight">\n                                                ',amphetamine.view.renderUS("perks/eligibility",{perk:perks[i],users:users}),"\n                                            </div>\n                                        </td>\n                                    </tr>\n                                </table>\n                            </div>\n                        </li>\n                    ");__p.push("\n                </ul>\n            </div>\n        </div>\n    ")}else __p.push('\n        <div class="section-error">\n            <p>There are no perks to display.</p>\n        </div>\n    ');__p.push("\n</div>")}return __p.join("")},amphetamine.t["topic/icon"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var displaySash=typeof showSash!="undefined"?showSash:!1,isTopPlusK=typeof topic.isTopPlusK!="undefined"?topic.isTopPlusK:!1,isTopScience=typeof topic.isTopScience!="undefined"?topic.isTopScience:!1,size=typeof size=="undefined"?"mini":size,unlinked=typeof unlinked!="undefined"&&unlinked;__p.push('\n<span class="',size,'-topic">\n    ',unlinked?'<span class="topic-pic">':'<a class="topic-link topic-pic" href="/#/topic/'+topic.slug+'">','\n        <img class="topic-img" src="',topic.url,'" alt="',topic.display,'" />\n    ',unlinked?"</span>":"</a>","\n    "),displaySash&&(isTopScience&&isTopPlusK?__p.push('\n                <img class="sash" src="',amphetamine.config&&amphetamine.config.staticServer,'images/icons/sash-gold-blue-small.png"/>\n        '):isTopScience?__p.push('\n                <img class="sash" src="',amphetamine.config&&amphetamine.config.staticServer,'images/icons/sash-gold-small.png"/>\n        '):isTopPlusK&&__p.push('\n                <img class="sash" src="',amphetamine.config&&amphetamine.config.staticServer,'images/icons/sash-blue-small.png"/>\n    ')),__p.push("\n</span>")}return __p.join("")},amphetamine.t["topic/link"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<a class="topic-link" href="/#/topic/',topic.slug,'">',topic.display,"</a>");return __p.join("")},amphetamine.t["topic/linkedList"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push(""),__p.push('\n<ul class="topic-linked-list clearfix">\n    ');for(var i=0;i<topics.length;i++)__p.push('\n        <li class="topic'),i==topics.length-1&&print(" last"),__p.push('">\n            <a class="topic-link" href="/#/topic/',topicMap[topics[i]].slug,'">',topicMap[topics[i]].display,"</a>\n        </li>\n    ");__p.push("\n</ul>")}return __p.join("")},amphetamine.t["topic/commaSeparatedLinkedList"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");for(var i=0;i<topics.length;i++)__p.push('\n    <a class="topic-link" href="/#/topic/',topics[i].topic_.slug,'">',topics[i].topic_.display,"</a>"),i!=topics.length-1&&__p.push(", "),__p.push("\n");__p.push("")}return __p.join("")},amphetamine.t["topic/list"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(typeof topics!="undefined"&&topics&&topics.length){var displayPlusK=typeof displayPlusK!="undefined"&&displayPlusK,displayRemove=typeof displayRemove!="undefined"&&displayRemove,topicLinkPrefix=typeof isPublic!="undefined"&&isPublic?"/topic/":"/#/topic/";__p.push('\n    <ul class="topic-list clearfix">\n        ');for(var i=0;i<topics.length;i++)__p.push('\n            <li class="topic tid-',topics[i].id,""),i==0&&print(" first"),i==topics.length-1&&print(" last"),displayPlusK&&print(" can-plusk"),displayRemove&&print(" can-remove"),__p.push('">\n                '),displayPlusK?(__p.push('\n                    <a href="/topics/plusk/',topics[i].id,'" class="plus-k-icon mini-plus-k'),amphetamine.user.canPlusK(topics[i].id)||print(" inactive"),__p.push('"></a>\n                    <a class="topic-link" href="',topicLinkPrefix+topics[i].topic_.slug,'">',topics[i].topic_.display,"</a>\n                ")):__p.push('\n                    <a class="topic-link" href="',topicLinkPrefix+topics[i].topic_.slug,'">',topics[i].topic_.display,"</a>\n                "),displayRemove&&__p.push('\n                       <span class="remove" alt="Remove"></span>\n                '),__p.push("\n            </li>\n        ");__p.push("\n    </ul>\n")}__p.push("")}return __p.join("")},amphetamine.t["topic/listify"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");var display,i,linkify=typeof linkify!="undefined"?linkify:!1,max=Math.min(topics.length,typeof maxDisplay!="undefined"&&maxDisplay?maxDisplay:topics.length),prettyPrint=[],separator=typeof separator!="undefined"?" "+separator+" ":",";for(i=0;i<max;i++)display=linkify?this["topic/link"]({topic:topics[i].topic_}):topics[i].topic_.display,separator==","?i&&i==max-1?prettyPrint[i]=" and "+display:prettyPrint[i]=" "+display:prettyPrint[i]=display;prettyPrint=prettyPrint.join(separator),print(typeof prettyPrint.trim=="function"?prettyPrint.trim():typeof jQuery!="undefined"?jQuery.trim(prettyPrint):prettyPrint),__p.push("")}return __p.join("")},amphetamine.t["topic/influentialAbout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),typeof influentialAbout!="undefined"&&influentialAbout&&influentialAbout.length&&__p.push('\n    <div class="personal-topics section clearfix">\n        <h4 class="header-text">Your Topics:</h4>\n        ',this["topic/linkedList"]({topicMap:topics,topics:influentialAbout}),'\n    </div>\n    <a class="topics-link button-primary" href="/#/profile/topics">View Your Topics</a>\n'),__p.push("");return __p.join("")},amphetamine.t["topic/indexList"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push(""),__p.push('\n<ul class="topic-badge-list featured-topics '),typeof col!="undefined"&&col&&print(col),__p.push(' clearfix">\n    ');for(var i=0;i<topics.length;i++)__p.push('\n        <li class="topic-badge-container list-row'),i==0&&print(" first"),__p.push('">\n            <h3 class="topic-badge clearfix">\n                ',this["topic/icon"]({size:"mini",topic:topicMap[topics[i].main]}),'\n                <span class="topic-name">\n                    ',this["topic/link"]({topic:topicMap[topics[i].main]}),"\n                </span>\n            </h3>\n            "),topics[i].related&&topics[i].related.length&&__p.push('\n            <div class="related-topics clearfix">\n                <span class="header-text">See also:</span>\n                ',this["topic/linkedList"]({topicMap:topicMap,topics:topics[i].related}),"\n            </div>\n            "),__p.push("\n        </li>\n    ");__p.push("\n</ul>")}return __p.join("")},amphetamine.t["topic/indexLists"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push(""),__p.push('\n<div class="topic-index-lists clearfix">\n    ');if(index.general&&index.general.length){var mid=Math.round(index.general.length/2);__p.push("\n        ",this["topic/indexList"]({col:"first",topicMap:topics,topics:index.general.slice(0,mid)}),"\n        "),mid<index.general.length&&__p.push("\n            ",this["topic/indexList"]({col:"last",topicMap:topics,topics:index.general.slice(mid)}),"\n        "),__p.push("\n    ")}__p.push("\n</div>")}return __p.join("")},amphetamine.t["topic/influenceList"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");if(typeof users!="undefined"&&users&&users.length){__p.push('\n    <ul class="user-list topic-influencer-list">\n        ');for(var i=0;i<users.length;i++)__p.push('\n            <li class="influencer list-row clearfix">\n                ',this["user/rowProfile"]({position:i+1,tab:tab,displayPlusK:!0,topic_:topic_,user:users[i],topicTopThree:!1}),'\n                <div class="row-aside">\n                    <div class="vouchers">\n                        '),users[i].vouchers&&users[i].vouchers.recent&&users[i].vouchers.recent.length?__p.push('\n                            <h4 class="header-text">90-day +K</h4>\n                            ',this["user/voucherList"]({maxDisplay:5,topic_:topic_,users:users[i].vouchers.recent}),'\n                            <div class="influence-insight">\n                                <span class="delta',users[i].delta==0?" zero":users[i].delta>0?" positive":" negative",'"></span>\n                                <span class="plusk-count">',this["view/commas"]({input:users[i].vouches}),"</span>\n                                ",this["view/plusk-currency"]({isSilver:!0}),"\n                            </div>\n                        "):__p.push('\n                            <div class="no-vouchers">\n                                Give +K if <a class="profile-link" href="/user/',users[i].nick,'">',users[i].name,'</a>\n                                has influenced you recently about <a class="topic-link" href="/#/topic/',topic_.slug,'/">',topic_.display,"</a>.\n                            </div>\n                        "),__p.push("\n                    </div>\n                </div>\n            </li>\n        ");__p.push("\n    </ul>\n")}__p.push("")}return __p.join("")},amphetamine.t["topic/rowContent"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div class="row-details clearfix">\n    ',this["user/avatar"]({user:user}),'\n    <div class="user-info row-info">\n        <p class="text">',text,'</p>\n        <div class="attribution">\n            ',this["user/profileLink"]({user:user})," &bull;\n            ");var reshareText=this["view/escapeHtml"]({string:$("<div>").html(text).text()});reshareText.length>100&&(reshareText=reshareText.slice(0,100)+"..."),__p.push("\n            ",this["viral/topicContent"]({message:reshareText,topic_:topic_}),"\n        </div>\n    </div>\n</div>")}return __p.join("")},amphetamine.t["topic/contentList"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<ul class="content-list">\n    ');for(var i=0;i<content.length;i++)__p.push('\n        <li class="content list-row clearfix" >\n            ',this["topic/rowContent"]({topic_:topic_,text:content[i].text,user:content[i].author}),'\n            <div class="row-aside">\n                <div class="actors">\n                    '),content[i].actors&&content[i].actors.length>0?__p.push('\n                        <h4 class="header-text">Influenced</h4>\n                        ',this["user/subList"]({size:"micro",maxDisplay:5,users:content[i].actors}),"\n                    "):__p.push('\n                        <div class="no-actors">\n                        </div>\n                    '),__p.push("\n                </div>\n            </div>\n        </li>\n    ");__p.push("\n</ul>")}return __p.join("")},amphetamine.t["topic/content"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div class="topic-tab">\n    ');var hasTopContent=typeof topContent!="undefined"&&topContent&&topContent.content&&topContent.content.length>0;__p.push('\n    <div class="topic-top-content list-section">\n        <div class="section-header">\n            <div class="viral-header clearfix">\n                <h2 class="header-text">Check out the latest buzz</h2>\n                '),hasTopContent&&__p.push("\n                    ",this["viral/topicBestContent"]({topic_:topic_}),"\n                "),__p.push('\n            </div>\n            <p class="header-caption">Here\'s some of the most influential content about ',topic_.display," in the past 90 days.</p>\n        </div>\n        "),hasTopContent?__p.push('\n            <div class="section-body">\n                ',this["topic/contentList"]({topic_:topic_,content:topContent.content}),"\n            </div>\n        "):__p.push('\n            <div class="section-error">\n                <p>Sorry, we don\'t have any content for this topic right now.</p>\n                <img class="puppy" src="',amphetamine.config&&amphetamine.config.staticServer,'images/puppy.jpg" alt="Puppy"/>\n            </div>\n        '),__p.push("\n        </div>\n    </div>\n</div>")}return __p.join("")},amphetamine.t["topic/perks"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="topic-perks">\n    <div class="section-header">\n        <h2 class="header-text">Coming Soon!</h2>\n    </div>    \n</div>');return __p.join("")},amphetamine.t["topic/stream"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="section-header">\n    <h2 class="header-text">Coming Soon!</h2>\n</div>');return __p.join("")},amphetamine.t["topic/activity"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="topic-activity-stream"><div class="overlay-loading"><img src="',amphetamine.config.staticServer,'images/loading.gif" class="page-loading-icon"></div></div>');return __p.join("")},amphetamine.t["topic/influencers"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div class="topic-tab">\n    ');var hasTopInfluencers=typeof topInfluencers!="undefined"&&topInfluencers&&topInfluencers.users&&topInfluencers.users.length;__p.push('\n    <div class="topic-influencers list-section">\n        <div class="section-header">\n            <div class="viral-header clearfix">\n                <h2 class="header-text">Top Influencers</h2>\n                ');if(hasTopInfluencers){__p.push("\n                    ");var names=this["user/listify"]({users:topInfluencers.users,maxDisplay:4});__p.push("\n                    ",this["viral/topicTopInfluencers"]({names:names,topic_:topic_}),"\n                ")}__p.push('\n            </div>\n            <p class="header-caption">These are the top influencers for ',topic_.display,' in the past 90 days.</p>\n        </div>\n        <div class="section-body">\n            '),hasTopInfluencers?__p.push("\n                ",this["topic/influenceList"]({tab:"influencers",topic_:topic_,users:topInfluencers.users}),"\n            "):__p.push('\n            <div class="section-error">\n                <p>We\'re still working on things here. Check back soon!</p>\n            </div>\n            '),__p.push("\n        </div>\n    </div>\n</div>")}return __p.join("")},amphetamine.t["topic/influencers_plusk"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div class="topic-tab">\n    ');var hasTopPlusK=typeof topPlusK!="undefined"&&topPlusK&&topPlusK.users&&topPlusK.users.length;__p.push('\n    <div class="topic-plusK list-section">\n        <div class="section-header">\n            <div class="viral-header clearfix">\n                <h2 class="header-text">Top +K Recipients</h2>\n                ');if(hasTopPlusK){__p.push("\n                    ");var names=this["user/listify"]({users:topPlusK.users,maxDisplay:4});__p.push("\n                    ",this["viral/topicTopPlusK"]({names:names,topic_:topic_}),"\n                ")}__p.push('\n            </div>\n            <p class="header-caption">These are the top +K recipients for ',topic_.display,' in the past 90 days.</p>\n        </div>\n        <div class="section-body">\n            '),hasTopPlusK?__p.push("\n                ",this["topic/influenceList"]({tab:"plusk",topic_:topic_,users:topPlusK.users}),"\n            "):__p.push('\n            <div class="section-error">\n                <p>No one has received +K about this topic recently.</p>\n            </div>\n            '),__p.push("\n        </div>\n    </div>\n</div>")}return __p.join("")},amphetamine.t["topic/summary"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div id="topic-overview" class="clearfix">\n    <div id="topic-photo">\n        '),summary.image?__p.push('\n            <img class="topic-image" src="/picture/t/',summary.id,'" alt="',summary.topic_.display,'" />\n        '):__p.push('\n            <img class="topic-image" src="/picture/topic/',summary.topic_.topic,'" alt="',summary.topic_.display,'" />\n        '),__p.push('\n    </div>\n    <div id="topic-detail">\n        <div id="topic-content" class="section">\n            '),typeof isIndex!="undefined"&&isIndex?__p.push('\n                <h2 class="header-text">',this["topic/link"]({topic:summary.topic_}),"</h2>\n            "):(__p.push('\n                <div class="section-header clearfix">\n                    <h1 class="header-text">',summary.topic_.display,"</h1>\n                    "
),options.isPublic||__p.push('\n                        <a class="add-topic-button button-alt">Add Topic</a>\n                    '),__p.push("\n                </div>\n            ")),__p.push("\n            ");if(summary.topContent&&summary.topContent.content&&summary.topContent.content.length>0){__p.push("\n                ");var topContent=summary.topContent.content[0];__p.push('\n                <div class="section-body">\n                    <blockquote class="topic-content-message clear-fix">\n                    <span>\n                        ',topContent.text,'\n                        <img class="close-quote" src="../images/icons/close-quote.png"/>\n                    </span>\n                    </blockquote>\n                    <div class="topic-content-details">\n                        '),topContent.author&&(__p.push("\n                            ",this["user/avatar"]({size:"micro",user:topContent.author}),"\n                            ",this["user/profileLink"]({user:topContent.author}),"\n                        "),options.isPublic||print("&bull;")),__p.push("\n                        ",this["viral/topicTopContent"]({isPublic:options.isPublic,topic_:summary.topic_}),"\n                    </div>\n                </div>\n            ")}__p.push('\n        </div>\n    </div>\n    <div id="topic-influence-summary">\n        <div class="topic-influencers list-section">\n            <div class="section-header">\n                <h2 class="header-text">\n                    Top Influencers\n                    <span class="help">\n                        <img class="question-icon" src="/images/question-mark-new.png" />\n                        <span class="hovercard">\n                            Gold badges are for top influencers who have been identified by Klout based on their content.\n                        </span>\n                    </span>\n                </h2>\n            </div>\n            <div class="section-body">\n                ');if(summary.topInfluencers&&summary.topInfluencers.users&&summary.topInfluencers.users.length){__p.push("\n                    ");if(options.isPublic)__p.push("\n                        ",this["user/subList"]({options:options,size:"mini",users:summary.topInfluencers.users.slice(0,3)}),"\n                    ");else{__p.push("\n                        ",this["user/subList"]({size:"mini",users:summary.topInfluencers.users}),'\n                        <span class="buffer">\n                            ');var names=[],users=summary.topInfluencers.users.slice(0,3);_.each(users,function(a,b){names.push("@"+a.nick)});var andName=names.pop();names.length==0?names=andName:names=names.join(", ")+" and "+andName,__p.push("\n                            ",this["viral/topicSummaryInfluencers"]({names:names,topic_:summary.topic_}),"\n                        </span>\n                    ")}__p.push("\n                ")}else __p.push('\n                    <p class="nodata">Sorry, we don\'t have this list right now. Please check back again soon.</p>\n                ');__p.push('\n            </div>\n        </div>\n        <div class="topic-plusKers list-section">\n            <div class="section-header">\n                <h2 class="header-text">\n                    Top +K Recipients\n                    <span class="help">\n                        <img class="question-icon" src="/images/question-mark-new.png" />\n                        <span class="hovercard">\n                            Blue badges are for +K recipients who have received the top number of +Ks over 90 days.\n                        </span>\n                    </span>\n                </h2>\n            </div>\n            <div class="section-body">\n                ');if(summary.topPlusK&&summary.topPlusK.users&&summary.topPlusK.users.length){__p.push("\n                    ");if(options.isPublic)__p.push("\n                        ",this["user/subList"]({options:options,size:"mini",users:summary.topPlusK.users.slice(0,3)}),"\n                    ");else{__p.push("                        \n                        ",this["user/subList"]({size:"mini",users:summary.topPlusK.users}),"\n                        ");var names=[],users=summary.topPlusK.users;_.each(users,function(a,b){names.push("@"+a.nick)});var andName=names.pop();names.length==0?names=andName:names=names.join(", ")+" and "+andName,__p.push('\n                        <span class="buffer">\n                            ',this["viral/topicSummaryPlusK"]({names:names,topic_:summary.topic_}),"\n                        </span>\n                    ")}__p.push("\n                ")}else __p.push('\n                    <p class="nodata">No one has received +K about this topic recently.</p>\n                ');__p.push("\n            </div>\n        </div>\n    </div>\n    "),typeof index!="undefined"&&index&&index.featured.related&&index.featured.related.length&&__p.push('\n        <div class="related-topics clearfix">\n            <span class="header-text">See also:</span>\n            ',this["topic/linkedList"]({topicMap:topics,topics:index.featured.related}),"\n        </div>\n    "),__p.push("\n</div>\n"),typeof featuredPerk!="undefined"&&__p.push('\n    <div id="relevant-perks">\n    </div>\n'),__p.push("")}return __p.join("")},amphetamine.t["topic/navLink"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<li><a href="',href,'" class="',classes,'">',display,'<div class="triangle" ></div></a></li>');return __p.join("")},amphetamine.t["topic/indexLayout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="topic-index">\n    <div class="content-header clearfix">\n        <h1 class="header-text">Featured Topics</h1>\n        <div class="influential-about" class="clearfix"></div>\n    </div>\n    <div class="content-body clearfix">\n        <div class="content-main one-col">\n            <div id="featured-topic" class="section-body clearfix"></div>\n            <div id="interesting-topics"></div>\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["topic/layout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<div id="topic-profile"'),typeof featuredPerk!="undefined"&&featuredPerk&&__p.push(' class="has-perk"'),__p.push('>\n    <div id="topic-header" class="content-header clearfix"></div>\n    <div class="content-body clearfix">\n        <div class="sidebar">\n            ');var tabs=[];tabs.push({href:"/#/topic/"+slug+"/influencers",domClass:"influencers-link",display:"Top Influencers"}),tabs.push({href:"/#/topic/"+slug+"/influencers_plusk",domClass:"influencers_plusk-link",display:"Top +K Recipients"}),tabs.push({href:"/#/topic/"+slug+"/content",domClass:"content-link",display:"Best Content"}),tabs.push({href:"/#/topic/"+slug+"/perks",domClass:"perks-link coming-soon",display:"Perks"}),$.inArray("publicstream",amphetamine.user.enabledFeatures)>-1?tabs.push({href:"/#/topic/"+slug+"/activity",domClass:"activity-link",display:"Activity"}):tabs.push({href:"/#/topic/"+slug+"/stream",domClass:"stream-link coming-soon",display:"Latest Activity"}),__p.push("\n            ",amphetamine.view.renderUS("view/navigation",{tabs:tabs}),'\n        </div>\n        <div class="content-main">\n            \n        </div>\n    </div>\n</div>')}return __p.join("")},amphetamine.t["nux/nux"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="nux-view">\n    <div class="contents">\n        <div id="nux-content">\n            <div class="greeting-score-photo">\n                <h2>Hello, ',+authUser.isBrand?authUser.brand:authUser.firstName||authUser.nick,'!</h2>\n                <div id="score-photo">\n                    <div class="score">\n                        <div class="value"></div>\n                    </div>\n                    <img src="/picture/n/',authUser.nick,'">\n                </div>\n            </div>\n            <div class="details">\n            '),typeof step=="undefined"?__p.push('\n                <h2 class="greeting">Add your online networks to improve your Klout!</h2>\n                <div id="connected-networks">\n                    ',this["setting/identityNetworks"]({authUser:authUser,profileInfo:profileInfo,suppressUnlink:!0,greyOutIcons:!0}),'\n                    <br clear="all">\n                    <br>\n                    <h2>Additional Networks</h2>\n                    <div class="additional-networks">\n                        ',this["nux/additionalNetwork"]({profileInfo:profileInfo,name:"LinkedIn",network:"li",href:"/oauth_li",connected:!!authUser.liUid}),"\n                        ",this["nux/additionalNetwork"]({profileInfo:profileInfo,name:"Foursquare",network:"fs",href:"/oauth_fs",connected:!!authUser.fsUid}),"\n                        ",this["nux/additionalNetwork"]({profileInfo:profileInfo,name:"YouTube",network:"yt",href:"/oauth/yt",connected:!!authUser.ytUid}),"\n                        ",this["nux/additionalNetwork"]({profileInfo:profileInfo,name:"Instagram",network:"ig",href:"/oauth/ig",connected:!!authUser.igUid}),"\n                        ",this["nux/additionalNetwork"]({profileInfo:profileInfo,name:"Tumblr",network:"tu",href:"/oauth/tu",connected:!!authUser.tuUid}),"\n                        ",this["nux/additionalNetwork"]({profileInfo:profileInfo,name:"Blogger",network:"bl",href:"/oauth/bl",connected:!!authUser.blUid}),"\n                        ",this["nux/additionalNetwork"]({profileInfo:profileInfo,name:"Wordpress.com",network:"wp",href:"/oauth/wp",connected:!!authUser.wpUid}),"\n                        ",this["nux/additionalNetwork"]({profileInfo:profileInfo,name:"Last.fm",network:"la",href:"/webauth/la",connected:!!authUser.laUid}),"\n                        ",this["nux/additionalNetwork"]({profileInfo:profileInfo,name:"Flickr",network:"fl",href:"/oauth/fl",connected:!!authUser.flUid}),"\n                    </div>\n                </div>\n            "):step==2&&__p.push('\n                <div id="friends-nux">\n                    <h2>Tell your friends about Klout and compare your scores</h2>\n                    <div id="nux-friends-intro">',this["nux/friendsIntro"](arguments[0]),'</div>\n                    <div id="nux-friends-tabs">',this["nux/friendsTabs"](arguments[0]),'</div>\n                    <div id="friends"><img src="',amphetamine.config.staticServer,'images/loading.gif" class="loading"></div>\n                </div>\n            '),__p.push('\n                <br clear="all">\n                <div class="buttons">\n                    <a href="/nux/',typeof step!="undefined"&&step==2?0:2,'?b=0" class="button-primary">Continue</a><br><br>\n                    <div class="skip">\n                        <a href="/nux/',typeof step!="undefined"&&step==2?0:2,'?b=1">Skip&hellip;</a>\n                        You can always add this later!\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <br clear="all">\n</div>');return __p.join("")},amphetamine.t["nux/friendsIntro"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),typeof friendNetwork!="undefined"&&__p.push("\n    Here are some of your ",friendNetwork=="tw"?"Twitter":"Facebook"," friends who are not yet on Klout\n"),__p.push("");return __p.join("")},amphetamine.t["nux/friendsTabs"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),typeof friends!="undefined"&&friends&&typeof friendNetworks!="undefined"&&friendNetworks>1&&__p.push('\n    <ul class="tabs">\n        <li class="nux-tab fb',friendNetwork=="fb"?" active":"",'"><a>Facebook</a></li>\n        <li class="nux-tab tw',friendNetwork=="tw"?" active":"",'"><a>Twitter</a></li>\n    </ul>\n'),__p.push("");return __p.join("")},amphetamine.t["nux/friendError"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),typeof friends!="undefined"&&friends===0||!authUser.twUid||!authUser.fbUid?(__p.push('\n    <div id="friendless" class="viral-unit">\n        '),authUser.twUid&&__p.push('\n            <a class="viral tw"></a>\n        '),__p.push("\n        "),authUser.fbUid&&__p.push('\n            <a class="viral fb"></a>\n        '),__p.push('\n        <input type="hidden" name="viralMessage" value="I just signed up for Klout! Check out my profile here:">\n        <input type="hidden" name="viralRoute" value="/',authUser.nick,'">\n    </div>\n')):__p.push('\n    <div class="error">Sorry, we couldn\'t find any of your ',typeof friendNetwork!="undefined"&&friendNetwork=="tw"?"Twitter":"Facebook"," friends.</div>\n"),__p.push("");return __p.join("")},amphetamine.t["nux/additionalNetwork"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),connected?__p.push('\n    <span title="',name,'" class="service connected-network ',network,'"></span>\n'):__p.push('\n    <a href="',href,'" title="',name,'" class="service unconnected-network ',network,'"></a>\n'),__p.push("");return __p.join("")},amphetamine.t["wall/wall"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("",this["wall/list"]({friends:obj.friends,influencers:obj.influencerOfs}),"\n",this["wall/footer"]({nick:obj.nick,slug:obj.slug}),"");return __p.join("")},amphetamine.t["wall/spinner"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="kloutWallSpinner"></div>');return __p.join("")},amphetamine.t["wall/listItem"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("");for(var i=0;i<friends.length;i++){__p.push("\n    ");var f=friends[i];f.name.length>22&&(f.name=f.name.substring(0,22)+"â€¦");if(f.topics!=null&&f.topics.length)for(var j=0;j<f.topics.length;j++)f.topics[j].topic_.display.length>15&&(f.topics[j].topic_.display=f.topics[j].topic_.display.substring(0,15)+"â€¦");__p.push("\n    <li>\n        <h2>",f.name,'</h2>\n        <span class="side1">\n            <span class="kflag '),f.kScore==100&&print("oneHundred"),__p.push('">',f.kScore,'</span>\n            <span class="kimage">\n                <img src="/picture/n/',f.nick,'" />\n            </span>\n            <span class="shine"></span>\n        </span>\n        <span class="side2">\n            <span class="influencersContainer">\n                <h3>Influencers</h3>\n                <span class="influencerList">\n                    '),influencers[f.nick]!=null&&influencers[f.nick].length&&__p.push("\n                        ",this["user/subList"]({users:influencers[f.nick],maxDisplay:6}),"\n                    "),__p.push('\n                </span>\n            </span>\n            <span class="topicsContainer">\n                <h3>Topics</h3>\n                <span class="topicsList">\n                    '),f.topics!=null&&f.topics.length&&__p.push("\n                        ",this["topic/list"]({displayRemove:!1,isPublic:!1,topics:f.topics}),"\n                    "),__p.push("\n                </span>\n            </span>\n        </span>\n    </li>    \n")}__p.push('\n<br class="clearer" />')}return __p.join("")},amphetamine.t["wall/list"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="kloutWallListContainer">\n    '),friends!="undefined"&&friends.length&&__p.push('\n        <ul id="kloutWallList">\n            ',this["wall/listItem"]({friends:friends,influencers:influencers}),"\n        </ul>\n    "),__p.push("\n</div>");return __p.join("")},amphetamine.t["wall/footer"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="kloutWallFooter">\n    <a href="http://www.klout.com">\n        <img id="logo" src="/images/klout-wall/img-logo.png" />\n    </a>\n    <a id="listLink" href="http://www.klout.com/',nick,"/list/",slug,'">klout.com/',nick,"/list/",slug,"</a>\n</div>");return __p.join("")},amphetamine.t["perk/layout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("",amphetamine.view.renderUS("perks/alertBanner",{alertMessage:alertMessage}),'\n<div id="detail" class="klout-perks',alertMessage.enabled?" makeRoomForAlertBanner":"",'">\n    <div id="klout-perks" class="campaign ',status,'">\n        <div class="splash">\n            <div class="header">\n                <h1>',name,'<span><a href="/#/perks/featured">Back to Perks Index</a></span></h1>\n            </div>\n            <div class="splash-content">\n                <div class="design-builder-uploadable-image youtube">\n                    '),content.perkVideo!=null?__p.push('\n                        <div id="perk-video">\n                            <iframe width="100%" height="100%" src="http://www.youtube.com/embed/',content.perkVideo.youtube,'?wmode=opaque&controls=0" frameborder="0" allowfullscreen></iframe>\n                        </div>\n                    '):__p.push('\n                        <img src="',content.perksLandingPageMainImage.replace("url(","").replace(")",""),'" />\n                    '),__p.push("\n                </div>            \n                \n                "),(status=="offer"||status=="completed")&&__p.push('\n                    <div id="perksLandingCtaButton-container">\n                         <a id="perksLandingCtaButton" class="button-primary">',status=="offer"?"Claim Your Perk!":status=="completed"?"I'm in!":"","</a>\n                    </div>\n                "),__p.push('\n                <div id="perks-landing-virals-container" class="viral-unit perks-virals">\n                    '),status=="full"?__p.push('\n                        <div id="perk-ineligible-text">Sorry, this perk is now full.</div>\n                    '):status=="ineligible"?__p.push('\n                        <div id="perk-ineligible-text">Sorry, this perk is open to other influencers.</div>\n                    '):status=="expired"&&__p.push('\n                        <div id="perk-ineligible-text">Sorry, this perk is closed.</div>                    \n                    '),__p.push('\n\n                    <div id="perk-fb-like-container">\n                        <div id="perk-fb-like"></div>\n                        '),status=="notopenyeteligible"&&__p.push("\n                            <p>Like this perk to be one of the first notified when it launches.</p>\n                        "),__p.push("\n                    </div>\n\n                    "),content.score!=null&&content.score.length&&__p.push('\n                        <div class="criteria-scores">\n                            <div class="icon"></div>\n                            <span class=\'criteria\'>\n                                ',content.score,"\n                            </span>\n                        </div>\n                    "),__p.push("\n                    \n                    ");if(content.topics!=null){__p.push("\n                        ");var haveTopics=!1;for(var i in content.topics)content.topics.hasOwnProperty(i)&&(haveTopics=!0);__p.push("\n                        ");if(haveTopics){__p.push('\n                            <div class="criteria-topics">\n                                <span class="label">Topics: </span>\n                                <span class="criteria">\n                                    ');var linkedTopics=content.topics,validTopics=[];for(topic in linkedTopics)validTopics.push(this["topic/link"]({topic:{slug:linkedTopics[topic].slug,display:linkedTopics[topic].display}}));__p.push("\n                                    ",validTopics.join(", "),'                            \n                                </span>\n                                <br class="clearer" />\n                                <p><a href="/#/',amphetamine.user.nick,'/topics">Medium strength topic influence required</a></p>\n                            </div>\n                        ')}__p.push("\n                    ")}__p.push("\n                    \n                    "),content.locations!=null&&content.locations.length&&__p.push('\n                        <div class="criteria-locations">\n                            <span class="label">Locations: </span>\n                            <span class="criteria">',content.locations,"</span>\n                        </div>                    \n                    "),__p.push('\n\n                    <br class="clearer" />\n                    \n                    <a class="viral tw">\n                        <input type="hidden" name="twMessage" value="',content.twMessage,'" />\n                        <input type="hidden" name="twLink" value="',content.twLink,'" />\n                    </a>\n                    <a class="viral fb">\n                        <input type="hidden" name="fbTitle" value="',content.fbTitle,'" />\n                        <input type="hidden" name="fbMessage" value="',content.fbMessage,'" />\n                        <input type="hidden" name="fbImage" value="',content.fbImage,'" />\n                        <input type="hidden" name="fbLink" value="',content.fbLink,'" />\n                    </a>\n                    <br class="clearer">\n                </div>\n            </div>\n        </div>\n        <div id="perkContentBody">\n            <div id="navigation">\n                <ul>\n                    <br>\n                    <li><a class="overview" class="selected">Overview<div class="triangle"></div></a></li>\n                    <li><a class="details">Details<div class="triangle"></div></a></li>\n                </ul>\n            </div>\n            <div id="content">\n                ',amphetamine.view.renderUS("perk/overview",{content:content}),"\n                ",amphetamine.view.renderUS("perk/details",{}),'            \n            </div>\n            <br class="clearer" />\n        </div>        \n    </div>\n</div>')}return __p.join("")},amphetamine.t["perk/overview"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="tab overview">\n    <div class="section">\n        <div class="section-header">\n            <h2 class="header-text forcedFormatting">',content.perksLandingPageHeading,'</h2>\n        </div>\n        <div class="section-body forcedFormatting">',content.perksLandingPageText,'</div>\n    </div>\n    <div class="section">\n        <div class="section-header">\n            <h2 class="header-text">Reviews</h2>\n        </div>\n        <div id="perkUGC" class="section-body">\n            <img src="',amphetamine.config.staticServer,'images/loading-small.gif" width="86" height="48" class="loading" />\n        </div>\n    </div>\n</div>');return __p.join("")},amphetamine.t["perk/details"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="tab details">\n    <div id="code-of-ethics" class="list-section">\n        <div class="section-header">\n            <h3 class="header-text">Influencer code of ethics</h3>\n        </div>\n        <div class="section-body">\n            <ul class="ethics-list">\n                <li class="ethic">Klout will never sell or give away your contact info. <a href="http://www.klout.com/corp/faq#doeskloutsharemyprivatedatawithadvertisers">Learn More</a></li>\n                <li class="ethic">Participating (or not participating) will not change your Klout Score.</li>\n                <li class="ethic">\n                    You are receiving the perk because you are influential and have authority on topics related to the perk.\n                    You are welcome to tell the world you love the perk, you dislike the perk or say nothing at all.\n                </li>\n                <li class="ethic">\n                    If you decide to talk about the perk, we will ask you to disclose that you received a sample\n                    (<a href="http://klout.com/corp/perks">http://klout.com/corp/perks</a>).\n                </li>\n            </ul>\n        </div>\n    </div>\n    <div id="disclosure" class="list-section">\n        <div class="section-header">\n            <h3 class="header-text">Influencer disclosure</h3>\n        </div>\n        <div class="section-body">\n            <p>\n                I was given a free product or sample because I\'m a Klout influencer. I was under no obligation to receive\n                the sample or talk about this company. I get no additional benefits for talking about the product or company.\n            </p>\n        </div>\n    </div>\n</div>');return __p.join("")}}.call(this),function(a,b){var c=function(a,b){b!="abort"&&this.errorHandler.apply(this,arguments)},d={},e=0,f=function(a){for(var b in d)d[b].xhr==a&&delete d[b]};a.ajaxPrefilter(function(a,b,g){a.error&&(a.errorHandler=a.error,a.error=c),a.routeChange&&(d[++e]={xhr:g,routeChange:a.routeChange},a.complete?typeof a.complete=="function"?a.complete=[f,a.complete]:a.complete.unshift.apply(a.complete,f):a.complete=f)}),a(b).bind("routeChange",function(a,b){var b=b.replace("route:",""),c=Array.prototype.splice.call(arguments,2,arguments.length-2);for(var e in d)d[e].routeChange&&d[e].routeChange(d[e].xhr,b,c)}),a.ajaxSetup({data:{t:b.config.token}});var g=b.user;!location.hash&&location.pathname.indexOf("/home")&&!b.config.isPublic&&(g&&g.ksUID?b.config.mergeInfo?location.hash="/nux":location.href=(a.inArray(g.nick,b.config.colliders)<0?"/#/":"/#/user/")+g.nick:location.href="/home"),b.config.isPublic?(b.config.disabledAccountMessage&&b.alert(b.config.disabledAccountMessage),b.config.oauthError&&b.alert(b.config.oauthError)):(b.view.init(),new b.controller.AmphetamineController(b.config),Backbone.history.start(),Backbone.history.iframe&&(a(Backbone.history.iframe.frameElement).remove(),Backbone.history.iframe=a('<iframe src="javascript:void 0" tabindex="-1"></iframe>').appendTo("body").hide().eq(0).contentWindow));var h=b.config.fbAppId;typeof FB!="undefined"&&h&&FB.init({appId:h,status:!0,cookie:!0,xfbml:!0})}(jQuery,amphetamine);