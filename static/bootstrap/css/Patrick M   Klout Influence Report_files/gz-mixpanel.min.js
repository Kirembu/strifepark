var MixpanelLib=function(q,r){var s={};s.config={cross_subdomain_cookie:!0,cookie_name:"mp_super_properties",test:!1,store_google:!1,debug:!1},s.super_properties={all:{},events:{},funnels:{}},s.funnels={},s.send_request=function(a,b,c){a.indexOf("?")>-1?a+="&":a+="?",b&&(a+=s.http_build_query(b)),s.config.test&&(a+="&test=1"),a+="&_="+(new Date).getTime().toString();var d=document.createElement("script");d.setAttribute("src",a),d.setAttribute("type","text/javascript");var e=document.getElementsByTagName("head")[0]||document.documentElement;d.onreadystatechange=function(){(this.readyState=="loaded"||this.readyState=="complete")&&c()},d.onload=function(){c()},e.insertBefore(d,e.firstChild)},s.track_funnel=function(a,b,c,d,e){d||(d={}),d.funnel=a,d.step=parseInt(b,10),d.goal=c;if(d.step==1&&document.referrer.search("http://(.*)google.com")===0){var f=s.get_query_param(document.referrer,"q");f.length&&s.register({mp_keyword:f},"funnels")}s.track("mp_funnel",d,e,"funnels")},s.get_query_param=function(a,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+b+"=([^&#]*)",d=new RegExp(c),e=d.exec(a);return e===null||e&&typeof e[1]!="string"&&e[1].length?"":unescape(e[1]).replace(/\+/g," ")},s.track=function(a,b,c,d){d||(d="events"),b||(b={}),b.token||(b.token=s.token),c&&(s.callback=c),c=typeof c=="function"?c:function(){},b.time=s.get_unixtime(),s.save_campaign_params();var e;if(d!="all")for(e in s.super_properties[d])b[e]||(b[e]=s.super_properties[d][e]);if(s.super_properties.all)for(e in s.super_properties.all)b[e]||(b[e]=s.super_properties.all[e]);var f={event:a,properties:b},g=s.base64_encode(s.json_encode(f));s.config.debug&&window.console&&(console.log("-------------- REQUEST --------------"),console.log(f)),s.send_request(s.api_host+"/track/",{data:g,ip:1},c),s.track_predefined_funnels(a,b)},s.identify=function(a){s.register_once({distinct_id:a},"all",null,30)},s.register_once=function(a,b,c,d){if(!b||!s.super_properties[b])b="all";c||(c="None"),d||(d=7);if(a)for(var e in a)a.hasOwnProperty(e)&&(!s.super_properties[b][e]||s.super_properties[b][e]==c)&&(s.super_properties[b][e]=a[e]);s.config.cross_subdomain_cookie&&s.clear_old_cookie(),s.set_cookie(s.config.cookie_name,s.json_encode(s.super_properties),d,s.config.cross_subdomain_cookie)},s.register=function(a,b,c){if(!b||!s.super_properties[b])b="all";c||(c=7);if(a)for(var d in a)a.hasOwnProperty(d)&&(s.super_properties[b][d]=a[d]);s.config.cross_subdomain_cookie&&s.clear_old_cookie(),s.set_cookie(s.config.cookie_name,s.json_encode(s.super_properties),c,s.config.cross_subdomain_cookie)},s.http_build_query=function(a,b){var c,d,e,f=0,g=[];b||(b="&");for(c in a)c&&(d=encodeURIComponent(a[c].toString()),e=encodeURIComponent(c),g[f++]=e+"="+d);return g.join(b)},s.get_unixtime=function(){return parseInt((new Date).getTime().toString().substring(0,10),10)},s.jsonp_callback=function(a){s.callback&&(s.callback(a),s.callback=!1)},s.json_encode=function(a){var b,c=a,d,e=function(a){var b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};b.lastIndex=0;return b.test(a)?'"'+a.replace(b,function(a){var b=c[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'},f=function(a,b){var c="",d="    ",g=0,h="",i="",j=0,k=c,l=[],m=b[a];m&&typeof m=="object"&&typeof m.toJSON=="function"&&(m=m.toJSON(a));switch(typeof m){case"string":return e(m);case"number":return isFinite(m)?String(m):"null";case"boolean":case"null":return String(m);case"object":if(!m)return"null";c+=d,l=[];if(Object.prototype.toString.apply(m)==="[object Array]"){j=m.length;for(g=0;g<j;g+=1)l[g]=f(g,m)||"null";i=l.length===0?"[]":c?"[\n"+c+l.join(",\n"+c)+"\n"+k+"]":"["+l.join(",")+"]",c=k;return i}for(h in m)Object.hasOwnProperty.call(m,h)&&(i=f(h,m),i&&l.push(e(h)+(c?": ":":")+i));i=l.length===0?"{}":c?"{"+l.join(",")+""+k+"}":"{"+l.join(",")+"}",c=k;return i}};return f("",{"":c})},s.base64_encode=function(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c,d,e,f,g,h,i,j,k=0,l=0,m="",n=[];if(!a)return a;a=s.utf8_encode(a+"");do c=a.charCodeAt(k++),d=a.charCodeAt(k++),e=a.charCodeAt(k++),j=c<<16|d<<8|e,f=j>>18&63,g=j>>12&63,h=j>>6&63,i=j&63,n[l++]=b.charAt(f)+b.charAt(g)+b.charAt(h)+b.charAt(i);while(k<a.length);m=n.join("");switch(a.length%3){case 1:m=m.slice(0,-2)+"==";break;case 2:m=m.slice(0,-1)+"="}return m},s.utf8_encode=function(a){a=(a+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var b="",c,d,e=0;c=d=0,e=a.length;for(var f=0;f<e;f++){var g=a.charCodeAt(f),h=null;g<128?d++:g>127&&g<2048?h=String.fromCharCode(g>>6|192)+String.fromCharCode(g&63|128):h=String.fromCharCode(g>>12|224)+String.fromCharCode(g>>6&63|128)+String.fromCharCode(g&63|128),h!==null&&(d>c&&(b+=a.substring(c,d)),b+=h,c=d=f+1)}d>c&&(b+=a.substring(c,a.length));return b},s.set_cookie=function(a,b,c,d){var e=new Date,f=d?s.parse_domain(document.location.hostname):"",g=a+"="+escape(b);e.setDate(e.getDate()+c),g+=c===null?"":";expires="+e.toGMTString(),g+="; path=/",g+=f?";domain=."+f:"",document.cookie=g},s.get_cookie=function(a){if(document.cookie.length>0){var b=document.cookie.indexOf(a+"=");if(b!=-1){b=b+a.length+1;var c=document.cookie.indexOf(";",b);c==-1&&(c=document.cookie.length);return unescape(document.cookie.substring(b,c))}}return""},s.delete_cookie=function(a,b){s.set_cookie(a,"",-1,b)},s.parse_domain=function(a){var b=a.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i);return b?b[0]:""},s.get_super=function(){var a=eval("("+s.get_cookie(s.config.cookie_name)+")");if(a)for(var i in a)a.hasOwnProperty(i)&&(s.super_properties[i]=a[i]);return s.super_properties},s.register_funnel=function(a,b){s.funnels[a]=b},s.track_predefined_funnels=function(a,b){if(a&&s.funnels)for(var c in s.funnels)if(s.funnels.hasOwnProperty(c))for(var d=0;d<s.funnels[c].length;++d)s.funnels[c][d]&&s.funnels[c][d]==a&&s.track_funnel(c,d+1,a,b)},s.save_campaign_params=function(){s.campaign_params_saved=s.campaign_params_saved||!1;if(s.config.store_google&&!s.campaign_params_saved&&document.referrer.search("http://(.*)google.com")===0){var a=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],b="",c={};for(var d=0;d<a.length;d++)b=s.get_query_param(document.URL,a[d]),b.length&&(c[a[d]]=b);s.register_once(c),s.campaign_params_saved=!0}},s.clear_old_cookie=function(){s.delete_cookie(s.config.cookie_name,!1),s.set_cookie(s.config.cookie_name,s.json_encode(s.super_properties),7,!0)},s.set_config=function(a){for(var b in a)a.hasOwnProperty(b)&&(s.config[b]=a[b])};var t="https:"==document.location.protocol?"https://":"http://";s.token=q,s.api_host=t+"api.mixpanel.com",r?s.callback_fn=r+".jsonp_callback":s.callback_fn="mpmetrics.jsonp_callback";try{s.get_super()}catch(err){}return s};if(typeof mpq!="undefined"&&mpq&&mpq[0]&&mpq[0][0]=="init"){mpq.metrics=new MixpanelLib(mpq[0][1],"mpq.metrics"),mpq.push=function(a){if(a)if(typeof a=="function")a();else if(a.constructor==Array){var b=mpq.metrics[a[0]];typeof b=="function"&&b.apply(mpq.metrics,a.slice(1))}};for(var i=1;i<mpq.length;i++)mpq.push(mpq[i]);mpq.length=0}