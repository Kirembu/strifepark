provide(function(A){using("core/component","core/registry",function(D,C){var E=D(I),F=new B,G=1000;function I(){}function B(){this.timers=[];this.clockComponent=function(){if(!(this.currentClock&&C.findInstanceInfo(this.currentClock))){this.reset();this.currentClock=new E(document)}return this.currentClock};this.trigger=function(N,O){this.clockComponent().trigger(N,O)};this.reset=function(){this.timers=[]};this.tick=function(){this.timers.forEach(function(N){N.tick(G)})};this.setTicker=function(){this.pause();this.ticker=window.setInterval(this.tick.bind(this),G)};this.init=function(){this.clockComponent();if(!this.ticker){this.setTicker()}};this.clear=function(N){if(N){this.timers.splice(this.timers.indexOf(N),1)}};this.setTimeoutEvent=function(N,O,P){if(typeof N!="string"){return console.error("clock.setTimeoutEvent was passed a function instead of a string.")}this.init();var Q=new J(N,O,P);this.timers.push(Q);return Q};this.clearTimeout=function(N){if(N instanceof J){this.clear(N)}};this.setIntervalEvent=function(N,O,P){if(typeof N!="string"){return console.error("clock.setIntervalEvent was passed a function instead of a string.")}this.init();var Q=new K(N,O,P);this.timers.push(Q);return Q};this.clearInterval=function(N){if(N instanceof K){this.clear(N)}};this.resume=this.restart=this.setTicker;this.pause=function(O,N){clearInterval(this.ticker||0)}}function M(){this.callback=function(){F.trigger(this.eventName,this.data)};this.clear=function(){F.clear(this)};this.pause=function(){this.paused=true};this.resume=function(){this.paused=false};this.tickUnlessPaused=this.tick;this.tick=function(){if(this.paused){return }this.tickUnlessPaused.apply(this,arguments)}}function J(N,O,P){this.countdown=O;this.eventName=N;this.data=P}var H=function(){this.tick=function(N){this.countdown-=N;if(this.countdown<=0){this.callback();this.clear()}}};H.call(J.prototype);M.call(J.prototype);function K(N,O,P){this.countdown=this.interval=this.maxInterval=this.initialInterval=O;this.eventName=N;this.data=P}var L=function(){this.tick=function(N){this.countdown-=N;if(this.countdown<=0){this.callback();if(this.interval<this.maxInterval){this.interval=Math.min(this.interval*2,this.maxInterval)}this.countdown=this.interval}};this.backoff=function(N){this.maxInterval=N;if(this.interval>this.maxInterval){this.interval=N}};this.cancelBackoff=function(){this.countdown=this.interval=this.maxInterval=this.initialInterval}};L.call(K.prototype);M.call(K.prototype);A(F)})});