"use strict";provide(function(A){using("core/component","core/fn","core/jquery","app/ui/with_dialog","app/ui/with_position",function(H,E,G,C,F){var D=H(B,C,F);function B(){this.defaults={cssClass:"dm-dialog",closeButton:true,renderInline:true,modal:true,ajax:{},noajax:true,contentSelector:"#dm_dialog",headerSelector:"#dm_dialog_header",footerSelector:"#dm_dialog_footer"};var I=0;var J=0;this.onNeedsDMDialog=function(K,L){this.trigger("uiNeedsDMConversations");this.open()};this.onConversationResult=function(K,L){if(L.earliest_message_id<I){I=L.earliest_message_id}if(L.last_message_id>J){J=L.last_message_id;this.trigger("uiDMDialogHasNewMessages",{unreadCount:1})}this.$dialogContent.html(L.html)};this.after("initialize",function(){this.$dialogContent=G(this.attr.contentSelector);this.on("uiNeedsDMDialog",this.onNeedsDMDialog);this.on("dataDMConversationsResult",this.onConversationResult)})}A(D)})});